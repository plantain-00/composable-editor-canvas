/*! For license information please see main.bundle.js.LICENSE.txt */
(()=>{var e={6704:(e,t,n)=>{var r=function(e){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,n=0,r={},i={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof o?new o(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++n}),e.__id},clone:function e(t,n){var r,o;switch(n=n||{},i.util.type(t)){case"Object":if(o=i.util.objId(t),n[o])return n[o];for(var a in r={},n[o]=r,t)t.hasOwnProperty(a)&&(r[a]=e(t[a],n));return r;case"Array":return o=i.util.objId(t),n[o]?n[o]:(r=[],n[o]=r,t.forEach((function(t,i){r[i]=e(t,n)})),r);default:return t}},getLanguage:function(e){for(;e;){var n=t.exec(e.className);if(n)return n[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,n){e.className=e.className.replace(RegExp(t,"gi"),""),e.classList.add("language-"+n)},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(r){var e=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(r.stack)||[])[1];if(e){var t=document.getElementsByTagName("script");for(var n in t)if(t[n].src==e)return t[n]}return null}},isActive:function(e,t,n){for(var r="no-"+t;e;){var i=e.classList;if(i.contains(t))return!0;if(i.contains(r))return!1;e=e.parentElement}return!!n}},languages:{plain:r,plaintext:r,text:r,txt:r,extend:function(e,t){var n=i.util.clone(i.languages[e]);for(var r in t)n[r]=t[r];return n},insertBefore:function(e,t,n,r){var o=(r=r||i.languages)[e],a={};for(var s in o)if(o.hasOwnProperty(s)){if(s==t)for(var l in n)n.hasOwnProperty(l)&&(a[l]=n[l]);n.hasOwnProperty(s)||(a[s]=o[s])}var u=r[e];return r[e]=a,i.languages.DFS(i.languages,(function(t,n){n===u&&t!=e&&(this[t]=a)})),a},DFS:function e(t,n,r,o){o=o||{};var a=i.util.objId;for(var s in t)if(t.hasOwnProperty(s)){n.call(t,s,t[s],r||s);var l=t[s],u=i.util.type(l);"Object"!==u||o[a(l)]?"Array"!==u||o[a(l)]||(o[a(l)]=!0,e(l,n,s,o)):(o[a(l)]=!0,e(l,n,null,o))}}},plugins:{},highlightAll:function(e,t){i.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var r={callback:n,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",r),r.elements=Array.prototype.slice.apply(r.container.querySelectorAll(r.selector)),i.hooks.run("before-all-elements-highlight",r);for(var o,a=0;o=r.elements[a++];)i.highlightElement(o,!0===t,r.callback)},highlightElement:function(t,n,r){var o=i.util.getLanguage(t),a=i.languages[o];i.util.setLanguage(t,o);var s=t.parentElement;s&&"pre"===s.nodeName.toLowerCase()&&i.util.setLanguage(s,o);var l={element:t,language:o,grammar:a,code:t.textContent};function u(e){l.highlightedCode=e,i.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,i.hooks.run("after-highlight",l),i.hooks.run("complete",l),r&&r.call(l.element)}if(i.hooks.run("before-sanity-check",l),(s=l.element.parentElement)&&"pre"===s.nodeName.toLowerCase()&&!s.hasAttribute("tabindex")&&s.setAttribute("tabindex","0"),!l.code)return i.hooks.run("complete",l),void(r&&r.call(l.element));if(i.hooks.run("before-highlight",l),l.grammar)if(n&&e.Worker){var c=new Worker(i.filename);c.onmessage=function(e){u(e.data)},c.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else u(i.highlight(l.code,l.grammar,l.language));else u(i.util.encode(l.code))},highlight:function(e,t,n){var r={code:e,grammar:t,language:n};return i.hooks.run("before-tokenize",r),r.tokens=i.tokenize(r.code,r.grammar),i.hooks.run("after-tokenize",r),o.stringify(i.util.encode(r.tokens),r.language)},tokenize:function(e,t){var n=t.rest;if(n){for(var r in n)t[r]=n[r];delete t.rest}var c=new s;return l(c,c.head,e),function e(t,n,r,s,c,h){for(var d in r)if(r.hasOwnProperty(d)&&r[d]){var f=r[d];f=Array.isArray(f)?f:[f];for(var p=0;p<f.length;++p){if(h&&h.cause==d+","+p)return;var y=f[p],m=y.inside,g=!!y.lookbehind,v=!!y.greedy,_=y.alias;if(v&&!y.pattern.global){var b=y.pattern.toString().match(/[imsuy]*$/)[0];y.pattern=RegExp(y.pattern.source,b+"g")}for(var x=y.pattern||y,E=s.next,S=c;E!==n.tail&&!(h&&S>=h.reach);S+=E.value.length,E=E.next){var T=E.value;if(n.length>t.length)return;if(!(T instanceof o)){var w,A=1;if(v){if(!(w=a(x,S,t,g))||w.index>=t.length)break;var P=w.index,O=w.index+w[0].length,R=S;for(R+=E.value.length;R<=P;)R+=(E=E.next).value.length;if(S=R-=E.value.length,E.value instanceof o)continue;for(var C=E;C!==n.tail&&(R<O||"string"==typeof C.value);C=C.next)A++,R+=C.value.length;A--,T=t.slice(S,R),w.index-=S}else if(!(w=a(x,0,T,g)))continue;P=w.index;var I=w[0],N=T.slice(0,P),M=T.slice(P+I.length),k=S+T.length;h&&k>h.reach&&(h.reach=k);var D=E.prev;if(N&&(D=l(n,D,N),S+=N.length),u(n,D,A),E=l(n,D,new o(d,m?i.tokenize(I,m):I,_,I)),M&&l(n,E,M),1<A){var L={cause:d+","+p,reach:k};e(t,n,r,E.prev,S,L),h&&L.reach>h.reach&&(h.reach=L.reach)}}}}}}(e,c,t,c.head,0),function(e){for(var t=[],n=e.head.next;n!==e.tail;)t.push(n.value),n=n.next;return t}(c)},hooks:{all:{},add:function(e,t){var n=i.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=i.hooks.all[e];if(n&&n.length)for(var r,o=0;r=n[o++];)r(t)}},Token:o};function o(e,t,n,r){this.type=e,this.content=t,this.alias=n,this.length=0|(r||"").length}function a(e,t,n,r){e.lastIndex=t;var i=e.exec(n);if(i&&r&&i[1]){var o=i[1].length;i.index+=o,i[0]=i[0].slice(o)}return i}function s(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function l(e,t,n){var r=t.next,i={value:n,prev:t,next:r};return t.next=i,r.prev=i,e.length++,i}function u(e,t,n){for(var r=t.next,i=0;i<n&&r!==e.tail;i++)r=r.next;(t.next=r).prev=t,e.length-=i}if(e.Prism=i,o.stringify=function e(t,n){if("string"==typeof t)return t;if(Array.isArray(t)){var r="";return t.forEach((function(t){r+=e(t,n)})),r}var o={type:t.type,content:e(t.content,n),tag:"span",classes:["token",t.type],attributes:{},language:n},a=t.alias;a&&(Array.isArray(a)?Array.prototype.push.apply(o.classes,a):o.classes.push(a)),i.hooks.run("wrap",o);var s="";for(var l in o.attributes)s+=" "+l+'="'+(o.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+o.tag+' class="'+o.classes.join(" ")+'"'+s+">"+o.content+"</"+o.tag+">"},!e.document)return e.addEventListener&&(i.disableWorkerMessageHandler||e.addEventListener("message",(function(t){var n=JSON.parse(t.data),r=n.language,o=n.code,a=n.immediateClose;e.postMessage(i.highlight(o,i.languages[r],r)),a&&e.close()}),!1)),i;var c=i.util.currentScript();function h(){i.manual||i.highlightAll()}if(c&&(i.filename=c.src,c.hasAttribute("data-manual")&&(i.manual=!0)),!i.manual){var d=document.readyState;"loading"===d||"interactive"===d&&c&&c.defer?document.addEventListener("DOMContentLoaded",h):window.requestAnimationFrame?window.requestAnimationFrame(h):window.setTimeout(h,16)}return i}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});e.exports&&(e.exports=r),void 0!==n.g&&(n.g.Prism=r),r.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},r.languages.markup.tag.inside["attr-value"].inside.entity=r.languages.markup.entity,r.languages.markup.doctype.inside["internal-subset"].inside=r.languages.markup,r.hooks.add("wrap",(function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))})),Object.defineProperty(r.languages.markup.tag,"addInlined",{value:function(e,t){var n={};n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:r.languages[t]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var i={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};i["language-"+t]={pattern:/[\s\S]+/,inside:r.languages[t]};var o={};o[e]={pattern:RegExp("(<__[^>]*>)(?:<!\\[CDATA\\[(?:[^\\]]|\\](?!\\]>))*\\]\\]>|(?!<!\\[CDATA\\[)[^])*?(?=</__>)".replace(/__/g,(function(){return e})),"i"),lookbehind:!0,greedy:!0,inside:i},r.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(r.languages.markup.tag,"addAttribute",{value:function(e,t){r.languages.markup.tag.inside["special-attr"].push({pattern:RegExp("(^|[\"'\\s])(?:"+e+")\\s*=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+(?=[\\s>]))","i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:r.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),r.languages.html=r.languages.markup,r.languages.mathml=r.languages.markup,r.languages.svg=r.languages.markup,r.languages.xml=r.languages.extend("markup",{}),r.languages.ssml=r.languages.xml,r.languages.atom=r.languages.xml,r.languages.rss=r.languages.xml,r.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},r.languages.javascript=r.languages.extend("clike",{"class-name":[r.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp("(^|[^\\w$])(?:NaN|Infinity|0[bB][01]+(?:_[01]+)*n?|0[oO][0-7]+(?:_[0-7]+)*n?|0[xX][\\dA-Fa-f]+(?:_[\\dA-Fa-f]+)*n?|\\d+(?:_\\d+)*n|(?:\\d+(?:_\\d+)*(?:\\.(?:\\d+(?:_\\d+)*)?)?|\\.\\d+(?:_\\d+)*)(?:[Ee][+-]?\\d+(?:_\\d+)*)?)(?![\\w$])"),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),r.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,r.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)\/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/,lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:r.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:r.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:r.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:r.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:r.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),r.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:r.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),r.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),r.languages.markup&&(r.languages.markup.tag.addInlined("script","javascript"),r.languages.markup.tag.addAttribute("on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)","javascript")),r.languages.js=r.languages.javascript,function(e){var t=e.util.clone(e.languages.javascript),n="(?:\\{<S>*\\.{3}(?:[^{}]|<BRACES>)*\\})";function r(e,t){return e=e.replace(/<S>/g,(function(){return"(?:\\s|//.*(?!.)|/\\*(?:[^*]|\\*(?!/))\\*/)"})).replace(/<BRACES>/g,(function(){return"(?:\\{(?:\\{(?:\\{[^{}]*\\}|[^{}])*\\}|[^{}])*\\})"})).replace(/<SPREAD>/g,(function(){return n})),RegExp(e,t)}n=r(n).source,e.languages.jsx=e.languages.extend("markup",t),e.languages.jsx.tag.pattern=r("</?(?:[\\w.:-]+(?:<S>+(?:[\\w.:$-]+(?:=(?:\"(?:\\\\[^]|[^\\\\\"])*\"|'(?:\\\\[^]|[^\\\\'])*'|[^\\s{'\"/>=]+|<BRACES>))?|<SPREAD>))*<S>*/?)?>"),e.languages.jsx.tag.inside.tag.pattern=/^<\/?[^\s>\/]*/,e.languages.jsx.tag.inside["attr-value"].pattern=/=(?!\{)(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s'">]+)/,e.languages.jsx.tag.inside.tag.inside["class-name"]=/^[A-Z]\w*(?:\.[A-Z]\w*)*$/,e.languages.jsx.tag.inside.comment=t.comment,e.languages.insertBefore("inside","attr-name",{spread:{pattern:r("<SPREAD>"),inside:e.languages.jsx}},e.languages.jsx.tag),e.languages.insertBefore("inside","special-attr",{script:{pattern:r("=<BRACES>"),alias:"language-javascript",inside:{"script-punctuation":{pattern:/^=(?=\{)/,alias:"punctuation"},rest:e.languages.jsx}}},e.languages.jsx.tag);var i=function(e){return e?"string"==typeof e?e:"string"==typeof e.content?e.content:e.content.map(i).join(""):""},o=function(t){for(var n=[],r=0;r<t.length;r++){var a=t[r],s=!1;if("string"!=typeof a&&("tag"===a.type&&a.content[0]&&"tag"===a.content[0].type?"</"===a.content[0].content[0].content?0<n.length&&n[n.length-1].tagName===i(a.content[0].content[1])&&n.pop():"/>"===a.content[a.content.length-1].content||n.push({tagName:i(a.content[0].content[1]),openedBraces:0}):0<n.length&&"punctuation"===a.type&&"{"===a.content?n[n.length-1].openedBraces++:0<n.length&&0<n[n.length-1].openedBraces&&"punctuation"===a.type&&"}"===a.content?n[n.length-1].openedBraces--:s=!0),(s||"string"==typeof a)&&0<n.length&&0===n[n.length-1].openedBraces){var l=i(a);r<t.length-1&&("string"==typeof t[r+1]||"plain-text"===t[r+1].type)&&(l+=i(t[r+1]),t.splice(r+1,1)),0<r&&("string"==typeof t[r-1]||"plain-text"===t[r-1].type)&&(l=i(t[r-1])+l,t.splice(r-1,1),r--),t[r]=new e.Token("plain-text",l,null,l)}a.content&&"string"!=typeof a.content&&o(a.content)}};e.hooks.add("after-tokenize",(function(e){"jsx"!==e.language&&"tsx"!==e.language||o(e.tokens)}))}(r),function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(r),function(e){var t=e.util.clone(e.languages.typescript);e.languages.tsx=e.languages.extend("jsx",t),delete e.languages.tsx.parameter,delete e.languages.tsx["literal-property"];var n=e.languages.tsx.tag;n.pattern=RegExp("(^|[^\\w$]|(?=</))(?:"+n.pattern.source+")",n.pattern.flags),n.lookbehind=!0}(r),function(){if(void 0!==r&&"undefined"!=typeof document){var e="line-numbers",t=/\n(?!$)/g,n=r.plugins.lineNumbers={getLine:function(t,n){if("PRE"===t.tagName&&t.classList.contains(e)){var r=t.querySelector(".line-numbers-rows");if(r){var i=parseInt(t.getAttribute("data-start"),10)||1,o=i+(r.children.length-1);n<i&&(n=i),o<n&&(n=o);var a=n-i;return r.children[a]}}},resize:function(e){o([e])},assumeViewportIndependence:!0},i=void 0;window.addEventListener("resize",(function(){n.assumeViewportIndependence&&i===window.innerWidth||(i=window.innerWidth,o(Array.prototype.slice.call(document.querySelectorAll("pre."+e))))})),r.hooks.add("complete",(function(n){if(n.code){var i=n.element,a=i.parentNode;if(a&&/pre/i.test(a.nodeName)&&!i.querySelector(".line-numbers-rows")&&r.util.isActive(i,e)){i.classList.remove(e),a.classList.add(e);var s,l=n.code.match(t),u=l?l.length+1:1,c=new Array(u+1).join("<span></span>");(s=document.createElement("span")).setAttribute("aria-hidden","true"),s.className="line-numbers-rows",s.innerHTML=c,a.hasAttribute("data-start")&&(a.style.counterReset="linenumber "+(parseInt(a.getAttribute("data-start"),10)-1)),n.element.appendChild(s),o([a]),r.hooks.run("line-numbers",n)}}})),r.hooks.add("line-numbers",(function(e){e.plugins=e.plugins||{},e.plugins.lineNumbers=!0}))}function o(e){if(0!=(e=e.filter((function(e){var t=function(e){return e?window.getComputedStyle?getComputedStyle(e):e.currentStyle||null:null}(e)["white-space"];return"pre-wrap"===t||"pre-line"===t}))).length){var n=e.map((function(e){var n=e.querySelector("code"),r=e.querySelector(".line-numbers-rows");if(n&&r){var i=e.querySelector(".line-numbers-sizer"),o=n.textContent.split(t);i||((i=document.createElement("span")).className="line-numbers-sizer",n.appendChild(i)),i.innerHTML="0",i.style.display="block";var a=i.getBoundingClientRect().height;return i.innerHTML="",{element:e,lines:o,lineHeights:[],oneLinerHeight:a,sizer:i}}})).filter(Boolean);n.forEach((function(e){var t=e.sizer,n=e.lines,r=e.lineHeights,i=e.oneLinerHeight;r[n.length-1]=void 0,n.forEach((function(e,n){if(e&&1<e.length){var o=t.appendChild(document.createElement("span"));o.style.display="block",o.textContent=e}else r[n]=i}))})),n.forEach((function(e){for(var t=e.sizer,n=e.lineHeights,r=0,i=0;i<n.length;i++)void 0===n[i]&&(n[i]=t.children[r++].getBoundingClientRect().height)})),n.forEach((function(e){var t=e.sizer,n=e.element.querySelector(".line-numbers-rows");t.style.display="none",t.innerHTML="",e.lineHeights.forEach((function(e,t){n.children[t].style.height=e+"px"}))}))}}}(),function(){if(void 0!==r&&"undefined"!=typeof document){var e=[],t={},n=function(){};r.plugins.toolbar={};var i=r.plugins.toolbar.registerButton=function(n,r){var i;i="function"==typeof r?r:function(e){var t;return"function"==typeof r.onClick?((t=document.createElement("button")).type="button",t.addEventListener("click",(function(){r.onClick.call(this,e)}))):"string"==typeof r.url?(t=document.createElement("a")).href=r.url:t=document.createElement("span"),r.className&&t.classList.add(r.className),t.textContent=r.text,t},n in t?console.warn('There is a button with the key "'+n+'" registered already.'):e.push(t[n]=i)},o=r.plugins.toolbar.hook=function(r){var i=r.element.parentNode;if(i&&/pre/i.test(i.nodeName)&&!i.parentNode.classList.contains("code-toolbar")){var o=document.createElement("div");o.classList.add("code-toolbar"),i.parentNode.insertBefore(o,i),o.appendChild(i);var a=document.createElement("div");a.classList.add("toolbar");var s=e,l=function(e){for(;e;){var t=e.getAttribute("data-toolbar-order");if(null!=t)return(t=t.trim()).length?t.split(/\s*,\s*/g):[];e=e.parentElement}}(r.element);l&&(s=l.map((function(e){return t[e]||n}))),s.forEach((function(e){var t=e(r);if(t){var n=document.createElement("div");n.classList.add("toolbar-item"),n.appendChild(t),a.appendChild(n)}})),o.appendChild(a)}};i("label",(function(e){var t=e.element.parentNode;if(t&&/pre/i.test(t.nodeName)&&t.hasAttribute("data-label")){var n,r,i=t.getAttribute("data-label");try{r=document.querySelector("template#"+i)}catch(e){}return r?n=r.content:(t.hasAttribute("data-url")?(n=document.createElement("a")).href=t.getAttribute("data-url"):n=document.createElement("span"),n.textContent=i),n}})),r.hooks.add("complete",o)}}(),function(){function e(e,n){e.addEventListener("click",(function(){!function(e){navigator.clipboard?navigator.clipboard.writeText(e.getText()).then(e.success,(function(){t(e)})):t(e)}(n)}))}function t(e){var t=document.createElement("textarea");t.value=e.getText(),t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{var n=document.execCommand("copy");setTimeout((function(){n?e.success():e.error()}),1)}catch(t){setTimeout((function(){e.error(t)}),1)}document.body.removeChild(t)}void 0!==r&&"undefined"!=typeof document&&(r.plugins.toolbar?r.plugins.toolbar.registerButton("copy-to-clipboard",(function(t){var n=t.element,r=function(e){var t={copy:"Copy","copy-error":"Press Ctrl+C to copy","copy-success":"Copied!","copy-timeout":5e3};for(var n in t){for(var r="data-prismjs-"+n,i=e;i&&!i.hasAttribute(r);)i=i.parentElement;i&&(t[n]=i.getAttribute(r))}return t}(n),i=document.createElement("button");i.className="copy-to-clipboard-button",i.setAttribute("type","button");var o=document.createElement("span");return i.appendChild(o),s("copy"),e(i,{getText:function(){return n.textContent},success:function(){s("copy-success"),a()},error:function(){s("copy-error"),setTimeout((function(){!function(e){window.getSelection().selectAllChildren(e)}(n)}),1),a()}}),i;function a(){setTimeout((function(){s("copy")}),r["copy-timeout"])}function s(e){o.textContent=r[e],i.setAttribute("data-copy-state",e)}})):console.warn("Copy to Clipboard plugin loaded before Toolbar plugin."))}()},2480:(e,t,n)=>{"use strict";n.d(t,{Container:()=>Fh,Graphics:()=>Uh,Stage:()=>Lh,Text:()=>Bh});var r=setTimeout;function i(e){return Boolean(e&&void 0!==e.length)}function o(){}function a(e){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function s(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,a._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void u(t.promise,e)}l(t.promise,r)}else(1===e._state?l:u)(t.promise,e._value)}))):e._deferreds.push(t)}function l(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof a)return e._state=3,e._value=t,void c(e);if("function"==typeof n)return void d((r=n,i=t,function(){r.apply(i,arguments)}),e)}e._state=1,e._value=t,c(e)}catch(t){u(e,t)}var r,i}function u(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&a._immediateFn((function(){e._handled||a._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)s(e,e._deferreds[t]);e._deferreds=null}function h(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function d(e,t){var n=!1;try{e((function(e){n||(n=!0,l(t,e))}),(function(e){n||(n=!0,u(t,e))}))}catch(e){if(n)return;n=!0,u(t,e)}}a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var n=new this.constructor(o);return s(this,new h(e,t,n)),n},a.prototype.finally=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))},a.all=function(e){return new a((function(t,n){if(!i(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var o=r.length;function a(e,i){try{if(i&&("object"==typeof i||"function"==typeof i)){var s=i.then;if("function"==typeof s)return void s.call(i,(function(t){a(e,t)}),n)}r[e]=i,0==--o&&t(r)}catch(e){n(e)}}for(var s=0;s<r.length;s++)a(s,r[s])}))},a.allSettled=function(e){return new this((function(t,n){if(!e||void 0===e.length)return n(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var i=r.length;function o(e,n){if(n&&("object"==typeof n||"function"==typeof n)){var a=n.then;if("function"==typeof a)return void a.call(n,(function(t){o(e,t)}),(function(n){r[e]={status:"rejected",reason:n},0==--i&&t(r)}))}r[e]={status:"fulfilled",value:n},0==--i&&t(r)}for(var a=0;a<r.length;a++)o(a,r[a])}))},a.resolve=function(e){return e&&"object"==typeof e&&e.constructor===a?e:new a((function(t){t(e)}))},a.reject=function(e){return new a((function(t,n){n(e)}))},a.race=function(e){return new a((function(t,n){if(!i(e))return n(new TypeError("Promise.race accepts an array"));for(var r=0,o=e.length;r<o;r++)a.resolve(e[r]).then(t,n)}))},a._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){r(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};const f=a;var p=n(2525),y=n.n(p);if("undefined"==typeof globalThis&&("undefined"!=typeof self?self.globalThis=self:void 0!==n.g&&(n.g.globalThis=n.g)),globalThis.Promise||(globalThis.Promise=f),Object.assign||(Object.assign=y()),Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!globalThis.performance||!globalThis.performance.now){var m=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-m}}for(var g=Date.now(),v=["ms","moz","webkit","o"],_=0;_<v.length&&!globalThis.requestAnimationFrame;++_){var b=v[_];globalThis.requestAnimationFrame=globalThis[b+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[b+"CancelAnimationFrame"]||globalThis[b+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(e){if("function"!=typeof e)throw new TypeError(e+"is not a function");var t=Date.now(),n=16+g-t;return n<0&&(n=0),g=t,globalThis.self.setTimeout((function(){g=Date.now(),e(performance.now())}),n)}),globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(e){return clearTimeout(e)}),Math.sign||(Math.sign=function(e){return 0===(e=Number(e))||isNaN(e)?e:e>0?1:-1}),Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array),globalThis.Float32Array||(globalThis.Float32Array=Array),globalThis.Uint32Array||(globalThis.Uint32Array=Array),globalThis.Uint16Array||(globalThis.Uint16Array=Array),globalThis.Uint8Array||(globalThis.Uint8Array=Array),globalThis.Int32Array||(globalThis.Int32Array=Array);var x,E,S,T,w,A,P,O,R,C,I,N,M,k,D,L,F,U,B,G=/iPhone/i,j=/iPod/i,$=/iPad/i,z=/\biOS-universal(?:.+)Mac\b/i,X=/\bAndroid(?:.+)Mobile\b/i,H=/Android/i,V=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Y=/Silk/i,W=/Windows Phone/i,q=/\bWindows(?:.+)ARM\b/i,K=/BlackBerry/i,Q=/BB10/i,Z=/Opera Mini/i,J=/\b(CriOS|Chrome)(?:.+)Mobile/i,ee=/Mobile(?:.+)Firefox\b/i,te=function(e){return void 0!==e&&"MacIntel"===e.platform&&"number"==typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"==typeof MSStream},ne=function(e){var t={userAgent:"",platform:"",maxTouchPoints:0};e||"undefined"==typeof navigator?"string"==typeof e?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0}):t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var n=t.userAgent,r=n.split("[FBAN");void 0!==r[1]&&(n=r[0]),void 0!==(r=n.split("Twitter"))[1]&&(n=r[0]);var i=function(e){return function(t){return t.test(e)}}(n),o={apple:{phone:i(G)&&!i(W),ipod:i(j),tablet:!i(G)&&(i($)||te(t))&&!i(W),universal:i(z),device:(i(G)||i(j)||i($)||i(z)||te(t))&&!i(W)},amazon:{phone:i(V),tablet:!i(V)&&i(Y),device:i(V)||i(Y)},android:{phone:!i(W)&&i(V)||!i(W)&&i(X),tablet:!i(W)&&!i(V)&&!i(X)&&(i(Y)||i(H)),device:!i(W)&&(i(V)||i(Y)||i(X)||i(H))||i(/\bokhttp\b/i)},windows:{phone:i(W),tablet:i(q),device:i(W)||i(q)},other:{blackberry:i(K),blackberry10:i(Q),opera:i(Z),firefox:i(ee),chrome:i(J),device:i(K)||i(Q)||i(Z)||i(ee)||i(J)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}(globalThis.navigator);!function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"}(x||(x={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"}(E||(E={})),function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"}(S||(S={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"}(T||(T={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(w||(w={})),function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(A||(A={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(P||(P={})),function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"}(O||(O={})),function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"}(R||(R={})),function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"}(C||(C={})),function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(I||(I={})),function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"}(N||(N={})),function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(M||(M={})),function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"}(k||(k={})),function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"}(D||(D={})),function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"}(L||(L={})),function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"}(F||(F={})),function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"}(U||(U={})),function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(B||(B={}));var re,ie,oe,ae,se,le,ue,ce,he,de,fe,pe,ye,me,ge,ve,_e,be,xe,Ee={MIPMAP_TEXTURES:N.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:U.NONE,SPRITE_MAX_TEXTURES:function(e){var t,n=!0;(ne.tablet||ne.phone)&&(ne.apple.device&&(t=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(t[1],10)<11&&(n=!1),ne.android.device&&(t=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(t[1],10)<7&&(n=!1));return n?32:4}(),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:D.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:I.CLAMP,SCALE_MODE:C.LINEAR,PRECISION_VERTEX:L.HIGH,PRECISION_FRAGMENT:ne.apple.device?L.HIGH:L.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!ne.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},Se=n(6659),Te=n.n(Se),we=n(1106),Ae=n.n(we),Pe=n(4760);!function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"}(re||(re={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"}(ie||(ie={})),function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"}(oe||(oe={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"}(ae||(ae={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(se||(se={})),function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(le||(le={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(ue||(ue={})),function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"}(ce||(ce={})),function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"}(he||(he={})),function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"}(de||(de={})),function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(fe||(fe={})),function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"}(pe||(pe={})),function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(ye||(ye={})),function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"}(me||(me={})),function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"}(ge||(ge={})),function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"}(ve||(ve={})),function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"}(_e||(_e={})),function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"}(be||(be={})),function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(xe||(xe={}));var Oe={parse:Pe.Qc,format:Pe.WU,resolve:Pe.DB};Ee.RETINA_PREFIX=/@([0-9\.]+)x/,Ee.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Re,Ce=!1,Ie={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Ne(e,t){return void 0===t&&(t=[]),t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255,t}function Me(e){var t=e.toString(16);return"#"+("000000".substring(0,6-t.length)+t)}function ke(e){return"string"==typeof e&&"#"===(e=Ie[e.toLowerCase()]||e)[0]&&(e=e.slice(1)),parseInt(e,16)}var De=function(){for(var e=[],t=[],n=0;n<32;n++)e[n]=n,t[n]=n;e[ae.NORMAL_NPM]=ae.NORMAL,e[ae.ADD_NPM]=ae.ADD,e[ae.SCREEN_NPM]=ae.SCREEN,t[ae.NORMAL]=ae.NORMAL_NPM,t[ae.ADD]=ae.ADD_NPM,t[ae.SCREEN]=ae.SCREEN_NPM;var r=[];return r.push(t),r.push(e),r}();function Le(e,t){return De[t?1:0][e]}function Fe(e,t){if(1===t)return(255*t<<24)+e;if(0===t)return 0;var n=e>>16&255,r=e>>8&255,i=255&e;return(255*t<<24)+((n=n*t+.5|0)<<16)+((r=r*t+.5|0)<<8)+(i*t+.5|0)}function Ue(e,t,n,r){return(n=n||new Float32Array(4))[0]=(e>>16&255)/255,n[1]=(e>>8&255)/255,n[2]=(255&e)/255,(r||void 0===r)&&(n[0]*=t,n[1]*=t,n[2]*=t),n[3]=t,n}function Be(e){if(4===e.BYTES_PER_ELEMENT)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===e.BYTES_PER_ELEMENT){if(e instanceof Uint16Array)return"Uint16Array"}else if(1===e.BYTES_PER_ELEMENT&&e instanceof Uint8Array)return"Uint8Array";return null}function Ge(e){return e+=0===e?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,1+(e|=e>>>16)}function je(e){return!(e&e-1||!e)}function $e(e){var t=(e>65535?1:0)<<4,n=((e>>>=t)>255?1:0)<<3;return t|=n,t|=n=((e>>>=n)>15?1:0)<<2,(t|=n=((e>>>=n)>3?1:0)<<1)|(e>>>=n)>>1}function ze(e,t,n){var r,i=e.length;if(!(t>=i||0===n)){var o=i-(n=t+n>i?i-t:n);for(r=t;r<o;++r)e[r]=e[r+n];e.length=o}}function Xe(e){return 0===e?0:e<0?-1:1}Float32Array,Uint32Array,Int32Array,Uint8Array;var He=0;function Ve(){return++He}var Ye={};function We(e,t,n){if(void 0===n&&(n=3),!Ye[t]){var r=(new Error).stack;void 0===r?console.warn("PixiJS Deprecation Warning: ",t+"\nDeprecated since v"+e):(r=r.split("\n").splice(n).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t+"\nDeprecated since v"+e),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",t+"\nDeprecated since v"+e),console.warn(r))),Ye[t]=!0}}var qe,Ke={},Qe=Object.create(null),Ze=Object.create(null),Je=function(){function e(e,t,n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||Ee.RESOLUTION,this.resize(e,t)}return e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(e,t){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(t*this.resolution)},e.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=Math.round(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=Math.round(e)},enumerable:!1,configurable:!0}),e}();function et(e,t){var n=Ee.RETINA_PREFIX.exec(e);return n?parseFloat(n[1]):void 0!==t?t:1}var tt,nt=2*Math.PI,rt=180/Math.PI,it=Math.PI/180;!function(e){e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC"}(tt||(tt={}));var ot=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=0,this.y=0,this.x=e,this.y=t}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},e.prototype.copyTo=function(e){return e.set(this.x,this.y),e},e.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},e.prototype.set=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.x=e,this.y=t,this},e.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},e}(),at=[new ot,new ot,new ot,new ot],st=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=Number(e),this.y=Number(t),this.width=Number(n),this.height=Number(r),this.type=tt.RECT}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e,"EMPTY",{get:function(){return new e(0,0,0,0)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},e.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},e.prototype.contains=function(e,t){return!(this.width<=0||this.height<=0)&&e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height},e.prototype.intersects=function(e,t){if(!t){var n=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=n)return!1;var r=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>r}var i=this.left,o=this.right,a=this.top,s=this.bottom;if(o<=i||s<=a)return!1;var l=at[0].set(e.left,e.top),u=at[1].set(e.left,e.bottom),c=at[2].set(e.right,e.top),h=at[3].set(e.right,e.bottom);if(c.x<=l.x||u.y<=l.y)return!1;var d=Math.sign(t.a*t.d-t.b*t.c);if(0===d)return!1;if(t.apply(l,l),t.apply(u,u),t.apply(c,c),t.apply(h,h),Math.max(l.x,u.x,c.x,h.x)<=i||Math.min(l.x,u.x,c.x,h.x)>=o||Math.max(l.y,u.y,c.y,h.y)<=a||Math.min(l.y,u.y,c.y,h.y)>=s)return!1;var f=d*(u.y-l.y),p=d*(l.x-u.x),y=f*i+p*a,m=f*o+p*a,g=f*i+p*s,v=f*o+p*s;if(Math.max(y,m,g,v)<=f*l.x+p*l.y||Math.min(y,m,g,v)>=f*h.x+p*h.y)return!1;var _=d*(l.y-c.y),b=d*(c.x-l.x),x=_*i+b*a,E=_*o+b*a,S=_*i+b*s,T=_*o+b*s;return!(Math.max(x,E,S,T)<=_*l.x+b*l.y||Math.min(x,E,S,T)>=_*h.x+b*h.y)},e.prototype.pad=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this},e.prototype.fit=function(e){var t=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),i=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(n-t,0),this.y=r,this.height=Math.max(i-r,0),this},e.prototype.ceil=function(e,t){void 0===e&&(e=1),void 0===t&&(t=.001);var n=Math.ceil((this.x+this.width-t)*e)/e,r=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=n-this.x,this.height=r-this.y,this},e.prototype.enlarge=function(e){var t=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),i=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=n-t,this.y=r,this.height=i-r,this},e.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),lt=function(){function e(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),this.x=e,this.y=t,this.radius=n,this.type=tt.CIRC}return e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(e,t){if(this.radius<=0)return!1;var n=this.radius*this.radius,r=this.x-e,i=this.y-t;return(r*=r)+(i*=i)<=n},e.prototype.getBounds=function(){return new st(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},e.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},e}(),ut=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=e,this.y=t,this.width=n,this.height=r,this.type=tt.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var n=(e-this.x)/this.width,r=(t-this.y)/this.height;return(n*=n)+(r*=r)<=1},e.prototype.getBounds=function(){return new st(this.x-this.width,this.y-this.height,this.width,this.height)},e.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),ct=function(){function e(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];var r=Array.isArray(t[0])?t[0]:t;if("number"!=typeof r[0]){for(var i=[],o=0,a=r.length;o<a;o++)i.push(r[o].x,r[o].y);r=i}this.points=r,this.type=tt.POLY,this.closeStroke=!0}return e.prototype.clone=function(){var t=new e(this.points.slice());return t.closeStroke=this.closeStroke,t},e.prototype.contains=function(e,t){for(var n=!1,r=this.points.length/2,i=0,o=r-1;i<r;o=i++){var a=this.points[2*i],s=this.points[2*i+1],l=this.points[2*o],u=this.points[2*o+1];s>t!=u>t&&e<(t-s)/(u-s)*(l-a)+a&&(n=!n)}return n},e.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce((function(e,t){return e+", "+t}),"")+"]"},e}(),ht=function(){function e(e,t,n,r,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=20),this.x=e,this.y=t,this.width=n,this.height=r,this.radius=i,this.type=tt.RREC}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){var n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+n&&t<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;var r=e-(this.x+n),i=t-(this.y+n),o=n*n;if(r*r+i*i<=o)return!0;if((r=e-(this.x+this.width-n))*r+i*i<=o)return!0;if(r*r+(i=t-(this.y+this.height-n))*i<=o)return!0;if((r=e-(this.x+n))*r+i*i<=o)return!0}return!1},e.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"},e}(),dt=function(){function e(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0),this._x=n,this._y=r,this.cb=e,this.scope=t}return e.prototype.clone=function(t,n){return void 0===t&&(t=this.cb),void 0===n&&(n=this.scope),new e(t,n,this._x,this._y)},e.prototype.set=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this._x===e&&this._y===t||(this._x=e,this._y=t,this.cb.call(this.scope)),this},e.prototype.copyFrom=function(e){return this._x===e.x&&this._y===e.y||(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},e.prototype.copyTo=function(e){return e.set(this._x,this._y),e},e.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},e.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),e}(),ft=function(){function e(e,t,n,r,i,o){void 0===e&&(e=1),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),this.array=null,this.a=e,this.b=t,this.c=n,this.d=r,this.tx=i,this.ty=o}return e.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},e.prototype.set=function(e,t,n,r,i,o){return this.a=e,this.b=t,this.c=n,this.d=r,this.tx=i,this.ty=o,this},e.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},e.prototype.apply=function(e,t){t=t||new ot;var n=e.x,r=e.y;return t.x=this.a*n+this.c*r+this.tx,t.y=this.b*n+this.d*r+this.ty,t},e.prototype.applyInverse=function(e,t){t=t||new ot;var n=1/(this.a*this.d+this.c*-this.b),r=e.x,i=e.y;return t.x=this.d*n*r+-this.c*n*i+(this.ty*this.c-this.tx*this.d)*n,t.y=this.a*n*i+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,t},e.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},e.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},e.prototype.rotate=function(e){var t=Math.cos(e),n=Math.sin(e),r=this.a,i=this.c,o=this.tx;return this.a=r*t-this.b*n,this.b=r*n+this.b*t,this.c=i*t-this.d*n,this.d=i*n+this.d*t,this.tx=o*t-this.ty*n,this.ty=o*n+this.ty*t,this},e.prototype.append=function(e){var t=this.a,n=this.b,r=this.c,i=this.d;return this.a=e.a*t+e.b*r,this.b=e.a*n+e.b*i,this.c=e.c*t+e.d*r,this.d=e.c*n+e.d*i,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*n+e.ty*i+this.ty,this},e.prototype.setTransform=function(e,t,n,r,i,o,a,s,l){return this.a=Math.cos(a+l)*i,this.b=Math.sin(a+l)*i,this.c=-Math.sin(a-s)*o,this.d=Math.cos(a-s)*o,this.tx=e-(n*this.a+r*this.c),this.ty=t-(n*this.b+r*this.d),this},e.prototype.prepend=function(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var n=this.a,r=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},e.prototype.decompose=function(e){var t=this.a,n=this.b,r=this.c,i=this.d,o=e.pivot,a=-Math.atan2(-r,i),s=Math.atan2(n,t),l=Math.abs(a+s);return l<1e-5||Math.abs(nt-l)<1e-5?(e.rotation=s,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=s),e.scale.x=Math.sqrt(t*t+n*n),e.scale.y=Math.sqrt(r*r+i*i),e.position.x=this.tx+(o.x*t+o.y*r),e.position.y=this.ty+(o.x*n+o.y*i),e},e.prototype.invert=function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.tx,o=e*r-t*n;return this.a=r/o,this.b=-t/o,this.c=-n/o,this.d=e/o,this.tx=(n*this.ty-r*i)/o,this.ty=-(e*this.ty-t*i)/o,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var t=new e;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},e.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},e.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},e.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(e,"IDENTITY",{get:function(){return new e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TEMP_MATRIX",{get:function(){return new e},enumerable:!1,configurable:!0}),e}(),pt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],yt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],mt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],gt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],vt=[],_t=[],bt=Math.sign;!function(){for(var e=0;e<16;e++){var t=[];vt.push(t);for(var n=0;n<16;n++)for(var r=bt(pt[e]*pt[n]+mt[e]*yt[n]),i=bt(yt[e]*pt[n]+gt[e]*yt[n]),o=bt(pt[e]*mt[n]+mt[e]*gt[n]),a=bt(yt[e]*mt[n]+gt[e]*gt[n]),s=0;s<16;s++)if(pt[s]===r&&yt[s]===i&&mt[s]===o&&gt[s]===a){t.push(s);break}}for(e=0;e<16;e++){var l=new ft;l.set(pt[e],yt[e],mt[e],gt[e],0,0),_t.push(l)}}();var xt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(e){return pt[e]},uY:function(e){return yt[e]},vX:function(e){return mt[e]},vY:function(e){return gt[e]},inv:function(e){return 8&e?15&e:7&-e},add:function(e,t){return vt[e][t]},sub:function(e,t){return vt[e][xt.inv(t)]},rotate180:function(e){return 4^e},isVertical:function(e){return 2==(3&e)},byDirection:function(e,t){return 2*Math.abs(e)<=Math.abs(t)?t>=0?xt.S:xt.N:2*Math.abs(t)<=Math.abs(e)?e>0?xt.E:xt.W:t>0?e>0?xt.SE:xt.SW:e>0?xt.NE:xt.NW},matrixAppendRotationInv:function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=_t[xt.inv(t)];i.tx=n,i.ty=r,e.append(i)}},Et=function(){function e(){this.worldTransform=new ft,this.localTransform=new ft,this.position=new dt(this.onChange,this,0,0),this.scale=new dt(this.onChange,this,1,1),this.pivot=new dt(this.onChange,this,0,0),this.skew=new dt(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},e.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},e.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var n=e.worldTransform,r=this.worldTransform;r.a=t.a*n.a+t.b*n.c,r.b=t.a*n.b+t.b*n.d,r.c=t.c*n.a+t.d*n.c,r.d=t.c*n.b+t.d*n.d,r.tx=t.tx*n.a+t.ty*n.c+n.tx,r.ty=t.tx*n.b+t.ty*n.d+n.ty,this._parentID=e._worldID,this._worldID++}},e.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},enumerable:!1,configurable:!0}),e.IDENTITY=new e,e}();Ee.SORTABLE_CHILDREN=!1;var St=function(){function e(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?st.EMPTY:((e=e||new st(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},e.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},e.prototype.addPointMatrix=function(e,t){var n=e.a,r=e.b,i=e.c,o=e.d,a=e.tx,s=e.ty,l=n*t.x+i*t.y+a,u=r*t.x+o*t.y+s;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)},e.prototype.addQuad=function(e){var t=this.minX,n=this.minY,r=this.maxX,i=this.maxY,o=e[0],a=e[1];t=o<t?o:t,n=a<n?a:n,r=o>r?o:r,i=a>i?a:i,t=(o=e[2])<t?o:t,n=(a=e[3])<n?a:n,r=o>r?o:r,i=a>i?a:i,t=(o=e[4])<t?o:t,n=(a=e[5])<n?a:n,r=o>r?o:r,i=a>i?a:i,t=(o=e[6])<t?o:t,n=(a=e[7])<n?a:n,r=o>r?o:r,i=a>i?a:i,this.minX=t,this.minY=n,this.maxX=r,this.maxY=i},e.prototype.addFrame=function(e,t,n,r,i){this.addFrameMatrix(e.worldTransform,t,n,r,i)},e.prototype.addFrameMatrix=function(e,t,n,r,i){var o=e.a,a=e.b,s=e.c,l=e.d,u=e.tx,c=e.ty,h=this.minX,d=this.minY,f=this.maxX,p=this.maxY,y=o*t+s*n+u,m=a*t+l*n+c;h=y<h?y:h,d=m<d?m:d,f=y>f?y:f,p=m>p?m:p,h=(y=o*r+s*n+u)<h?y:h,d=(m=a*r+l*n+c)<d?m:d,f=y>f?y:f,p=m>p?m:p,h=(y=o*t+s*i+u)<h?y:h,d=(m=a*t+l*i+c)<d?m:d,f=y>f?y:f,p=m>p?m:p,h=(y=o*r+s*i+u)<h?y:h,d=(m=a*r+l*i+c)<d?m:d,f=y>f?y:f,p=m>p?m:p,this.minX=h,this.minY=d,this.maxX=f,this.maxY=p},e.prototype.addVertexData=function(e,t,n){for(var r=this.minX,i=this.minY,o=this.maxX,a=this.maxY,s=t;s<n;s+=2){var l=e[s],u=e[s+1];r=l<r?l:r,i=u<i?u:i,o=l>o?l:o,a=u>a?u:a}this.minX=r,this.minY=i,this.maxX=o,this.maxY=a},e.prototype.addVertices=function(e,t,n,r){this.addVerticesMatrix(e.worldTransform,t,n,r)},e.prototype.addVerticesMatrix=function(e,t,n,r,i,o){void 0===i&&(i=0),void 0===o&&(o=i);for(var a=e.a,s=e.b,l=e.c,u=e.d,c=e.tx,h=e.ty,d=this.minX,f=this.minY,p=this.maxX,y=this.maxY,m=n;m<r;m+=2){var g=t[m],v=t[m+1],_=a*g+l*v+c,b=u*v+s*g+h;d=Math.min(d,_-i),p=Math.max(p,_+i),f=Math.min(f,b-o),y=Math.max(y,b+o)}this.minX=d,this.minY=f,this.maxX=p,this.maxY=y},e.prototype.addBounds=function(e){var t=this.minX,n=this.minY,r=this.maxX,i=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>r?e.maxX:r,this.maxY=e.maxY>i?e.maxY:i},e.prototype.addBoundsMask=function(e,t){var n=e.minX>t.minX?e.minX:t.minX,r=e.minY>t.minY?e.minY:t.minY,i=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(n<=i&&r<=o){var a=this.minX,s=this.minY,l=this.maxX,u=this.maxY;this.minX=n<a?n:a,this.minY=r<s?r:s,this.maxX=i>l?i:l,this.maxY=o>u?o:u}},e.prototype.addBoundsMatrix=function(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)},e.prototype.addBoundsArea=function(e,t){var n=e.minX>t.x?e.minX:t.x,r=e.minY>t.y?e.minY:t.y,i=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(n<=i&&r<=o){var a=this.minX,s=this.minY,l=this.maxX,u=this.maxY;this.minX=n<a?n:a,this.minY=r<s?r:s,this.maxX=i>l?i:l,this.maxY=o>u?o:u}},e.prototype.pad=function(e,t){void 0===e&&(e=0),void 0===t&&(t=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)},e.prototype.addFramePad=function(e,t,n,r,i,o){e-=i,t-=o,n+=i,r+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>r?this.maxY:r},e}(),Tt=function(e,t){return Tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Tt(e,t)};function wt(e,t){function n(){this.constructor=e}Tt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var At,Pt,Ot,Rt,Ct,It,Nt,Mt,kt,Dt,Lt,Ft,Ut,Bt,Gt,jt,$t,zt,Xt,Ht=function(e){function t(){var t=e.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new Et,t.alpha=1,t.visible=!0,t.renderable=!0,t.cullable=!1,t.cullArea=null,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new St,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._maskRefCount=0,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}return wt(t,e),t.mixin=function(e){for(var n=Object.keys(e),r=0;r<n.length;++r){var i=n[r];Object.defineProperty(t.prototype,i,Object.getOwnPropertyDescriptor(e,i))}},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new st),t=this._boundsRect),this._bounds.getRectangle(t)},t.prototype.getLocalBounds=function(e){e||(this._localBoundsRect||(this._localBoundsRect=new st),e=this._localBoundsRect),this._localBounds||(this._localBounds=new St);var t=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var r=this._bounds,i=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,e);return this.parent=n,this.transform=t,this._bounds=r,this._bounds.updateID+=this._boundsID-i,o},t.prototype.toGlobal=function(e,t,n){return void 0===n&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)},t.prototype.toLocal=function(e,t,n,r){return t&&(e=t.toGlobal(e,n,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},t.prototype.setTransform=function(e,t,n,r,i,o,a,s,l){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===l&&(l=0),this.position.x=e,this.position.y=t,this.scale.x=n||1,this.scale.y=r||1,this.rotation=i,this.skew.x=o,this.skew.y=a,this.pivot.x=s,this.pivot.y=l,this},t.prototype.destroy=function(e){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new Vt),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e},t.prototype.disableTempParent=function(e){this.parent=e},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(e){this.transform.position.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(e){this.transform.position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(e){this.transform.position.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(e){this.transform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(e){this.transform.skew.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*rt},set:function(e){this.transform.rotation=e*it},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(e){var t;this._mask!==e&&(this._mask&&((t=this._mask.maskObject||this._mask)._maskRefCount--,0===t._maskRefCount&&(t.renderable=!0,t.isMask=!1)),this._mask=e,this._mask&&(0===(t=this._mask.maskObject||this._mask)._maskRefCount&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++))},enumerable:!1,configurable:!0}),t}(Te()),Vt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sortDirty=null,t}return wt(t,e),t}(Ht);function Yt(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}Ht.prototype.displayObjectUpdateTransform=Ht.prototype.updateTransform,function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"}(At||(At={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"}(Pt||(Pt={})),function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"}(Ot||(Ot={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"}(Rt||(Rt={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Ct||(Ct={})),function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(It||(It={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Nt||(Nt={})),function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"}(Mt||(Mt={})),function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"}(kt||(kt={})),function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"}(Dt||(Dt={})),function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Lt||(Lt={})),function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"}(Ft||(Ft={})),function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(Ut||(Ut={})),function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"}(Bt||(Bt={})),function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"}(Gt||(Gt={})),function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"}(jt||(jt={})),function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"}($t||($t={})),function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"}(zt||(zt={})),function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(Xt||(Xt={}));var Wt=function(e){function t(){var t=e.call(this)||this;return t.children=[],t.sortableChildren=Ee.SORTABLE_CHILDREN,t.sortDirty=!1,t}return wt(t,e),t.prototype.onChildrenChange=function(e){},t.prototype.addChild=function(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];if(t.length>1)for(var r=0;r<t.length;r++)this.addChild(t[r]);else{var i=t[0];i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.push(i),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this)}return t[0]},t.prototype.addChildAt=function(e,t){if(t<0||t>this.children.length)throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e},t.prototype.swapChildren=function(e,t){if(e!==t){var n=this.getChildIndex(e),r=this.getChildIndex(t);this.children[n]=t,this.children[r]=e,this.onChildrenChange(n<r?n:r)}},t.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},t.prototype.setChildIndex=function(e,t){if(t<0||t>=this.children.length)throw new Error("The index "+t+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(e);ze(this.children,n,1),this.children.splice(t,0,e),this.onChildrenChange(t)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];if(t.length>1)for(var r=0;r<t.length;r++)this.removeChild(t[r]);else{var i=t[0],o=this.children.indexOf(i);if(-1===o)return null;i.parent=null,i.transform._parentID=-1,ze(this.children,o,1),this._boundsID++,this.onChildrenChange(o),i.emit("removed",this),this.emit("childRemoved",i,this,o)}return t[0]},t.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,ze(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t},t.prototype.removeChildren=function(e,t){void 0===e&&(e=0),void 0===t&&(t=this.children.length);var n,r=e,i=t-r;if(i>0&&i<=t){n=this.children.splice(r,i);for(var o=0;o<n.length;++o)n[o].parent=null,n[o].transform&&(n[o].transform._parentID=-1);for(this._boundsID++,this.onChildrenChange(e),o=0;o<n.length;++o)n[o].emit("removed",this),this.emit("childRemoved",n[o],this,o);return n}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var e=!1,t=0,n=this.children.length;t<n;++t){var r=this.children[t];r._lastSortedIndex=t,e||0===r.zIndex||(e=!0)}e&&this.children.length>1&&this.children.sort(Yt),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,t=this.children.length;e<t;++e){var n=this.children[e];n.visible&&n.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var t=this.children[e];if(t.visible&&t.renderable)if(t.calculateBounds(),t._mask){var n=t._mask.maskObject||t._mask;n.calculateBounds(),this._bounds.addBoundsMask(t._bounds,n._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(t,n){void 0===n&&(n=!1);var r=e.prototype.getLocalBounds.call(this,t);if(!n)for(var i=0,o=this.children.length;i<o;++i){var a=this.children[i];a.visible&&a.updateTransform()}return r},t.prototype._calculateBounds=function(){},t.prototype._renderWithCulling=function(e){var n=e.renderTexture.sourceFrame;if(n.width>0&&n.height>0){var r,i;if(this.cullArea?(r=this.cullArea,i=this.worldTransform):this._render!==t.prototype._render&&(r=this.getBounds(!0)),r&&n.intersects(r,i))this._render(e);else if(this.cullArea)return;for(var o=0,a=this.children.length;o<a;++o){var s=this.children[o],l=s.cullable;s.cullable=l||!this.cullArea,s.render(e),s.cullable=l}}},t.prototype.render=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(var t=0,n=this.children.length;t<n;++t)this.children[t].render(e)}},t.prototype.renderAdvanced=function(e){var t=this.filters,n=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<t.length;r++)t[r].enabled&&this._enabledFilters.push(t[r])}var i=t&&this._enabledFilters&&this._enabledFilters.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==$t.NONE));if(i&&e.batch.flush(),t&&this._enabledFilters&&this._enabledFilters.length&&e.filter.push(this,this._enabledFilters),n&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e),r=0;for(var o=this.children.length;r<o;++r)this.children[r].render(e)}i&&e.batch.flush(),n&&e.mask.pop(this),t&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()},t.prototype._render=function(e){},t.prototype.destroy=function(t){e.prototype.destroy.call(this),this.sortDirty=!1;var n="boolean"==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(n)for(var i=0;i<r.length;++i)r[i].destroy(t)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e},enumerable:!1,configurable:!0}),t}(Ht);Wt.prototype.containerUpdateTransform=Wt.prototype.updateTransform,Ht.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});var qt,Kt=function(){function e(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(ne.tablet||ne.phone)&&this.createTouchHook();var t=document.createElement("div");t.style.width="100px",t.style.height="100px",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.zIndex=2..toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),e.prototype.createTouchHook=function(){var e=this,t=document.createElement("button");t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.zIndex=2..toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",(function(){e._isMobileAccessibility=!0,e.activate(),e.destroyTouchHook()})),document.body.appendChild(t),this._hookDiv=t},e.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},e.prototype.activate=function(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null===(e=this.renderer.view.parentNode)||void 0===e||e.appendChild(this.div))},e.prototype.deactivate=function(){var e;this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null===(e=this.div.parentNode)||void 0===e||e.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(e){if(e.visible&&e.accessibleChildren){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);var t=e.children;if(t)for(var n=0;n<t.length;n++)this.updateAccessibleObjects(t[n])}},e.prototype.update=function(){var e=performance.now();if(!(ne.android.device&&e<this.androidUpdateCount)&&(this.androidUpdateCount=e+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),n=t.left,r=t.top,i=t.width,o=t.height,a=this.renderer,s=a.width,l=a.height,u=a.resolution,c=i/s*u,h=o/l*u,d=this.div;d.style.left=n+"px",d.style.top=r+"px",d.style.width=s+"px",d.style.height=l+"px";for(var f=0;f<this.children.length;f++){var p=this.children[f];if(p.renderId!==this.renderId)p._accessibleActive=!1,ze(this.children,f,1),this.div.removeChild(p._accessibleDiv),this.pool.push(p._accessibleDiv),p._accessibleDiv=null,f--;else{d=p._accessibleDiv;var y=p.hitArea,m=p.worldTransform;p.hitArea?(d.style.left=(m.tx+y.x*m.a)*c+"px",d.style.top=(m.ty+y.y*m.d)*h+"px",d.style.width=y.width*m.a*c+"px",d.style.height=y.height*m.d*h+"px"):(y=p.getBounds(),this.capHitArea(y),d.style.left=y.x*c+"px",d.style.top=y.y*h+"px",d.style.width=y.width*c+"px",d.style.height=y.height*h+"px",d.title!==p.accessibleTitle&&null!==p.accessibleTitle&&(d.title=p.accessibleTitle),d.getAttribute("aria-label")!==p.accessibleHint&&null!==p.accessibleHint&&d.setAttribute("aria-label",p.accessibleHint)),p.accessibleTitle===d.title&&p.tabIndex===d.tabIndex||(d.title=p.accessibleTitle,d.tabIndex=p.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}},e.prototype.updateDebugHTML=function(e){e.innerHTML="type: "+e.type+"</br> title : "+e.title+"</br> tabIndex: "+e.tabIndex},e.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);var t=this.renderer,n=t.width,r=t.height;e.x+e.width>n&&(e.width=n-e.x),e.y+e.height>r&&(e.height=r-e.y)},e.prototype.addChild=function(e){var t=this.pool.pop();t||((t=document.createElement("button")).style.width="100px",t.style.height="100px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=2..toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&null!==e.accessibleTitle?t.title=e.accessibleTitle:e.accessibleHint&&null!==e.accessibleHint||(t.title="displayObject "+e.tabIndex),e.accessibleHint&&null!==e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},e.prototype._onClick=function(e){var t=this.renderer.plugins.interaction,n=e.target.displayObject,r=t.eventData;t.dispatchEvent(n,"click",r),t.dispatchEvent(n,"pointertap",r),t.dispatchEvent(n,"tap",r)},e.prototype._onFocus=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive");var t=this.renderer.plugins.interaction,n=e.target.displayObject,r=t.eventData;t.dispatchEvent(n,"mouseover",r)},e.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite");var t=this.renderer.plugins.interaction,n=e.target.displayObject,r=t.eventData;t.dispatchEvent(n,"mouseout",r)},e.prototype._onKeyDown=function(e){9===e.keyCode&&this.activate()},e.prototype._onMouseMove=function(e){0===e.movementX&&0===e.movementY||this.deactivate()},e.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e}();Ee.TARGET_FPMS=.06,function(e){e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY"}(qt||(qt={}));var Qt=function(){function e(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=0),void 0===r&&(r=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=n,this.once=r}return e.prototype.match=function(e,t){return void 0===t&&(t=null),this.fn===e&&this.context===t},e.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},e.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},e.prototype.destroy=function(e){void 0===e&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=e?null:t,this.previous=null,t},e}(),Zt=function(){function e(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Qt(null,null,1/0),this.deltaMS=1/Ee.TARGET_FPMS,this.elapsedMS=1/Ee.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return e.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(e,t,n){return void 0===n&&(n=qt.NORMAL),this._addListener(new Qt(e,t,n))},e.prototype.addOnce=function(e,t,n){return void 0===n&&(n=qt.NORMAL),this._addListener(new Qt(e,t,n,!0))},e.prototype._addListener=function(e){var t=this._head.next,n=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(n);break}n=t,t=t.next}e.previous||e.connect(n)}else e.connect(n);return this._startIfPossible(),this},e.prototype.remove=function(e,t){for(var n=this._head.next;n;)n=n.match(e,t)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(e.prototype,"count",{get:function(){if(!this._head)return 0;for(var e=0,t=this._head;t=t.next;)e++;return e},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},e.prototype.update=function(e){var t;if(void 0===e&&(e=performance.now()),e>this.lastTime){if((t=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){var n=e-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=e-n%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Ee.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Object.defineProperty(e.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,t)/1e3,Ee.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(0===e)this._minElapsedMS=0;else{var t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"shared",{get:function(){if(!e._shared){var t=e._shared=new e;t.autoStart=!0,t._protected=!0}return e._shared},enumerable:!1,configurable:!0}),Object.defineProperty(e,"system",{get:function(){if(!e._system){var t=e._system=new e;t.autoStart=!0,t._protected=!0}return e._system},enumerable:!1,configurable:!0}),e}(),Jt=function(){function e(){}return e.init=function(e){var t=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,qt.LOW)},get:function(){return this._ticker}}),this.stop=function(){t._ticker.stop()},this.start=function(){t._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Zt.shared:new Zt,e.autoStart&&this.start()},e.destroy=function(){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}},e}(),en=function(){function e(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new ot,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(e.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),e.prototype.getLocalPosition=function(e,t,n){return e.worldTransform.applyInverse(n||this.global,t)},e.prototype.copyEvent=function(e){"isPrimary"in e&&e.isPrimary&&(this.isPrimary=!0),this.button="button"in e&&e.button;var t="buttons"in e&&e.buttons;this.buttons=Number.isInteger(t)?t:"which"in e&&e.which,this.width="width"in e&&e.width,this.height="height"in e&&e.height,this.tiltX="tiltX"in e&&e.tiltX,this.tiltY="tiltY"in e&&e.tiltY,this.pointerType="pointerType"in e&&e.pointerType,this.pressure="pressure"in e&&e.pressure,this.rotationAngle="rotationAngle"in e&&e.rotationAngle,this.twist="twist"in e&&e.twist||0,this.tangentialPressure="tangentialPressure"in e&&e.tangentialPressure||0},e.prototype.reset=function(){this.isPrimary=!1},e}(),tn=function(e,t){return tn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},tn(e,t)},nn=function(){function e(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return e.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},e.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},e}(),rn=function(){function e(t){this._pointerId=t,this._flags=e.FLAGS.NONE}return e.prototype._doSet=function(e,t){this._flags=t?this._flags|e:this._flags&~e},Object.defineProperty(e.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flags",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"none",{get:function(){return this._flags===e.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"over",{get:function(){return 0!=(this._flags&e.FLAGS.OVER)},set:function(t){this._doSet(e.FLAGS.OVER,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightDown",{get:function(){return 0!=(this._flags&e.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(e.FLAGS.RIGHT_DOWN,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftDown",{get:function(){return 0!=(this._flags&e.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(e.FLAGS.LEFT_DOWN,t)},enumerable:!1,configurable:!0}),e.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),e}(),on=function(){function e(){this._tempPoint=new ot}return e.prototype.recursiveFindHit=function(e,t,n,r,i){if(!t||!t.visible)return!1;var o=e.data.global,a=!1,s=i=t.interactive||i,l=!0;if(t.hitArea?(r&&(t.worldTransform.applyInverse(o,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:(r=!1,l=!1)),s=!1):t._mask&&r&&(t._mask.containsPoint&&t._mask.containsPoint(o)||(r=!1)),l&&t.interactiveChildren&&t.children)for(var u=t.children,c=u.length-1;c>=0;c--){var h=u[c],d=this.recursiveFindHit(e,h,n,r,s);if(d){if(!h.parent)continue;s=!1,d&&(e.target&&(r=!1),a=!0)}}return i&&(r&&!e.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(o)&&(a=!0),t.interactive&&(a&&!e.target&&(e.target=t),n&&n(e,t,!!a))),a},e.prototype.findHit=function(e,t,n,r){this.recursiveFindHit(e,t,n,r,!1)},e}(),an={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(e){e?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Ht.mixin(an);var sn={target:null,data:{global:null}},ln=function(e){function t(t,n){var r=e.call(this)||this;return n=n||{},r.renderer=t,r.autoPreventDefault=void 0===n.autoPreventDefault||n.autoPreventDefault,r.interactionFrequency=n.interactionFrequency||10,r.mouse=new en,r.mouse.identifier=1,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[1]=r.mouse,r.interactionDataPool=[],r.eventData=new nn,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.tickerAdded=!1,r.mouseOverRenderer=!("PointerEvent"in globalThis),r.supportsTouchEvents="ontouchstart"in globalThis,r.supportsPointerEvents=!!globalThis.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:"inherit",pointer:"pointer"},r.currentCursorMode=null,r.cursor=null,r.resolution=1,r.delayedEvents=[],r.search=new on,r._tempDisplayObject=new Vt,r._eventListenerOptions={capture:!0,passive:!1},r._useSystemTicker=void 0===n.useSystemTicker||n.useSystemTicker,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}return function(e,t){function n(){this.constructor=e}tn(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(e){this._useSystemTicker=e,e?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(e,t){return sn.target=null,sn.data.global=e,t||(t=this.lastObjectRendered),this.processInteractive(sn,t,null,!0),sn.target},t.prototype.setTargetElement=function(e,t){void 0===t&&(t=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=e,this.resolution=t,this.addEvents(),this.addTickerListener()},t.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(Zt.system.add(this.tickerUpdate,this,qt.INTERACTION),this.tickerAdded=!0)},t.prototype.removeTickerListener=function(){this.tickerAdded&&(Zt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},t.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var e=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},t.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var e=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},t.prototype.tickerUpdate=function(e){this._deltaTime+=e,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},t.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var e in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var t=this.activeInteractionData[e];if(t.originalEvent&&"touch"!==t.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,t.originalEvent,t);this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(e){e=e||"default";var t=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(t=!1),this.currentCursorMode!==e){this.currentCursorMode=e;var n=this.cursorStyles[e];if(n)switch(typeof n){case"string":t&&(this.interactionDOMElement.style.cursor=n);break;case"function":n(e);break;case"object":t&&Object.assign(this.interactionDOMElement.style,n)}else t&&"string"==typeof e&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.interactionDOMElement.style.cursor=e)}},t.prototype.dispatchEvent=function(e,t,n){n.stopPropagationHint&&e!==n.stopsPropagatingAt||(n.currentTarget=e,n.type=t,e.emit(t,n),e[t]&&e[t](n))},t.prototype.delayDispatchEvent=function(e,t,n){this.delayedEvents.push({displayObject:e,eventString:t,eventData:n})},t.prototype.mapPositionToPoint=function(e,t,n){var r;r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var i=1/this.resolution;e.x=(t-r.left)*(this.interactionDOMElement.width/r.width)*i,e.y=(n-r.top)*(this.interactionDOMElement.height/r.height)*i},t.prototype.processInteractive=function(e,t,n,r){var i=this.search.findHit(e,t,n,r),o=this.delayedEvents;if(!o.length)return i;e.stopPropagationHint=!1;var a=o.length;this.delayedEvents=[];for(var s=0;s<a;s++){var l=o[s],u=l.displayObject,c=l.eventString,h=l.eventData;h.stopsPropagatingAt===u&&(h.stopPropagationHint=!0),this.dispatchEvent(u,c,h)}return i},t.prototype.onPointerDown=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(var n=t.length,r=0;r<n;r++){var i=t[r],o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);if(a.data.originalEvent=e,this.processInteractive(a,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",a),"touch"===i.pointerType)this.emit("touchstart",a);else if("mouse"===i.pointerType||"pen"===i.pointerType){var s=2===i.button;this.emit(s?"rightdown":"mousedown",this.eventData)}}}},t.prototype.processPointerDown=function(e,t,n){var r=e.data,i=e.data.identifier;if(n)if(t.trackedPointers[i]||(t.trackedPointers[i]=new rn(i)),this.dispatchEvent(t,"pointerdown",e),"touch"===r.pointerType)this.dispatchEvent(t,"touchstart",e);else if("mouse"===r.pointerType||"pen"===r.pointerType){var o=2===r.button;o?t.trackedPointers[i].rightDown=!0:t.trackedPointers[i].leftDown=!0,this.dispatchEvent(t,o?"rightdown":"mousedown",e)}},t.prototype.onPointerComplete=function(e,t,n){for(var r=this.normalizeToPointerData(e),i=r.length,o=e.target!==this.interactionDOMElement?"outside":"",a=0;a<i;a++){var s=r[a],l=this.getInteractionDataForPointerId(s),u=this.configureInteractionEventForDOMEvent(this.eventData,s,l);if(u.data.originalEvent=e,this.processInteractive(u,this.lastObjectRendered,n,t||!o),this.emit(t?"pointercancel":"pointerup"+o,u),"mouse"===s.pointerType||"pen"===s.pointerType){var c=2===s.button;this.emit(c?"rightup"+o:"mouseup"+o,u)}else"touch"===s.pointerType&&(this.emit(t?"touchcancel":"touchend"+o,u),this.releaseInteractionDataForPointerId(s.pointerId))}},t.prototype.onPointerCancel=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(e,t){var n=e.data,r=e.data.identifier;void 0!==t.trackedPointers[r]&&(delete t.trackedPointers[r],this.dispatchEvent(t,"pointercancel",e),"touch"===n.pointerType&&this.dispatchEvent(t,"touchcancel",e))},t.prototype.onPointerUp=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!1,this.processPointerUp)},t.prototype.processPointerUp=function(e,t,n){var r=e.data,i=e.data.identifier,o=t.trackedPointers[i],a="touch"===r.pointerType,s="mouse"===r.pointerType||"pen"===r.pointerType,l=!1;if(s){var u=2===r.button,c=rn.FLAGS,h=u?c.RIGHT_DOWN:c.LEFT_DOWN,d=void 0!==o&&o.flags&h;n?(this.dispatchEvent(t,u?"rightup":"mouseup",e),d&&(this.dispatchEvent(t,u?"rightclick":"click",e),l=!0)):d&&this.dispatchEvent(t,u?"rightupoutside":"mouseupoutside",e),o&&(u?o.rightDown=!1:o.leftDown=!1)}n?(this.dispatchEvent(t,"pointerup",e),a&&this.dispatchEvent(t,"touchend",e),o&&(s&&!l||this.dispatchEvent(t,"pointertap",e),a&&(this.dispatchEvent(t,"tap",e),o.over=!1))):o&&(this.dispatchEvent(t,"pointerupoutside",e),a&&this.dispatchEvent(t,"touchendoutside",e)),o&&o.none&&delete t.trackedPointers[i]},t.prototype.onPointerMove=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);"mouse"!==t[0].pointerType&&"pen"!==t[0].pointerType||(this._didMove=!0,this.cursor=null);for(var n=t.length,r=0;r<n;r++){var i=t[r],o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);a.data.originalEvent=e,this.processInteractive(a,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",a),"touch"===i.pointerType&&this.emit("touchmove",a),"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.emit("mousemove",a)}"mouse"===t[0].pointerType&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(e,t,n){var r=e.data,i="touch"===r.pointerType,o="mouse"===r.pointerType||"pen"===r.pointerType;o&&this.processPointerOverOut(e,t,n),this.moveWhenInside&&!n||(this.dispatchEvent(t,"pointermove",e),i&&this.dispatchEvent(t,"touchmove",e),o&&this.dispatchEvent(t,"mousemove",e))},t.prototype.onPointerOut=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e)[0];"mouse"===t.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(t),r=this.configureInteractionEventForDOMEvent(this.eventData,t,n);r.data.originalEvent=t,this.processInteractive(r,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===t.pointerType||"pen"===t.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(n.identifier)}},t.prototype.processPointerOverOut=function(e,t,n){var r=e.data,i=e.data.identifier,o="mouse"===r.pointerType||"pen"===r.pointerType,a=t.trackedPointers[i];n&&!a&&(a=t.trackedPointers[i]=new rn(i)),void 0!==a&&(n&&this.mouseOverRenderer?(a.over||(a.over=!0,this.delayDispatchEvent(t,"pointerover",e),o&&this.delayDispatchEvent(t,"mouseover",e)),o&&null===this.cursor&&(this.cursor=t.cursor)):a.over&&(a.over=!1,this.dispatchEvent(t,"pointerout",this.eventData),o&&this.dispatchEvent(t,"mouseout",e),a.none&&delete t.trackedPointers[i]))},t.prototype.onPointerOver=function(e){var t=this.normalizeToPointerData(e)[0],n=this.getInteractionDataForPointerId(t),r=this.configureInteractionEventForDOMEvent(this.eventData,t,n);r.data.originalEvent=t,"mouse"===t.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"!==t.pointerType&&"pen"!==t.pointerType||this.emit("mouseover",r)},t.prototype.getInteractionDataForPointerId=function(e){var t,n=e.pointerId;return 1===n||"mouse"===e.pointerType?t=this.mouse:this.activeInteractionData[n]?t=this.activeInteractionData[n]:((t=this.interactionDataPool.pop()||new en).identifier=n,this.activeInteractionData[n]=t),t.copyEvent(e),t},t.prototype.releaseInteractionDataForPointerId=function(e){var t=this.activeInteractionData[e];t&&(delete this.activeInteractionData[e],t.reset(),this.interactionDataPool.push(t))},t.prototype.configureInteractionEventForDOMEvent=function(e,t,n){return e.data=n,this.mapPositionToPoint(n.global,t.clientX,t.clientY),"touch"===t.pointerType&&(t.globalX=n.global.x,t.globalY=n.global.y),n.originalEvent=t,e.reset(),e},t.prototype.normalizeToPointerData=function(e){var t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(var n=0,r=e.changedTouches.length;n<r;n++){var i=e.changedTouches[n];void 0===i.button&&(i.button=e.touches.length?1:0),void 0===i.buttons&&(i.buttons=e.touches.length?1:0),void 0===i.isPrimary&&(i.isPrimary=1===e.touches.length&&"touchstart"===e.type),void 0===i.width&&(i.width=i.radiusX||1),void 0===i.height&&(i.height=i.radiusY||1),void 0===i.tiltX&&(i.tiltX=0),void 0===i.tiltY&&(i.tiltY=0),void 0===i.pointerType&&(i.pointerType="touch"),void 0===i.pointerId&&(i.pointerId=i.identifier||0),void 0===i.pressure&&(i.pressure=i.force||.5),void 0===i.twist&&(i.twist=0),void 0===i.tangentialPressure&&(i.tangentialPressure=0),void 0===i.layerX&&(i.layerX=i.offsetX=i.clientX),void 0===i.layerY&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,t.push(i)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&!(this.supportsPointerEvents&&e instanceof globalThis.PointerEvent)){var o=e;void 0===o.isPrimary&&(o.isPrimary=!0),void 0===o.width&&(o.width=1),void 0===o.height&&(o.height=1),void 0===o.tiltX&&(o.tiltX=0),void 0===o.tiltY&&(o.tiltY=0),void 0===o.pointerType&&(o.pointerType="mouse"),void 0===o.pointerId&&(o.pointerId=1),void 0===o.pressure&&(o.pressure=.5),void 0===o.twist&&(o.twist=0),void 0===o.tangentialPressure&&(o.tangentialPressure=0),o.isNormalized=!0,t.push(o)}else t.push(e);return t},t.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},t}(Te()),un=function(){function e(e){this.items=[],this._name=e,this._aliasCount=0}return e.prototype.emit=function(e,t,n,r,i,o,a,s){if(arguments.length>8)throw new Error("max arguments reached");var l=this,u=l.name,c=l.items;this._aliasCount++;for(var h=0,d=c.length;h<d;h++)c[h][u](e,t,n,r,i,o,a,s);return c===this.items&&this._aliasCount--,this},e.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},e.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},e.prototype.remove=function(e){var t=this.items.indexOf(e);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},e.prototype.contains=function(e){return-1!==this.items.indexOf(e)},e.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},e.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),e}();Object.defineProperties(un.prototype,{dispatch:{value:un.prototype.emit},run:{value:un.prototype.emit}}),Ee.PREFER_ENV=ne.any?re.WEBGL:re.WEBGL2,Ee.STRICT_TEXTURE_CACHE=!1;var cn=[];function hn(e,t){if(!e)return null;var n="";if("string"==typeof e){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);r&&(n=r[1].toLowerCase())}for(var i=cn.length-1;i>=0;--i){var o=cn[i];if(o.test&&o.test(e,n))return new o(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}var dn=function(e,t){return dn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},dn(e,t)};function fn(e,t){function n(){this.constructor=e}dn(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var pn=function(){return pn=Object.assign||function(e){for(var t,n=arguments,r=1,i=arguments.length;r<i;r++)for(var o in t=n[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},pn.apply(this,arguments)},yn=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new un("setRealSize"),this.onUpdate=new un("update"),this.onError=new un("onError")}return e.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},e.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},e.prototype.resize=function(e,t){e===this._width&&t===this._height||(this._width=e,this._height=t,this.onResize.emit(e,t))},Object.defineProperty(e.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),e.prototype.update=function(){this.destroyed||this.onUpdate.emit()},e.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e.prototype.style=function(e,t,n){return!1},e.prototype.dispose=function(){},e.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},e.test=function(e,t){return!1},e}(),mn=function(e){function t(t,n){var r=this,i=n||{},o=i.width,a=i.height;if(!o||!a)throw new Error("BufferResource width or height invalid");return(r=e.call(this,o,a)||this).data=t,r}return fn(t,e),t.prototype.upload=function(e,t,n){var r=e.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===ye.UNPACK);var i=t.realWidth,o=t.realHeight;return n.width===i&&n.height===o?r.texSubImage2D(t.target,0,0,0,i,o,t.format,n.type,this.data):(n.width=i,n.height=o,r.texImage2D(t.target,0,n.internalFormat,i,o,0,t.format,n.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},t}(yn),gn={scaleMode:de.NEAREST,format:le.RGBA,alphaMode:ye.NPM},vn=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var r=e.call(this)||this,i=(n=n||{}).alphaMode,o=n.mipmap,a=n.anisotropicLevel,s=n.scaleMode,l=n.width,u=n.height,c=n.wrapMode,h=n.format,d=n.type,f=n.target,p=n.resolution,y=n.resourceOptions;return!t||t instanceof yn||((t=hn(t,y)).internal=!0),r.resolution=p||Ee.RESOLUTION,r.width=Math.round((l||0)*r.resolution)/r.resolution,r.height=Math.round((u||0)*r.resolution)/r.resolution,r._mipmap=void 0!==o?o:Ee.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==a?a:Ee.ANISOTROPIC_LEVEL,r._wrapMode=c||Ee.WRAP_MODE,r._scaleMode=void 0!==s?s:Ee.SCALE_MODE,r.format=h||le.RGBA,r.type=d||ce.UNSIGNED_BYTE,r.target=f||ue.TEXTURE_2D,r.alphaMode=void 0!==i?i:ye.UNPACK,r.uid=Ve(),r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=l>0&&u>0,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(t),r}return fn(t,e),Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(e,t){var n;return void 0!==e&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),void 0!==t&&t!==this.mipmap&&(this.mipmap=t,n=!0),n&&this.dirtyStyleId++,this},t.prototype.setSize=function(e,t,n){return n=n||this.resolution,this.setRealSize(e*n,t*n,n)},t.prototype.setRealSize=function(e,t,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=je(this.realWidth)&&je(this.realHeight)},t.prototype.setResolution=function(e){var t=this.resolution;return t===e||(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT()),this},t.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(e){this.emit("error",this,e)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Ze[this.cacheId],delete Qe[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(e,n,r){void 0===r&&(r=Ee.STRICT_TEXTURE_CACHE);var i="string"==typeof e,o=null;if(i)o=e;else{if(!e._pixiId){var a=n&&n.pixiIdPrefix||"pixiid";e._pixiId=a+"_"+Ve()}o=e._pixiId}var s=Ze[o];if(i&&r&&!s)throw new Error('The cacheId "'+o+'" does not exist in BaseTextureCache.');return s||((s=new t(e,n)).cacheId=o,t.addToCache(s,o)),s},t.fromBuffer=function(e,n,r,i){e=e||new Float32Array(n*r*4);var o=new mn(e,{width:n,height:r}),a=e instanceof Float32Array?ce.FLOAT:ce.UNSIGNED_BYTE;return new t(o,Object.assign(gn,i||{width:n,height:r,type:a}))},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),Ze[t]&&console.warn("BaseTexture added to the cache with an id ["+t+"] that already had an entry"),Ze[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=Ze[e];if(t){var n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete Ze[e],t}}else if(e&&e.textureCacheIds){for(var r=0;r<e.textureCacheIds.length;++r)delete Ze[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null},t._globalBatch=0,t}(Te()),_n=function(e){function t(t,n){var r=this,i=n||{},o=i.width,a=i.height;(r=e.call(this,o,a)||this).items=[],r.itemDirtyIds=[];for(var s=0;s<t;s++){var l=new vn;r.items.push(l),r.itemDirtyIds.push(-2)}return r.length=t,r._load=null,r.baseTexture=null,r}return fn(t,e),t.prototype.initFromArray=function(e,t){for(var n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof yn?this.addResourceAt(e[n],n):this.addResourceAt(hn(e[n],t),n))},t.prototype.dispose=function(){for(var e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(e,t){if(!this.items[t])throw new Error("Index "+t+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this},t.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");e.prototype.bind.call(this,t);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=t,this.items[n].on("update",t.update,t)},t.prototype.unbind=function(t){e.prototype.unbind.call(this,t);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",t.update,t)},t.prototype.load=function(){var e=this;if(this._load)return this._load;var t=this.items.map((function(e){return e.resource})).filter((function(e){return e})).map((function(e){return e.load()}));return this._load=Promise.all(t).then((function(){var t=e.items[0],n=t.realWidth,r=t.realHeight;return e.resize(n,r),Promise.resolve(e)})),this._load},t}(yn),bn=function(e){function t(t,n){var r,i,o=this,a=n||{},s=a.width,l=a.height;return Array.isArray(t)?(r=t,i=t.length):i=t,o=e.call(this,i,{width:s,height:l})||this,r&&o.initFromArray(r,n),o}return fn(t,e),t.prototype.addBaseTextureAt=function(e,t){if(!e.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(e.resource,t),this},t.prototype.bind=function(t){e.prototype.bind.call(this,t),t.target=ue.TEXTURE_2D_ARRAY},t.prototype.upload=function(e,t,n){var r=this,i=r.length,o=r.itemDirtyIds,a=r.items,s=e.gl;n.dirtyId<0&&s.texImage3D(s.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,i,0,t.format,n.type,null);for(var l=0;l<i;l++){var u=a[l];o[l]<u.dirtyId&&(o[l]=u.dirtyId,u.valid&&s.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,l,u.resource.width,u.resource.height,1,t.format,n.type,u.resource.source))}return!0},t}(_n),xn=function(e){function t(t){var n=this,r=t,i=r.naturalWidth||r.videoWidth||r.width,o=r.naturalHeight||r.videoHeight||r.height;return(n=e.call(this,i,o)||this).source=t,n.noSubImage=!1,n}return fn(t,e),t.crossOrigin=function(e,t,n){void 0===n&&0!==t.indexOf("data:")?e.crossOrigin=function(e,t){if(void 0===t&&(t=globalThis.location),0===e.indexOf("data:"))return"";t=t||globalThis.location,qe||(qe=document.createElement("a")),qe.href=e;var n=Oe.parse(qe.href),r=!n.port&&""===t.port||n.port===t.port;return n.hostname===t.hostname&&r&&n.protocol===t.protocol?"":"anonymous"}(t):!1!==n&&(e.crossOrigin="string"==typeof n?n:"anonymous")},t.prototype.upload=function(e,t,n,r){var i=e.gl,o=t.realWidth,a=t.realHeight;if((r=r||this.source)instanceof HTMLImageElement){if(!r.complete||0===r.naturalWidth)return!1}else if(r instanceof HTMLVideoElement&&r.readyState<=1)return!1;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===ye.UNPACK),this.noSubImage||t.target!==i.TEXTURE_2D||n.width!==o||n.height!==a?(n.width=o,n.height=a,i.texImage2D(t.target,0,n.internalFormat,t.format,n.type,r)):i.texSubImage2D(i.TEXTURE_2D,0,0,0,t.format,n.type,r),!0},t.prototype.update=function(){if(!this.destroyed){var t=this.source,n=t.naturalWidth||t.videoWidth||t.width,r=t.naturalHeight||t.videoHeight||t.height;this.resize(n,r),e.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(yn),En=function(e){function t(t){return e.call(this,t)||this}return fn(t,e),t.test=function(e){var t=globalThis.OffscreenCanvas;return!!(t&&e instanceof t)||globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement},t}(xn),Sn=function(e){function t(n,r){var i=this,o=r||{},a=o.width,s=o.height,l=o.autoLoad,u=o.linkBaseTexture;if(n&&n.length!==t.SIDES)throw new Error("Invalid length. Got "+n.length+", expected 6");i=e.call(this,6,{width:a,height:s})||this;for(var c=0;c<t.SIDES;c++)i.items[c].target=ue.TEXTURE_CUBE_MAP_POSITIVE_X+c;return i.linkBaseTexture=!1!==u,n&&i.initFromArray(n,r),!1!==l&&i.load(),i}return fn(t,e),t.prototype.bind=function(t){e.prototype.bind.call(this,t),t.target=ue.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(e,t,n){if(!this.items[t])throw new Error("Index "+t+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0){if(!e.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(e.resource,t)}else e.target=ue.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this},t.prototype.upload=function(e,n,r){for(var i=this.itemDirtyIds,o=0;o<t.SIDES;o++){var a=this.items[o];i[o]<a.dirtyId&&(a.valid&&a.resource?(a.resource.upload(e,a,r),i[o]=a.dirtyId):i[o]<-1&&(e.gl.texImage2D(a.target,0,r.internalFormat,n.realWidth,n.realHeight,0,n.format,r.type,null),i[o]=-1))}return!0},t.test=function(e){return Array.isArray(e)&&e.length===t.SIDES},t.SIDES=6,t}(_n),Tn=function(e){function t(t,n){var r=this;if(n=n||{},!(t instanceof HTMLImageElement)){var i=new Image;xn.crossOrigin(i,t,n.crossorigin),i.src=t,t=i}return r=e.call(this,t)||this,!t.complete&&r._width&&r._height&&(r._width=0,r._height=0),r.url=t.src,r._process=null,r.preserveBitmap=!1,r.createBitmap=(void 0!==n.createBitmap?n.createBitmap:Ee.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,r.alphaMode="number"==typeof n.alphaMode?n.alphaMode:null,r.bitmap=null,r._load=null,!1!==n.autoLoad&&r.load(),r}return fn(t,e),t.prototype.load=function(e){var t=this;return this._load||(void 0!==e&&(this.createBitmap=e),this._load=new Promise((function(e,n){var r=t.source;t.url=r.src;var i=function(){t.destroyed||(r.onload=null,r.onerror=null,t.resize(r.width,r.height),t._load=null,t.createBitmap?e(t.process()):e(t))};r.complete&&r.src?i():(r.onload=i,r.onerror=function(e){n(e),t.onError.emit(e)})}))),this._load},t.prototype.process=function(){var e=this,t=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);var n=globalThis.createImageBitmap,r=!t.crossOrigin||"anonymous"===t.crossOrigin;return this._process=fetch(t.src,{mode:r?"cors":"no-cors"}).then((function(e){return e.blob()})).then((function(r){return n(r,0,0,t.width,t.height,{premultiplyAlpha:e.alphaMode===ye.UNPACK?"premultiply":"none"})})).then((function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))})),this._process},t.prototype.upload=function(t,n,r){if("number"==typeof this.alphaMode&&(n.alphaMode=this.alphaMode),!this.createBitmap)return e.prototype.upload.call(this,t,n,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(e.prototype.upload.call(this,t,n,r,this.bitmap),!this.preserveBitmap){var i=!0,o=n._glTextures;for(var a in o){var s=o[a];if(s!==r&&s.dirtyId!==n.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,e.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(e){return"string"==typeof e||e instanceof HTMLImageElement},t}(xn),wn=function(e){function t(t,n){var r=this;return n=n||{},(r=e.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=t,r.scale=n.scale||1,r._overrideWidth=n.width,r._overrideHeight=n.height,r._resolve=null,r._crossorigin=n.crossorigin,r._load=null,!1!==n.autoLoad&&r.load(),r}return fn(t,e),t.prototype.load=function(){var e=this;return this._load||(this._load=new Promise((function(n){if(e._resolve=function(){e.resize(e.source.width,e.source.height),n(e)},t.SVG_XML.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}))),this._load},t.prototype._loadSvg=function(){var e=this,t=new Image;xn.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=function(n){e._resolve&&(t.onerror=null,e.onError.emit(n))},t.onload=function(){if(e._resolve){var n=t.width,r=t.height;if(!n||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var i=n*e.scale,o=r*e.scale;(e._overrideWidth||e._overrideHeight)&&(i=e._overrideWidth||e._overrideHeight/r*n,o=e._overrideHeight||e._overrideWidth/n*r),i=Math.round(i),o=Math.round(o);var a=e.source;a.width=i,a.height=o,a._pixiId="canvas_"+Ve(),a.getContext("2d").drawImage(t,0,0,n,r,0,0,i,o),e._resolve(),e._resolve=null}}},t.getSize=function(e){var n=t.SVG_SIZE.exec(e),r={};return n&&(r[n[1]]=Math.round(parseFloat(n[3])),r[n[5]]=Math.round(parseFloat(n[7]))),r},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(e,n){return"svg"===n||"string"==typeof e&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(e)||"string"==typeof e&&t.SVG_XML.test(e)},t.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(xn),An=function(e){function t(n,r){var i=this;if(r=r||{},!(n instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),"string"==typeof n&&(n=[n]);var a=n[0].src||n[0];xn.crossOrigin(o,a,r.crossorigin);for(var s=0;s<n.length;++s){var l=document.createElement("source"),u=n[s],c=u.src,h=u.mime,d=(c=c||n[s]).split("?").shift().toLowerCase(),f=d.slice(d.lastIndexOf(".")+1);h=h||t.MIME_TYPES[f]||"video/"+f,l.src=c,l.type=h,o.appendChild(l)}n=o}return(i=e.call(this,n)||this).noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=r.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=!1!==r.autoPlay,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),!1!==r.autoLoad&&i.load(),i}return fn(t,e),t.prototype.update=function(t){if(!this.destroyed){var n=Zt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(e.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var e=this;if(this._load)return this._load;var t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise((function(n){e.valid?n(e):(e._resolve=n,t.load())})),this._load},t.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&!1===e.paused&&!1===e.ended&&e.readyState>2},t.prototype._isSourceReady=function(){var e=this.source;return 3===e.readyState||4===e.readyState},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Zt.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Zt.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var t=this.valid;this.resize(e.videoWidth,e.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&(Zt.shared.remove(this.update,this),this._isConnectedToTicker=!1);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Zt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Zt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),t.test=function(e,n){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||t.TYPES.indexOf(n)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(xn),Pn=function(e){function t(t){return e.call(this,t)||this}return fn(t,e),t.test=function(e){return!!globalThis.createImageBitmap&&e instanceof ImageBitmap},t}(xn);cn.push(Tn,Pn,En,An,wn,mn,Sn,bn);var On={__proto__:null,Resource:yn,BaseImageResource:xn,INSTALLED:cn,autoDetectResource:hn,AbstractMultiResource:_n,ArrayResource:bn,BufferResource:mn,CanvasResource:En,CubeResource:Sn,ImageResource:Tn,SVGResource:wn,VideoResource:An,ImageBitmapResource:Pn},Rn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fn(t,e),t.prototype.upload=function(e,t,n){var r=e.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===ye.UNPACK);var i=t.realWidth,o=t.realHeight;return n.width===i&&n.height===o?r.texSubImage2D(t.target,0,0,0,i,o,t.format,n.type,this.data):(n.width=i,n.height=o,r.texImage2D(t.target,0,n.internalFormat,i,o,0,t.format,n.type,this.data)),!0},t}(mn),Cn=function(){function e(e,t){this.width=Math.round(e||100),this.height=Math.round(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new un("disposeFramebuffer"),this.multisample=be.NONE}return Object.defineProperty(e.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),e.prototype.addColorTexture=function(e,t){return void 0===e&&(e=0),this.colorTextures[e]=t||new vn(null,{scaleMode:de.NEAREST,resolution:1,mipmap:pe.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.addDepthTexture=function(e){return this.depthTexture=e||new vn(new Rn(null,{width:this.width,height:this.height}),{scaleMode:de.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:pe.OFF,format:le.DEPTH_COMPONENT,type:ce.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.resize=function(e,t){if(e=Math.round(e),t=Math.round(t),e!==this.width||t!==this.height){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var r=this.colorTextures[n],i=r.resolution;r.setSize(e/i,t/i)}this.depthTexture&&(i=this.depthTexture.resolution,this.depthTexture.setSize(e/i,t/i))}},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},e}(),In=function(e){function t(t){void 0===t&&(t={});var n=this;if("number"==typeof t){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3];t={width:r,height:i,scaleMode:o,resolution:a}}return t.width=t.width||100,t.height=t.height||100,t.multisample=void 0!==t.multisample?t.multisample:be.NONE,(n=e.call(this,null,t)||this).mipmap=pe.OFF,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new Cn(n.realWidth,n.realHeight).addColorTexture(0,n),n.framebuffer.multisample=t.multisample,n.maskStack=[],n.filterStack=[{}],n}return fn(t,e),t.prototype.resize=function(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},t.prototype.dispose=function(){this.framebuffer.dispose(),e.prototype.dispose.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(vn),Nn=function(){function e(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return e.prototype.set=function(e,t,n){var r=t.width,i=t.height;if(n){var o=e.width/2/r,a=e.height/2/i,s=e.x/r+o,l=e.y/i+a;n=xt.add(n,xt.NW),this.x0=s+o*xt.uX(n),this.y0=l+a*xt.uY(n),n=xt.add(n,2),this.x1=s+o*xt.uX(n),this.y1=l+a*xt.uY(n),n=xt.add(n,2),this.x2=s+o*xt.uX(n),this.y2=l+a*xt.uY(n),n=xt.add(n,2),this.x3=s+o*xt.uX(n),this.y3=l+a*xt.uY(n)}else this.x0=e.x/r,this.y0=e.y/i,this.x1=(e.x+e.width)/r,this.y1=e.y/i,this.x2=(e.x+e.width)/r,this.y2=(e.y+e.height)/i,this.x3=e.x/r,this.y3=(e.y+e.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},e.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},e}(),Mn=new Nn;function kn(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}var Dn=function(e){function t(n,r,i,o,a,s){var l=e.call(this)||this;if(l.noFrame=!1,r||(l.noFrame=!0,r=new st(0,0,1,1)),n instanceof t&&(n=n.baseTexture),l.baseTexture=n,l._frame=r,l.trim=o,l.valid=!1,l._uvs=Mn,l.uvMatrix=null,l.orig=i||r,l._rotate=Number(a||0),!0===a)l._rotate=2;else if(l._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return l.defaultAnchor=s?new ot(s.x,s.y):new ot(0,0),l._updateID=0,l.textureCacheIds=[],n.valid?l.noFrame?n.valid&&l.onBaseTextureUpdated(n):l.frame=r:n.once("loaded",l.onBaseTextureUpdated,l),l.noFrame&&n.on("update",l.onBaseTextureUpdated,l),l}return fn(t,e),t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(e){if(this.baseTexture){if(e){var n=this.baseTexture.resource;n&&n.url&&Qe[n.url]&&t.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){var e=this._frame.clone(),n=this._frame===this.orig?e:this.orig.clone(),r=new t(this.baseTexture,!this.noFrame&&e,n,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(r._frame=e),r},t.prototype.updateUvs=function(){this._uvs===Mn&&(this._uvs=new Nn),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(e,n,r){void 0===n&&(n={}),void 0===r&&(r=Ee.STRICT_TEXTURE_CACHE);var i="string"==typeof e,o=null;if(i)o=e;else if(e instanceof vn){if(!e.cacheId){var a=n&&n.pixiIdPrefix||"pixiid";e.cacheId=a+"-"+Ve(),vn.addToCache(e,e.cacheId)}o=e.cacheId}else e._pixiId||(a=n&&n.pixiIdPrefix||"pixiid",e._pixiId=a+"_"+Ve()),o=e._pixiId;var s=Qe[o];if(i&&r&&!s)throw new Error('The cacheId "'+o+'" does not exist in TextureCache.');return s||e instanceof vn?!s&&e instanceof vn&&(s=new t(e),t.addToCache(s,o)):(n.resolution||(n.resolution=et(e)),(s=new t(new vn(e,n))).baseTexture.cacheId=o,vn.addToCache(s.baseTexture,o),t.addToCache(s,o)),s},t.fromURL=function(e,n){var r=Object.assign({autoLoad:!1},null==n?void 0:n.resourceOptions),i=t.from(e,Object.assign({resourceOptions:r},n),!1),o=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):o.load().then((function(){return Promise.resolve(i)}))},t.fromBuffer=function(e,n,r,i){return new t(vn.fromBuffer(e,n,r,i))},t.fromLoader=function(e,n,r,i){var o=new vn(e,Object.assign({scaleMode:Ee.SCALE_MODE,resolution:et(n)},i)),a=o.resource;a instanceof Tn&&(a.url=n);var s=new t(o);return r||(r=n),vn.addToCache(s.baseTexture,r),t.addToCache(s,r),r!==n&&(vn.addToCache(s.baseTexture,n),t.addToCache(s,n)),s.baseTexture.valid?Promise.resolve(s):new Promise((function(e){s.baseTexture.once("loaded",(function(){return e(s)}))}))},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),Qe[t]&&console.warn("Texture added to the cache with an id ["+t+"] that already had an entry"),Qe[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=Qe[e];if(t){var n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete Qe[e],t}}else if(e&&e.textureCacheIds){for(var r=0;r<e.textureCacheIds.length;++r)Qe[e.textureCacheIds[r]]===e&&delete Qe[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var t=e.x,n=e.y,r=e.width,i=e.height,o=t+r>this.baseTexture.width,a=n+i>this.baseTexture.height;if(o||a){var s=o&&a?"and":"or",l="X: "+t+" + "+r+" = "+(t+r)+" > "+this.baseTexture.width,u="Y: "+n+" + "+i+" = "+(n+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+l+" "+s+" "+u)}this.valid=r&&i&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(t,"EMPTY",{get:function(){return t._EMPTY||(t._EMPTY=new t(new vn),kn(t._EMPTY),kn(t._EMPTY.baseTexture)),t._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(t,"WHITE",{get:function(){if(!t._WHITE){var e=document.createElement("canvas"),n=e.getContext("2d");e.width=16,e.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),t._WHITE=new t(new vn(new En(e))),kn(t._WHITE),kn(t._WHITE.baseTexture)}return t._WHITE},enumerable:!1,configurable:!0}),t}(Te()),Ln=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.valid=!0,r.filterFrame=null,r.filterPoolKey=null,r.updateUvs(),r}return fn(t,e),Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(e){this.framebuffer.multisample=e},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,t,n){void 0===n&&(n=!0);var r=this.baseTexture.resolution,i=Math.round(e*r)/r,o=Math.round(t*r)/r;this.valid=i>0&&o>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(i,o),this.updateUvs()},t.prototype.setResolution=function(e){var t=this.baseTexture;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))},t.create=function(e){for(var n=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=n[i];return"number"==typeof e&&(We("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),e={width:e,height:r[0],scaleMode:r[1],resolution:r[2]}),new t(new In(e))},t}(Dn),Fn=function(){function e(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return e.prototype.createTexture=function(e,t,n){void 0===n&&(n=be.NONE);var r=new In(Object.assign({width:e,height:t,resolution:1,multisample:n},this.textureOptions));return new Ln(r)},e.prototype.getOptimalTexture=function(e,t,n,r){var i;void 0===n&&(n=1),void 0===r&&(r=be.NONE),e=Math.ceil(e*n-1e-6),t=Math.ceil(t*n-1e-6),this.enableFullScreen&&e===this._pixelsWidth&&t===this._pixelsHeight?i=r>1?-r:-1:(i=((65535&(e=Ge(e)))<<16|65535&(t=Ge(t)))>>>0,r>1&&(i+=4294967296*r)),this.texturePool[i]||(this.texturePool[i]=[]);var o=this.texturePool[i].pop();return o||(o=this.createTexture(e,t,r)),o.filterPoolKey=i,o.setResolution(n),o},e.prototype.getFilterTexture=function(e,t,n){var r=this.getOptimalTexture(e.width,e.height,t||e.resolution,n||be.NONE);return r.filterFrame=e.filterFrame,r},e.prototype.returnTexture=function(e){var t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)},e.prototype.returnFilterTexture=function(e){this.returnTexture(e)},e.prototype.clear=function(e){if(e=!1!==e)for(var t in this.texturePool){var n=this.texturePool[t];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0)}this.texturePool={}},e.prototype.setScreenSize=function(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){for(var t in this.enableFullScreen=e.width>0&&e.height>0,this.texturePool)if(Number(t)<0){var n=this.texturePool[t];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}},e.SCREEN_KEY=-1,e}(),Un=function(){function e(e,t,n,r,i,o,a){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=ce.FLOAT),this.buffer=e,this.size=t,this.normalized=n,this.type=r,this.stride=i,this.start=o,this.instance=a}return e.prototype.destroy=function(){this.buffer=null},e.from=function(t,n,r,i,o){return new e(t,n,r,i,o)},e}(),Bn=0,Gn=function(){function e(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=t,this.id=Bn++,this.disposeRunner=new un("disposeBuffer")}return e.prototype.update=function(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(e.prototype,"index",{get:function(){return this.type===xe.ELEMENT_ARRAY_BUFFER},set:function(e){this.type=e?xe.ELEMENT_ARRAY_BUFFER:xe.ARRAY_BUFFER},enumerable:!1,configurable:!0}),e.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new e(t)},e}(),jn={Float32Array,Uint32Array,Int32Array,Uint8Array},$n={5126:4,5123:2,5121:1},zn=0,Xn={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Hn=function(){function e(e,t){void 0===e&&(e=[]),void 0===t&&(t={}),this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=zn++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new un("disposeGeometry"),this.refCount=0}return e.prototype.addAttribute=function(e,t,n,r,i,o,a,s){if(void 0===n&&(n=0),void 0===r&&(r=!1),void 0===s&&(s=!1),!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof Gn||(t instanceof Array&&(t=new Float32Array(t)),t=new Gn(t));var l=e.split("|");if(l.length>1){for(var u=0;u<l.length;u++)this.addAttribute(l[u],t,n,r,i);return this}var c=this.buffers.indexOf(t);return-1===c&&(this.buffers.push(t),c=this.buffers.length-1),this.attributes[e]=new Un(c,n,r,i,o,a,s),this.instanced=this.instanced||s,this},e.prototype.getAttribute=function(e){return this.attributes[e]},e.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},e.prototype.addIndex=function(e){return e instanceof Gn||(e instanceof Array&&(e=new Uint16Array(e)),e=new Gn(e)),e.type=xe.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,-1===this.buffers.indexOf(e)&&this.buffers.push(e),this},e.prototype.getIndex=function(){return this.indexBuffer},e.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var e,t=[],n=[],r=new Gn;for(e in this.attributes){var i=this.attributes[e],o=this.buffers[i.buffer];t.push(o.data),n.push(i.size*$n[i.type]/4),i.buffer=0}for(r.data=function(e,t){for(var n=0,r=0,i={},o=0;o<e.length;o++)r+=t[o],n+=e[o].length;var a=new ArrayBuffer(4*n),s=null,l=0;for(o=0;o<e.length;o++){var u=t[o],c=e[o],h=Be(c);i[h]||(i[h]=new jn[h](a)),s=i[h];for(var d=0;d<c.length;d++)s[(d/u|0)*r+l+d%u]=c[d];l+=u}return new Float32Array(a)}(t,n),e=0;e<this.buffers.length;e++)this.buffers[e]!==this.indexBuffer&&this.buffers[e].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},e.prototype.getSize=function(){for(var e in this.attributes){var t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},e.prototype.clone=function(){for(var t=new e,n=0;n<this.buffers.length;n++)t.buffers[n]=new Gn(this.buffers[n].data.slice(0));for(var n in this.attributes){var r=this.attributes[n];t.attributes[n]=new Un(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=xe.ELEMENT_ARRAY_BUFFER),t},e.merge=function(t){for(var n,r=new e,i=[],o=[],a=[],s=0;s<t.length;s++){n=t[s];for(var l=0;l<n.buffers.length;l++)o[l]=o[l]||0,o[l]+=n.buffers[l].data.length,a[l]=0}for(s=0;s<n.buffers.length;s++)i[s]=new(Xn[Be(n.buffers[s].data)])(o[s]),r.buffers[s]=new Gn(i[s]);for(s=0;s<t.length;s++)for(n=t[s],l=0;l<n.buffers.length;l++)i[l].set(n.buffers[l].data,a[l]),a[l]+=n.buffers[l].data.length;if(r.attributes=n.attributes,n.indexBuffer){r.indexBuffer=r.buffers[n.buffers.indexOf(n.indexBuffer)],r.indexBuffer.type=xe.ELEMENT_ARRAY_BUFFER;var u=0,c=0,h=0,d=0;for(s=0;s<n.buffers.length;s++)if(n.buffers[s]!==n.indexBuffer){d=s;break}for(var s in n.attributes){var f=n.attributes[s];(0|f.buffer)===d&&(c+=f.size*$n[f.type]/4)}for(s=0;s<t.length;s++){var p=t[s].indexBuffer.data;for(l=0;l<p.length;l++)r.indexBuffer.data[l+h]+=u;u+=t[s].buffers[d].data.length/c,h+=p.length}}return r},e}(),Vn=function(e){function t(){var t=e.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}return fn(t,e),t}(Hn),Yn=function(e){function t(){var t=e.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new Gn(t.vertices),t.uvBuffer=new Gn(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}return fn(t,e),t.prototype.map=function(e,t){var n=0,r=0;return this.uvs[0]=n,this.uvs[1]=r,this.uvs[2]=n+t.width/e.width,this.uvs[3]=r,this.uvs[4]=n+t.width/e.width,this.uvs[5]=r+t.height/e.height,this.uvs[6]=n,this.uvs[7]=r+t.height/e.height,n=t.x,r=t.y,this.vertices[0]=n,this.vertices[1]=r,this.vertices[2]=n+t.width,this.vertices[3]=r,this.vertices[4]=n+t.width,this.vertices[5]=r+t.height,this.vertices[6]=n,this.vertices[7]=r+t.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(Hn),Wn=0,qn=function(){function e(e,t,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Wn++,this.static=!!t,this.ubo=!!n,e instanceof Gn?(this.buffer=e,this.buffer.type=xe.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new Gn(new Float32Array(1)),this.buffer.type=xe.UNIFORM_BUFFER,this.autoManage=!0))}return e.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},e.prototype.add=function(t,n,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[t]=new e(n,r)},e.from=function(t,n,r){return new e(t,n,r)},e.uboFrom=function(t,n){return new e(t,null==n||n,!0)},e}(),Kn=function(){function e(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=be.NONE,this.sourceFrame=new st,this.destinationFrame=new st,this.bindingSourceFrame=new st,this.bindingDestinationFrame=new st,this.filters=[],this.transform=null}return e.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},e}(),Qn=[new ot,new ot,new ot,new ot],Zn=new ft,Jn=function(){function e(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new Fn,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new Vn,this.quadUv=new Yn,this.tempRect=new st,this.activeState={},this.globalUniforms=new qn({outputFrame:new st,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return e.prototype.push=function(e,t){for(var n,r,i=this.renderer,o=this.defaultFilterStack,a=this.statePool.pop()||new Kn,s=this.renderer.renderTexture,l=t[0].resolution,u=t[0].multisample,c=t[0].padding,h=t[0].autoFit,d=null===(n=t[0].legacy)||void 0===n||n,f=1;f<t.length;f++){var p=t[f];l=Math.min(l,p.resolution),u=Math.min(u,p.multisample),c=this.useMaxPadding?Math.max(c,p.padding):c+p.padding,h=h&&p.autoFit,d=d||null===(r=p.legacy)||void 0===r||r}1===o.length&&(this.defaultFilterStack[0].renderTexture=s.current),o.push(a),a.resolution=l,a.multisample=u,a.legacy=d,a.target=e,a.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),a.sourceFrame.pad(c);var y=this.tempRect.copyFrom(s.sourceFrame);i.projection.transform&&this.transformAABB(Zn.copyFrom(i.projection.transform).invert(),y),h?(a.sourceFrame.fit(y),(a.sourceFrame.width<=0||a.sourceFrame.height<=0)&&(a.sourceFrame.width=0,a.sourceFrame.height=0)):a.sourceFrame.intersects(y)||(a.sourceFrame.width=0,a.sourceFrame.height=0),this.roundFrame(a.sourceFrame,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,l,u),a.filters=t,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;var m=this.tempRect;m.x=0,m.y=0,m.width=a.sourceFrame.width,m.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,a.bindingSourceFrame.copyFrom(s.sourceFrame),a.bindingDestinationFrame.copyFrom(s.destinationFrame),a.transform=i.projection.transform,i.projection.transform=null,s.bind(a.renderTexture,a.sourceFrame,m),i.framebuffer.clear(0,0,0,0)},e.prototype.pop=function(){var e=this.defaultFilterStack,t=e.pop(),n=t.filters;this.activeState=t;var r=this.globalUniforms.uniforms;r.outputFrame=t.sourceFrame,r.resolution=t.resolution;var i=r.inputSize,o=r.inputPixel,a=r.inputClamp;if(i[0]=t.destinationFrame.width,i[1]=t.destinationFrame.height,i[2]=1/i[0],i[3]=1/i[1],o[0]=Math.round(i[0]*t.resolution),o[1]=Math.round(i[1]*t.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=t.sourceFrame.width*i[2]-.5*o[2],a[3]=t.sourceFrame.height*i[3]-.5*o[3],t.legacy){var s=r.filterArea;s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=t.sourceFrame.x,s[3]=t.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();var l=e[e.length-1];if(this.renderer.framebuffer.blit(),1===n.length)n[0].apply(this,t.renderTexture,l.renderTexture,me.BLEND,t),this.returnFilterTexture(t.renderTexture);else{var u=t.renderTexture,c=this.getOptimalFilterTexture(u.width,u.height,t.resolution);c.filterFrame=u.filterFrame;var h=0;for(h=0;h<n.length-1;++h){1===h&&t.multisample>1&&((c=this.getOptimalFilterTexture(u.width,u.height,t.resolution)).filterFrame=u.filterFrame),n[h].apply(this,u,c,me.CLEAR,t);var d=u;u=c,c=d}n[h].apply(this,u,l.renderTexture,me.BLEND,t),h>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(c)}t.clear(),this.statePool.push(t)},e.prototype.bindAndClear=function(e,t){void 0===t&&(t=me.CLEAR);var n=this.renderer,r=n.renderTexture,i=n.state;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e&&e.filterFrame){var o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,r.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var a=1&i.stateId||this.forceClear;(t===me.CLEAR||t===me.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)},e.prototype.applyFilter=function(e,t,n,r){var i=this.renderer;i.state.set(e.state),this.bindAndClear(n,r),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,i.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),i.geometry.bind(this.quadUv),i.geometry.draw(se.TRIANGLES)):(i.geometry.bind(this.quad),i.geometry.draw(se.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(e,t){var n=this.activeState,r=n.sourceFrame,i=n.destinationFrame,o=t._texture.orig,a=e.set(i.width,0,0,i.height,r.x,r.y),s=t.worldTransform.copyTo(ft.TEMP_MATRIX);return s.invert(),a.prepend(s),a.scale(1/o.width,1/o.height),a.translate(t.anchor.x,t.anchor.y),a},e.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(e,t,n,r){return void 0===n&&(n=1),void 0===r&&(r=be.NONE),this.texturePool.getOptimalTexture(e,t,n,r)},e.prototype.getFilterTexture=function(e,t,n){if("number"==typeof e){var r=e;e=t,t=r}e=e||this.activeState.renderTexture;var i=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,n||be.NONE);return i.filterFrame=e.filterFrame,i},e.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e.prototype.transformAABB=function(e,t){var n=Qn[0],r=Qn[1],i=Qn[2],o=Qn[3];n.set(t.left,t.top),r.set(t.left,t.bottom),i.set(t.right,t.top),o.set(t.right,t.bottom),e.apply(n,n),e.apply(r,r),e.apply(i,i),e.apply(o,o);var a=Math.min(n.x,r.x,i.x,o.x),s=Math.min(n.y,r.y,i.y,o.y),l=Math.max(n.x,r.x,i.x,o.x),u=Math.max(n.y,r.y,i.y,o.y);t.x=a,t.y=s,t.width=l-a,t.height=u-s},e.prototype.roundFrame=function(e,t,n,r,i){if(!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)){if(i){var o=i.a,a=i.b,s=i.c,l=i.d;if((Math.abs(a)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(l)>1e-4))return}(i=i?Zn.copyFrom(i):Zn.identity()).translate(-n.x,-n.y).scale(r.width/n.width,r.height/n.height).translate(r.x,r.y),this.transformAABB(i,e),e.ceil(t),this.transformAABB(i.invert(),e)}},e}(),er=function(){function e(e){this.renderer=e}return e.prototype.flush=function(){},e.prototype.destroy=function(){this.renderer=null},e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.render=function(e){},e}(),tr=function(){function e(e){this.renderer=e,this.emptyRenderer=new er(e),this.currentRenderer=this.emptyRenderer}return e.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(e,t){for(var n=this.renderer.texture.boundTextures,r=t-1;r>=0;--r)e[r]=n[r]||null,e[r]&&(e[r]._batchLocation=r)},e.prototype.boundArray=function(e,t,n,r){for(var i=e.elements,o=e.ids,a=e.count,s=0,l=0;l<a;l++){var u=i[l],c=u._batchLocation;if(c>=0&&c<r&&t[c]===u)o[l]=c;else for(;s<r;){var h=t[s];if(!h||h._batchEnabled!==n||h._batchLocation!==s){o[l]=s,u._batchLocation=s,t[s]=u;break}s++}}},e.prototype.destroy=function(){this.renderer=null},e}(),nr=0,rr=function(){function e(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(e.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),e.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=nr++,e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=nr++,this.renderer.runners.contextChange.emit(e)},e.prototype.initFromOptions=function(e){var t=this.createContext(this.renderer.view,e);this.initFromContext(t)},e.prototype.createContext=function(e,t){var n;if(Ee.PREFER_ENV>=re.WEBGL2&&(n=e.getContext("webgl2",t)),n)this.webGLVersion=2;else if(this.webGLVersion=1,!(n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},e.prototype.getExtensions=function(){var e=this.gl,t={anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),loseContext:e.getExtension("WEBGL_lose_context"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})},e.prototype.handleContextLost=function(e){e.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},e.prototype.destroy=function(){var e=this.renderer.view;this.renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(e){var t=e.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var r=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},e}(),ir=function(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=be.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},or=new st,ar=function(){function e(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new Cn(10,10),this.msaaSamples=null}return e.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new st,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var t=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;Ee.PREFER_ENV===re.WEBGL_LEGACY&&(t=null,n=null),t?e.drawBuffers=function(e){return t.drawBuffersWEBGL(e)}:(this.hasMRT=!1,e.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},e.prototype.bind=function(e,t,n){void 0===n&&(n=0);var r=this.gl;if(e){var i=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,i.mipLevel=n),i.dirtyId!==e.dirtyId&&(i.dirtyId=e.dirtyId,i.dirtyFormat!==e.dirtyFormat?(i.dirtyFormat=e.dirtyFormat,i.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):i.dirtySize!==e.dirtySize&&(i.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var o=0;o<e.colorTextures.length;o++){var a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){var s=t.width>>n,l=t.height>>n,u=s/t.width;this.setViewport(t.x*u,t.y*u,s,l)}else s=e.width>>n,l=e.height>>n,this.setViewport(0,0,s,l)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(e,t,n,r){var i=this.viewport;e=Math.round(e),t=Math.round(t),n=Math.round(n),r=Math.round(r),i.width===n&&i.height===r&&i.x===e&&i.y===t||(i.x=e,i.y=t,i.width=n,i.height=r,this.gl.viewport(e,t,n,r))},Object.defineProperty(e.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),e.prototype.clear=function(e,t,n,r,i){void 0===i&&(i=oe.COLOR|oe.DEPTH);var o=this.gl;o.clearColor(e,t,n,r),o.clear(i)},e.prototype.initFramebuffer=function(e){var t=this.gl,n=new ir(t.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n},e.prototype.resizeFramebuffer=function(e){var t=this.gl,n=e.glFramebuffers[this.CONTEXT_UID];n.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,n.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,t.RGBA8,e.width,e.height)),n.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,n.stencil),n.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,t.DEPTH24_STENCIL8,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height));var r=e.colorTextures,i=r.length;t.drawBuffers||(i=Math.min(i,1));for(var o=0;o<i;o++){var a=r[o],s=a.parentTextureArray||a;this.renderer.texture.bind(s,0)}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)},e.prototype.updateFramebuffer=function(e,t){var n=this.gl,r=e.glFramebuffers[this.CONTEXT_UID],i=e.colorTextures,o=i.length;n.drawBuffers||(o=Math.min(o,1)),r.multisample>1&&this.canMultisampleFramebuffer(e)?(r.msaaBuffer=r.msaaBuffer||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,r.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.RGBA8,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,r.msaaBuffer)):r.msaaBuffer&&(n.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));for(var a=[],s=0;s<o;s++){var l=i[s],u=l.parentTextureArray||l;this.renderer.texture.bind(u,0),0===s&&r.msaaBuffer||(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+s,l.target,u._glTextures[this.CONTEXT_UID].texture,t),a.push(n.COLOR_ATTACHMENT0+s))}if(a.length>1&&n.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){var c=e.depthTexture;this.renderer.texture.bind(c,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,t)}!e.stencil&&!e.depth||e.depthTexture&&this.writeDepthTexture?r.stencil&&(n.deleteRenderbuffer(r.stencil),r.stencil=null):(r.stencil=r.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,r.stencil),r.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.DEPTH24_STENCIL8,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r.stencil))},e.prototype.canMultisampleFramebuffer=function(e){return 1!==this.renderer.context.webGLVersion&&e.colorTextures.length<=1&&!e.depthTexture},e.prototype.detectSamples=function(e){var t=this.msaaSamples,n=be.NONE;if(e<=1||null===t)return n;for(var r=0;r<t.length;r++)if(t[r]<=e){n=t[r];break}return 1===n&&(n=be.NONE),n},e.prototype.blit=function(e,t,n){var r=this,i=r.current,o=r.renderer,a=r.gl,s=r.CONTEXT_UID;if(2===o.context.webGLVersion&&i){var l=i.glFramebuffers[s];if(l){if(!e){if(!l.msaaBuffer)return;var u=i.colorTextures[0];if(!u)return;l.blitFramebuffer||(l.blitFramebuffer=new Cn(i.width,i.height),l.blitFramebuffer.addColorTexture(0,u)),(e=l.blitFramebuffer).colorTextures[0]!==u&&(e.colorTextures[0]=u,e.dirtyId++,e.dirtyFormat++),e.width===i.width&&e.height===i.height||(e.width=i.width,e.height=i.height,e.dirtyId++,e.dirtySize++)}t||((t=or).width=i.width,t.height=i.height),n||(n=t);var c=t.width===n.width&&t.height===n.height;this.bind(e),a.bindFramebuffer(a.READ_FRAMEBUFFER,l.framebuffer),a.blitFramebuffer(t.left,t.top,t.right,t.bottom,n.left,n.top,n.right,n.bottom,a.COLOR_BUFFER_BIT,c?a.NEAREST:a.LINEAR)}}},e.prototype.disposeFramebuffer=function(e,t){var n=e.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(n){delete e.glFramebuffers[this.CONTEXT_UID];var i=this.managedFramebuffers.indexOf(e);i>=0&&this.managedFramebuffers.splice(i,1),e.disposeRunner.remove(this),t||(r.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&r.deleteRenderbuffer(n.msaaBuffer),n.stencil&&r.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&n.blitFramebuffer.dispose()}},e.prototype.disposeAll=function(e){var t=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<t.length;n++)this.disposeFramebuffer(t[n],e)},e.prototype.forceStencil=function(){var e=this.current;if(e){var t=e.glFramebuffers[this.CONTEXT_UID];if(t&&!t.stencil){e.stencil=!0;var n=e.width,r=e.height,i=this.gl,o=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,o),t.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,t.multisample,i.DEPTH24_STENCIL8,n,r):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,n,r),t.stencil=o,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,o)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new st},e.prototype.destroy=function(){this.renderer=null},e}(),sr={5126:4,5123:2,5121:1},lr=function(){function e(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return e.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==t.webGLVersion){var n=this.renderer.context.extensions.vertexArrayObject;Ee.PREFER_ENV===re.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=function(){return n.createVertexArrayOES()},e.bindVertexArray=function(e){return n.bindVertexArrayOES(e)},e.deleteVertexArray=function(e){return n.deleteVertexArrayOES(e)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(2!==t.webGLVersion){var r=e.getExtension("ANGLE_instanced_arrays");r?(e.vertexAttribDivisor=function(e,t){return r.vertexAttribDivisorANGLE(e,t)},e.drawElementsInstanced=function(e,t,n,i,o){return r.drawElementsInstancedANGLE(e,t,n,i,o)},e.drawArraysInstanced=function(e,t,n,i){return r.drawArraysInstancedANGLE(e,t,n,i)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===t.webGLVersion||!!t.extensions.uint32ElementIndex},e.prototype.bind=function(e,t){t=t||this.renderer.shader.shader;var n=this.gl,r=e.glVertexArrayObjects[this.CONTEXT_UID],i=!1;r||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=r={},i=!0);var o=r[t.program.id]||this.initGeometryVao(e,t,i);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(e,t.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var e=this._activeGeometry,t=this.renderer.buffer,n=0;n<e.buffers.length;n++){var r=e.buffers[n];t.update(r)}},e.prototype.checkCompatibility=function(e,t){var n=e.attributes,r=t.attributeData;for(var i in r)if(!n[i])throw new Error('shader and geometry incompatible, geometry missing the "'+i+'" attribute')},e.prototype.getSignature=function(e,t){var n=e.attributes,r=t.attributeData,i=["g",e.id];for(var o in n)r[o]&&i.push(o,r[o].location);return i.join("-")},e.prototype.initGeometryVao=function(e,t,n){void 0===n&&(n=!0);var r=this.gl,i=this.CONTEXT_UID,o=this.renderer.buffer,a=t.program;a.glPrograms[i]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,a);var s=this.getSignature(e,a),l=e.glVertexArrayObjects[this.CONTEXT_UID],u=l[s];if(u)return l[a.id]=u,u;var c=e.buffers,h=e.attributes,d={},f={};for(var p in c)d[p]=0,f[p]=0;for(var p in h)!h[p].size&&a.attributeData[p]?h[p].size=a.attributeData[p].size:h[p].size||console.warn("PIXI Geometry attribute '"+p+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[h[p].buffer]+=h[p].size*sr[h[p].type];for(var p in h){var y=h[p],m=y.size;void 0===y.stride&&(d[y.buffer]===m*sr[y.type]?y.stride=0:y.stride=d[y.buffer]),void 0===y.start&&(y.start=f[y.buffer],f[y.buffer]+=m*sr[y.type])}u=r.createVertexArray(),r.bindVertexArray(u);for(var g=0;g<c.length;g++){var v=c[g];o.bind(v),n&&v._glBuffers[i].refCount++}return this.activateVao(e,a),this._activeVao=u,l[a.id]=u,l[s]=u,u},e.prototype.disposeGeometry=function(e,t){var n;if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var r=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,o=e.buffers,a=null===(n=this.renderer)||void 0===n?void 0:n.buffer;if(e.disposeRunner.remove(this),r){if(a)for(var s=0;s<o.length;s++){var l=o[s]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,0!==l.refCount||t||a.dispose(o[s],t))}if(!t)for(var u in r)if("g"===u[0]){var c=r[u];this._activeVao===c&&this.unbind(),i.deleteVertexArray(c)}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedGeometries),n=0;n<t.length;n++)this.disposeGeometry(this.managedGeometries[t[n]],e)},e.prototype.activateVao=function(e,t){var n=this.gl,r=this.CONTEXT_UID,i=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&i.bind(e.indexBuffer);var s=null;for(var l in a){var u=a[l],c=o[u.buffer],h=c._glBuffers[r];if(t.attributeData[l]){s!==h&&(i.bind(c),s=h);var d=t.attributeData[l].location;if(n.enableVertexAttribArray(d),n.vertexAttribPointer(d,u.size,u.type||n.FLOAT,u.normalized,u.stride,u.start),u.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");n.vertexAttribDivisor(d,1)}}}},e.prototype.draw=function(e,t,n,r){var i=this.gl,o=this._activeGeometry;if(o.indexBuffer){var a=o.indexBuffer.data.BYTES_PER_ELEMENT,s=2===a?i.UNSIGNED_SHORT:i.UNSIGNED_INT;2===a||4===a&&this.canUseUInt32ElementIndex?o.instanced?i.drawElementsInstanced(e,t||o.indexBuffer.data.length,s,(n||0)*a,r||1):i.drawElements(e,t||o.indexBuffer.data.length,s,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?i.drawArraysInstanced(e,n,t||o.getSize(),r||1):i.drawArrays(e,n,t||o.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e.prototype.destroy=function(){this.renderer=null},e}(),ur=function(){function e(e){void 0===e&&(e=null),this.type=_e.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Ee.FILTER_MULTISAMPLE,this.enabled=!0,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._target=null}return Object.defineProperty(e.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=_e.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},e.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},e}();function cr(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}function hr(e,t){var n=e.getShaderSource(t).split("\n").map((function(e,t){return t+": "+e})),r=e.getShaderInfoLog(t),i=r.split("\n"),o={},a=i.map((function(e){return parseFloat(e.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))})).filter((function(e){return!(!e||o[e]||(o[e]=!0,0))})),s=[""];a.forEach((function(e){n[e-1]="%c"+n[e-1]+"%c",s.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));var l=n.join("\n");s[0]=l,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,s),console.groupEnd()}function dr(e){for(var t=new Array(e),n=0;n<t.length;n++)t[n]=!1;return t}function fr(e,t){switch(e){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return dr(2*t);case"bvec3":return dr(3*t);case"bvec4":return dr(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var pr,yr={},mr=yr;function gr(e,t,n){if("precision"!==e.substring(0,9)){var r=t;return t===ve.HIGH&&n!==ve.HIGH&&(r=ve.MEDIUM),"precision "+r+" float;\n"+e}return n!==ve.HIGH&&"precision highp"===e.substring(0,15)?e.replace("precision highp","precision mediump"):e}var vr={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function _r(e){return vr[e]}var br=null,xr={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Er(e,t){if(!br){var n=Object.keys(xr);br={};for(var r=0;r<n.length;++r){var i=n[r];br[e[i]]=xr[i]}}return br[t]}var Sr,Tr=[{test:function(e){return"float"===e.type&&1===e.size},code:function(e){return'\n            if(uv["'+e+'"] !== ud["'+e+'"].value)\n            {\n                ud["'+e+'"].value = uv["'+e+'"]\n                gl.uniform1f(ud["'+e+'"].location, uv["'+e+'"])\n            }\n            '}},{test:function(e){return("sampler2D"===e.type||"samplerCube"===e.type||"sampler2DArray"===e.type)&&1===e.size&&!e.isArray},code:function(e){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+e+'"], t);\n\n            if(ud["'+e+'"].value !== t)\n            {\n                ud["'+e+'"].value = t;\n                gl.uniform1i(ud["'+e+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(e,t){return"mat3"===e.type&&1===e.size&&void 0!==t.a},code:function(e){return'\n            gl.uniformMatrix3fv(ud["'+e+'"].location, false, uv["'+e+'"].toArray(true));\n            '},codeUbo:function(e){return"\n                var "+e+"_matrix = uv."+e+".toArray(true);\n\n                data[offset] = "+e+"_matrix[0];\n                data[offset+1] = "+e+"_matrix[1];\n                data[offset+2] = "+e+"_matrix[2];\n        \n                data[offset + 4] = "+e+"_matrix[3];\n                data[offset + 5] = "+e+"_matrix[4];\n                data[offset + 6] = "+e+"_matrix[5];\n        \n                data[offset + 8] = "+e+"_matrix[6];\n                data[offset + 9] = "+e+"_matrix[7];\n                data[offset + 10] = "+e+"_matrix[8];\n            "}},{test:function(e,t){return"vec2"===e.type&&1===e.size&&void 0!==t.x},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+e+'"].location, v.x, v.y);\n                }'},codeUbo:function(e){return"\n                v = uv."+e+";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "}},{test:function(e){return"vec2"===e.type&&1===e.size},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+e+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(e,t){return"vec4"===e.type&&1===e.size&&void 0!==t.width},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+e+'"].location, v.x, v.y, v.width, v.height)\n                }'},codeUbo:function(e){return"\n                    v = uv."+e+";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "}},{test:function(e){return"vec4"===e.type&&1===e.size},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+e+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],wr={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Ar={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},Pr=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Or(e){for(var t="",n=0;n<e;++n)n>0&&(t+="\nelse "),n<e-1&&(t+="if(test == "+n+".0){}");return t}var Rr=0,Cr={},Ir=function(){function e(t,n,r){void 0===r&&(r="pixi-shader"),this.id=Rr++,this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=n||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),Cr[r]?(Cr[r]++,r+="-"+Cr[r]):Cr[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=gr(this.vertexSrc,Ee.PRECISION_VERTEX,ve.HIGH),this.fragmentSrc=gr(this.fragmentSrc,Ee.PRECISION_FRAGMENT,function(){if(!pr){pr=ve.MEDIUM;var e=function(){if(mr===yr||mr&&mr.isContextLost()){var e=document.createElement("canvas"),t=void 0;Ee.PREFER_ENV>=re.WEBGL2&&(t=e.getContext("webgl2",{})),t||((t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}))?t.getExtension("WEBGL_draw_buffers"):t=null),mr=t}return mr}();if(e&&e.getShaderPrecisionFormat){var t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);pr=t.precision?ve.HIGH:ve.MEDIUM}}return pr}())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),e.from=function(t,n,r){var i=t+n,o=Ke[i];return o||(Ke[i]=o=new e(t,n,r)),o},e}(),Nr=function(){function e(e,t){this.uniformBindCount=0,this.program=e,this.uniformGroup=t?t instanceof qn?t:new qn(t):new qn({})}return e.prototype.checkUniformExists=function(e,t){if(t.uniforms[e])return!0;for(var n in t.uniforms){var r=t.uniforms[n];if(r.group&&this.checkUniformExists(e,r))return!0}return!1},e.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(e.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),e.from=function(t,n,r){return new e(Ir.from(t,n),r)},e}(),Mr=function(){function e(){this.data=0,this.blendMode=ae.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(e.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(e){!!(1&this.data)!==e&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(e){!!(2&this.data)!==e&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(e){!!(4&this.data)!==e&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(e){!!(8&this.data)!==e&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(e){!!(32&this.data)!==e&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(e){!!(16&this.data)!==e&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==ae.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},e.for2d=function(){var t=new e;return t.depthTest=!1,t.blend=!0,t},e}(),kr=function(e){function t(n,r,i){var o=this,a=Ir.from(n||t.defaultVertexSrc,r||t.defaultFragmentSrc);return(o=e.call(this,a,i)||this).padding=0,o.resolution=Ee.FILTER_RESOLUTION,o.multisample=Ee.FILTER_MULTISAMPLE,o.enabled=!0,o.autoFit=!0,o.state=new Mr,o}return fn(t,e),t.prototype.apply=function(e,t,n,r,i){e.applyFilter(this,t,n,r)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._resolution=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),t}(Nr),Dr=new ft,Lr=function(){function e(e,t){this._texture=e,this.mapCoord=new ft,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===t?.5:t,this.isSimple=!1}return Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),e.prototype.multiplyUvs=function(e,t){void 0===t&&(t=e);for(var n=this.mapCoord,r=0;r<e.length;r+=2){var i=e[r],o=e[r+1];t[r]=i*n.a+o*n.c+n.tx,t[r+1]=i*n.b+o*n.d+n.ty}return t},e.prototype.update=function(e){var t=this._texture;if(!t||!t.valid)return!1;if(!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var n=t._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var r=t.orig,i=t.trim;i&&(Dr.set(r.width/i.width,0,0,r.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(Dr));var o=t.baseTexture,a=this.uClampFrame,s=this.clampMargin/o.resolution,l=this.clampOffset;return a[0]=(t._frame.x+s+l)/o.width,a[1]=(t._frame.y+s+l)/o.height,a[2]=(t._frame.x+t._frame.width-s+l)/o.width,a[3]=(t._frame.y+t._frame.height-s+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,this.isSimple=t._frame.width===o.width&&t._frame.height===o.height&&0===t.rotate,!0},e}(),Fr=function(e){function t(t,n,r){var i=this,o=null;return"string"!=typeof t&&void 0===n&&void 0===r&&(o=t,t=void 0,n=void 0,r=void 0),(i=e.call(this,t||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",n||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",r)||this).maskSprite=o,i.maskMatrix=new ft,i}return fn(t,e),Object.defineProperty(t.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),t.prototype.apply=function(e,t,n,r){var i=this._maskSprite,o=i._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Lr(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,i).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,t,n,r))},t}(kr),Ur=function(){function e(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return e.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},e.prototype.push=function(e,t){var n=t;if(!n.isMaskData){var r=this.maskDataPool.pop()||new ur;r.pooled=!0,r.maskObject=t,n=r}var i=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(i),n.autoDetect&&this.detect(n),n._target=e,n.type!==_e.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case _e.SCISSOR:this.renderer.scissor.push(n);break;case _e.STENCIL:this.renderer.stencil.push(n);break;case _e.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n)}n.type===_e.SPRITE&&this.maskStack.push(n)},e.prototype.pop=function(e){var t=this.maskStack.pop();if(t&&t._target===e){if(t.enabled)switch(t.type){case _e.SCISSOR:this.renderer.scissor.pop();break;case _e.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case _e.SPRITE:this.popSpriteMask(t)}if(t.reset(),t.pooled&&this.maskDataPool.push(t),0!==this.maskStack.length){var n=this.maskStack[this.maskStack.length-1];n.type===_e.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}},e.prototype.detect=function(e){e.maskObject.isSprite?e.type=_e.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=_e.SCISSOR:e.type=_e.STENCIL},e.prototype.pushSpriteMask=function(e){var t,n,r=e.maskObject,i=e._target,o=e._filters;o||(o=this.alphaMaskPool[this.alphaMaskIndex])||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new Fr]);var a,s,l=this.renderer,u=l.renderTexture;if(u.current){var c=u.current;a=e.resolution||c.resolution,s=null!==(t=e.multisample)&&void 0!==t?t:c.multisample}else a=e.resolution||l.resolution,s=null!==(n=e.multisample)&&void 0!==n?n:l.multisample;o[0].resolution=a,o[0].multisample=s,o[0].maskSprite=r;var h=i.filterArea;i.filterArea=r.getBounds(!0),l.filter.push(i,o),i.filterArea=h,e._filters||this.alphaMaskIndex++},e.prototype.popSpriteMask=function(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},e.prototype.destroy=function(){this.renderer=null},e}(),Br=function(){function e(e){this.renderer=e,this.maskStack=[],this.glConst=0}return e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(e){var t=this.renderer.gl,n=this.getStackLength();this.maskStack=e;var r=this.getStackLength();r!==n&&(0===r?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){this.renderer=null,this.maskStack=null},e}(),Gr=new ft,jr=function(e){function t(t){var n=e.call(this,t)||this;return n.glConst=WebGLRenderingContext.SCISSOR_TEST,n}return fn(t,e),t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},t.prototype.calcScissorRect=function(e){if(!e._scissorRectLocal){var t=e._scissorRect,n=e.maskObject,r=this.renderer,i=r.renderTexture;n.renderable=!0;var o=n.getBounds();this.roundFrameToPixels(o,i.current?i.current.resolution:r.resolution,i.sourceFrame,i.destinationFrame,r.projection.transform),n.renderable=!1,t&&o.fit(t),e._scissorRectLocal=o}},t.isMatrixRotated=function(e){if(!e)return!1;var t=e.a,n=e.b,r=e.c,i=e.d;return(Math.abs(n)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(i)>1e-4)},t.prototype.testScissor=function(e){var n=e.maskObject;if(!n.isFastRect||!n.isFastRect())return!1;if(t.isMatrixRotated(n.worldTransform))return!1;if(t.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);var r=e._scissorRectLocal;return r.width>0&&r.height>0},t.prototype.roundFrameToPixels=function(e,n,r,i,o){t.isMatrixRotated(o)||((o=o?Gr.copyFrom(o):Gr.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.renderer.filter.transformAABB(o,e),e.fit(i),e.x=Math.round(e.x*n),e.y=Math.round(e.y*n),e.width=Math.round(e.width*n),e.height=Math.round(e.height*n))},t.prototype.push=function(e){e._scissorRectLocal||this.calcScissorRect(e);var t=this.renderer.gl;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()},t.prototype.pop=function(){var e=this.renderer.gl;this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},t.prototype._useCurrent=function(){var e,t=this.maskStack[this.maskStack.length-1]._scissorRect;e=this.renderer.renderTexture.current?t.y:this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)},t}(Br),$r=function(e){function t(t){var n=e.call(this,t)||this;return n.glConst=WebGLRenderingContext.STENCIL_TEST,n}return fn(t,e),t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},t.prototype.push=function(e){var t=e.maskObject,n=this.renderer.gl,r=e._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),e._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,r,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent()},t.prototype.pop=function(e){var t=this.renderer.gl;0===this.getStackLength()?t.disable(t.STENCIL_TEST):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t}(Br),zr=function(){function e(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ft,this.transform=null}return e.prototype.update=function(e,t,n,r){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,r),this.transform&&this.projectionMatrix.append(this.transform);var i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(e,t,n,r){var i=this.projectionMatrix,o=r?-1:1;i.identity(),i.a=1/t.width*2,i.d=o*(1/t.height*2),i.tx=-1-t.x*i.a,i.ty=-o-t.y*i.d},e.prototype.setTransform=function(e){},e.prototype.destroy=function(){this.renderer=null},e}(),Xr=new st,Hr=new st,Vr=function(){function e(e){this.renderer=e,this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new st,this.destinationFrame=new st,this.viewportFrame=new st}return e.prototype.bind=function(e,t,n){void 0===e&&(e=null);var r,i,o,a=this.renderer;this.current=e,e?(o=(r=e.baseTexture).resolution,t||(Xr.width=e.frame.width,Xr.height=e.frame.height,t=Xr),n||(Hr.x=e.frame.x,Hr.y=e.frame.y,Hr.width=t.width,Hr.height=t.height,n=Hr),i=r.framebuffer):(o=a.resolution,t||(Xr.width=a.screen.width,Xr.height=a.screen.height,t=Xr),n||((n=Xr).width=t.width,n.height=t.height));var s=this.viewportFrame;s.x=n.x*o,s.y=n.y*o,s.width=n.width*o,s.height=n.height*o,e||(s.y=a.view.height-(s.y+s.height)),s.ceil(),this.renderer.framebuffer.bind(i,s),this.renderer.projection.update(n,t,o,!i),e?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(n)},e.prototype.clear=function(e,t){e=this.current?e||this.current.baseTexture.clearColor:e||this.clearColor;var n=this.destinationFrame,r=this.current?this.current.baseTexture:this.renderer.screen,i=n.width!==r.width||n.height!==r.height;if(i){var o=this.viewportFrame,a=o.x,s=o.y,l=o.width,u=o.height;a=Math.round(a),s=Math.round(s),l=Math.round(l),u=Math.round(u),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(a,s,l,u)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],t),i&&this.renderer.scissor.pop()},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e.prototype.destroy=function(){this.renderer=null},e}();function Yr(e,t,n,r,i){n.buffer.update(i)}var Wr={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},qr={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};var Kr=function(){function e(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return e.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},e}();var Qr=0,Zr={textureCount:0,uboCount:0},Jr=function(){function e(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Qr++}return e.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof Sr)return Sr;try{var e=new Function("param1","param2","param3","return param1[param2] === param3;");Sr=!0===e({a:"b"},"a","b")}catch(e){Sr=!1}return Sr}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(e){this.gl=e,this.reset()},e.prototype.bind=function(e,t){e.uniforms.globals=this.renderer.globalUniforms;var n=e.program,r=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(r.program)),t||(Zr.textureCount=0,Zr.uboCount=0,this.syncUniformGroup(e.uniformGroup,Zr)),r},e.prototype.setUniforms=function(e){var t=this.shader.program,n=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(n.uniformData,e,this.renderer)},e.prototype.syncUniformGroup=function(e,t){var n=this.getGlProgram();e.static&&e.dirtyId===n.uniformDirtyGroups[e.id]||(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,t))},e.prototype.syncUniforms=function(e,t,n){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,n)},e.prototype.createSyncGroups=function(e){var t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=function(e,t){var n,r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(var i in e.uniforms){var o=t[i];if(o){for(var a=e.uniforms[i],s=!1,l=0;l<Tr.length;l++)if(Tr[l].test(o,a)){r.push(Tr[l].code(i,a)),s=!0;break}if(!s){var u=(1===o.size?wr:Ar)[o.type].replace("location",'ud["'+i+'"].location');r.push('\n            cu = ud["'+i+'"];\n            cv = cu.value;\n            v = uv["'+i+'"];\n            '+u+";")}}else(null===(n=e.uniforms[i])||void 0===n?void 0:n.group)&&(e.uniforms[i].ubo?r.push("\n                        renderer.shader.syncUniformBufferGroup(uv."+i+", '"+i+"');\n                    "):r.push("\n                        renderer.shader.syncUniformGroup(uv."+i+", syncData);\n                    "))}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]},e.prototype.syncUniformBufferGroup=function(e,t){var n=this.getGlProgram();if(!e.static||0!==e.dirtyId||!n.uniformGroups[e.id]){e.dirtyId=0;var r=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,t);e.buffer.update(),r(n.uniformData,e.uniforms,this.renderer,Zr,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[t])},e.prototype.createSyncBufferGroup=function(e,t,n){var r=this.renderer.gl;this.renderer.buffer.bind(e.buffer);var i=this.gl.getUniformBlockIndex(t.program,n);t.uniformBufferBindings[n]=this.shader.uniformBindCount,r.uniformBlockBinding(t.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;var o=this.getSignature(e,this.shader.program.uniformData,"ubo"),a=this._uboCache[o];if(a||(a=this._uboCache[o]=function(e,t){if(!e.autoManage)return{size:0,syncFunc:Yr};for(var n=function(e,t){var n=[];for(var r in e)t[r]&&n.push(t[r]);return n.sort((function(e,t){return e.index-t.index})),n}(e.uniforms,t),r=function(e){for(var t=e.map((function(e){return{data:e,offset:0,dataLen:0,dirty:0}})),n=0,r=0,i=0,o=0;o<t.length;o++){var a=t[o];if(n=qr[a.data.type],a.data.size>1&&(n=Math.max(n,16)*a.data.size),a.dataLen=n,r%n!=0&&r<16){var s=r%n%16;r+=s,i+=s}r+n>16?(i=16*Math.ceil(i/16),a.offset=i,i+=n,r=n):(a.offset=i,r+=n,i+=n)}return{uboElements:t,size:i=16*Math.ceil(i/16)}}(n),i=r.uboElements,o=r.size,a=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],s=0;s<i.length;s++){for(var l=i[s],u=e.uniforms[l.data.name],c=l.data.name,h=!1,d=0;d<Tr.length;d++){var f=Tr[d];if(f.codeUbo&&f.test(l.data,u)){a.push("offset = "+l.offset/4+";",Tr[d].codeUbo(l.data.name,u)),h=!0;break}}if(!h)if(l.data.size>1){var p=_r(l.data.type),y=Math.max(qr[l.data.type]/16,1),m=p/y,g=(4-m%4)%4;a.push("\n                cv = ud."+c+".value;\n                v = uv."+c+";\n                offset = "+l.offset/4+";\n\n                t = 0;\n\n                for(var i=0; i < "+l.data.size*y+"; i++)\n                {\n                    for(var j = 0; j < "+m+"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += "+g+";\n                }\n\n                ")}else{var v=Wr[l.data.type];a.push("\n                cv = ud."+c+".value;\n                v = uv."+c+";\n                offset = "+l.offset/4+";\n                "+v+";\n                ")}}return a.push("\n       renderer.buffer.update(buffer);\n    "),{size:o,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join("\n"))}}(e,this.shader.program.uniformData)),e.autoManage){var s=new Float32Array(a.size/4);e.buffer.update(s)}return t.uniformGroups[e.id]=a.syncFunc,t.uniformGroups[e.id]},e.prototype.getSignature=function(e,t,n){var r=e.uniforms,i=[n+"-"];for(var o in r)i.push(o),t[o]&&i.push(t[o].type);return i.join("-")},e.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateProgram=function(e){var t=this.gl,n=e.program,r=function(e,t){var n=cr(e,e.VERTEX_SHADER,t.vertexSrc),r=cr(e,e.FRAGMENT_SHADER,t.fragmentSrc),i=e.createProgram();if(e.attachShader(i,n),e.attachShader(i,r),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)||function(e,t,n,r){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(n,e.COMPILE_STATUS)||hr(e,n),e.getShaderParameter(r,e.COMPILE_STATUS)||hr(e,r),console.error("PixiJS Error: Could not initialize shader."),""!==e.getProgramInfoLog(t)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}(e,i,n,r),t.attributeData=function(e,t){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var o=t.getActiveAttrib(e,i);if(0!==o.name.indexOf("gl_")){var a=Er(t,o.type),s={type:a,name:o.name,size:_r(a),location:t.getAttribLocation(e,o.name)};n[o.name]=s}}return n}(i,e),t.uniformData=function(e,t){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=0;i<r;i++){var o=t.getActiveUniform(e,i),a=o.name.replace(/\[.*?\]$/,""),s=!!o.name.match(/\[.*?\]$/),l=Er(t,o.type);n[a]={name:a,index:i,type:l,size:o.size,isArray:s,value:fr(l,o.size)}}return n}(i,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){var o=Object.keys(t.attributeData);o.sort((function(e,t){return e>t?1:-1}));for(var a=0;a<o.length;a++)t.attributeData[o[a]].location=a,e.bindAttribLocation(i,a,o[a]);e.linkProgram(i)}e.deleteShader(n),e.deleteShader(r);var s={};for(var a in t.uniformData){var l=t.uniformData[a];s[a]={location:e.getUniformLocation(i,a),value:fr(l.type,l.size)}}return new Kr(i,s)}(t,n);return n.glPrograms[this.renderer.CONTEXT_UID]=r,r},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},e}(),ei=function(){function e(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=ae.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new Mr,this.defaultState.blend=!0}return e.prototype.contextChange=function(e){this.gl=e,this.blendModes=function(e,t){return void 0===t&&(t=[]),t[ae.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.ADD]=[e.ONE,e.ONE],t[ae.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.NONE]=[0,0],t[ae.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[ae.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[ae.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[ae.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[ae.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[ae.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[ae.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[ae.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[ae.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[ae.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}(e),this.set(this.defaultState),this.reset()},e.prototype.set=function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var t=this.stateId^e.data,n=0;t;)1&t&&this.map[n].call(this,!!(e.data&1<<n)),t>>=1,n++;this.stateId=e.data}for(n=0;n<this.checks.length;n++)this.checks[n](this,e)},e.prototype.forceState=function(e){e=e||this.defaultState;for(var t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setDepthMask=function(e){this.gl.depthMask(e)},e.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},e.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var t=this.blendModes[e],n=this.gl;2===t.length?n.blendFunc(t[0],t[1]):n.blendFuncSeparate(t[0],t[1],t[2],t[3]),6===t.length?(this._blendEq=!0,n.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},e.prototype.setPolygonOffset=function(e,t){this.gl.polygonOffset(e,t)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(e,t){var n=this.checks.indexOf(e);t&&-1===n?this.checks.push(e):t||-1===n||this.checks.splice(n,1)},e.checkBlendMode=function(e,t){e.setBlendMode(t.blendMode)},e.checkPolygonOffset=function(e,t){e.setPolygonOffset(1,t.polygonOffset)},e.prototype.destroy=function(){this.gl=null},e}(),ti=function(){function e(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=Ee.GC_MAX_IDLE,this.checkCountMax=Ee.GC_MAX_CHECK_COUNT,this.mode=Ee.GC_MODE}return e.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==ge.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var e=this.renderer.texture,t=e.managedTextures,n=!1,r=0;r<t.length;r++){var i=t[r];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(e.destroyTexture(i,!0),t[r]=null,n=!0)}if(n){var o=0;for(r=0;r<t.length;r++)null!==t[r]&&(t[o++]=t[r]);t.length=o}},e.prototype.unload=function(e){var t=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&t.destroyTexture(n);for(var r=e.children.length-1;r>=0;r--)this.unload(e.children[r])},e.prototype.destroy=function(){this.renderer=null},e}(),ni=function(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=ce.UNSIGNED_BYTE,this.internalFormat=le.RGBA,this.samplerType=0},ri=function(){function e(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new vn,this.hasIntegerTextures=!1}return e.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(e){var t,n,r,i,o,a,s,l,u,c,h,d,f,p,y,m,g,v,_,b,x,E,S;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?((t={})[ce.UNSIGNED_BYTE]=((n={})[le.RGBA]=e.RGBA8,n[le.RGB]=e.RGB8,n[le.RG]=e.RG8,n[le.RED]=e.R8,n[le.RGBA_INTEGER]=e.RGBA8UI,n[le.RGB_INTEGER]=e.RGB8UI,n[le.RG_INTEGER]=e.RG8UI,n[le.RED_INTEGER]=e.R8UI,n[le.ALPHA]=e.ALPHA,n[le.LUMINANCE]=e.LUMINANCE,n[le.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,n),t[ce.BYTE]=((r={})[le.RGBA]=e.RGBA8_SNORM,r[le.RGB]=e.RGB8_SNORM,r[le.RG]=e.RG8_SNORM,r[le.RED]=e.R8_SNORM,r[le.RGBA_INTEGER]=e.RGBA8I,r[le.RGB_INTEGER]=e.RGB8I,r[le.RG_INTEGER]=e.RG8I,r[le.RED_INTEGER]=e.R8I,r),t[ce.UNSIGNED_SHORT]=((i={})[le.RGBA_INTEGER]=e.RGBA16UI,i[le.RGB_INTEGER]=e.RGB16UI,i[le.RG_INTEGER]=e.RG16UI,i[le.RED_INTEGER]=e.R16UI,i[le.DEPTH_COMPONENT]=e.DEPTH_COMPONENT16,i),t[ce.SHORT]=((o={})[le.RGBA_INTEGER]=e.RGBA16I,o[le.RGB_INTEGER]=e.RGB16I,o[le.RG_INTEGER]=e.RG16I,o[le.RED_INTEGER]=e.R16I,o),t[ce.UNSIGNED_INT]=((a={})[le.RGBA_INTEGER]=e.RGBA32UI,a[le.RGB_INTEGER]=e.RGB32UI,a[le.RG_INTEGER]=e.RG32UI,a[le.RED_INTEGER]=e.R32UI,a[le.DEPTH_COMPONENT]=e.DEPTH_COMPONENT24,a),t[ce.INT]=((s={})[le.RGBA_INTEGER]=e.RGBA32I,s[le.RGB_INTEGER]=e.RGB32I,s[le.RG_INTEGER]=e.RG32I,s[le.RED_INTEGER]=e.R32I,s),t[ce.FLOAT]=((l={})[le.RGBA]=e.RGBA32F,l[le.RGB]=e.RGB32F,l[le.RG]=e.RG32F,l[le.RED]=e.R32F,l[le.DEPTH_COMPONENT]=e.DEPTH_COMPONENT32F,l),t[ce.HALF_FLOAT]=((u={})[le.RGBA]=e.RGBA16F,u[le.RGB]=e.RGB16F,u[le.RG]=e.RG16F,u[le.RED]=e.R16F,u),t[ce.UNSIGNED_SHORT_5_6_5]=((c={})[le.RGB]=e.RGB565,c),t[ce.UNSIGNED_SHORT_4_4_4_4]=((h={})[le.RGBA]=e.RGBA4,h),t[ce.UNSIGNED_SHORT_5_5_5_1]=((d={})[le.RGBA]=e.RGB5_A1,d),t[ce.UNSIGNED_INT_2_10_10_10_REV]=((f={})[le.RGBA]=e.RGB10_A2,f[le.RGBA_INTEGER]=e.RGB10_A2UI,f),t[ce.UNSIGNED_INT_10F_11F_11F_REV]=((p={})[le.RGB]=e.R11F_G11F_B10F,p),t[ce.UNSIGNED_INT_5_9_9_9_REV]=((y={})[le.RGB]=e.RGB9_E5,y),t[ce.UNSIGNED_INT_24_8]=((m={})[le.DEPTH_STENCIL]=e.DEPTH24_STENCIL8,m),t[ce.FLOAT_32_UNSIGNED_INT_24_8_REV]=((g={})[le.DEPTH_STENCIL]=e.DEPTH32F_STENCIL8,g),S=t):((v={})[ce.UNSIGNED_BYTE]=((_={})[le.RGBA]=e.RGBA,_[le.RGB]=e.RGB,_[le.ALPHA]=e.ALPHA,_[le.LUMINANCE]=e.LUMINANCE,_[le.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,_),v[ce.UNSIGNED_SHORT_5_6_5]=((b={})[le.RGB]=e.RGB,b),v[ce.UNSIGNED_SHORT_4_4_4_4]=((x={})[le.RGBA]=e.RGBA,x),v[ce.UNSIGNED_SHORT_5_5_5_1]=((E={})[le.RGBA]=e.RGBA,E),S=v),S}(e);var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(var n=0;n<t;n++)this.boundTextures[n]=null;this.emptyTextures={};var r=new ni(e.createTexture());for(e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new ni(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture),n=0;n<6;n++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);for(e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR),n=0;n<this.boundTextures.length;n++)this.bind(null,n)},e.prototype.bind=function(e,t){void 0===t&&(t=0);var n=this.gl;if((e=null==e?void 0:e.castToBaseTexture())&&e.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;var r=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(e.target,r.texture)),r.dirtyId!==e.dirtyId&&(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),this.updateTexture(e)),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[t]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},e.prototype.unbind=function(e){var t=this.gl,n=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<n.length;r++)n[r]===this.unknownTexture&&this.bind(null,r)}for(r=0;r<n.length;r++)n[r]===e&&(this.currentLocation!==r&&(t.activeTexture(t.TEXTURE0+r),this.currentLocation=r),t.bindTexture(e.target,this.emptyTextures[e.target].texture),n[r]=null)},e.prototype.ensureSamplerType=function(e){var t=this,n=t.boundTextures,r=t.hasIntegerTextures,i=t.CONTEXT_UID;if(r)for(var o=e-1;o>=0;--o){var a=n[o];a&&a._glTextures[i].samplerType!==he.FLOAT&&this.renderer.texture.unbind(a)}},e.prototype.initTexture=function(e){var t=new ni(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t},e.prototype.initTextureType=function(e,t){var n,r;t.internalFormat=null!==(r=null===(n=this.internalFormats[e.type])||void 0===n?void 0:n[e.format])&&void 0!==r?r:e.format,2===this.webGLVersion&&e.type===ce.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type},e.prototype.updateTexture=function(e){var t=e._glTextures[this.CONTEXT_UID];if(t){var n=this.renderer;if(this.initTextureType(e,t),e.resource&&e.resource.upload(n,e,t))t.samplerType!==he.FLOAT&&(this.hasIntegerTextures=!0);else{var r=e.realWidth,i=e.realHeight,o=n.gl;(t.width!==r||t.height!==i||t.dirtyId<0)&&(t.width=r,t.height=i,o.texImage2D(e.target,0,t.internalFormat,r,i,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}},e.prototype.destroyTexture=function(e,t){var n=this.gl;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){var r=this.managedTextures.indexOf(e);-1!==r&&ze(this.managedTextures,r,1)}},e.prototype.updateTextureStyle=function(e){var t=e._glTextures[this.CONTEXT_UID];t&&(e.mipmap!==pe.POW2&&2===this.webGLVersion||e.isPowerOfTwo?t.mipmap=e.mipmap>=1:t.mipmap=!1,2===this.webGLVersion||e.isPowerOfTwo?t.wrapMode=e.wrapMode:t.wrapMode=fe.CLAMP,e.resource&&e.resource.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)},e.prototype.setStyle=function(e,t){var n=this.gl;if(t.mipmap&&e.mipmap!==pe.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,t.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===de.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var r=this.renderer.context.extensions.anisotropicFiltering;if(r&&e.anisotropicLevel>0&&e.scaleMode===de.LINEAR){var i=Math.min(e.anisotropicLevel,n.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,r.TEXTURE_MAX_ANISOTROPY_EXT,i)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===de.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===de.LINEAR?n.LINEAR:n.NEAREST)},e.prototype.destroy=function(){this.renderer=null},e}(),ii={__proto__:null,FilterSystem:Jn,BatchSystem:tr,ContextSystem:rr,FramebufferSystem:ar,GeometrySystem:lr,MaskSystem:Ur,ScissorSystem:jr,StencilSystem:$r,ProjectionSystem:zr,RenderTextureSystem:Vr,ShaderSystem:Jr,StateSystem:ei,TextureGCSystem:ti,TextureSystem:ri},oi=new ft,ai=function(e){function t(t,n){void 0===t&&(t=ie.UNKNOWN);var r=e.call(this)||this;return n=Object.assign({},Ee.RENDER_OPTIONS,n),r.options=n,r.type=t,r.screen=new st(0,0,n.width,n.height),r.view=n.view||document.createElement("canvas"),r.resolution=n.resolution||Ee.RESOLUTION,r.useContextAlpha=n.useContextAlpha,r.autoDensity=!!n.autoDensity,r.preserveDrawingBuffer=n.preserveDrawingBuffer,r.clearBeforeRender=n.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,1],r._backgroundColorString="#000000",r.backgroundColor=n.backgroundColor||r._backgroundColor,r.backgroundAlpha=n.backgroundAlpha,void 0!==n.transparent&&(We("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),r.useContextAlpha=n.transparent,r.backgroundAlpha=n.transparent?0:1),r._lastObjectRendered=null,r.plugins={},r}return fn(t,e),t.prototype.initPlugins=function(e){for(var t in e)this.plugins[t]=new e[t](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,t){this.view.width=Math.round(e*this.resolution),this.view.height=Math.round(t*this.resolution);var n=this.view.width/this.resolution,r=this.view.height/this.resolution;this.screen.width=n,this.screen.height=r,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=r+"px"),this.emit("resize",n,r)},t.prototype.generateTexture=function(e,t,n,r){void 0===t&&(t={}),"number"==typeof t&&(We("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),t={scaleMode:t,resolution:n,region:r});var i=t.region,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n}(t,["region"]);0===(r=i||e.getLocalBounds(null,!0)).width&&(r.width=1),0===r.height&&(r.height=1);var a=Ln.create(pn({width:r.width,height:r.height},o));return oi.tx=-r.x,oi.ty=-r.y,this.render(e,{renderTexture:a,clear:!1,transform:oi,skipUpdateTransform:!!e.parent}),a},t.prototype.destroy=function(e){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=ie.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=Me(e),Ne(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(e){this._backgroundColorRgba[3]=e},enumerable:!1,configurable:!0}),t}(Te()),si=function(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},li=function(){function e(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}return e.prototype.destroy=function(){this.renderer=null},e.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},e.prototype.bind=function(e){var t=this.gl,n=this.CONTEXT_UID,r=e._glBuffers[n]||this.createGLBuffer(e);t.bindBuffer(e.type,r.buffer)},e.prototype.bindBufferBase=function(e,t){var n=this.gl,r=this.CONTEXT_UID;if(this.boundBufferBases[t]!==e){var i=e._glBuffers[r]||this.createGLBuffer(e);this.boundBufferBases[t]=e,n.bindBufferBase(n.UNIFORM_BUFFER,t,i.buffer)}},e.prototype.bindBufferRange=function(e,t,n){var r=this.gl,i=this.CONTEXT_UID;n=n||0;var o=e._glBuffers[i]||this.createGLBuffer(e);r.bindBufferRange(r.UNIFORM_BUFFER,t||0,o.buffer,256*n,256)},e.prototype.update=function(e){var t=this.gl,n=this.CONTEXT_UID,r=e._glBuffers[n];if(e._updateID!==r.updateID)if(r.updateID=e._updateID,t.bindBuffer(e.type,r.buffer),r.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{var i=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;r.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,i)}},e.prototype.dispose=function(e,t){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var n=e._glBuffers[this.CONTEXT_UID],r=this.gl;e.disposeRunner.remove(this),n&&(t||r.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedBuffers),n=0;n<t.length;n++)this.dispose(this.managedBuffers[t[n]],e)},e.prototype.createGLBuffer=function(e){var t=this.CONTEXT_UID,n=this.gl;return e._glBuffers[t]=new si(n.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]},e}(),ui=function(e){function t(n){var r=e.call(this,ie.WEBGL,n)||this;return n=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new un("destroy"),contextChange:new un("contextChange"),reset:new un("reset"),update:new un("update"),postrender:new un("postrender"),prerender:new un("prerender"),resize:new un("resize")},r.runners.contextChange.add(r),r.globalUniforms=new qn({projectionMatrix:new ft},!0),r.addSystem(Ur,"mask").addSystem(rr,"context").addSystem(ei,"state").addSystem(Jr,"shader").addSystem(ri,"texture").addSystem(li,"buffer").addSystem(lr,"geometry").addSystem(ar,"framebuffer").addSystem(jr,"scissor").addSystem($r,"stencil").addSystem(zr,"projection").addSystem(ti,"textureGC").addSystem(Jn,"filter").addSystem(Vr,"renderTexture").addSystem(tr,"batch"),r.initPlugins(t.__plugins),r.multisample=void 0,n.context?r.context.initFromContext(n.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:n.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:n.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,function(e){var t;if(!Ce){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var n=["\n %c %c %c PixiJS 6.4.2 - ✰ "+e+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(t=globalThis.console).log.apply(t,n)}else globalThis.console&&globalThis.console.log("PixiJS 6.4.2 - "+e+" - http://www.pixijs.com/");Ce=!0}}(2===r.context.webGLVersion?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}return fn(t,e),t.create=function(e){if(void 0===Re&&(Re=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:Ee.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!globalThis.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),r=!(!n||!n.getContextAttributes().stencil);if(n){var i=n.getExtension("WEBGL_lose_context");i&&i.loseContext()}return n=null,r}catch(e){return!1}}()),Re)return new t(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.contextChange=function(){var e,t=this.gl;if(1===this.context.webGLVersion){var n=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,n)}else n=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,n);e>=be.HIGH?this.multisample=be.HIGH:e>=be.MEDIUM?this.multisample=be.MEDIUM:e>=be.LOW?this.multisample=be.LOW:this.multisample=be.NONE},t.prototype.addSystem=function(e,t){var n=new e(this);if(this[t])throw new Error('Whoops! The name "'+t+'" is already in use');for(var r in this[t]=n,this.runners)this.runners[r].add(n);return this},t.prototype.render=function(e,t){var n,r,i,o;if(t&&(t instanceof Ln?(We("6.0.0","Renderer#render arguments changed, use options instead."),n=t,r=arguments[2],i=arguments[3],o=arguments[4]):(n=t.renderTexture,r=t.clear,i=t.transform,o=t.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=i,!this.context.isLost){if(n||(this._lastObjectRendered=e),!o){var a=e.enableTempParent();e.updateTransform(),e.disableTempParent(a)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.generateTexture=function(t,n,r,i){void 0===n&&(n={});var o=e.prototype.generateTexture.call(this,t,n,r,i);return this.framebuffer.blit(),o},t.prototype.resize=function(t,n){e.prototype.resize.call(this,t,n),this.runners.resize.emit(this.screen.height,this.screen.width)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(t){for(var n in this.runners.destroy.emit(),this.runners)this.runners[n].destroy();e.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(t.prototype,"extract",{get:function(){return We("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),t.registerPlugin=function(e,n){t.__plugins=t.__plugins||{},t.__plugins[e]=n},t}(ai),ci="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",hi=function(){this.texArray=null,this.blend=0,this.type=se.TRIANGLES,this.start=0,this.size=0,this.data=null},di=function(){function e(){this.elements=[],this.ids=[],this.count=0}return e.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},e}(),fi=function(){function e(e){"number"==typeof e?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(e.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),e.prototype.view=function(e){return this[e+"View"]},e.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},e.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}},e}(),pi=function(e){function t(t){var n=e.call(this,t)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=Mr.for2d(),n.size=4*Ee.SPRITE_BATCH_SIZE,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),t.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return fn(t,e),t.prototype.contextChange=function(){var e=this.renderer.gl;Ee.PREFER_ENV===re.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),Ee.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function(e,t){if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var n=t.createShader(t.FRAGMENT_SHADER);;){var r=Pr.replace(/%forloop%/gi,Or(e));if(t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS))break;e=e/2|0}return e}(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var e=t._drawCallPool,n=t._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;e.length<r;)e.push(new hi);for(;n.length<i;)n.push(new di);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},t.prototype.buildTexturesAndDrawCalls=function(){var e=this._bufferedTextures,n=this.MAX_TEXTURES,r=t._textureArrayPool,i=this.renderer.batch,o=this._tempBoundTextures,a=this.renderer.textureGC.count,s=++vn._globalBatch,l=0,u=r[0],c=0;i.copyBoundTextures(o,n);for(var h=0;h<this._bufferSize;++h){var d=e[h];e[h]=null,d._batchEnabled!==s&&(u.count>=n&&(i.boundArray(u,o,s,n),this.buildDrawCalls(u,c,h),c=h,u=r[++l],++s),d._batchEnabled=s,d.touched=a,u.elements[u.count++]=d)}for(u.count>0&&(i.boundArray(u,o,s,n),this.buildDrawCalls(u,c,this._bufferSize),++l,++s),h=0;h<o.length;h++)o[h]=null;vn._globalBatch=s},t.prototype.buildDrawCalls=function(e,n,r){var i=this,o=i._bufferedElements,a=i._attributeBuffer,s=i._indexBuffer,l=i.vertexSize,u=t._drawCallPool,c=this._dcIndex,h=this._aIndex,d=this._iIndex,f=u[c];f.start=this._iIndex,f.texArray=e;for(var p=n;p<r;++p){var y=o[p],m=y._texture.baseTexture,g=De[m.alphaMode?1:0][y.blendMode];o[p]=null,n<p&&f.blend!==g&&(f.size=d-f.start,n=p,(f=u[++c]).texArray=e,f.start=d),this.packInterleavedGeometry(y,a,s,h,d),h+=y.vertexData.length/2*l,d+=y.indices.length,f.blend=g}n<r&&(f.size=d-f.start,++c),this._dcIndex=c,this._aIndex=h,this._iIndex=d},t.prototype.bindAndClearTexArray=function(e){for(var t=this.renderer.texture,n=0;n<e.count;n++)t.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0},t.prototype.updateGeometry=function(){var e=this,t=e._packedGeometries,n=e._attributeBuffer,r=e._indexBuffer;Ee.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(n.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(n.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var e=this._dcIndex,n=this.renderer,r=n.gl,i=n.state,o=t._drawCallPool,a=null,s=0;s<e;s++){var l=o[s],u=l.texArray,c=l.type,h=l.size,d=l.start,f=l.blend;a!==u&&(a=u,this.bindAndClearTexArray(u)),this.state.blendMode=f,i.set(this.state),r.drawElements(c,h,r.UNSIGNED_SHORT,2*d)}},t.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),Ee.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),e.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(e){var t=Ge(Math.ceil(e/8)),n=$e(t),r=8*t;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._aBuffers[r];return i||(this._aBuffers[r]=i=new fi(r*this.vertexSize*4)),i},t.prototype.getIndexBuffer=function(e){var t=Ge(Math.ceil(e/12)),n=$e(t),r=12*t;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._iBuffers[n];return i||(this._iBuffers[n]=i=new Uint16Array(r)),i},t.prototype.packInterleavedGeometry=function(e,t,n,r,i){for(var o=t.uint32View,a=t.float32View,s=r/this.vertexSize,l=e.uvs,u=e.indices,c=e.vertexData,h=e._texture.baseTexture._batchLocation,d=Math.min(e.worldAlpha,1),f=d<1&&e._texture.baseTexture.alphaMode?Fe(e._tintRGB,d):e._tintRGB+(255*d<<24),p=0;p<c.length;p+=2)a[r++]=c[p],a[r++]=c[p+1],a[r++]=l[p],a[r++]=l[p+1],o[r++]=f,a[r++]=h;for(p=0;p<u.length;p++)n[i++]=s+u[p]},t._drawCallPool=[],t._textureArrayPool=[],t}(er),yi=function(){function e(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},t.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(t.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return e.prototype.generateShader=function(e){if(!this.programCache[e]){for(var t=new Int32Array(e),n=0;n<e;n++)t[n]=n;this.defaultGroupCache[e]=qn.from({uSamplers:t},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,""+e)).replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Ir(this.vertexSrc,r)}var i={tint:new Float32Array([1,1,1,1]),translationMatrix:new ft,default:this.defaultGroupCache[e]};return new Nr(this.programCache[e],i)},e.prototype.generateSampleSrc=function(e){var t="";t+="\n",t+="\n";for(var n=0;n<e;n++)n>0&&(t+="\nelse "),n<e-1&&(t+="if(vTextureId < "+n+".5)"),t+="\n{",t+="\n\tcolor = texture2D(uSamplers["+n+"], vTextureCoord);",t+="\n}";return(t+="\n")+"\n"},e}(),mi=function(e){function t(t){void 0===t&&(t=!1);var n=e.call(this)||this;return n._buffer=new Gn(null,t,!1),n._indexBuffer=new Gn(null,t,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,ce.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,ce.FLOAT).addAttribute("aColor",n._buffer,4,!0,ce.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,ce.FLOAT).addIndex(n._indexBuffer),n}return fn(t,e),t}(Hn),gi="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",vi="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",_i=function(){function e(){}return e.create=function(e){var t=Object.assign({vertex:gi,fragment:vi,geometryClass:mi,vertexSize:6},e),n=t.vertex,r=t.fragment,i=t.vertexSize,o=t.geometryClass;return function(e){function t(t){var a=e.call(this,t)||this;return a.shaderGenerator=new yi(n,r),a.geometryClass=o,a.vertexSize=i,a}return fn(t,e),t}(pi)},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return gi},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentTemplate",{get:function(){return vi},enumerable:!1,configurable:!0}),e}(),bi=_i.create(),xi={},Ei=function(e){Object.defineProperty(xi,e,{get:function(){return We("6.0.0","PIXI.systems."+e+" has moved to PIXI."+e),On[e]}})};for(var Si in On)Ei(Si);var Ti={},wi=function(e){Object.defineProperty(Ti,e,{get:function(){return We("6.0.0","PIXI.resources."+e+" has moved to PIXI."+e),ii[e]}})};for(var Si in ii)wi(Si);var Ai=function(){function e(t){var n=this;this.stage=new Wt,t=Object.assign({forceCanvas:!1},t),this.renderer=function(e){return ui.create(e)}(t),e._plugins.forEach((function(e){e.init.call(n,t)}))}return e.registerPlugin=function(t){e._plugins.push(t)},e.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(e.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),e.prototype.destroy=function(t,n){var r=this,i=e._plugins.slice(0);i.reverse(),i.forEach((function(e){e.destroy.call(r)})),this.stage.destroy(n),this.stage=null,this.renderer.destroy(t),this.renderer=null},e._plugins=[],e}(),Pi=function(){function e(){}return e.init=function(e){var t=this;Object.defineProperty(this,"resizeTo",{set:function(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){t._resizeTo&&(t.cancelResize(),t._resizeId=requestAnimationFrame((function(){return t.resize()})))},this.cancelResize=function(){t._resizeId&&(cancelAnimationFrame(t._resizeId),t._resizeId=null)},this.resize=function(){if(t._resizeTo){var e,n;if(t.cancelResize(),t._resizeTo===globalThis.window)e=globalThis.innerWidth,n=globalThis.innerHeight;else{var r=t._resizeTo;e=r.clientWidth,n=r.clientHeight}t.renderer.resize(e,n)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null},e.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},e}();Ai.registerPlugin(Pi);var Oi,Ri,Ci,Ii,Ni,Mi,ki,Di,Li,Fi,Ui,Bi,Gi,ji,$i,zi,Xi,Hi,Vi,Yi=/iPhone/i,Wi=/iPod/i,qi=/iPad/i,Ki=/\biOS-universal(?:.+)Mac\b/i,Qi=/\bAndroid(?:.+)Mobile\b/i,Zi=/Android/i,Ji=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,eo=/Silk/i,to=/Windows Phone/i,no=/\bWindows(?:.+)ARM\b/i,ro=/BlackBerry/i,io=/BB10/i,oo=/Opera Mini/i,ao=/\b(CriOS|Chrome)(?:.+)Mobile/i,so=/Mobile(?:.+)Firefox\b/i,lo=function(e){return void 0!==e&&"MacIntel"===e.platform&&"number"==typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"==typeof MSStream},uo=function(e){var t={userAgent:"",platform:"",maxTouchPoints:0};e||"undefined"==typeof navigator?"string"==typeof e?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0}):t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var n=t.userAgent,r=n.split("[FBAN");void 0!==r[1]&&(n=r[0]),void 0!==(r=n.split("Twitter"))[1]&&(n=r[0]);var i=function(e){return function(t){return t.test(e)}}(n),o={apple:{phone:i(Yi)&&!i(to),ipod:i(Wi),tablet:!i(Yi)&&(i(qi)||lo(t))&&!i(to),universal:i(Ki),device:(i(Yi)||i(Wi)||i(qi)||i(Ki)||lo(t))&&!i(to)},amazon:{phone:i(Ji),tablet:!i(Ji)&&i(eo),device:i(Ji)||i(eo)},android:{phone:!i(to)&&i(Ji)||!i(to)&&i(Qi),tablet:!i(to)&&!i(Ji)&&!i(Qi)&&(i(eo)||i(Zi)),device:!i(to)&&(i(Ji)||i(eo)||i(Qi)||i(Zi))||i(/\bokhttp\b/i)},windows:{phone:i(to),tablet:i(no),device:i(to)||i(no)},other:{blackberry:i(ro),blackberry10:i(io),opera:i(oo),firefox:i(so),chrome:i(ao),device:i(ro)||i(io)||i(oo)||i(so)||i(ao)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}(globalThis.navigator);!function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"}(Oi||(Oi={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"}(Ri||(Ri={})),function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"}(Ci||(Ci={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"}(Ii||(Ii={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Ni||(Ni={})),function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(Mi||(Mi={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(ki||(ki={})),function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"}(Di||(Di={})),function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"}(Li||(Li={})),function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"}(Fi||(Fi={})),function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Ui||(Ui={})),function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"}(Bi||(Bi={})),function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(Gi||(Gi={})),function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"}(ji||(ji={})),function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"}($i||($i={})),function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"}(zi||(zi={})),function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"}(Xi||(Xi={})),function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"}(Hi||(Hi={})),function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(Vi||(Vi={}));Bi.POW2,Hi.NONE,function(e){var t,n=!0;(uo.tablet||uo.phone)&&(uo.apple.device&&(t=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(t[1],10)<11&&(n=!1),uo.android.device&&(t=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(t[1],10)<7&&(n=!1))}(),$i.AUTO,Ui.CLAMP,Fi.LINEAR,zi.HIGH,uo.apple.device?zi.HIGH:zi.MEDIUM,uo.apple.device;var co=!1,ho=function(){function e(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?st.EMPTY:((e=e||new st(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},e.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},e.prototype.addPointMatrix=function(e,t){var n=e.a,r=e.b,i=e.c,o=e.d,a=e.tx,s=e.ty,l=n*t.x+i*t.y+a,u=r*t.x+o*t.y+s;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)},e.prototype.addQuad=function(e){var t=this.minX,n=this.minY,r=this.maxX,i=this.maxY,o=e[0],a=e[1];t=o<t?o:t,n=a<n?a:n,r=o>r?o:r,i=a>i?a:i,t=(o=e[2])<t?o:t,n=(a=e[3])<n?a:n,r=o>r?o:r,i=a>i?a:i,t=(o=e[4])<t?o:t,n=(a=e[5])<n?a:n,r=o>r?o:r,i=a>i?a:i,t=(o=e[6])<t?o:t,n=(a=e[7])<n?a:n,r=o>r?o:r,i=a>i?a:i,this.minX=t,this.minY=n,this.maxX=r,this.maxY=i},e.prototype.addFrame=function(e,t,n,r,i){this.addFrameMatrix(e.worldTransform,t,n,r,i)},e.prototype.addFrameMatrix=function(e,t,n,r,i){var o=e.a,a=e.b,s=e.c,l=e.d,u=e.tx,c=e.ty,h=this.minX,d=this.minY,f=this.maxX,p=this.maxY,y=o*t+s*n+u,m=a*t+l*n+c;h=y<h?y:h,d=m<d?m:d,f=y>f?y:f,p=m>p?m:p,h=(y=o*r+s*n+u)<h?y:h,d=(m=a*r+l*n+c)<d?m:d,f=y>f?y:f,p=m>p?m:p,h=(y=o*t+s*i+u)<h?y:h,d=(m=a*t+l*i+c)<d?m:d,f=y>f?y:f,p=m>p?m:p,h=(y=o*r+s*i+u)<h?y:h,d=(m=a*r+l*i+c)<d?m:d,f=y>f?y:f,p=m>p?m:p,this.minX=h,this.minY=d,this.maxX=f,this.maxY=p},e.prototype.addVertexData=function(e,t,n){for(var r=this.minX,i=this.minY,o=this.maxX,a=this.maxY,s=t;s<n;s+=2){var l=e[s],u=e[s+1];r=l<r?l:r,i=u<i?u:i,o=l>o?l:o,a=u>a?u:a}this.minX=r,this.minY=i,this.maxX=o,this.maxY=a},e.prototype.addVertices=function(e,t,n,r){this.addVerticesMatrix(e.worldTransform,t,n,r)},e.prototype.addVerticesMatrix=function(e,t,n,r,i,o){void 0===i&&(i=0),void 0===o&&(o=i);for(var a=e.a,s=e.b,l=e.c,u=e.d,c=e.tx,h=e.ty,d=this.minX,f=this.minY,p=this.maxX,y=this.maxY,m=n;m<r;m+=2){var g=t[m],v=t[m+1],_=a*g+l*v+c,b=u*v+s*g+h;d=Math.min(d,_-i),p=Math.max(p,_+i),f=Math.min(f,b-o),y=Math.max(y,b+o)}this.minX=d,this.minY=f,this.maxX=p,this.maxY=y},e.prototype.addBounds=function(e){var t=this.minX,n=this.minY,r=this.maxX,i=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>r?e.maxX:r,this.maxY=e.maxY>i?e.maxY:i},e.prototype.addBoundsMask=function(e,t){var n=e.minX>t.minX?e.minX:t.minX,r=e.minY>t.minY?e.minY:t.minY,i=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(n<=i&&r<=o){var a=this.minX,s=this.minY,l=this.maxX,u=this.maxY;this.minX=n<a?n:a,this.minY=r<s?r:s,this.maxX=i>l?i:l,this.maxY=o>u?o:u}},e.prototype.addBoundsMatrix=function(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)},e.prototype.addBoundsArea=function(e,t){var n=e.minX>t.x?e.minX:t.x,r=e.minY>t.y?e.minY:t.y,i=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(n<=i&&r<=o){var a=this.minX,s=this.minY,l=this.maxX,u=this.maxY;this.minX=n<a?n:a,this.minY=r<s?r:s,this.maxX=i>l?i:l,this.maxY=o>u?o:u}},e.prototype.pad=function(e,t){void 0===e&&(e=0),void 0===t&&(t=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)},e.prototype.addFramePad=function(e,t,n,r,i,o){e-=i,t-=o,n+=i,r+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>r?this.maxY:r},e}(),fo=function(e,t){return fo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},fo(e,t)};function po(e,t){function n(){this.constructor=e}fo(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var yo,mo,go,vo,_o,bo,xo,Eo,So,To,wo,Ao,Po,Oo,Ro,Co,Io,No,Mo,ko=function(e){function t(){var t=e.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new Et,t.alpha=1,t.visible=!0,t.renderable=!0,t.cullable=!1,t.cullArea=null,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new ho,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._maskRefCount=0,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}return po(t,e),t.mixin=function(e){for(var n=Object.keys(e),r=0;r<n.length;++r){var i=n[r];Object.defineProperty(t.prototype,i,Object.getOwnPropertyDescriptor(e,i))}},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new st),t=this._boundsRect),this._bounds.getRectangle(t)},t.prototype.getLocalBounds=function(e){e||(this._localBoundsRect||(this._localBoundsRect=new st),e=this._localBoundsRect),this._localBounds||(this._localBounds=new ho);var t=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var r=this._bounds,i=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,e);return this.parent=n,this.transform=t,this._bounds=r,this._bounds.updateID+=this._boundsID-i,o},t.prototype.toGlobal=function(e,t,n){return void 0===n&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)},t.prototype.toLocal=function(e,t,n,r){return t&&(e=t.toGlobal(e,n,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},t.prototype.setTransform=function(e,t,n,r,i,o,a,s,l){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===l&&(l=0),this.position.x=e,this.position.y=t,this.scale.x=n||1,this.scale.y=r||1,this.rotation=i,this.skew.x=o,this.skew.y=a,this.pivot.x=s,this.pivot.y=l,this},t.prototype.destroy=function(e){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new Do),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e},t.prototype.disableTempParent=function(e){this.parent=e},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(e){this.transform.position.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(e){this.transform.position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(e){this.transform.position.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(e){this.transform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(e){this.transform.skew.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*rt},set:function(e){this.transform.rotation=e*it},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(e){var t;this._mask!==e&&(this._mask&&((t=this._mask.maskObject||this._mask)._maskRefCount--,0===t._maskRefCount&&(t.renderable=!0,t.isMask=!1)),this._mask=e,this._mask&&(0===(t=this._mask.maskObject||this._mask)._maskRefCount&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++))},enumerable:!1,configurable:!0}),t}(Te()),Do=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sortDirty=null,t}return po(t,e),t}(ko);function Lo(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}ko.prototype.displayObjectUpdateTransform=ko.prototype.updateTransform,function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"}(yo||(yo={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"}(mo||(mo={})),function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"}(go||(go={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"}(vo||(vo={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(_o||(_o={})),function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(bo||(bo={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(xo||(xo={})),function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"}(Eo||(Eo={})),function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"}(So||(So={})),function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"}(To||(To={})),function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(wo||(wo={})),function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"}(Ao||(Ao={})),function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(Po||(Po={})),function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"}(Oo||(Oo={})),function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"}(Ro||(Ro={})),function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"}(Co||(Co={})),function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"}(Io||(Io={})),function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"}(No||(No={})),function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(Mo||(Mo={}));var Fo=function(e){function t(){var t=e.call(this)||this;return t.children=[],t.sortableChildren=co,t.sortDirty=!1,t}return po(t,e),t.prototype.onChildrenChange=function(e){},t.prototype.addChild=function(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];if(t.length>1)for(var r=0;r<t.length;r++)this.addChild(t[r]);else{var i=t[0];i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.push(i),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this)}return t[0]},t.prototype.addChildAt=function(e,t){if(t<0||t>this.children.length)throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e},t.prototype.swapChildren=function(e,t){if(e!==t){var n=this.getChildIndex(e),r=this.getChildIndex(t);this.children[n]=t,this.children[r]=e,this.onChildrenChange(n<r?n:r)}},t.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},t.prototype.setChildIndex=function(e,t){if(t<0||t>=this.children.length)throw new Error("The index "+t+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(e);ze(this.children,n,1),this.children.splice(t,0,e),this.onChildrenChange(t)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];if(t.length>1)for(var r=0;r<t.length;r++)this.removeChild(t[r]);else{var i=t[0],o=this.children.indexOf(i);if(-1===o)return null;i.parent=null,i.transform._parentID=-1,ze(this.children,o,1),this._boundsID++,this.onChildrenChange(o),i.emit("removed",this),this.emit("childRemoved",i,this,o)}return t[0]},t.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,ze(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t},t.prototype.removeChildren=function(e,t){void 0===e&&(e=0),void 0===t&&(t=this.children.length);var n,r=e,i=t-r;if(i>0&&i<=t){n=this.children.splice(r,i);for(var o=0;o<n.length;++o)n[o].parent=null,n[o].transform&&(n[o].transform._parentID=-1);for(this._boundsID++,this.onChildrenChange(e),o=0;o<n.length;++o)n[o].emit("removed",this),this.emit("childRemoved",n[o],this,o);return n}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var e=!1,t=0,n=this.children.length;t<n;++t){var r=this.children[t];r._lastSortedIndex=t,e||0===r.zIndex||(e=!0)}e&&this.children.length>1&&this.children.sort(Lo),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,t=this.children.length;e<t;++e){var n=this.children[e];n.visible&&n.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var t=this.children[e];if(t.visible&&t.renderable)if(t.calculateBounds(),t._mask){var n=t._mask.maskObject||t._mask;n.calculateBounds(),this._bounds.addBoundsMask(t._bounds,n._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(t,n){void 0===n&&(n=!1);var r=e.prototype.getLocalBounds.call(this,t);if(!n)for(var i=0,o=this.children.length;i<o;++i){var a=this.children[i];a.visible&&a.updateTransform()}return r},t.prototype._calculateBounds=function(){},t.prototype._renderWithCulling=function(e){var n=e.renderTexture.sourceFrame;if(n.width>0&&n.height>0){var r,i;if(this.cullArea?(r=this.cullArea,i=this.worldTransform):this._render!==t.prototype._render&&(r=this.getBounds(!0)),r&&n.intersects(r,i))this._render(e);else if(this.cullArea)return;for(var o=0,a=this.children.length;o<a;++o){var s=this.children[o],l=s.cullable;s.cullable=l||!this.cullArea,s.render(e),s.cullable=l}}},t.prototype.render=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(var t=0,n=this.children.length;t<n;++t)this.children[t].render(e)}},t.prototype.renderAdvanced=function(e){var t=this.filters,n=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<t.length;r++)t[r].enabled&&this._enabledFilters.push(t[r])}var i=t&&this._enabledFilters&&this._enabledFilters.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==Io.NONE));if(i&&e.batch.flush(),t&&this._enabledFilters&&this._enabledFilters.length&&e.filter.push(this,this._enabledFilters),n&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e),r=0;for(var o=this.children.length;r<o;++r)this.children[r].render(e)}i&&e.batch.flush(),n&&e.mask.pop(this),t&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()},t.prototype._render=function(e){},t.prototype.destroy=function(t){e.prototype.destroy.call(this),this.sortDirty=!1;var n="boolean"==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(n)for(var i=0;i<r.length;++i)r[i].destroy(t)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e},enumerable:!1,configurable:!0}),t}(ko);Fo.prototype.containerUpdateTransform=Fo.prototype.updateTransform;var Uo=new st,Bo=function(){function e(e){this.renderer=e}return e.prototype.image=function(e,t,n){var r=new Image;return r.src=this.base64(e,t,n),r},e.prototype.base64=function(e,t,n){return this.canvas(e).toDataURL(t,n)},e.prototype.canvas=function(t){var n,r,i,o=this.renderer,a=!1,s=!1;t&&(t instanceof Ln?i=t:(i=this.renderer.generateTexture(t),s=!0)),i?(n=i.baseTexture.resolution,r=i.frame,a=!1,o.renderTexture.bind(i)):(n=this.renderer.resolution,a=!0,(r=Uo).width=this.renderer.width,r.height=this.renderer.height,o.renderTexture.bind(null));var l=Math.floor(r.width*n+1e-4),u=Math.floor(r.height*n+1e-4),c=new Je(l,u,1),h=new Uint8Array(4*l*u),d=o.gl;d.readPixels(r.x*n,r.y*n,l,u,d.RGBA,d.UNSIGNED_BYTE,h);var f=c.context.getImageData(0,0,l,u);if(e.arrayPostDivide(h,f.data),c.context.putImageData(f,0,0),a){var p=new Je(c.width,c.height,1);p.context.scale(1,-1),p.context.drawImage(c.canvas,0,-u),c.destroy(),c=p}return s&&i.destroy(!0),c.canvas},e.prototype.pixels=function(t,n){var r,i,o,a=this.renderer,s=!1;t&&(t instanceof Ln?o=t:t instanceof ko&&(o=this.renderer.generateTexture(t),s=!0)),o?n?(r=n.resolution,i=o.frame,a.renderTexture.bind(o)):(r=o.baseTexture.resolution,i=o.frame,a.renderTexture.bind(o)):n?(r=n.resolution,(i=Uo).width=n.width,i.height=n.height,a.renderTexture.bind(null)):(r=a.resolution,(i=Uo).width=a.width,i.height=a.height,a.renderTexture.bind(null));var l=i.width*r,u=i.height*r,c=new Uint8Array(4*l*u),h=a.gl;return h.readPixels(i.x*r,i.y*r,l,u,h.RGBA,h.UNSIGNED_BYTE,c),s&&o.destroy(!0),e.arrayPostDivide(c,c),c},e.prototype.destroy=function(){this.renderer=null},e.arrayPostDivide=function(e,t){for(var n=0;n<e.length;n+=4){var r=t[n+3]=e[n+3];0!==r?(t[n]=Math.round(Math.min(255*e[n]/r,255)),t[n+1]=Math.round(Math.min(255*e[n+1]/r,255)),t[n+2]=Math.round(Math.min(255*e[n+2]/r,255))):(t[n]=e[n],t[n+1]=e[n+1],t[n+2]=e[n+2])}},e}(),Go=function(){function e(e,t,n){void 0===t&&(t=!1),this._fn=e,this._once=t,this._thisArg=n,this._next=this._prev=this._owner=null}return e.prototype.detach=function(){return null!==this._owner&&(this._owner.detach(this),!0)},e}();function jo(e,t){return e._head?(e._tail._next=t,t._prev=e._tail,e._tail=t):(e._head=t,e._tail=t),t._owner=e,t}var $o,zo=function(){function e(){this._head=this._tail=void 0}return e.prototype.handlers=function(e){void 0===e&&(e=!1);var t=this._head;if(e)return!!t;for(var n=[];t;)n.push(t),t=t._next;return n},e.prototype.has=function(e){if(!(e instanceof Go))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return e._owner===this},e.prototype.dispatch=function(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];var r=this._head;if(!r)return!1;for(;r;)r._once&&this.detach(r),r._fn.apply(r._thisArg,t),r=r._next;return!0},e.prototype.add=function(e,t){if(void 0===t&&(t=null),"function"!=typeof e)throw new Error("MiniSignal#add(): First arg must be a Function.");return jo(this,new Go(e,!1,t))},e.prototype.once=function(e,t){if(void 0===t&&(t=null),"function"!=typeof e)throw new Error("MiniSignal#once(): First arg must be a Function.");return jo(this,new Go(e,!0,t))},e.prototype.detach=function(e){if(!(e instanceof Go))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return e._owner!==this||(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,null===e._next&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null),this},e.prototype.detachAll=function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this},e}();function Xo(e,t){t=t||{};for(var n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=n.parser[t.strictMode?"strict":"loose"].exec(e),i={},o=14;o--;)i[n.key[o]]=r[o]||"";return i[n.q.name]={},i[n.key[12]].replace(n.q.parser,(function(e,t,r){t&&(i[n.q.name][t]=r)})),i}var Ho=null;function Vo(){}function Yo(e,t,n){t&&0===t.indexOf(".")&&(t=t.substring(1)),t&&(e[t]=n)}function Wo(e){return e.toString().replace("object ","")}var qo=function(){function e(t,n,r){if(this._dequeue=Vo,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,"string"!=typeof t||"string"!=typeof n)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(e.STATUS_FLAGS.DATA_URL,0===n.indexOf("data:")),this.name=t,this.url=n,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=e.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=Vo,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new zo,this.onProgress=new zo,this.onComplete=new zo,this.onAfterMiddleware=new zo}return e.setExtensionLoadType=function(t,n){Yo(e._loadTypeMap,t,n)},e.setExtensionXhrType=function(t,n){Yo(e._xhrTypeMap,t,n)},Object.defineProperty(e.prototype,"isDataUrl",{get:function(){return this._hasFlag(e.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isComplete",{get:function(){return this._hasFlag(e.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this._hasFlag(e.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),e.prototype.complete=function(){this._clearEvents(),this._finish()},e.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=e.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.prototype.load=function(t){var n=this;if(!this.isLoading)if(this.isComplete)t&&setTimeout((function(){return t(n)}),1);else switch(t&&this.onComplete.once(t),this._setFlag(e.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this.type=e.TYPE.IMAGE,this._loadElement("image");break;case e.LOAD_TYPE.AUDIO:this.type=e.TYPE.AUDIO,this._loadSourceElement("audio");break;case e.LOAD_TYPE.VIDEO:this.type=e.TYPE.VIDEO,this._loadSourceElement("video");break;case e.LOAD_TYPE.XHR:default:void 0===$o&&($o=!(!globalThis.XDomainRequest||"withCredentials"in new XMLHttpRequest)),$o&&this.crossOrigin?this._loadXdr():this._loadXhr()}},e.prototype._hasFlag=function(e){return 0!=(this._flags&e)},e.prototype._setFlag=function(e,t){this._flags=t?this._flags|e:this._flags&~e},e.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(e.STATUS_FLAGS.COMPLETE,!0),this._setFlag(e.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===e&&void 0!==globalThis.Image?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===e&&void 0!==globalThis.Audio?this.data=new Audio:this.data=document.createElement(e),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(e,this.url[n],Array.isArray(t)?t[n]:t));else t=this.metadata.mimeType,this.data.appendChild(this._createSource(e,this.url,Array.isArray(t)?t[0]:t));this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+e)},e.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;"use-credentials"===this.crossOrigin&&(t.withCredentials=!0),t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=e.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},e.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new globalThis.XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout((function(){return e.send()}),1)},e.prototype._createSource=function(e,t,n){n||(n=e+"/"+this._getExtension(t));var r=document.createElement("source");return r.src=t,r.type=n,r},e.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},e.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},e.prototype._onTimeout=function(){this.abort("Load timed out.")},e.prototype._xhrOnError=function(){var e=this.xhr;this.abort(Wo(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},e.prototype._xhrOnTimeout=function(){var e=this.xhr;this.abort(Wo(e)+" Request timed out.")},e.prototype._xhrOnAbort=function(){var e=this.xhr;this.abort(Wo(e)+" Request was aborted by the user.")},e.prototype._xhrOnLoad=function(){var t=this.xhr,n="",r=void 0===t.status?200:t.status;if(""!==t.responseType&&"text"!==t.responseType&&void 0!==t.responseType||(n=t.responseText),0===r&&(n.length>0||t.responseType===e.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2==(r/100|0)){if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=n,this.type=e.TYPE.TEXT;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(n),this.type=e.TYPE.JSON}catch(e){return void this.abort("Error trying to parse loaded json: "+e)}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var i=new DOMParser;this.data=i.parseFromString(n,"text/xml")}else{var o=document.createElement("div");o.innerHTML=n,this.data=o}this.type=e.TYPE.XML}catch(e){return void this.abort("Error trying to parse loaded xml: "+e)}else this.data=t.response||n;this.complete()}else this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL)},e.prototype._determineCrossOrigin=function(e,t){if(0===e.indexOf("data:"))return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";t=t||globalThis.location,Ho||(Ho=document.createElement("a")),Ho.href=e;var n=Xo(Ho.href,{strictMode:!0}),r=!n.port&&""===t.port||n.port===t.port,i=n.protocol?n.protocol+":":"";return n.host===t.hostname&&r&&i===t.protocol?"":"anonymous"},e.prototype._determineXhrType=function(){return e._xhrTypeMap[this.extension]||e.XHR_RESPONSE_TYPE.TEXT},e.prototype._determineLoadType=function(){return e._loadTypeMap[this.extension]||e.LOAD_TYPE.XHR},e.prototype._getExtension=function(e){void 0===e&&(e=this.url);var t="";if(this.isDataUrl){var n=e.indexOf("/");t=e.substring(n+1,e.indexOf(";",n))}else{var r=e.indexOf("?"),i=e.indexOf("#"),o=Math.min(r>-1?r:e.length,i>-1?i:e.length);t=(e=e.substring(0,o)).substring(e.lastIndexOf(".")+1)}return t.toLowerCase()},e.prototype._getMimeFromXhrType=function(t){switch(t){case e.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case e.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case e.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case e.XHR_RESPONSE_TYPE.JSON:return"application/json";case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},e}();function Ko(){}function Qo(e){return function(){for(var t=arguments,n=[],r=0;r<arguments.length;r++)n[r]=t[r];if(null===e)throw new Error("Callback was already called.");var i=e;e=null,i.apply(this,n)}}!function(e){var t,n,r,i;(t=e.STATUS_FLAGS||(e.STATUS_FLAGS={}))[t.NONE=0]="NONE",t[t.DATA_URL=1]="DATA_URL",t[t.COMPLETE=2]="COMPLETE",t[t.LOADING=4]="LOADING",(n=e.TYPE||(e.TYPE={}))[n.UNKNOWN=0]="UNKNOWN",n[n.JSON=1]="JSON",n[n.XML=2]="XML",n[n.IMAGE=3]="IMAGE",n[n.AUDIO=4]="AUDIO",n[n.VIDEO=5]="VIDEO",n[n.TEXT=6]="TEXT",(r=e.LOAD_TYPE||(e.LOAD_TYPE={}))[r.XHR=1]="XHR",r[r.IMAGE=2]="IMAGE",r[r.AUDIO=3]="AUDIO",r[r.VIDEO=4]="VIDEO",(i=e.XHR_RESPONSE_TYPE||(e.XHR_RESPONSE_TYPE={})).DEFAULT="text",i.BUFFER="arraybuffer",i.BLOB="blob",i.DOCUMENT="document",i.JSON="json",i.TEXT="text",e._loadTypeMap={gif:e.LOAD_TYPE.IMAGE,png:e.LOAD_TYPE.IMAGE,bmp:e.LOAD_TYPE.IMAGE,jpg:e.LOAD_TYPE.IMAGE,jpeg:e.LOAD_TYPE.IMAGE,tif:e.LOAD_TYPE.IMAGE,tiff:e.LOAD_TYPE.IMAGE,webp:e.LOAD_TYPE.IMAGE,tga:e.LOAD_TYPE.IMAGE,svg:e.LOAD_TYPE.IMAGE,"svg+xml":e.LOAD_TYPE.IMAGE,mp3:e.LOAD_TYPE.AUDIO,ogg:e.LOAD_TYPE.AUDIO,wav:e.LOAD_TYPE.AUDIO,mp4:e.LOAD_TYPE.VIDEO,webm:e.LOAD_TYPE.VIDEO},e._xhrTypeMap={xhtml:e.XHR_RESPONSE_TYPE.DOCUMENT,html:e.XHR_RESPONSE_TYPE.DOCUMENT,htm:e.XHR_RESPONSE_TYPE.DOCUMENT,xml:e.XHR_RESPONSE_TYPE.DOCUMENT,tmx:e.XHR_RESPONSE_TYPE.DOCUMENT,svg:e.XHR_RESPONSE_TYPE.DOCUMENT,tsx:e.XHR_RESPONSE_TYPE.DOCUMENT,gif:e.XHR_RESPONSE_TYPE.BLOB,png:e.XHR_RESPONSE_TYPE.BLOB,bmp:e.XHR_RESPONSE_TYPE.BLOB,jpg:e.XHR_RESPONSE_TYPE.BLOB,jpeg:e.XHR_RESPONSE_TYPE.BLOB,tif:e.XHR_RESPONSE_TYPE.BLOB,tiff:e.XHR_RESPONSE_TYPE.BLOB,webp:e.XHR_RESPONSE_TYPE.BLOB,tga:e.XHR_RESPONSE_TYPE.BLOB,json:e.XHR_RESPONSE_TYPE.JSON,text:e.XHR_RESPONSE_TYPE.TEXT,txt:e.XHR_RESPONSE_TYPE.TEXT,ttf:e.XHR_RESPONSE_TYPE.BUFFER,otf:e.XHR_RESPONSE_TYPE.BUFFER},e.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="}(qo||(qo={}));var Zo=function(e,t){this.data=e,this.callback=t},Jo=function(){function e(e,t){var n=this;if(void 0===t&&(t=1),this.workers=0,this.saturated=Ko,this.unsaturated=Ko,this.empty=Ko,this.drain=Ko,this.error=Ko,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(e,t,r){if(r&&"function"!=typeof r)throw new Error("task callback must be a function");if(n.started=!0,null==e&&n.idle())setTimeout((function(){return n.drain()}),1);else{var i=new Zo(e,"function"==typeof r?r:Ko);t?n._tasks.unshift(i):n._tasks.push(i),setTimeout(n.process,1)}},this.process=function(){for(;!n.paused&&n.workers<n.concurrency&&n._tasks.length;){var e=n._tasks.shift();0===n._tasks.length&&n.empty(),n.workers+=1,n.workers===n.concurrency&&n.saturated(),n._worker(e.data,Qo(n._next(e)))}},this._worker=e,0===t)throw new Error("Concurrency must not be zero");this.concurrency=t,this.buffer=t/4}return e.prototype._next=function(e){var t=this;return function(){for(var n=arguments,r=[],i=0;i<arguments.length;i++)r[i]=n[i];t.workers-=1,e.callback.apply(e,r),null!=r[0]&&t.error(r[0],e.data),t.workers<=t.concurrency-t.buffer&&t.unsaturated(),t.idle()&&t.drain(),t.process()}},e.prototype.push=function(e,t){this._insert(e,!1,t)},e.prototype.kill=function(){this.workers=0,this.drain=Ko,this.started=!1,this._tasks=[]},e.prototype.unshift=function(e,t){this._insert(e,!0,t)},e.prototype.length=function(){return this._tasks.length},e.prototype.running=function(){return this.workers},e.prototype.idle=function(){return this._tasks.length+this.workers===0},e.prototype.pause=function(){!0!==this.paused&&(this.paused=!0)},e.prototype.resume=function(){if(!1!==this.paused){this.paused=!1;for(var e=1;e<=this.concurrency;e++)this.process()}},e.eachSeries=function(e,t,n,r){var i=0,o=e.length;!function a(s){s||i===o?n&&n(s):r?setTimeout((function(){t(e[i++],a)}),1):t(e[i++],a)}()},e.queue=function(t,n){return new e(t,n)},e}(),ea=/(#[\w-]+)?$/,ta=function(){function e(t,n){var r=this;void 0===t&&(t=""),void 0===n&&(n=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(e,t){return r._loadResource(e,t)},this.resources={},this.baseUrl=t,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(e,t){return r._loadResource(e,t)},this._queue=Jo.queue(this._boundLoadResource,n),this._queue.pause(),this.resources={},this.onProgress=new zo,this.onError=new zo,this.onLoad=new zo,this.onStart=new zo,this.onComplete=new zo;for(var i=0;i<e._plugins.length;++i){var o=e._plugins[i],a=o.pre,s=o.use;a&&this.pre(a),s&&this.use(s)}this._protected=!1}return e.prototype._add=function(e,t,n,r){if(this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(t=this._prepareUrl(t),this.resources[e]=new qo(e,t,n),"function"==typeof r&&this.resources[e].onAfterMiddleware.once(r),this.loading){for(var i=n.parentResource,o=[],a=0;a<i.children.length;++a)i.children[a].isComplete||o.push(i.children[a]);var s=i.progressChunk*(o.length+1)/(o.length+2);for(i.children.push(this.resources[e]),i.progressChunk=s,a=0;a<o.length;++a)o[a].progressChunk=s;this.resources[e].progressChunk=s}return this._queue.push(this.resources[e]),this},e.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},e.prototype.use=function(e){return this._afterMiddleware.push(e),this},e.prototype.reset=function(){for(var e in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var t=this.resources[e];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort("loader reset")}return this.resources={},this},e.prototype.load=function(e){if("function"==typeof e&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var t=100/this._queue._tasks.length,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=t;this._onStart(),this._queue.resume()}return this},Object.defineProperty(e.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e},enumerable:!1,configurable:!0}),e.prototype._prepareUrl=function(e){var t,n=Xo(e,{strictMode:!0});if(t=n.protocol||!n.path||0===e.indexOf("//")?e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==e.charAt(0)?this.baseUrl+"/"+e:this.baseUrl+e,this.defaultQueryString){var r=ea.exec(t)[0];-1!==(t=t.slice(0,t.length-r.length)).indexOf("?")?t+="&"+this.defaultQueryString:t+="?"+this.defaultQueryString,t+=r}return t},e.prototype._loadResource=function(e,t){var n=this;e._dequeue=t,Jo.eachSeries(this._beforeMiddleware,(function(t,r){t.call(n,e,(function(){r(e.isComplete?{}:null)}))}),(function(){e.isComplete?n._onLoad(e):(e._onLoadBinding=e.onComplete.once(n._onLoad,n),e.load())}),!0)},e.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e.prototype._onLoad=function(e){var t=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),Jo.eachSeries(this._afterMiddleware,(function(n,r){n.call(t,e,r)}),(function(){e.onAfterMiddleware.dispatch(e),t.progress=Math.min(100,t.progress+e.progressChunk),t.onProgress.dispatch(t,e),e.error?t.onError.dispatch(e.error,t,e):t.onLoad.dispatch(t,e),t._resourcesParsing.splice(t._resourcesParsing.indexOf(e),1),t._queue.idle()&&0===t._resourcesParsing.length&&t._onComplete()}),!0)},e.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(e,"shared",{get:function(){var t=e._shared;return t||((t=new e)._protected=!0,e._shared=t),t},enumerable:!1,configurable:!0}),e.registerPlugin=function(t){return e._plugins.push(t),t.add&&t.add(),e},e._plugins=[],e}();ta.prototype.add=function(e,t,n,r){if(Array.isArray(e)){for(var i=0;i<e.length;++i)this.add(e[i]);return this}if("object"==typeof e&&(n=e,r=t||n.callback||n.onComplete,t=n.url,e=n.name||n.key||n.url),"string"!=typeof t&&(r=n,n=t,t=e),"string"!=typeof t)throw new Error("No url passed to add resource to loader.");return"function"==typeof n&&(r=n,n=null),this._add(e,t,n,r)};var na,ra,ia=function(){function e(){}return e.init=function(e){e=Object.assign({sharedLoader:!1},e),this.loader=e.sharedLoader?ta.shared:new ta},e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e}(),oa=function(){function e(){}return e.add=function(){qo.setExtensionLoadType("svg",qo.LOAD_TYPE.XHR),qo.setExtensionXhrType("svg",qo.XHR_RESPONSE_TYPE.TEXT)},e.use=function(e,t){if(!e.data||e.type!==qo.TYPE.IMAGE&&"svg"!==e.extension)t();else{var n=e.data,r=e.url,i=e.name,o=e.metadata;Dn.fromLoader(n,r,i,o).then((function(n){e.texture=n,t()})).catch(t)}},e}();ta.registerPlugin({use:function(e,t){if(e.data){if(e.xhr&&e.xhrType===qo.XHR_RESPONSE_TYPE.BLOB)if(self.Blob&&"string"!=typeof e.data){if(0===e.data.type.indexOf("image")){var n=globalThis.URL||globalThis.webkitURL,r=n.createObjectURL(e.data);return e.blob=e.data,e.data=new Image,e.data.src=r,e.type=qo.TYPE.IMAGE,void(e.data.onload=function(){n.revokeObjectURL(r),e.data.onload=null,t()})}}else{var i=e.xhr.getResponseHeader("content-type");if(i&&0===i.indexOf("image"))return e.data=new Image,e.data.src="data:"+i+";base64,"+function(e){for(var t="",n=0;n<e.length;){for(var r=[0,0,0],i=[0,0,0,0],o=0;o<r.length;++o)n<e.length?r[o]=255&e.charCodeAt(n++):r[o]=0;switch(i[0]=r[0]>>2,i[1]=(3&r[0])<<4|r[1]>>4,i[2]=(15&r[1])<<2|r[2]>>6,i[3]=63&r[2],n-(e.length-1)){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64}for(o=0;o<i.length;++o)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(i[o])}return t}(e.xhr.responseText),e.type=qo.TYPE.IMAGE,void(e.data.onload=function(){e.data.onload=null,t()})}t()}else t()}}),ta.registerPlugin(oa),function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"}(ra||(ra={}));var aa=((na={})[ra.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,na[ra.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,na[ra.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,na[ra.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,na[ra.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,na[ra.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,na[ra.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,na[ra.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,na[ra.COMPRESSED_R11_EAC]=.5,na[ra.COMPRESSED_SIGNED_R11_EAC]=.5,na[ra.COMPRESSED_RG11_EAC]=1,na[ra.COMPRESSED_SIGNED_RG11_EAC]=1,na[ra.COMPRESSED_RGB8_ETC2]=.5,na[ra.COMPRESSED_RGBA8_ETC2_EAC]=1,na[ra.COMPRESSED_SRGB8_ETC2]=.5,na[ra.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,na[ra.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,na[ra.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,na[ra.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,na[ra.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,na[ra.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,na[ra.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,na[ra.COMPRESSED_RGB_ETC1_WEBGL]=.5,na[ra.COMPRESSED_RGB_ATC_WEBGL]=.5,na[ra.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,na[ra.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,na),sa=function(e,t){return sa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},sa(e,t)};function la(e,t){function n(){this.constructor=e}sa(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var ua,ca,ha=function(e){function t(t,n){void 0===n&&(n={width:1,height:1,autoLoad:!0});var r,i,o=this;return"string"==typeof t?(r=t,i=new Uint8Array):(r=null,i=t),(o=e.call(this,i,n)||this).origin=r,o.buffer=i?new fi(i):null,o.origin&&!1!==n.autoLoad&&o.load(),i&&i.length&&(o.loaded=!0,o.onBlobLoaded(o.buffer.rawBinaryData)),o}return la(t,e),t.prototype.onBlobLoaded=function(e){},t.prototype.load=function(){return function(e,t,n,r){return new(n||(n=Promise))((function(t,i){function o(e){try{s(r.next(e))}catch(e){i(e)}}function a(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?t(e.value):new n((function(t){t(e.value)})).then(o,a)}s((r=r.apply(e,[])).next())}))}(this,0,Promise,(function(){var e;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(t){switch(t.label){case 0:return[4,fetch(this.origin)];case 1:return[4,t.sent().blob()];case 2:return[4,t.sent().arrayBuffer()];case 3:return e=t.sent(),this.data=new Uint32Array(e),this.buffer=new fi(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),[2,this]}}))}))},t}(mn),da=function(e){function t(n,r){var i=e.call(this,n,r)||this;return i.format=r.format,i.levels=r.levels||1,i._width=r.width,i._height=r.height,i._extension=t._formatToExtension(i.format),(r.levelBuffers||i.buffer)&&(i._levelBuffers=r.levelBuffers||t._createLevelBuffers(n instanceof Uint8Array?n:i.buffer.uint8View,i.format,i.levels,4,4,i.width,i.height)),i}return la(t,e),t.prototype.upload=function(e,t,n){var r=e.gl;if(!e.context.extensions[this._extension])throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var i=0,o=this.levels;i<o;i++){var a=this._levelBuffers[i],s=a.levelID,l=a.levelWidth,u=a.levelHeight,c=a.levelBuffer;r.compressedTexImage2D(r.TEXTURE_2D,s,this.format,l,u,0,c)}return!0},t.prototype.onBlobLoaded=function(){this._levelBuffers=t._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},t._formatToExtension=function(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},t._createLevelBuffers=function(e,t,n,r,i,o,a){for(var s=new Array(n),l=e.byteOffset,u=o,c=a,h=u+r-1&~(r-1),d=c+i-1&~(i-1),f=h*d*aa[t],p=0;p<n;p++)s[p]={levelID:p,levelWidth:n>1?u:h,levelHeight:n>1?c:d,levelBuffer:new Uint8Array(e.buffer,l,f)},l+=f,f=(h=(u=u>>1||1)+r-1&~(r-1))*(d=(c=c>>1||1)+i-1&~(i-1))*aa[t];return s},t}(ha),fa=function(){function e(){}return e.use=function(t,n){var r=t.data;if(t.type===qo.TYPE.JSON&&r&&r.cacheID&&r.textures){for(var i=r.textures,o=void 0,a=void 0,s=0,l=i.length;s<l;s++){var u=i[s],c=u.src,h=u.format;if(h||(a=c),e.textureFormats[h]){o=c;break}}if(!(o=o||a))return void n(new Error("Cannot load compressed-textures in "+t.url+", make sure you provide a fallback"));if(o===t.url)return void n(new Error("URL of compressed texture cannot be the same as the manifest's URL"));var d={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},f=Oe.resolve(t.url.replace(this.baseUrl,""),o),p=r.cacheID;this.add(p,f,d,(function(e){if(e.error)n(e.error);else{var r=e.texture,i=void 0===r?null:r,o=e.textures,a=void 0===o?{}:o;Object.assign(t,{texture:i,textures:a}),n()}}))}else n()},Object.defineProperty(e,"textureExtensions",{get:function(){if(!e._textureExtensions){var t=document.createElement("canvas").getContext("webgl");if(!t)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var n={s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};e._textureExtensions=n}return e._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(e,"textureFormats",{get:function(){if(!e._textureFormats){var t=e.textureExtensions;for(var n in e._textureFormats={},t){var r=t[n];r&&Object.assign(e._textureFormats,Object.getPrototypeOf(r))}}return e._textureFormats},enumerable:!1,configurable:!0}),e}();function pa(e,t,n){var r={textures:{},texture:null};return t?(t.map((function(e){return new Dn(new vn(e,Object.assign({mipmap:pe.OFF,alphaMode:ye.NO_PREMULTIPLIED_ALPHA},n)))})).forEach((function(t,n){var i=t.baseTexture,o=e+"-"+(n+1);vn.addToCache(i,o),Dn.addToCache(t,o),0===n&&(vn.addToCache(i,e),Dn.addToCache(t,e),r.texture=t),r.textures[o]=t})),r):r}qo.setExtensionXhrType("dds",qo.XHR_RESPONSE_TYPE.BUFFER);var ya,ma;!function(e){e[e.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",e[e.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",e[e.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",e[e.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",e[e.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",e[e.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",e[e.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",e[e.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",e[e.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",e[e.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",e[e.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",e[e.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",e[e.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",e[e.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",e[e.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",e[e.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",e[e.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",e[e.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",e[e.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",e[e.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",e[e.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",e[e.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",e[e.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",e[e.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",e[e.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",e[e.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",e[e.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",e[e.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",e[e.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",e[e.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",e[e.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",e[e.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",e[e.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",e[e.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",e[e.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",e[e.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",e[e.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",e[e.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",e[e.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",e[e.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",e[e.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",e[e.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",e[e.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",e[e.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",e[e.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",e[e.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",e[e.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",e[e.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",e[e.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",e[e.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",e[e.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",e[e.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",e[e.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",e[e.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",e[e.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",e[e.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",e[e.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",e[e.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",e[e.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",e[e.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",e[e.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",e[e.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",e[e.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",e[e.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",e[e.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",e[e.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",e[e.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",e[e.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",e[e.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",e[e.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",e[e.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",e[e.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",e[e.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",e[e.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",e[e.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",e[e.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",e[e.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",e[e.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",e[e.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",e[e.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",e[e.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",e[e.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",e[e.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",e[e.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",e[e.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",e[e.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",e[e.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",e[e.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",e[e.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",e[e.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",e[e.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",e[e.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",e[e.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",e[e.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",e[e.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",e[e.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",e[e.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",e[e.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",e[e.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",e[e.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",e[e.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",e[e.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",e[e.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",e[e.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",e[e.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",e[e.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",e[e.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",e[e.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",e[e.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",e[e.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",e[e.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",e[e.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",e[e.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",e[e.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",e[e.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",e[e.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",e[e.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",e[e.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",e[e.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",e[e.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",e[e.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",e[e.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"}(ya||(ya={})),function(e){e[e.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",e[e.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",e[e.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"}(ma||(ma={}));var ga,va,_a,ba=((ua={})[827611204]=ra.COMPRESSED_RGBA_S3TC_DXT1_EXT,ua[861165636]=ra.COMPRESSED_RGBA_S3TC_DXT3_EXT,ua[894720068]=ra.COMPRESSED_RGBA_S3TC_DXT5_EXT,ua),xa=((ca={})[ya.DXGI_FORMAT_BC1_TYPELESS]=ra.COMPRESSED_RGBA_S3TC_DXT1_EXT,ca[ya.DXGI_FORMAT_BC1_UNORM]=ra.COMPRESSED_RGBA_S3TC_DXT1_EXT,ca[ya.DXGI_FORMAT_BC2_TYPELESS]=ra.COMPRESSED_RGBA_S3TC_DXT3_EXT,ca[ya.DXGI_FORMAT_BC2_UNORM]=ra.COMPRESSED_RGBA_S3TC_DXT3_EXT,ca[ya.DXGI_FORMAT_BC3_TYPELESS]=ra.COMPRESSED_RGBA_S3TC_DXT5_EXT,ca[ya.DXGI_FORMAT_BC3_UNORM]=ra.COMPRESSED_RGBA_S3TC_DXT5_EXT,ca[ya.DXGI_FORMAT_BC1_UNORM_SRGB]=ra.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,ca[ya.DXGI_FORMAT_BC2_UNORM_SRGB]=ra.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,ca[ya.DXGI_FORMAT_BC3_UNORM_SRGB]=ra.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,ca),Ea=function(){function e(){}return e.use=function(t,n){if("dds"===t.extension&&t.data)try{Object.assign(t,pa(t.name||t.url,e.parse(t.data),t.metadata))}catch(e){return void n(e)}n()},e.parse=function(e){var t=new Uint32Array(e);if(542327876!==t[0])throw new Error("Invalid DDS file magic word");var n=new Uint32Array(e,0,124/Uint32Array.BYTES_PER_ELEMENT),r=n[3],i=n[4],o=n[7],a=new Uint32Array(e,19*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),s=a[1];if(4&s){var l=a[2];if(808540228!==l){var u=ba[l],c=new Uint8Array(e,128);return[new da(c,{format:u,width:i,height:r,levels:o})]}var h=new Uint32Array(t.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),d=h[0],f=h[1],p=h[2],y=h[3],m=xa[d];if(void 0===m)throw new Error("DDSLoader cannot parse texture data with DXGI format "+d);if(4===p)throw new Error("DDSLoader does not support cubemap textures");if(f===ma.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSLoader does not supported 3D texture data");var g=new Array;if(1===y)g.push(new Uint8Array(e,148));else{for(var v=aa[m],_=0,b=i,x=r,E=0;E<o;E++)_+=Math.max(1,b+3&-4)*Math.max(1,x+3&-4)*v,b>>>=1,x>>>=1;var S=148;for(E=0;E<y;E++)g.push(new Uint8Array(e,S,_)),S+=_}return g.map((function(e){return new da(e,{format:m,width:i,height:r,levels:o})}))}if(64&s)throw new Error("DDSLoader does not support uncompressed texture data.");if(512&s)throw new Error("DDSLoader does not supported YUV uncompressed texture data.");if(131072&s)throw new Error("DDSLoader does not support single-channel (lumninance) texture data!");if(2&s)throw new Error("DDSLoader does not support single-channel (alpha) texture data!");throw new Error("DDSLoader failed to load a texture file due to an unknown reason!")},e}();qo.setExtensionXhrType("ktx",qo.XHR_RESPONSE_TYPE.BUFFER);var Sa=[171,75,84,88,32,49,49,187,13,10,26,10],Ta=((ga={})[ce.UNSIGNED_BYTE]=1,ga[ce.UNSIGNED_SHORT]=2,ga[ce.INT]=4,ga[ce.UNSIGNED_INT]=4,ga[ce.FLOAT]=4,ga[ce.HALF_FLOAT]=8,ga),wa=((va={})[le.RGBA]=4,va[le.RGB]=3,va[le.RG]=2,va[le.RED]=1,va[le.LUMINANCE]=1,va[le.LUMINANCE_ALPHA]=2,va[le.ALPHA]=1,va),Aa=((_a={})[ce.UNSIGNED_SHORT_4_4_4_4]=2,_a[ce.UNSIGNED_SHORT_5_5_5_1]=2,_a[ce.UNSIGNED_SHORT_5_6_5]=2,_a),Pa=function(){function e(){}return e.use=function(t,n){if("ktx"===t.extension&&t.data)try{var r=t.name||t.url,i=e.parse(r,t.data),o=i.compressed,a=i.uncompressed,s=i.kvData;if(o){var l=pa(r,o,t.metadata);if(s&&l.textures)for(var u in l.textures)l.textures[u].baseTexture.ktxKeyValueData=s;Object.assign(t,l)}else if(a){var c={};a.forEach((function(e,t){var n=new Dn(new vn(e.resource,{mipmap:pe.OFF,alphaMode:ye.NO_PREMULTIPLIED_ALPHA,type:e.type,format:e.format})),i=r+"-"+(t+1);s&&(n.baseTexture.ktxKeyValueData=s),vn.addToCache(n.baseTexture,i),Dn.addToCache(n,i),0===t&&(c[r]=n,vn.addToCache(n.baseTexture,r),Dn.addToCache(n,r)),c[i]=n})),Object.assign(t,{textures:c})}}catch(e){return void n(e)}n()},e.parse=function(t,n){var r=new DataView(n);if(!e.validate(t,r))return null;var i=67305985===r.getUint32(12,!0),o=r.getUint32(16,i),a=r.getUint32(24,i),s=r.getUint32(28,i),l=r.getUint32(36,i),u=r.getUint32(40,i)||1,c=r.getUint32(44,i)||1,h=r.getUint32(48,i)||1,d=r.getUint32(52,i),f=r.getUint32(56,i),p=r.getUint32(60,i);if(0===u||1!==c)throw new Error("Only 2D textures are supported");if(1!==d)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==h)throw new Error("WebGL does not support array textures");var y,m=l+3&-4,g=u+3&-4,v=new Array(h),_=l*u;if(0===o&&(_=m*g),void 0===(y=0!==o?Ta[o]?Ta[o]*wa[a]:Aa[o]:aa[s]))throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var b=e.loadKeyValueData?e.parseKvData(r,p,i):null,x=_*y,E=l,S=u,T=m,w=g,A=64+p,P=0;P<f;P++){for(var O=r.getUint32(A,i),R=A+4,C=0;C<h;C++){var I=v[C];I||(I=v[C]=new Array(f)),I[P]={levelID:P,levelWidth:f>1||0!==o?E:T,levelHeight:f>1||0!==o?S:w,levelBuffer:new Uint8Array(n,R,x)},R+=x}A=(A+=O+4)%4!=0?A+4-A%4:A,x=(T=(E=E>>1||1)+4-1&-4)*(w=(S=S>>1||1)+4-1&-4)*y}return 0!==o?{uncompressed:v.map((function(t){var n=t[0].levelBuffer,r=!1;return o===ce.FLOAT?n=new Float32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4):o===ce.UNSIGNED_INT?(r=!0,n=new Uint32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4)):o===ce.INT&&(r=!0,n=new Int32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4)),{resource:new mn(n,{width:t[0].levelWidth,height:t[0].levelHeight}),type:o,format:r?e.convertFormatToInteger(a):a}})),kvData:b}:{compressed:v.map((function(e){return new da(null,{format:s,width:l,height:u,levels:f,levelBuffers:e})})),kvData:b}},e.validate=function(e,t){for(var n=0;n<Sa.length;n++)if(t.getUint8(n)!==Sa[n])return console.error(e+" is not a valid *.ktx file!"),!1;return!0},e.convertFormatToInteger=function(e){switch(e){case le.RGBA:return le.RGBA_INTEGER;case le.RGB:return le.RGB_INTEGER;case le.RG:return le.RG_INTEGER;case le.RED:return le.RED_INTEGER;default:return e}},e.parseKvData=function(e,t,n){for(var r=new Map,i=0;i<t;){var o=e.getUint32(64+i,n),a=64+i+4,s=3-(o+3)%4;if(0===o||o>t-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var l=0;l<o&&0!==e.getUint8(a+l);l++);if(-1===l){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var u=(new TextDecoder).decode(new Uint8Array(e.buffer,a,l)),c=new DataView(e.buffer,a+l+1,o-l-1);r.set(u,c),i+=4+o+s}return r},e.loadKeyValueData=!1,e}(),Oa=function(e,t){return Oa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Oa(e,t)};function Ra(e,t){function n(){this.constructor=e}Oa(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Ca,Ia,Na=function(e){function t(t,n,r,i){void 0===t&&(t=1500),void 0===r&&(r=16384),void 0===i&&(i=!1);var o=e.call(this)||this;return r>16384&&(r=16384),o._properties=[!1,!0,!1,!1,!1],o._maxSize=t,o._batchSize=r,o._buffers=null,o._bufferUpdateIDs=[],o._updateID=0,o.interactiveChildren=!1,o.blendMode=ae.NORMAL,o.autoResize=i,o.roundPixels=!0,o.baseTexture=null,o.setProperties(n),o._tint=0,o.tintRgb=new Float32Array(4),o.tint=16777215,o}return Ra(t,e),t.prototype.setProperties=function(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,Ne(e,this.tintRgb)},enumerable:!1,configurable:!0}),t.prototype.render=function(e){var t=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return t.onChildrenChange(0)}))),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},t.prototype.onChildrenChange=function(e){for(var t=Math.floor(e/this._batchSize);this._bufferUpdateIDs.length<t;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[t]=++this._updateID},t.prototype.dispose=function(){if(this._buffers){for(var e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},t}(Wt),Ma=function(){function e(e,t,n){this.geometry=new Hn,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var r=0;r<e.length;++r){var i=e[r];i={attributeName:i.attributeName,size:i.size,uploadFunction:i.uploadFunction,type:i.type||ce.FLOAT,offset:i.offset},t[r]?this.dynamicProperties.push(i):this.staticProperties.push(i)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return e.prototype.initBuffers=function(){var e=this.geometry,t=0;this.indexBuffer=new Gn(function(e,t){void 0===t&&(t=null);var n=6*e;if((t=t||new Uint16Array(n)).length!==n)throw new Error("Out buffer length is incorrect, got "+t.length+" and expected "+n);for(var r=0,i=0;r<n;r+=6,i+=4)t[r+0]=i+0,t[r+1]=i+1,t[r+2]=i+2,t[r+3]=i+0,t[r+4]=i+2,t[r+5]=i+3;return t}(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n)(a=this.dynamicProperties[n]).offset=t,t+=a.size,this.dynamicStride+=a.size;var r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new Gn(this.dynamicData,!1,!1);var i=0;for(this.staticStride=0,n=0;n<this.staticProperties.length;++n)(a=this.staticProperties[n]).offset=i,i+=a.size,this.staticStride+=a.size;var o=new ArrayBuffer(this.size*this.staticStride*4*4);for(this.staticData=new Float32Array(o),this.staticDataUint32=new Uint32Array(o),this.staticBuffer=new Gn(this.staticData,!0,!1),n=0;n<this.dynamicProperties.length;++n){var a=this.dynamicProperties[n];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===ce.UNSIGNED_BYTE,a.type,4*this.dynamicStride,4*a.offset)}for(n=0;n<this.staticProperties.length;++n)a=this.staticProperties[n],e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===ce.UNSIGNED_BYTE,a.type,4*this.staticStride,4*a.offset)},e.prototype.uploadDynamic=function(e,t,n){for(var r=0;r<this.dynamicProperties.length;r++){var i=this.dynamicProperties[r];i.uploadFunction(e,t,n,i.type===ce.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer._updateID++},e.prototype.uploadStatic=function(e,t,n){for(var r=0;r<this.staticProperties.length;r++){var i=this.staticProperties[r];i.uploadFunction(e,t,n,i.type===ce.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer._updateID++},e.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},e}(),ka=function(e){function t(t){var n=e.call(this,t)||this;return n.shader=null,n.properties=null,n.tempMatrix=new ft,n.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:n.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:n.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:n.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:n.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ce.UNSIGNED_BYTE,uploadFunction:n.uploadTint,offset:0}],n.shader=Nr.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),n.state=Mr.for2d(),n}return Ra(t,e),t.prototype.render=function(e){var t=e.children,n=e._maxSize,r=e._batchSize,i=this.renderer,o=t.length;if(0!==o){o>n&&!e.autoResize&&(o=n);var a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));var s=t[0]._texture.baseTexture;this.state.blendMode=Le(e.blendMode,s.alphaMode),i.state.set(this.state);var l,u,c,h,d=i.gl,f=e.worldTransform.copyTo(this.tempMatrix);f.prepend(i.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=f.toArray(!0),this.shader.uniforms.uColor=(l=e.tintRgb,u=e.worldAlpha,c=this.shader.uniforms.uColor,h=s.alphaMode,c=c||new Float32Array(4),h||void 0===h?(c[0]=l[0]*u,c[1]=l[1]*u,c[2]=l[2]*u):(c[0]=l[0],c[1]=l[1],c[2]=l[2]),c[3]=u,c),this.shader.uniforms.uSampler=s,this.renderer.shader.bind(this.shader);for(var p=!1,y=0,m=0;y<o;y+=r,m+=1){var g=o-y;g>r&&(g=r),m>=a.length&&a.push(this._generateOneMoreBuffer(e));var v=a[m];v.uploadDynamic(t,y,g);var _=e._bufferUpdateIDs[m]||0;(p=p||v._updateID<_)&&(v._updateID=e._updateID,v.uploadStatic(t,y,g)),i.geometry.bind(v.geometry),d.drawElements(d.TRIANGLES,6*g,d.UNSIGNED_SHORT,0)}}},t.prototype.generateBuffers=function(e){for(var t=[],n=e._maxSize,r=e._batchSize,i=e._properties,o=0;o<n;o+=r)t.push(new Ma(this.properties,i,r));return t},t.prototype._generateOneMoreBuffer=function(e){var t=e._batchSize,n=e._properties;return new Ma(this.properties,n,t)},t.prototype.uploadVertices=function(e,t,n,r,i,o){for(var a=0,s=0,l=0,u=0,c=0;c<n;++c){var h=e[t+c],d=h._texture,f=h.scale.x,p=h.scale.y,y=d.trim,m=d.orig;y?(a=(s=y.x-h.anchor.x*m.width)+y.width,l=(u=y.y-h.anchor.y*m.height)+y.height):(a=m.width*(1-h.anchor.x),s=m.width*-h.anchor.x,l=m.height*(1-h.anchor.y),u=m.height*-h.anchor.y),r[o]=s*f,r[o+1]=u*p,r[o+i]=a*f,r[o+i+1]=u*p,r[o+2*i]=a*f,r[o+2*i+1]=l*p,r[o+3*i]=s*f,r[o+3*i+1]=l*p,o+=4*i}},t.prototype.uploadPosition=function(e,t,n,r,i,o){for(var a=0;a<n;a++){var s=e[t+a].position;r[o]=s.x,r[o+1]=s.y,r[o+i]=s.x,r[o+i+1]=s.y,r[o+2*i]=s.x,r[o+2*i+1]=s.y,r[o+3*i]=s.x,r[o+3*i+1]=s.y,o+=4*i}},t.prototype.uploadRotation=function(e,t,n,r,i,o){for(var a=0;a<n;a++){var s=e[t+a].rotation;r[o]=s,r[o+i]=s,r[o+2*i]=s,r[o+3*i]=s,o+=4*i}},t.prototype.uploadUvs=function(e,t,n,r,i,o){for(var a=0;a<n;++a){var s=e[t+a]._texture._uvs;s?(r[o]=s.x0,r[o+1]=s.y0,r[o+i]=s.x1,r[o+i+1]=s.y1,r[o+2*i]=s.x2,r[o+2*i+1]=s.y2,r[o+3*i]=s.x3,r[o+3*i+1]=s.y3,o+=4*i):(r[o]=0,r[o+1]=0,r[o+i]=0,r[o+i+1]=0,r[o+2*i]=0,r[o+2*i+1]=0,r[o+3*i]=0,r[o+3*i+1]=0,o+=4*i)}},t.prototype.uploadTint=function(e,t,n,r,i,o){for(var a=0;a<n;++a){var s=e[t+a],l=s._texture.baseTexture.alphaMode>0,u=s.alpha,c=u<1&&l?Fe(s._tintRGB,u):s._tintRGB+(255*u<<24);r[o]=c,r[o+i]=c,r[o+2*i]=c,r[o+3*i]=c,o+=4*i}},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},t}(er);!function(e){e.MITER="miter",e.BEVEL="bevel",e.ROUND="round"}(Ca||(Ca={})),function(e){e.BUTT="butt",e.ROUND="round",e.SQUARE="square"}(Ia||(Ia={}));var Da={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(e,t){if(void 0===t&&(t=20),!this.adaptive||!e||isNaN(e))return t;var n=Math.ceil(e/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}},La=function(){function e(){this.color=16777215,this.alpha=1,this.texture=Dn.WHITE,this.matrix=null,this.visible=!1,this.reset()}return e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},e.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Dn.WHITE,this.matrix=null,this.visible=!1},e.prototype.destroy=function(){this.texture=null,this.matrix=null},e}(),Fa=function(e,t){return Fa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Fa(e,t)};function Ua(e,t){function n(){this.constructor=e}Fa(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Ba(e,t){var n,r;void 0===t&&(t=!1);var i=e.length;if(!(i<6)){for(var o=0,a=0,s=e[i-2],l=e[i-1];a<i;a+=2){var u=e[a],c=e[a+1];o+=(u-s)*(c+l),s=u,l=c}if(!t&&o>0||t&&o<=0){var h=i/2;for(a=h+h%2;a<i;a+=2){var d=i-a-2,f=i-a-1,p=a,y=a+1;n=[e[p],e[d]],e[d]=n[0],e[p]=n[1],r=[e[y],e[f]],e[f]=r[0],e[y]=r[1]}}}}var Ga={build:function(e){e.points=e.shape.points.slice()},triangulate:function(e,t){var n=e.points,r=e.holes,i=t.points,o=t.indices;if(n.length>=6){Ba(n,!1);for(var a=[],s=0;s<r.length;s++){var l=r[s];Ba(l.points,!0),a.push(n.length/2),n=n.concat(l.points)}var u=Ae()(n,a,2);if(!u)return;var c=i.length/2;for(s=0;s<u.length;s+=3)o.push(u[s]+c),o.push(u[s+1]+c),o.push(u[s+2]+c);for(s=0;s<n.length;s++)i.push(n[s])}}},ja={build:function(e){var t,n,r,i,o,a,s=e.points;if(e.type===tt.CIRC){var l=e.shape;t=l.x,n=l.y,o=a=l.radius,r=i=0}else if(e.type===tt.ELIP){var u=e.shape;t=u.x,n=u.y,o=u.width,a=u.height,r=i=0}else{var c=e.shape,h=c.width/2,d=c.height/2;t=c.x+h,n=c.y+d,r=h-(o=a=Math.max(0,Math.min(c.radius,Math.min(h,d)))),i=d-a}if(o>=0&&a>=0&&r>=0&&i>=0){var f=Math.ceil(2.3*Math.sqrt(o+a)),p=8*f+(r?4:0)+(i?4:0);if(s.length=p,0!==p){if(0===f)return s.length=8,s[0]=s[6]=t+r,s[1]=s[3]=n+i,s[2]=s[4]=t-r,void(s[5]=s[7]=n-i);var y,m,g=0,v=4*f+(r?2:0)+2,_=v,b=p,x=t+(y=r+o),E=t-y,S=n+(m=i);if(s[g++]=x,s[g++]=S,s[--v]=S,s[--v]=E,i){var T=n-m;s[_++]=E,s[_++]=T,s[--b]=T,s[--b]=x}for(var w=1;w<f;w++){var A=Math.PI/2*(w/f);x=t+(y=r+Math.cos(A)*o),E=t-y,S=n+(m=i+Math.sin(A)*a),T=n-m,s[g++]=x,s[g++]=S,s[--v]=S,s[--v]=E,s[_++]=E,s[_++]=T,s[--b]=T,s[--b]=x}x=t+(y=r),E=t-y,S=n+(m=i+a),T=n-m,s[g++]=x,s[g++]=S,s[--b]=T,s[--b]=x,r&&(s[g++]=E,s[g++]=S,s[--b]=T,s[--b]=E)}}else s.length=0},triangulate:function(e,t){var n,r,i=e.points,o=t.points,a=t.indices,s=o.length/2,l=s;if(e.type!==tt.RREC){var u=e.shape;n=u.x,r=u.y}else{var c=e.shape;n=c.x+c.width/2,r=c.y+c.height/2}var h=e.matrix;o.push(e.matrix?h.a*n+h.c*r+h.tx:n,e.matrix?h.b*n+h.d*r+h.ty:r),s++,o.push(i[0],i[1]);for(var d=2;d<i.length;d+=2)o.push(i[d],i[d+1]),a.push(s++,l,s);a.push(l+1,l,s)}};function $a(e,t,n){return e+(t-e)*n}function za(e,t,n,r,i,o,a){void 0===a&&(a=[]);for(var s=a,l=0,u=0,c=0,h=0,d=0,f=0,p=0,y=0;p<=20;++p)l=$a(e,n,y=p/20),u=$a(t,r,y),c=$a(n,i,y),h=$a(r,o,y),d=$a(l,c,y),f=$a(u,h,y),0===p&&s[s.length-2]===d&&s[s.length-1]===f||s.push(d,f);return s}var Xa={build:function(e){if(cs.nextRoundedRectBehavior)ja.build(e);else{var t=e.shape,n=e.points,r=t.x,i=t.y,o=t.width,a=t.height,s=Math.max(0,Math.min(t.radius,Math.min(o,a)/2));n.length=0,s?(za(r,i+s,r,i,r+s,i,n),za(r+o-s,i,r+o,i,r+o,i+s,n),za(r+o,i+a-s,r+o,i+a,r+o-s,i+a,n),za(r+s,i+a,r,i+a,r,i+a-s,n)):n.push(r,i,r+o,i,r+o,i+a,r,i+a)}},triangulate:function(e,t){if(cs.nextRoundedRectBehavior)ja.triangulate(e,t);else{for(var n=e.points,r=t.points,i=t.indices,o=r.length/2,a=Ae()(n,null,2),s=0,l=a.length;s<l;s+=3)i.push(a[s]+o),i.push(a[s+1]+o),i.push(a[s+2]+o);for(s=0,l=n.length;s<l;s++)r.push(n[s],n[++s])}}};function Ha(e,t,n,r,i,o,a,s){var l,u;a?(l=r,u=-n):(l=-r,u=n);var c=e-n*i+l,h=t-r*i+u,d=e+n*o+l,f=t+r*o+u;return s.push(c,h),s.push(d,f),2}function Va(e,t,n,r,i,o,a,s){var l=n-e,u=r-t,c=Math.atan2(l,u),h=Math.atan2(i-e,o-t);s&&c<h?c+=2*Math.PI:!s&&c>h&&(h+=2*Math.PI);var d=c,f=h-c,p=Math.abs(f),y=Math.sqrt(l*l+u*u),m=1+(15*p*Math.sqrt(y)/Math.PI>>0),g=f/m;if(d+=g,s){a.push(e,t),a.push(n,r);for(var v=1,_=d;v<m;v++,_+=g)a.push(e,t),a.push(e+Math.sin(_)*y,t+Math.cos(_)*y);a.push(e,t),a.push(i,o)}else{for(a.push(n,r),a.push(e,t),v=1,_=d;v<m;v++,_+=g)a.push(e+Math.sin(_)*y,t+Math.cos(_)*y),a.push(e,t);a.push(i,o),a.push(e,t)}return 2*m}function Ya(e,t){e.lineStyle.native?function(e,t){var n=0,r=e.shape,i=e.points||r.points,o=r.type!==tt.POLY||r.closeStroke;if(0!==i.length){var a=t.points,s=t.indices,l=i.length/2,u=a.length/2,c=u;for(a.push(i[0],i[1]),n=1;n<l;n++)a.push(i[2*n],i[2*n+1]),s.push(c,c+1),c++;o&&s.push(c,u)}}(e,t):function(e,t){var n=e.shape,r=e.points||n.points.slice(),i=t.closePointEps;if(0!==r.length){var o=e.lineStyle,a=new ot(r[0],r[1]),s=new ot(r[r.length-2],r[r.length-1]),l=n.type!==tt.POLY||n.closeStroke,u=Math.abs(a.x-s.x)<i&&Math.abs(a.y-s.y)<i;if(l){r=r.slice(),u&&(r.pop(),r.pop(),s.set(r[r.length-2],r[r.length-1]));var c=.5*(a.x+s.x),h=.5*(s.y+a.y);r.unshift(c,h),r.push(c,h)}var d=t.points,f=r.length/2,p=r.length,y=d.length/2,m=o.width/2,g=m*m,v=o.miterLimit*o.miterLimit,_=r[0],b=r[1],x=r[2],E=r[3],S=0,T=0,w=-(b-E),A=_-x,P=0,O=0,R=Math.sqrt(w*w+A*A);w/=R,A/=R,w*=m,A*=m;var C=o.alignment,I=2*(1-C),N=2*C;l||(o.cap===Ia.ROUND?p+=Va(_-w*(I-N)*.5,b-A*(I-N)*.5,_-w*I,b-A*I,_+w*N,b+A*N,d,!0)+2:o.cap===Ia.SQUARE&&(p+=Ha(_,b,w,A,I,N,!0,d))),d.push(_-w*I,b-A*I),d.push(_+w*N,b+A*N);for(var M=1;M<f-1;++M){_=r[2*(M-1)],b=r[2*(M-1)+1],x=r[2*M],E=r[2*M+1],S=r[2*(M+1)],T=r[2*(M+1)+1],w=-(b-E),A=_-x,w/=R=Math.sqrt(w*w+A*A),A/=R,w*=m,A*=m,P=-(E-T),O=x-S,P/=R=Math.sqrt(P*P+O*O),O/=R,P*=m,O*=m;var k=x-_,D=b-E,L=x-S,F=T-E,U=D*L-F*k,B=U<0;if(Math.abs(U)<.1)d.push(x-w*I,E-A*I),d.push(x+w*N,E+A*N);else{var G=(-w+_)*(-A+E)-(-w+x)*(-A+b),j=(-P+S)*(-O+E)-(-P+x)*(-O+T),$=(k*j-L*G)/U,z=(F*G-D*j)/U,X=($-x)*($-x)+(z-E)*(z-E),H=x+($-x)*I,V=E+(z-E)*I,Y=x-($-x)*N,W=E-(z-E)*N,q=B?I:N;X<=Math.min(k*k+D*D,L*L+F*F)+q*q*g?o.join===Ca.BEVEL||X/g>v?(B?(d.push(H,V),d.push(x+w*N,E+A*N),d.push(H,V),d.push(x+P*N,E+O*N)):(d.push(x-w*I,E-A*I),d.push(Y,W),d.push(x-P*I,E-O*I),d.push(Y,W)),p+=2):o.join===Ca.ROUND?B?(d.push(H,V),d.push(x+w*N,E+A*N),p+=Va(x,E,x+w*N,E+A*N,x+P*N,E+O*N,d,!0)+4,d.push(H,V),d.push(x+P*N,E+O*N)):(d.push(x-w*I,E-A*I),d.push(Y,W),p+=Va(x,E,x-w*I,E-A*I,x-P*I,E-O*I,d,!1)+4,d.push(x-P*I,E-O*I),d.push(Y,W)):(d.push(H,V),d.push(Y,W)):(d.push(x-w*I,E-A*I),d.push(x+w*N,E+A*N),o.join===Ca.ROUND?p+=B?Va(x,E,x+w*N,E+A*N,x+P*N,E+O*N,d,!0)+2:Va(x,E,x-w*I,E-A*I,x-P*I,E-O*I,d,!1)+2:o.join===Ca.MITER&&X/g<=v&&(B?(d.push(Y,W),d.push(Y,W)):(d.push(H,V),d.push(H,V)),p+=2),d.push(x-P*I,E-O*I),d.push(x+P*N,E+O*N),p+=2)}}_=r[2*(f-2)],b=r[2*(f-2)+1],x=r[2*(f-1)],w=-(b-(E=r[2*(f-1)+1])),A=_-x,w/=R=Math.sqrt(w*w+A*A),A/=R,w*=m,A*=m,d.push(x-w*I,E-A*I),d.push(x+w*N,E+A*N),l||(o.cap===Ia.ROUND?p+=Va(x-w*(I-N)*.5,E-A*(I-N)*.5,x-w*I,E-A*I,x+w*N,E+A*N,d,!1)+2:o.cap===Ia.SQUARE&&(p+=Ha(x,E,w,A,I,N,!1,d)));var K=t.indices,Q=Da.epsilon*Da.epsilon;for(M=y;M<p+y-2;++M)_=d[2*M],b=d[2*M+1],x=d[2*(M+1)],E=d[2*(M+1)+1],S=d[2*(M+2)],T=d[2*(M+2)+1],Math.abs(_*(E-T)+x*(T-b)+S*(b-E))<Q||K.push(M,M+1,M+2)}}(e,t)}var Wa,qa,Ka=function(){function e(){}return e.curveTo=function(e,t,n,r,i,o){var a=o[o.length-2],s=o[o.length-1]-t,l=a-e,u=r-t,c=n-e,h=Math.abs(s*c-l*u);if(h<1e-8||0===i)return o[o.length-2]===e&&o[o.length-1]===t||o.push(e,t),null;var d=s*s+l*l,f=u*u+c*c,p=s*u+l*c,y=i*Math.sqrt(d)/h,m=i*Math.sqrt(f)/h,g=y*p/d,v=m*p/f,_=y*c+m*l,b=y*u+m*s,x=l*(m+g),E=s*(m+g),S=c*(y+v),T=u*(y+v);return{cx:_+e,cy:b+t,radius:i,startAngle:Math.atan2(E-b,x-_),endAngle:Math.atan2(T-b,S-_),anticlockwise:l*u>c*s}},e.arc=function(e,t,n,r,i,o,a,s,l){for(var u=a-o,c=Da._segmentsCount(Math.abs(u)*i,40*Math.ceil(Math.abs(u)/nt)),h=u/(2*c),d=2*h,f=Math.cos(h),p=Math.sin(h),y=c-1,m=y%1/y,g=0;g<=y;++g){var v=h+o+d*(g+m*g),_=Math.cos(v),b=-Math.sin(v);l.push((f*_+p*b)*i+n,(f*-b+p*_)*i+r)}},e}(),Qa=function(){function e(){}return e.curveLength=function(e,t,n,r,i,o,a,s){for(var l=0,u=0,c=0,h=0,d=0,f=0,p=0,y=0,m=0,g=0,v=0,_=e,b=t,x=1;x<=10;++x)g=_-(y=(p=(f=(d=1-(u=x/10))*d)*d)*e+3*f*u*n+3*d*(c=u*u)*i+(h=c*u)*a),v=b-(m=p*t+3*f*u*r+3*d*c*o+h*s),_=y,b=m,l+=Math.sqrt(g*g+v*v);return l},e.curveTo=function(t,n,r,i,o,a,s){var l=s[s.length-2],u=s[s.length-1];s.length-=2;var c=Da._segmentsCount(e.curveLength(l,u,t,n,r,i,o,a)),h=0,d=0,f=0,p=0,y=0;s.push(l,u);for(var m=1,g=0;m<=c;++m)f=(d=(h=1-(g=m/c))*h)*h,y=(p=g*g)*g,s.push(f*l+3*d*g*t+3*h*p*r+y*o,f*u+3*d*g*n+3*h*p*i+y*a)},e}(),Za=function(){function e(){}return e.curveLength=function(e,t,n,r,i,o){var a=e-2*n+i,s=t-2*r+o,l=2*n-2*e,u=2*r-2*t,c=4*(a*a+s*s),h=4*(a*l+s*u),d=l*l+u*u,f=2*Math.sqrt(c+h+d),p=Math.sqrt(c),y=2*c*p,m=2*Math.sqrt(d),g=h/p;return(y*f+p*h*(f-m)+(4*d*c-h*h)*Math.log((2*p+g+f)/(g+m)))/(4*y)},e.curveTo=function(t,n,r,i,o){for(var a=o[o.length-2],s=o[o.length-1],l=Da._segmentsCount(e.curveLength(a,s,t,n,r,i)),u=0,c=0,h=1;h<=l;++h){var d=h/l;u=a+(t-a)*d,c=s+(n-s)*d,o.push(u+(t+(r-t)*d-u)*d,c+(n+(i-n)*d-c)*d)}},e}(),Ja=function(){function e(){this.reset()}return e.prototype.begin=function(e,t,n){this.reset(),this.style=e,this.start=t,this.attribStart=n},e.prototype.end=function(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start},e.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},e}(),es=((Wa={})[tt.POLY]=Ga,Wa[tt.CIRC]=ja,Wa[tt.ELIP]=ja,Wa[tt.RECT]={build:function(e){var t=e.shape,n=t.x,r=t.y,i=t.width,o=t.height,a=e.points;a.length=0,a.push(n,r,n+i,r,n+i,r+o,n,r+o)},triangulate:function(e,t){var n=e.points,r=t.points,i=r.length/2;r.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),t.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},Wa[tt.RREC]=Xa,Wa),ts=[],ns=[],rs=function(){function e(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),this.points=[],this.holes=[],this.shape=e,this.lineStyle=n,this.fillStyle=t,this.matrix=r,this.type=e.type}return e.prototype.clone=function(){return new e(this.shape,this.fillStyle,this.lineStyle,this.matrix)},e.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},e}(),is=new ot,os=new St,as=function(e){function t(){var t=e.call(this)||this;return t.closePointEps=1e-4,t.boundsPadding=0,t.uvsFloat32=null,t.indicesUint16=null,t.batchable=!1,t.points=[],t.colors=[],t.uvs=[],t.indices=[],t.textureIds=[],t.graphicsData=[],t.drawCalls=[],t.batchDirty=-1,t.batches=[],t.dirty=0,t.cacheDirty=-1,t.clearDirty=0,t.shapeIndex=0,t._bounds=new St,t.boundsDirty=-1,t}return Ua(t,e),Object.defineProperty(t.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),t.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),ns.push(this.drawCalls[e]);for(this.drawCalls.length=0,e=0;e<this.batches.length;e++){var t=this.batches[e];t.reset(),ts.push(t)}this.batches.length=0},t.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},t.prototype.drawShape=function(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null);var i=new rs(e,t,n,r);return this.graphicsData.push(i),this.dirty++,this},t.prototype.drawHole=function(e,t){if(void 0===t&&(t=null),!this.graphicsData.length)return null;var n=new rs(e,null,null,t),r=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=r.lineStyle,r.holes.push(n),this.dirty++,this},t.prototype.destroy=function(){e.prototype.destroy.call(this);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},t.prototype.containsPoint=function(e){for(var t=this.graphicsData,n=0;n<t.length;++n){var r=t[n];if(r.fillStyle.visible&&r.shape&&(r.matrix?r.matrix.applyInverse(e,is):is.copyFrom(e),r.shape.contains(is.x,is.y))){var i=!1;if(r.holes)for(var o=0;o<r.holes.length;o++)if(r.holes[o].shape.contains(is.x,is.y)){i=!0;break}if(!i)return!0}}return!1},t.prototype.updateBatches=function(e){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var t=this.uvs,n=this.graphicsData,r=null,i=null;this.batches.length>0&&(i=(r=this.batches[this.batches.length-1]).style);for(var o=this.shapeIndex;o<n.length;o++){this.shapeIndex++;var a=n[o],s=a.fillStyle,l=a.lineStyle;es[a.type].build(a),a.matrix&&this.transformPoints(a.points,a.matrix),(s.visible||l.visible)&&this.processHoles(a.holes);for(var u=0;u<2;u++){var c=0===u?s:l;if(c.visible){var h=c.texture.baseTexture,d=this.indices.length,f=this.points.length/2;h.wrapMode=fe.REPEAT,0===u?this.processFill(a):this.processLine(a);var p=this.points.length/2-f;0!==p&&(r&&!this._compareStyles(i,c)&&(r.end(d,f),r=null),r||((r=ts.pop()||new Ja).begin(c,d,f),this.batches.push(r),i=c),this.addUvs(this.points,t,c.texture,f,p,c.matrix))}}}var y=this.indices.length,m=this.points.length/2;if(r&&r.end(y,m),0!==this.batches.length){if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var g=m>65535&&e;this.indicesUint16=g?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},t.prototype._compareStyles=function(e,t){return!(!e||!t)&&e.texture.baseTexture===t.texture.baseTexture&&e.color+e.alpha===t.color+t.alpha&&!!e.native==!!t.native},t.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var e=0,t=this.graphicsData.length;e<t;e++){var n=this.graphicsData[e],r=n.fillStyle,i=n.lineStyle;if(r&&!r.texture.baseTexture.valid)return!1;if(i&&!i.texture.baseTexture.valid)return!1}return!0},t.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var e=this.batches,t=0,n=e.length;t<n;t++)for(var r=e[t],i=0;i<r.size;i++){var o=r.start+i;this.indicesUint16[o]=this.indicesUint16[o]-r.attribStart}},t.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var e=this.batches,n=0;n<e.length;n++)if(e[n].style.native)return!1;return this.points.length<2*t.BATCHABLE_SIZE},t.prototype.buildDrawCalls=function(){for(var e=++vn._globalBatch,t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),ns.push(this.drawCalls[t]);this.drawCalls.length=0;var n=this.colors,r=this.textureIds,i=ns.pop();i||((i=new hi).texArray=new di),i.texArray.count=0,i.start=0,i.size=0,i.type=se.TRIANGLES;var o=0,a=null,s=0,l=!1,u=se.TRIANGLES,c=0;for(this.drawCalls.push(i),t=0;t<this.batches.length;t++){var h=this.batches[t],d=h.style,f=d.texture.baseTexture;l!==!!d.native&&(u=(l=!!d.native)?se.LINES:se.TRIANGLES,a=null,o=8,e++),a!==f&&(a=f,f._batchEnabled!==e&&(8===o&&(e++,o=0,i.size>0&&((i=ns.pop())||((i=new hi).texArray=new di),this.drawCalls.push(i)),i.start=c,i.size=0,i.texArray.count=0,i.type=u),f.touched=1,f._batchEnabled=e,f._batchLocation=o,f.wrapMode=fe.REPEAT,i.texArray.elements[i.texArray.count++]=f,o++)),i.size+=h.size,c+=h.size,s=f._batchLocation,this.addColors(n,d.color,d.alpha,h.attribSize,h.attribStart),this.addTextureIds(r,s,h.attribSize,h.attribStart)}vn._globalBatch=e,this.packAttributes()},t.prototype.packAttributes=function(){for(var e=this.points,t=this.uvs,n=this.colors,r=this.textureIds,i=new ArrayBuffer(3*e.length*4),o=new Float32Array(i),a=new Uint32Array(i),s=0,l=0;l<e.length/2;l++)o[s++]=e[2*l],o[s++]=e[2*l+1],o[s++]=t[2*l],o[s++]=t[2*l+1],a[s++]=n[l],o[s++]=r[l];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)},t.prototype.processFill=function(e){e.holes.length?Ga.triangulate(e,this):es[e.type].triangulate(e,this)},t.prototype.processLine=function(e){Ya(e,this);for(var t=0;t<e.holes.length;t++)Ya(e.holes[t],this)},t.prototype.processHoles=function(e){for(var t=0;t<e.length;t++){var n=e[t];es[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},t.prototype.calculateBounds=function(){var e=this._bounds,t=os,n=ft.IDENTITY;this._bounds.clear(),t.clear();for(var r=0;r<this.graphicsData.length;r++){var i=this.graphicsData[r],o=i.shape,a=i.type,s=i.lineStyle,l=i.matrix||ft.IDENTITY,u=0;if(s&&s.visible&&(u=s.width,a!==tt.POLY||i.fillStyle.visible?u*=Math.max(0,s.alignment):u*=Math.max(s.alignment,1-s.alignment)),n!==l&&(t.isEmpty()||(e.addBoundsMatrix(t,n),t.clear()),n=l),a===tt.RECT||a===tt.RREC){var c=o;t.addFramePad(c.x,c.y,c.x+c.width,c.y+c.height,u,u)}else if(a===tt.CIRC){var h=o;t.addFramePad(h.x,h.y,h.x,h.y,h.radius+u,h.radius+u)}else if(a===tt.ELIP){var d=o;t.addFramePad(d.x,d.y,d.x,d.y,d.width+u,d.height+u)}else{var f=o;e.addVerticesMatrix(n,f.points,0,f.points.length,u,u)}}t.isEmpty()||e.addBoundsMatrix(t,n),e.pad(this.boundsPadding,this.boundsPadding)},t.prototype.transformPoints=function(e,t){for(var n=0;n<e.length/2;n++){var r=e[2*n],i=e[2*n+1];e[2*n]=t.a*r+t.c*i+t.tx,e[2*n+1]=t.b*r+t.d*i+t.ty}},t.prototype.addColors=function(e,t,n,r,i){void 0===i&&(i=0);var o=Fe((t>>16)+(65280&t)+((255&t)<<16),n);e.length=Math.max(e.length,i+r);for(var a=0;a<r;a++)e[i+a]=o},t.prototype.addTextureIds=function(e,t,n,r){void 0===r&&(r=0),e.length=Math.max(e.length,r+n);for(var i=0;i<n;i++)e[r+i]=t},t.prototype.addUvs=function(e,t,n,r,i,o){void 0===o&&(o=null);for(var a=0,s=t.length,l=n.frame;a<i;){var u=e[2*(r+a)],c=e[2*(r+a)+1];if(o){var h=o.a*u+o.c*c+o.tx;c=o.b*u+o.d*c+o.ty,u=h}a++,t.push(u/l.width,c/l.height)}var d=n.baseTexture;(l.width<d.width||l.height<d.height)&&this.adjustUvs(t,n,s,i)},t.prototype.adjustUvs=function(e,t,n,r){for(var i=t.baseTexture,o=1e-6,a=n+2*r,s=t.frame,l=s.width/i.width,u=s.height/i.height,c=s.x/s.width,h=s.y/s.height,d=Math.floor(e[n]+o),f=Math.floor(e[n+1]+o),p=n+2;p<a;p+=2)d=Math.min(d,Math.floor(e[p]+o)),f=Math.min(f,Math.floor(e[p+1]+o));for(c-=d,h-=f,p=n;p<a;p+=2)e[p]=(e[p]+c)*l,e[p+1]=(e[p+1]+h)*u},t.BATCHABLE_SIZE=100,t}(mi),ss=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.width=0,t.alignment=.5,t.native=!1,t.cap=Ia.BUTT,t.join=Ca.MITER,t.miterLimit=10,t}return Ua(t,e),t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e},t.prototype.reset=function(){e.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},t}(La),ls=new Float32Array(3),us={},cs=function(e){function t(t){void 0===t&&(t=null);var n=e.call(this)||this;return n.shader=null,n.pluginName="batch",n.currentPath=null,n.batches=[],n.batchTint=-1,n.batchDirty=-1,n.vertexData=null,n._fillStyle=new La,n._lineStyle=new ss,n._matrix=null,n._holeMode=!1,n.state=Mr.for2d(),n._geometry=t||new as,n._geometry.refCount++,n._transformID=-1,n.tint=16777215,n.blendMode=ae.NORMAL,n}return Ua(t,e),Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return this.finishPoly(),new t(this._geometry)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),t.prototype.lineStyle=function(e,t,n,r,i){return void 0===e&&(e=null),void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r=.5),void 0===i&&(i=!1),"number"==typeof e&&(e={width:e,color:t,alpha:n,alignment:r,native:i}),this.lineTextureStyle(e)},t.prototype.lineTextureStyle=function(e){e=Object.assign({width:0,texture:Dn.WHITE,color:e&&e.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Ia.BUTT,join:Ca.MITER,miterLimit:10},e),this.currentPath&&this.startPoly();var t=e.width>0&&e.alpha>0;return t?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:t},e)):this._lineStyle.reset(),this},t.prototype.startPoly=function(){if(this.currentPath){var e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new ct,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new ct,this.currentPath.closeStroke=!1},t.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},t.prototype.moveTo=function(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this},t.prototype.lineTo=function(e,t){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,r=n[n.length-2],i=n[n.length-1];return r===e&&i===t||n.push(e,t),this},t.prototype._initCurve=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[e,t]):this.moveTo(e,t)},t.prototype.quadraticCurveTo=function(e,t,n,r){this._initCurve();var i=this.currentPath.points;return 0===i.length&&this.moveTo(0,0),Za.curveTo(e,t,n,r,i),this},t.prototype.bezierCurveTo=function(e,t,n,r,i,o){return this._initCurve(),Qa.curveTo(e,t,n,r,i,o,this.currentPath.points),this},t.prototype.arcTo=function(e,t,n,r,i){this._initCurve(e,t);var o=this.currentPath.points,a=Ka.curveTo(e,t,n,r,i,o);if(a){var s=a.cx,l=a.cy,u=a.radius,c=a.startAngle,h=a.endAngle,d=a.anticlockwise;this.arc(s,l,u,c,h,d)}return this},t.prototype.arc=function(e,t,n,r,i,o){if(void 0===o&&(o=!1),r===i)return this;if(!o&&i<=r?i+=nt:o&&r<=i&&(r+=nt),0==i-r)return this;var a=e+Math.cos(r)*n,s=t+Math.sin(r)*n,l=this._geometry.closePointEps,u=this.currentPath?this.currentPath.points:null;if(u){var c=Math.abs(u[u.length-2]-a),h=Math.abs(u[u.length-1]-s);c<l&&h<l||u.push(a,s)}else this.moveTo(a,s),u=this.currentPath.points;return Ka.arc(a,s,e,t,n,r,i,o,u),this},t.prototype.beginFill=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1),this.beginTextureFill({texture:Dn.WHITE,color:e,alpha:t})},t.prototype.beginTextureFill=function(e){e=Object.assign({texture:Dn.WHITE,color:16777215,alpha:1,matrix:null},e),this.currentPath&&this.startPoly();var t=e.alpha>0;return t?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:t},e)):this._fillStyle.reset(),this},t.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},t.prototype.drawRect=function(e,t,n,r){return this.drawShape(new st(e,t,n,r))},t.prototype.drawRoundedRect=function(e,t,n,r,i){return this.drawShape(new ht(e,t,n,r,i))},t.prototype.drawCircle=function(e,t,n){return this.drawShape(new lt(e,t,n))},t.prototype.drawEllipse=function(e,t,n,r){return this.drawShape(new ut(e,t,n,r))},t.prototype.drawPolygon=function(){for(var e,t=arguments,n=[],r=0;r<arguments.length;r++)n[r]=t[r];var i=!0,o=n[0];o.points?(i=o.closeStroke,e=o.points):e=Array.isArray(n[0])?n[0]:n;var a=new ct(e);return a.closeStroke=i,this.drawShape(a),this},t.prototype.drawShape=function(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},t.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},t.prototype.isFastRect=function(){var e=this._geometry.graphicsData;return!(1!==e.length||e[0].shape.type!==tt.RECT||e[0].matrix||e[0].holes.length||e[0].lineStyle.visible&&e[0].lineStyle.width)},t.prototype._render=function(e){this.finishPoly();var t=this._geometry,n=e.context.supports.uint32Indices;t.updateBatches(n),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))},t.prototype._populateBatches=function(){var e=this._geometry,t=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(var r=0;r<n;r++){var i=e.batches[r],o=i.style.color,a=new Float32Array(this.vertexData.buffer,4*i.attribStart*2,2*i.attribSize),s=new Float32Array(e.uvsFloat32.buffer,4*i.attribStart*2,2*i.attribSize),l={vertexData:a,blendMode:t,indices:new Uint16Array(e.indicesUint16.buffer,2*i.start,i.size),uvs:s,_batchRGB:Ne(o),_tintRGB:o,_texture:i.style.texture,alpha:i.style.alpha,worldAlpha:1};this.batches[r]=l}},t.prototype._renderBatched=function(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var t=0,n=this.batches.length;t<n;t++){var r=this.batches[t];r.worldAlpha=this.worldAlpha*r.alpha,e.plugins[this.pluginName].render(r)}}},t.prototype._renderDirect=function(e){var t=this._resolveDirectShader(e),n=this._geometry,r=this.tint,i=this.worldAlpha,o=t.uniforms,a=n.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(r>>16&255)/255*i,o.tint[1]=(r>>8&255)/255*i,o.tint[2]=(255&r)/255*i,o.tint[3]=i,e.shader.bind(t),e.geometry.bind(n,t),e.state.set(this.state);for(var s=0,l=a.length;s<l;s++)this._renderDrawCallDirect(e,n.drawCalls[s])},t.prototype._renderDrawCallDirect=function(e,t){for(var n=t.texArray,r=t.type,i=t.size,o=t.start,a=n.count,s=0;s<a;s++)e.texture.bind(n.elements[s],s);e.geometry.draw(r,i,o)},t.prototype._resolveDirectShader=function(e){var t=this.shader,n=this.pluginName;if(!t){if(!us[n]){for(var r=e.plugins[n].MAX_TEXTURES,i=new Int32Array(r),o=0;o<r;o++)i[o]=o;var a={tint:new Float32Array([1,1,1,1]),translationMatrix:new ft,default:qn.from({uSamplers:i},!0)},s=e.plugins[n]._shader.program;us[n]=new Nr(s,a)}t=us[n]}return t},t.prototype._calculateBounds=function(){this.finishPoly();var e=this._geometry;if(e.graphicsData.length){var t=e.bounds,n=t.minX,r=t.minY,i=t.maxX,o=t.maxY;this._bounds.addFrame(this.transform,n,r,i,o)}},t.prototype.containsPoint=function(e){return this.worldTransform.applyInverse(e,t._TEMP_POINT),this._geometry.containsPoint(t._TEMP_POINT)},t.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var e=Ne(this.tint,ls),t=0;t<this.batches.length;t++){var n=this.batches[t],r=n._batchRGB,i=(e[0]*r[0]*255<<16)+(e[1]*r[1]*255<<8)+(0|e[2]*r[2]*255);n._tintRGB=(i>>16)+(65280&i)+((255&i)<<16)}}},t.prototype.calculateVertices=function(){var e=this.transform._worldID;if(this._transformID!==e){this._transformID=e;for(var t=this.transform.worldTransform,n=t.a,r=t.b,i=t.c,o=t.d,a=t.tx,s=t.ty,l=this._geometry.points,u=this.vertexData,c=0,h=0;h<l.length;h+=2){var d=l[h],f=l[h+1];u[c++]=n*d+i*f+a,u[c++]=o*f+r*d+s}}},t.prototype.closePath=function(){var e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this},t.prototype.setMatrix=function(e){return this._matrix=e,this},t.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},t.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},t.prototype.destroy=function(t){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,e.prototype.destroy.call(this,t)},t.nextRoundedRectBehavior=!1,t._TEMP_POINT=new ot,t}(Wt),hs=function(e,t){return hs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},hs(e,t)},ds=new ot,fs=new Uint16Array([0,1,2,0,2,3]),ps=function(e){function t(t){var n=e.call(this)||this;return n._anchor=new dt(n._onAnchorUpdate,n,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=ae.NORMAL,n._cachedTint=16777215,n.uvs=null,n.texture=t||Dn.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.indices=fs,n.pluginName="batch",n.isSprite=!0,n._roundPixels=Ee.ROUND_PIXELS,n}return function(e,t){function n(){this.constructor=e}hs(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Xe(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Xe(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){var e=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==e._updateID){this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;var t=this.transform.worldTransform,n=t.a,r=t.b,i=t.c,o=t.d,a=t.tx,s=t.ty,l=this.vertexData,u=e.trim,c=e.orig,h=this._anchor,d=0,f=0,p=0,y=0;if(u?(d=(f=u.x-h._x*c.width)+u.width,p=(y=u.y-h._y*c.height)+u.height):(d=(f=-h._x*c.width)+c.width,p=(y=-h._y*c.height)+c.height),l[0]=n*f+i*y+a,l[1]=o*y+r*f+s,l[2]=n*d+i*y+a,l[3]=o*y+r*d+s,l[4]=n*d+i*p+a,l[5]=o*p+r*d+s,l[6]=n*f+i*p+a,l[7]=o*p+r*f+s,this._roundPixels)for(var m=Ee.RESOLUTION,g=0;g<l.length;++g)l[g]=Math.round((l[g]*m|0)/m)}},t.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,t=this.vertexTrimmedData,n=e.orig,r=this._anchor,i=this.transform.worldTransform,o=i.a,a=i.b,s=i.c,l=i.d,u=i.tx,c=i.ty,h=-r._x*n.width,d=h+n.width,f=-r._y*n.height,p=f+n.height;t[0]=o*h+s*f+u,t[1]=l*f+a*h+c,t[2]=o*d+s*f+u,t[3]=l*f+a*d+c,t[4]=o*d+s*p+u,t[5]=l*p+a*d+c,t[6]=o*h+s*p+u,t[7]=l*p+a*h+c},t.prototype._render=function(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},t.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._localBounds||(this._localBounds=new St),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new st),t=this._localBoundsRect),this._localBounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,ds);var t=this._texture.orig.width,n=this._texture.orig.height,r=-t*this.anchor.x,i=0;return ds.x>=r&&ds.x<r+t&&(i=-n*this.anchor.y,ds.y>=i&&ds.y<i+n)},t.prototype.destroy=function(t){if(e.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof t?t:t&&t.texture){var n="boolean"==typeof t?t:t&&t.baseTexture;this._texture.destroy(!!n)}this._texture=null},t.from=function(e,n){return new t(e instanceof Dn?e:Dn.from(e,n))},Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var t=Xe(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var t=Xe(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(e){this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||Dn.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),t}(Wt),ys=function(e,t){return ys=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},ys(e,t)};!function(e){e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(qa||(qa={}));var ms={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:qa.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},gs=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],vs=function(){function e(e){this.styleID=0,this.reset(),xs(this,e,e)}return e.prototype.clone=function(){var t={};return xs(t,this,ms),new e(t)},e.prototype.reset=function(){xs(this,ms,ms)},Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"breakWords",{get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(e){var t=bs(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fill},set:function(e){var t=bs(e);this._fill!==t&&(this._fill=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(e){(function(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0})(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leading",{get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this._stroke},set:function(e){var t=bs(e);this._stroke!==t&&(this._stroke=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trim",{get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)},enumerable:!1,configurable:!0}),e.prototype.toFontString=function(){var e="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var n=t.length-1;n>=0;n--){var r=t[n].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&gs.indexOf(r)<0&&(r='"'+r+'"'),t[n]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+t.join(",")},e}();function _s(e){return"number"==typeof e?Me(e):("string"==typeof e&&0===e.indexOf("0x")&&(e=e.replace("0x","#")),e)}function bs(e){if(Array.isArray(e)){for(var t=0;t<e.length;++t)e[t]=_s(e[t]);return e}return _s(e)}function xs(e,t,n){for(var r in n)Array.isArray(t[r])?e[r]=t[r].slice():e[r]=t[r]}var Es=function(){function e(e,t,n,r,i,o,a,s,l){this.text=e,this.style=t,this.width=n,this.height=r,this.lines=i,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=s,this.fontProperties=l}return e.measureText=function(t,n,r,i){void 0===i&&(i=e._canvas),r=null==r?n.wordWrap:r;var o=n.toFontString(),a=e.measureFont(o);0===a.fontSize&&(a.fontSize=n.fontSize,a.ascent=n.fontSize);var s=i.getContext("2d");s.font=o;for(var l=(r?e.wordWrap(t,n,i):t).split(/(?:\r\n|\r|\n)/),u=new Array(l.length),c=0,h=0;h<l.length;h++){var d=s.measureText(l[h]).width+(l[h].length-1)*n.letterSpacing;u[h]=d,c=Math.max(c,d)}var f=c+n.strokeThickness;n.dropShadow&&(f+=n.dropShadowDistance);var p=n.lineHeight||a.fontSize+n.strokeThickness,y=Math.max(p,a.fontSize+n.strokeThickness)+(l.length-1)*(p+n.leading);return n.dropShadow&&(y+=n.dropShadowDistance),new e(t,n,f,y,l,u,p+n.leading,c,a)},e.wordWrap=function(t,n,r){void 0===r&&(r=e._canvas);for(var i=r.getContext("2d"),o=0,a="",s="",l=Object.create(null),u=n.letterSpacing,c=n.whiteSpace,h=e.collapseSpaces(c),d=e.collapseNewlines(c),f=!h,p=n.wordWrapWidth+u,y=e.tokenize(t),m=0;m<y.length;m++){var g=y[m];if(e.isNewline(g)){if(!d){s+=e.addLine(a),f=!h,a="",o=0;continue}g=" "}if(h){var v=e.isBreakingSpace(g),_=e.isBreakingSpace(a[a.length-1]);if(v&&_)continue}var b=e.getFromCache(g,u,l,i);if(b>p)if(""!==a&&(s+=e.addLine(a),a="",o=0),e.canBreakWords(g,n.breakWords))for(var x=e.wordWrapSplit(g),E=0;E<x.length;E++){for(var S=x[E],T=1;x[E+T];){var w=x[E+T],A=S[S.length-1];if(e.canBreakChars(A,w,g,E,n.breakWords))break;S+=w,T++}E+=S.length-1;var P=e.getFromCache(S,u,l,i);P+o>p&&(s+=e.addLine(a),f=!1,a="",o=0),a+=S,o+=P}else{a.length>0&&(s+=e.addLine(a),a="",o=0);var O=m===y.length-1;s+=e.addLine(g,!O),f=!1,a="",o=0}else b+o>p&&(f=!1,s+=e.addLine(a),a="",o=0),(a.length>0||!e.isBreakingSpace(g)||f)&&(a+=g,o+=b)}return s+e.addLine(a,!1)},e.addLine=function(t,n){return void 0===n&&(n=!0),t=e.trimRight(t),n?t+"\n":t},e.getFromCache=function(e,t,n,r){var i=n[e];if("number"!=typeof i){var o=e.length*t;i=r.measureText(e).width+o,n[e]=i}return i},e.collapseSpaces=function(e){return"normal"===e||"pre-line"===e},e.collapseNewlines=function(e){return"normal"===e},e.trimRight=function(t){if("string"!=typeof t)return"";for(var n=t.length-1;n>=0;n--){var r=t[n];if(!e.isBreakingSpace(r))break;t=t.slice(0,-1)}return t},e.isNewline=function(t){return"string"==typeof t&&e._newlines.indexOf(t.charCodeAt(0))>=0},e.isBreakingSpace=function(t,n){return"string"==typeof t&&e._breakingSpaces.indexOf(t.charCodeAt(0))>=0},e.tokenize=function(t){var n=[],r="";if("string"!=typeof t)return n;for(var i=0;i<t.length;i++){var o=t[i],a=t[i+1];e.isBreakingSpace(o,a)||e.isNewline(o)?(""!==r&&(n.push(r),r=""),n.push(o)):r+=o}return""!==r&&n.push(r),n},e.canBreakWords=function(e,t){return t},e.canBreakChars=function(e,t,n,r,i){return!0},e.wordWrapSplit=function(e){return e.split("")},e.measureFont=function(t){if(e._fonts[t])return e._fonts[t];var n={ascent:0,descent:0,fontSize:0},r=e._canvas,i=e._context;i.font=t;var o=e.METRICS_STRING+e.BASELINE_SYMBOL,a=Math.ceil(i.measureText(o).width),s=Math.ceil(i.measureText(e.BASELINE_SYMBOL).width),l=Math.ceil(e.HEIGHT_MULTIPLIER*s);s=s*e.BASELINE_MULTIPLIER|0,r.width=a,r.height=l,i.fillStyle="#f00",i.fillRect(0,0,a,l),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,s);var u=i.getImageData(0,0,a,l).data,c=u.length,h=4*a,d=0,f=0,p=!1;for(d=0;d<s;++d){for(var y=0;y<h;y+=4)if(255!==u[f+y]){p=!0;break}if(p)break;f+=h}for(n.ascent=s-d,f=c-h,p=!1,d=l;d>s;--d){for(y=0;y<h;y+=4)if(255!==u[f+y]){p=!0;break}if(p)break;f-=h}return n.descent=d-s,n.fontSize=n.ascent+n.descent,e._fonts[t]=n,n},e.clearMetrics=function(t){void 0===t&&(t=""),t?delete e._fonts[t]:e._fonts={}},Object.defineProperty(e,"_canvas",{get:function(){if(!e.__canvas){var t=void 0;try{var n=new OffscreenCanvas(0,0),r=n.getContext("2d");if(r&&r.measureText)return e.__canvas=n,n;t=document.createElement("canvas")}catch(e){t=document.createElement("canvas")}t.width=t.height=10,e.__canvas=t}return e.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(e,"_context",{get:function(){return e.__context||(e.__context=e._canvas.getContext("2d")),e.__context},enumerable:!1,configurable:!0}),e}();Es._fonts={},Es.METRICS_STRING="|ÉqÅ",Es.BASELINE_SYMBOL="M",Es.BASELINE_MULTIPLIER=1.4,Es.HEIGHT_MULTIPLIER=2,Es._newlines=[10,13],Es._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Ss={texture:!0,children:!1,baseTexture:!0},Ts=function(e){function t(t,n,r){var i=this,o=!1;r||(r=document.createElement("canvas"),o=!0),r.width=3,r.height=3;var a=Dn.from(r);return a.orig=new st,a.trim=new st,(i=e.call(this,a)||this)._ownCanvas=o,i.canvas=r,i.context=i.canvas.getContext("2d"),i._resolution=Ee.RESOLUTION,i._autoResolution=!0,i._text=null,i._style=null,i._styleListener=null,i._font="",i.text=t,i.style=n,i.localStyleID=-1,i}return function(e,t){function n(){this.constructor=e}ys(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.updateText=function(e){var n=this._style;if(this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),this.dirty||!e){this._font=this._style.toFontString();var r,i,o=this.context,a=Es.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=a.width,l=a.height,u=a.lines,c=a.lineHeight,h=a.lineWidths,d=a.maxLineWidth,f=a.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+2*n.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,l)+2*n.padding)*this._resolution),o.scale(this._resolution,this._resolution),o.clearRect(0,0,this.canvas.width,this.canvas.height),o.font=this._font,o.lineWidth=n.strokeThickness,o.textBaseline=n.textBaseline,o.lineJoin=n.lineJoin,o.miterLimit=n.miterLimit;for(var p=n.dropShadow?2:1,y=0;y<p;++y){var m=n.dropShadow&&0===y,g=m?Math.ceil(Math.max(1,l)+2*n.padding):0,v=g*this._resolution;if(m){o.fillStyle="black",o.strokeStyle="black";var _=n.dropShadowColor,b=Ne("number"==typeof _?_:ke(_)),x=n.dropShadowBlur*this._resolution,E=n.dropShadowDistance*this._resolution;o.shadowColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+n.dropShadowAlpha+")",o.shadowBlur=x,o.shadowOffsetX=Math.cos(n.dropShadowAngle)*E,o.shadowOffsetY=Math.sin(n.dropShadowAngle)*E+v}else o.fillStyle=this._generateFillStyle(n,u,a),o.strokeStyle=n.stroke,o.shadowColor="black",o.shadowBlur=0,o.shadowOffsetX=0,o.shadowOffsetY=0;var S=(c-f.fontSize)/2;(!t.nextLineHeightBehavior||c-f.fontSize<0)&&(S=0);for(var T=0;T<u.length;T++)r=n.strokeThickness/2,i=n.strokeThickness/2+T*c+f.ascent+S,"right"===n.align?r+=d-h[T]:"center"===n.align&&(r+=(d-h[T])/2),n.stroke&&n.strokeThickness&&this.drawLetterSpacing(u[T],r+n.padding,i+n.padding-g,!0),n.fill&&this.drawLetterSpacing(u[T],r+n.padding,i+n.padding-g)}this.updateTexture()}},t.prototype.drawLetterSpacing=function(e,n,r,i){void 0===i&&(i=!1);var o=this._style.letterSpacing,a=t.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(0===o||a)return a&&(this.context.letterSpacing=o,this.context.textLetterSpacing=o),void(i?this.context.strokeText(e,n,r):this.context.fillText(e,n,r));for(var s=n,l=Array.from?Array.from(e):e.split(""),u=this.context.measureText(e).width,c=0,h=0;h<l.length;++h){var d=l[h];i?this.context.strokeText(d,s,r):this.context.fillText(d,s,r);for(var f="",p=h+1;p<l.length;++p)f+=l[p];s+=u-(c=this.context.measureText(f).width)+o,u=c}},t.prototype.updateTexture=function(){var e=this.canvas;if(this._style.trim){var t=function(e){var t,n,r,i=e.width,o=e.height,a=e.getContext("2d"),s=a.getImageData(0,0,i,o).data,l=s.length,u={top:null,left:null,right:null,bottom:null},c=null;for(t=0;t<l;t+=4)0!==s[t+3]&&(n=t/4%i,r=~~(t/4/i),null===u.top&&(u.top=r),(null===u.left||n<u.left)&&(u.left=n),(null===u.right||u.right<n)&&(u.right=n+1),(null===u.bottom||u.bottom<r)&&(u.bottom=r));return null!==u.top&&(i=u.right-u.left,o=u.bottom-u.top+1,c=a.getImageData(u.left,u.top,i,o)),{height:o,width:i,data:c}}(e);t.data&&(e.width=t.width,e.height=t.height,this.context.putImageData(t.data,0,0))}var n=this._texture,r=this._style,i=r.trim?0:r.padding,o=n.baseTexture;n.trim.width=n._frame.width=e.width/this._resolution,n.trim.height=n._frame.height=e.height/this._resolution,n.trim.x=-i,n.trim.y=-i,n.orig.width=n._frame.width-2*i,n.orig.height=n._frame.height-2*i,this._onTextureUpdate(),o.setRealSize(e.width,e.height,this._resolution),n.updateUvs(),this.dirty=!1},t.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype._render.call(this,t)},t.prototype.updateTransform=function(){this.updateText(!0),e.prototype.updateTransform.call(this)},t.prototype.getBounds=function(t,n){return this.updateText(!0),-1===this._textureID&&(t=!1),e.prototype.getBounds.call(this,t,n)},t.prototype.getLocalBounds=function(t){return this.updateText(!0),e.prototype.getLocalBounds.call(this,t)},t.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._generateFillStyle=function(e,t,n){var r,i=e.fill;if(!Array.isArray(i))return i;if(1===i.length)return i[0];var o=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,s=this.canvas.width/this._resolution-o-2*a,l=this.canvas.height/this._resolution-o-2*a,u=i.slice(),c=e.fillGradientStops.slice();if(!c.length)for(var h=u.length+1,d=1;d<h;++d)c.push(d/h);if(u.unshift(i[0]),c.unshift(0),u.push(i[i.length-1]),c.push(1),e.fillGradientType===qa.LINEAR_VERTICAL){r=this.context.createLinearGradient(s/2,a,s/2,l+a);var f=n.fontProperties.fontSize+e.strokeThickness;for(d=0;d<t.length;d++){var p=n.lineHeight*(d-1)+f,y=n.lineHeight*d,m=y;d>0&&p>y&&(m=(y+p)/2);var g=y+f,v=n.lineHeight*(d+1),_=g;d+1<t.length&&v<g&&(_=(g+v)/2);for(var b=(_-m)/l,x=0;x<u.length;x++){var E;E="number"==typeof c[x]?c[x]:x/u.length;var S=Math.min(1,Math.max(0,m/l+E*b));S=Number(S.toFixed(5)),r.addColorStop(S,u[x])}}}else{r=this.context.createLinearGradient(a,l/2,s+a,l/2);var T=u.length+1,w=1;for(d=0;d<u.length;d++){var A;A="number"==typeof c[d]?c[d]:w/T,r.addColorStop(A,u[d]),w++}}return r},t.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},Ss,t),e.prototype.destroy.call(this,t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){this.updateText(!0);var t=Xe(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){this.updateText(!0);var t=Xe(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(e){e=e||{},this._style=e instanceof vs?e:new vs(e),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){e=String(null==e?"":e),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)},enumerable:!1,configurable:!0}),t.nextLineHeightBehavior=!1,t.experimentalLetterSpacing=!1,t}(ps);Ee.UPLOADS_PER_FRAME=4;var ws=function(e,t){return ws=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},ws(e,t)},As=function(){function e(e){this.maxItemsPerFrame=e,this.itemsLeft=0}return e.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},e.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},e}();function Ps(e,t){var n=!1;if(e&&e._textures&&e._textures.length)for(var r=0;r<e._textures.length;r++)if(e._textures[r]instanceof Dn){var i=e._textures[r].baseTexture;-1===t.indexOf(i)&&(t.push(i),n=!0)}return n}function Os(e,t){if(e.baseTexture instanceof vn){var n=e.baseTexture;return-1===t.indexOf(n)&&t.push(n),!0}return!1}function Rs(e,t){if(e._texture&&e._texture instanceof Dn){var n=e._texture.baseTexture;return-1===t.indexOf(n)&&t.push(n),!0}return!1}function Cs(e,t){return t instanceof Ts&&(t.updateText(!0),!0)}function Is(e,t){if(t instanceof vs){var n=t.toFontString();return Es.measureFont(n),!0}return!1}function Ns(e,t){if(e instanceof Ts){-1===t.indexOf(e.style)&&t.push(e.style),-1===t.indexOf(e)&&t.push(e);var n=e._texture.baseTexture;return-1===t.indexOf(n)&&t.push(n),!0}return!1}function Ms(e,t){return e instanceof vs&&(-1===t.indexOf(e)&&t.push(e),!0)}function ks(e,t){return t instanceof vn&&(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0)}function Ds(e,t){if(!(t instanceof cs))return!1;var n=t.geometry;t.finishPoly(),n.updateBatches();for(var r=n.batches,i=0;i<r.length;i++){var o=r[i].style.texture;o&&ks(e,o.baseTexture)}return n.batchable||e.geometry.bind(n,t._resolveDirectShader(e)),!0}function Ls(e,t){return e instanceof cs&&(t.push(e),!0)}var Fs=function(e){function t(t){var n=e.call(this,t)||this;return n.uploadHookHelper=n.renderer,n.registerFindHook(Ls),n.registerUploadHook(ks),n.registerUploadHook(Ds),n}return function(e,t){function n(){this.constructor=e}ws(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(function(){function e(e){var t=this;this.limiter=new As(Ee.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){t.queue&&t.prepareItems()},this.registerFindHook(Ns),this.registerFindHook(Ms),this.registerFindHook(Ps),this.registerFindHook(Os),this.registerFindHook(Rs),this.registerUploadHook(Cs),this.registerUploadHook(Is)}return e.prototype.upload=function(e,t){"function"==typeof e&&(t=e,e=null),e&&this.add(e),this.queue.length?(t&&this.completes.push(t),this.ticking||(this.ticking=!0,Zt.system.addOnce(this.tick,this,qt.UTILITY))):t&&t()},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed)for(var n=0,r=this.uploadHooks.length;n<r;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)Zt.system.addOnce(this.tick,this,qt.UTILITY);else{this.ticking=!1;var i=this.completes.slice(0);for(this.completes.length=0,n=0,r=i.length;n<r;n++)i[n]()}},e.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},e.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},e.prototype.add=function(e){for(var t=0,n=this.addHooks.length;t<n&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Wt)for(t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this},e.prototype.destroy=function(){this.ticking&&Zt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}()),Us=(function(){function e(e){this.maxMilliseconds=e,this.frameStart=0}e.prototype.beginFrame=function(){this.frameStart=Date.now()},e.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds}}(),function(){function e(e,t,n){void 0===n&&(n=null),this._texture=e instanceof Dn?e:null,this.baseTexture=e instanceof vn?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;var r=this.baseTexture.resource;this.resolution=this._updateResolution(n||(r?r.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return e.prototype._updateResolution=function(e){void 0===e&&(e=null);var t=this.data.meta.scale,n=et(e,null);return null===n&&(n=void 0!==t?parseFloat(t):1),1!==n&&this.baseTexture.setResolution(n),n},e.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},e.prototype._processFrames=function(t){for(var n=t,r=e.BATCH_SIZE;n-t<r&&n<this._frameKeys.length;){var i=this._frameKeys[n],o=this._frames[i],a=o.frame;if(a){var s,l=null,u=!1!==o.trimmed&&o.sourceSize?o.sourceSize:o.frame,c=new st(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);s=o.rotated?new st(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):new st(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),!1!==o.trimmed&&o.spriteSourceSize&&(l=new st(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[i]=new Dn(this.baseTexture,s,c,l,o.rotated?2:0,o.anchor),Dn.addToCache(this.textures[i],i)}n++}},e.prototype._processAnimations=function(){var e=this.data.animations||{};for(var t in e){this.animations[t]=[];for(var n=0;n<e[t].length;n++){var r=e[t][n];this.animations[t].push(this.textures[r])}}},e.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},e.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout((function(){t._batchIndex*e.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())}),0)},e.prototype.destroy=function(e){var t;for(var n in void 0===e&&(e=!1),this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(null===(t=this._texture)||void 0===t||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},e.BATCH_SIZE=1e3,e}()),Bs=function(){function e(){}return e.use=function(t,n){var r,i,o=this,a=t.name+"_image";if(t.data&&t.type===qo.TYPE.JSON&&t.data.frames&&!o.resources[a]){var s=null===(i=null===(r=t.data)||void 0===r?void 0:r.meta)||void 0===i?void 0:i.related_multi_packs;if(Array.isArray(s))for(var l=function(e){if("string"!=typeof e)return"continue";var n=e.replace(".json",""),r=Oe.resolve(t.url.replace(o.baseUrl,""),e);if(o.resources[n]||Object.values(o.resources).some((function(e){return Oe.format(Oe.parse(e.url))===r})))return"continue";var i={crossOrigin:t.crossOrigin,loadType:qo.LOAD_TYPE.XHR,xhrType:qo.XHR_RESPONSE_TYPE.JSON,parentResource:t,metadata:t.metadata};o.add(n,r,i)},u=0,c=s;u<c.length;u++)l(c[u]);var h={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},d=e.getResourcePath(t,o.baseUrl);o.add(a,d,h,(function(e){if(e.error)n(e.error);else{var r=new Us(e.texture,t.data,t.url);r.parse((function(){t.spritesheet=r,t.textures=r.textures,n()}))}}))}else n()},e.getResourcePath=function(e,t){return e.isDataUrl?e.data.meta.image:Oe.resolve(e.url.replace(t,""),e.data.meta.image)},e}(),Gs=function(e,t){return Gs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Gs(e,t)};function js(e,t){function n(){this.constructor=e}Gs(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var $s=new ot,zs=function(e){function t(t,n,r){void 0===n&&(n=100),void 0===r&&(r=100);var i=e.call(this,t)||this;return i.tileTransform=new Et,i._width=n,i._height=r,i.uvMatrix=i.texture.uvMatrix||new Lr(t),i.pluginName="tilingSprite",i.uvRespectAnchor=!1,i}return js(t,e),Object.defineProperty(t.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copyFrom(e)},enumerable:!1,configurable:!0}),t.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},t.prototype._render=function(e){var t=this._texture;t&&t.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))},t.prototype._calculateBounds=function(){var e=this._width*-this._anchor._x,t=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,t,n,r)},t.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new st),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,$s);var t=this._width,n=this._height,r=-t*this.anchor._x;if($s.x>=r&&$s.x<r+t){var i=-n*this.anchor._y;if($s.y>=i&&$s.y<i+n)return!0}return!1},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.tileTransform=null,this.uvMatrix=null},t.from=function(e,n){return new t(e instanceof Dn?e:Dn.from(e,n),n.width,n.height)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!1,configurable:!0}),t}(ps),Xs="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",Hs=new ft,Vs=function(e){function t(t){var n=e.call(this,t)||this;return t.runners.contextChange.add(n),n.quad=new Yn,n.state=Mr.for2d(),n}return js(t,e),t.prototype.contextChange=function(){var e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=Nr.from(Xs,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",t),this.shader=e.context.webGLVersion>1?Nr.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",t):Nr.from(Xs,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",t)},t.prototype.render=function(e){var t=this.renderer,n=this.quad,r=n.vertices;r[0]=r[6]=e._width*-e.anchor.x,r[1]=r[3]=e._height*-e.anchor.y,r[2]=r[4]=e._width*(1-e.anchor.x),r[5]=r[7]=e._height*(1-e.anchor.y);var i=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;(r=n.uvs)[0]=r[6]=-i,r[1]=r[3]=-o,r[2]=r[4]=1-i,r[5]=r[7]=1-o,n.invalidate();var a=e._texture,s=a.baseTexture,l=e.tileTransform.localTransform,u=e.uvMatrix,c=s.isPowerOfTwo&&a.frame.width===s.width&&a.frame.height===s.height;c&&(s._glTextures[t.CONTEXT_UID]?c=s.wrapMode!==fe.CLAMP:s.wrapMode===fe.CLAMP&&(s.wrapMode=fe.REPEAT));var h=c?this.simpleShader:this.shader,d=a.width,f=a.height,p=e._width,y=e._height;Hs.set(l.a*d/p,l.b*d/y,l.c*f/p,l.d*f/y,l.tx/p,l.ty/y),Hs.invert(),c?Hs.prepend(u.mapCoord):(h.uniforms.uMapCoord=u.mapCoord.toArray(!0),h.uniforms.uClampFrame=u.uClampFrame,h.uniforms.uClampOffset=u.uClampOffset),h.uniforms.uTransform=Hs.toArray(!0),h.uniforms.uColor=Ue(e.tint,e.worldAlpha,h.uniforms.uColor,s.alphaMode),h.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),h.uniforms.uSampler=a,t.shader.bind(h),t.geometry.bind(n),this.state.blendMode=Le(e.blendMode,s.alphaMode),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},t}(er),Ys=function(e,t){return Ys=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Ys(e,t)};function Ws(e,t){function n(){this.constructor=e}Ys(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var qs=function(){function e(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return e.prototype.update=function(e){if(e||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var t=this.uvBuffer.data;this.data&&this.data.length===t.length||(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}},e}(),Ks=new ot,Qs=new ct,Zs=function(e){function t(t,n,r,i){void 0===i&&(i=se.TRIANGLES);var o=e.call(this)||this;return o.geometry=t,o.shader=n,o.state=r||Mr.for2d(),o.drawMode=i,o.start=0,o.size=0,o.uvs=null,o.indices=null,o.vertexData=new Float32Array(1),o.vertexDirty=-1,o._transformID=-1,o._roundPixels=Ee.ROUND_PIXELS,o.batchUvs=null,o}return Ws(t,e),Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},set:function(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){return this.shader},set:function(e){this.shader=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(e){this.shader.tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(e){this.shader.texture=e},enumerable:!1,configurable:!0}),t.prototype._render=function(e){var n=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===se.TRIANGLES&&n.length<2*t.BATCHABLE_SIZE?this._renderToBatch(e):this._renderDefault(e)},t.prototype._renderDefault=function(e){var t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},t.prototype._renderToBatch=function(e){var t=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;var r=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[r]),e.plugins[r].render(this)},t.prototype.calculateVertices=function(){var e=this.geometry.buffers[0],t=e.data,n=e._updateID;if(n!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));for(var r=this.transform.worldTransform,i=r.a,o=r.b,a=r.c,s=r.d,l=r.tx,u=r.ty,c=this.vertexData,h=0;h<c.length/2;h++){var d=t[2*h],f=t[2*h+1];c[2*h]=i*d+a*f+l,c[2*h+1]=o*d+s*f+u}if(this._roundPixels){var p=Ee.RESOLUTION;for(h=0;h<c.length;++h)c[h]=Math.round((c[h]*p|0)/p)}this.vertexDirty=n}},t.prototype.calculateUvs=function(){var e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new qs(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},t.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},t.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,Ks);for(var t=this.geometry.getBuffer("aVertexPosition").data,n=Qs.points,r=this.geometry.getIndex().data,i=r.length,o=4===this.drawMode?3:1,a=0;a+2<i;a+=o){var s=2*r[a],l=2*r[a+1],u=2*r[a+2];if(n[0]=t[s],n[1]=t[s+1],n[2]=t[l],n[3]=t[l+1],n[4]=t[u],n[5]=t[u+1],Qs.contains(Ks.x,Ks.y))return!0}return!1},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},t.BATCHABLE_SIZE=100,t}(Wt),Js=function(e){function t(t,n){var r=this,i={uSampler:t,alpha:1,uTextureMatrix:ft.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n)).uniforms&&Object.assign(i,n.uniforms),(r=e.call(this,n.program||Ir.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),i)||this)._colorDirty=!1,r.uvMatrix=new Lr(t),r.batchable=void 0===n.program,r.pluginName=n.pluginName,r.tint=n.tint,r.alpha=n.alpha,r}return Ws(t,e),Object.defineProperty(t.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){e!==this._tint&&(this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),t.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var e=this.texture.baseTexture;Ue(this._tint,this._alpha,this.uniforms.uColor,e.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},t}(Nr),el=function(e){function t(t,n,r){var i=e.call(this)||this,o=new Gn(t),a=new Gn(n,!0),s=new Gn(r,!0,!0);return i.addAttribute("aVertexPosition",o,2,!1,ce.FLOAT).addAttribute("aTextureCoord",a,2,!1,ce.FLOAT).addIndex(s),i._updateId=-1,i}return Ws(t,e),Object.defineProperty(t.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),t}(Hn),tl=function(e,t){return tl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},tl(e,t)},nl=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]},rl=function(){function e(){}return e.test=function(e){return"string"==typeof e&&0===e.indexOf("info face=")},e.parse=function(e){var t=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var r in t){var i=t[r].match(/^[a-z]+/gm)[0],o=t[r].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(var s in o){var l=o[s].split("="),u=l[0],c=l[1].replace(/"/gm,""),h=parseFloat(c),d=isNaN(h)?c:h;a[u]=d}n[i].push(a)}var f=new nl;return n.info.forEach((function(e){return f.info.push({face:e.face,size:parseInt(e.size,10)})})),n.common.forEach((function(e){return f.common.push({lineHeight:parseInt(e.lineHeight,10)})})),n.page.forEach((function(e){return f.page.push({id:parseInt(e.id,10),file:e.file})})),n.char.forEach((function(e){return f.char.push({id:parseInt(e.id,10),page:parseInt(e.page,10),x:parseInt(e.x,10),y:parseInt(e.y,10),width:parseInt(e.width,10),height:parseInt(e.height,10),xoffset:parseInt(e.xoffset,10),yoffset:parseInt(e.yoffset,10),xadvance:parseInt(e.xadvance,10)})})),n.kerning.forEach((function(e){return f.kerning.push({first:parseInt(e.first,10),second:parseInt(e.second,10),amount:parseInt(e.amount,10)})})),n.distanceField.forEach((function(e){return f.distanceField.push({distanceRange:parseInt(e.distanceRange,10),fieldType:e.fieldType})})),f},e}(),il=function(){function e(){}return e.test=function(e){return e instanceof XMLDocument&&e.getElementsByTagName("page").length&&null!==e.getElementsByTagName("info")[0].getAttribute("face")},e.parse=function(e){for(var t=new nl,n=e.getElementsByTagName("info"),r=e.getElementsByTagName("common"),i=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),s=e.getElementsByTagName("distanceField"),l=0;l<n.length;l++)t.info.push({face:n[l].getAttribute("face"),size:parseInt(n[l].getAttribute("size"),10)});for(l=0;l<r.length;l++)t.common.push({lineHeight:parseInt(r[l].getAttribute("lineHeight"),10)});for(l=0;l<i.length;l++)t.page.push({id:parseInt(i[l].getAttribute("id"),10)||0,file:i[l].getAttribute("file")});for(l=0;l<o.length;l++){var u=o[l];t.char.push({id:parseInt(u.getAttribute("id"),10),page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xoffset:parseInt(u.getAttribute("xoffset"),10),yoffset:parseInt(u.getAttribute("yoffset"),10),xadvance:parseInt(u.getAttribute("xadvance"),10)})}for(l=0;l<a.length;l++)t.kerning.push({first:parseInt(a[l].getAttribute("first"),10),second:parseInt(a[l].getAttribute("second"),10),amount:parseInt(a[l].getAttribute("amount"),10)});for(l=0;l<s.length;l++)t.distanceField.push({fieldType:s[l].getAttribute("fieldType"),distanceRange:parseInt(s[l].getAttribute("distanceRange"),10)});return t},e}(),ol=function(){function e(){}return e.test=function(e){if("string"==typeof e&&e.indexOf("<font>")>-1){var t=(new globalThis.DOMParser).parseFromString(e,"text/xml");return il.test(t)}return!1},e.parse=function(e){var t=(new globalThis.DOMParser).parseFromString(e,"text/xml");return il.parse(t)},e}(),al=[rl,il,ol];function sl(e){for(var t=0;t<al.length;t++)if(al[t].test(e))return al[t];return null}function ll(e,t,n,r,i,o,a){var s=n.text,l=n.fontProperties;t.translate(r,i),t.scale(o,o);var u=a.strokeThickness/2,c=-a.strokeThickness/2;if(t.font=a.toFontString(),t.lineWidth=a.strokeThickness,t.textBaseline=a.textBaseline,t.lineJoin=a.lineJoin,t.miterLimit=a.miterLimit,t.fillStyle=function(e,t,n,r,i,o){var a,s=n.fill;if(!Array.isArray(s))return s;if(1===s.length)return s[0];var l=n.dropShadow?n.dropShadowDistance:0,u=n.padding||0,c=e.width/r-l-2*u,h=e.height/r-l-2*u,d=s.slice(),f=n.fillGradientStops.slice();if(!f.length)for(var p=d.length+1,y=1;y<p;++y)f.push(y/p);if(d.unshift(s[0]),f.unshift(0),d.push(s[s.length-1]),f.push(1),n.fillGradientType===qa.LINEAR_VERTICAL){a=t.createLinearGradient(c/2,u,c/2,h+u);var m=0,g=(o.fontProperties.fontSize+n.strokeThickness)/h;for(y=0;y<i.length;y++)for(var v=o.lineHeight*y,_=0;_<d.length;_++){var b=v/h+("number"==typeof f[_]?f[_]:_/d.length)*g,x=Math.max(m,b);x=Math.min(x,1),a.addColorStop(x,d[_]),m=x}}else{a=t.createLinearGradient(u,h/2,c+u,h/2);var E=d.length+1,S=1;for(y=0;y<d.length;y++){var T;T="number"==typeof f[y]?f[y]:S/E,a.addColorStop(T,d[y]),S++}}return a}(e,t,a,o,[s],n),t.strokeStyle=a.stroke,a.dropShadow){var h=a.dropShadowColor,d=Ne("number"==typeof h?h:ke(h)),f=a.dropShadowBlur*o,p=a.dropShadowDistance*o;t.shadowColor="rgba("+255*d[0]+","+255*d[1]+","+255*d[2]+","+a.dropShadowAlpha+")",t.shadowBlur=f,t.shadowOffsetX=Math.cos(a.dropShadowAngle)*p,t.shadowOffsetY=Math.sin(a.dropShadowAngle)*p}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;a.stroke&&a.strokeThickness&&t.strokeText(s,u,c+n.lineHeight-l.descent),a.fill&&t.fillText(s,u,c+n.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function ul(e){return Array.from?Array.from(e):e.split("")}function cl(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}var hl=function(){function e(e,t,n){var r,i,o=e.info[0],a=e.common[0],s=e.page[0],l=e.distanceField[0],u=et(s.file),c={};this._ownsTextures=n,this.font=o.face,this.size=o.size,this.lineHeight=a.lineHeight/u,this.chars={},this.pageTextures=c;for(var h=0;h<e.page.length;h++){var d=e.page[h],f=d.id,p=d.file;c[f]=t instanceof Array?t[h]:t[p],(null==l?void 0:l.fieldType)&&"none"!==l.fieldType&&(c[f].baseTexture.alphaMode=ye.NO_PREMULTIPLIED_ALPHA)}for(h=0;h<e.char.length;h++){var y=e.char[h],m=(f=y.id,y.page),g=e.char[h],v=g.x,_=g.y,b=g.width,x=g.height,E=g.xoffset,S=g.yoffset,T=g.xadvance;_/=u,b/=u,x/=u,E/=u,S/=u,T/=u;var w=new st((v/=u)+c[m].frame.x/u,_+c[m].frame.y/u,b,x);this.chars[f]={xOffset:E,yOffset:S,xAdvance:T,kerning:{},texture:new Dn(c[m].baseTexture,w),page:m}}for(h=0;h<e.kerning.length;h++){var A=e.kerning[h],P=A.first,O=A.second,R=A.amount;P/=u,O/=u,R/=u,this.chars[O]&&(this.chars[O].kerning[P]=R)}this.distanceFieldRange=null==l?void 0:l.distanceRange,this.distanceFieldType=null!==(i=null===(r=null==l?void 0:l.fieldType)||void 0===r?void 0:r.toLowerCase())&&void 0!==i?i:"none"}return e.prototype.destroy=function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null},e.install=function(t,n,r){var i;if(t instanceof nl)i=t;else{var o=sl(t);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(t)}n instanceof Dn&&(n=[n]);var a=new e(i,n,r);return e.available[a.font]=a,a},e.uninstall=function(t){var n=e.available[t];if(!n)throw new Error("No font found named '"+t+"'");n.destroy(),delete e.available[t]},e.from=function(t,n,r){if(!t)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},e.defaultOptions,r),o=i.chars,a=i.padding,s=i.resolution,l=i.textureWidth,u=i.textureHeight,c=function(e){"string"==typeof e&&(e=[e]);for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];if(Array.isArray(i)){if(2!==i.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var o=i[0].charCodeAt(0),a=i[1].charCodeAt(0);if(a<o)throw new Error("[BitmapFont]: Invalid character range.");for(var s=o,l=a;s<=l;s++)t.push(String.fromCharCode(s))}else t.push.apply(t,ul(i))}if(0===t.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}(o),h=n instanceof vs?n:new vs(n),d=l,f=new nl;f.info[0]={face:h.fontFamily,size:h.fontSize},f.common[0]={lineHeight:h.fontSize};for(var p,y,m,g=0,v=0,_=0,b=[],x=0;x<c.length;x++){p||((p=document.createElement("canvas")).width=l,p.height=u,y=p.getContext("2d"),m=new vn(p,{resolution:s}),b.push(new Dn(m)),f.page.push({id:b.length-1,file:""}));var E=Es.measureText(c[x],h,!1,p),S=E.width,T=Math.ceil(E.height),w=Math.ceil(("italic"===h.fontStyle?2:1)*S);if(v>=u-T*s){if(0===v)throw new Error("[BitmapFont] textureHeight "+u+"px is too small for "+h.fontSize+"px fonts");--x,p=null,y=null,m=null,v=0,g=0,_=0}else if(_=Math.max(T+E.fontProperties.descent,_),w*s+g>=d)--x,v+=_*s,v=Math.ceil(v),g=0,_=0;else{ll(p,y,E,g,v,s,h);var A=cl(E.text);f.char.push({id:A,page:b.length-1,x:g/s,y:v/s,width:w,height:T,xoffset:0,yoffset:0,xadvance:Math.ceil(S-(h.dropShadow?h.dropShadowDistance:0)-(h.stroke?h.strokeThickness:0))}),g+=(w+2*a)*s,g=Math.ceil(g)}}x=0;for(var P=c.length;x<P;x++)for(var O=c[x],R=0;R<P;R++){var C=c[R],I=y.measureText(O).width,N=y.measureText(C).width,M=y.measureText(O+C).width-(I+N);M&&f.kerning.push({first:cl(O),second:cl(C),amount:M})}var k=new e(f,b,!0);return void 0!==e.available[t]&&e.uninstall(t),e.available[t]=k,k},e.ALPHA=[["a","z"],["A","Z"]," "],e.NUMERIC=[["0","9"]],e.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],e.ASCII=[[" ","~"]],e.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:e.ALPHANUMERIC},e.available={},e}(),dl=[],fl=[],pl=[],yl=function(e){function t(n,r){void 0===r&&(r={});var i=e.call(this)||this;i._tint=16777215;var o=Object.assign({},t.styleDefaults,r),a=o.align,s=o.tint,l=o.maxWidth,u=o.letterSpacing,c=o.fontName,h=o.fontSize;if(!hl.available[c])throw new Error('Missing BitmapFont "'+c+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=a,i._tint=s,i._fontName=c,i._fontSize=h||hl.available[c].size,i.text=n,i._maxWidth=l,i._maxLineHeight=0,i._letterSpacing=u,i._anchor=new dt((function(){i.dirty=!0}),i,0,0),i._roundPixels=Ee.ROUND_PIXELS,i.dirty=!0,i._resolution=Ee.RESOLUTION,i._autoResolution=!0,i._textureCache={},i}return function(e,t){function n(){this.constructor=e}tl(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.updateText=function(){for(var e,t=hl.available[this._fontName],n=this._fontSize/t.size,r=new ot,i=[],o=[],a=[],s=ul(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),l=this._maxWidth*t.size/this._fontSize,u="none"===t.distanceFieldType?dl:fl,c=null,h=0,d=0,f=0,p=-1,y=0,m=0,g=0,v=0,_=0;_<s.length;_++){var b=cl(G=s[_]);if(/(?:\s)/.test(G)&&(p=_,y=h,v++),"\r"!==G&&"\n"!==G){var x=t.chars[b];if(x){c&&x.kerning[c]&&(r.x+=x.kerning[c]);var E=pl.pop()||{texture:Dn.EMPTY,line:0,charCode:0,prevSpaces:0,position:new ot};E.texture=x.texture,E.line=f,E.charCode=b,E.position.x=r.x+x.xOffset+this._letterSpacing/2,E.position.y=r.y+x.yOffset,E.prevSpaces=v,i.push(E),h=E.position.x+Math.max(x.xAdvance,x.texture.orig.width),r.x+=x.xAdvance+this._letterSpacing,g=Math.max(g,x.yOffset+x.texture.height),c=b,-1!==p&&l>0&&r.x>l&&(ze(i,1+p-++m,1+_-p),_=p,p=-1,o.push(y),a.push(i.length>0?i[i.length-1].prevSpaces:0),d=Math.max(d,y),f++,r.x=0,r.y+=t.lineHeight,c=null,v=0)}}else o.push(h),a.push(-1),d=Math.max(d,h),++f,++m,r.x=0,r.y+=t.lineHeight,c=null,v=0}var S=s[s.length-1];"\r"!==S&&"\n"!==S&&(/(?:\s)/.test(S)&&(h=y),o.push(h),d=Math.max(d,h),a.push(-1));var T=[];for(_=0;_<=f;_++){var w=0;"right"===this._align?w=d-o[_]:"center"===this._align?w=(d-o[_])/2:"justify"===this._align&&(w=a[_]<0?0:(d-o[_])/a[_]),T.push(w)}var A=i.length,P={},O=[],R=this._activePagesMeshData;for(_=0;_<R.length;_++)u.push(R[_]);for(_=0;_<A;_++){var C=($=i[_].texture).baseTexture.uid;if(!P[C]){if(!(q=u.pop())){var I=new el,N=void 0,M=void 0;"none"===t.distanceFieldType?(N=new Js(Dn.EMPTY),M=ae.NORMAL):(N=new Js(Dn.EMPTY,{program:Ir.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),M=ae.NORMAL_NPM);var k=new Zs(I,N);k.blendMode=M,q={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:k,vertices:null,uvs:null,indices:null}}q.index=0,q.indexCount=0,q.vertexCount=0,q.uvsCount=0,q.total=0;var D=this._textureCache;D[C]=D[C]||new Dn($.baseTexture),q.mesh.texture=D[C],q.mesh.tint=this._tint,O.push(q),P[C]=q}P[C].total++}for(_=0;_<R.length;_++)-1===O.indexOf(R[_])&&this.removeChild(R[_].mesh);for(_=0;_<O.length;_++)O[_].mesh.parent!==this&&this.addChild(O[_].mesh);for(var _ in this._activePagesMeshData=O,P){var L=(q=P[_]).total;if(!((null===(e=q.indices)||void 0===e?void 0:e.length)>6*L)||q.vertices.length<2*Zs.BATCHABLE_SIZE)q.vertices=new Float32Array(8*L),q.uvs=new Float32Array(8*L),q.indices=new Uint16Array(6*L);else for(var F=q.total,U=q.vertices,B=4*F*2;B<U.length;B++)U[B]=0;q.mesh.size=6*L}for(_=0;_<A;_++){var G,j=(G=i[_]).position.x+T[G.line]*("justify"===this._align?G.prevSpaces:1);this._roundPixels&&(j=Math.round(j));var $,z=j*n,X=G.position.y*n,H=P[($=G.texture).baseTexture.uid],V=$.frame,Y=$._uvs,W=H.index++;H.indices[6*W+0]=0+4*W,H.indices[6*W+1]=1+4*W,H.indices[6*W+2]=2+4*W,H.indices[6*W+3]=0+4*W,H.indices[6*W+4]=2+4*W,H.indices[6*W+5]=3+4*W,H.vertices[8*W+0]=z,H.vertices[8*W+1]=X,H.vertices[8*W+2]=z+V.width*n,H.vertices[8*W+3]=X,H.vertices[8*W+4]=z+V.width*n,H.vertices[8*W+5]=X+V.height*n,H.vertices[8*W+6]=z,H.vertices[8*W+7]=X+V.height*n,H.uvs[8*W+0]=Y.x0,H.uvs[8*W+1]=Y.y0,H.uvs[8*W+2]=Y.x1,H.uvs[8*W+3]=Y.y1,H.uvs[8*W+4]=Y.x2,H.uvs[8*W+5]=Y.y2,H.uvs[8*W+6]=Y.x3,H.uvs[8*W+7]=Y.y3}for(var _ in this._textWidth=d*n,this._textHeight=(r.y+t.lineHeight)*n,P){var q=P[_];if(0!==this.anchor.x||0!==this.anchor.y)for(var K=0,Q=this._textWidth*this.anchor.x,Z=this._textHeight*this.anchor.y,J=0;J<q.total;J++)q.vertices[K++]-=Q,q.vertices[K++]-=Z,q.vertices[K++]-=Q,q.vertices[K++]-=Z,q.vertices[K++]-=Q,q.vertices[K++]-=Z,q.vertices[K++]-=Q,q.vertices[K++]-=Z;this._maxLineHeight=g*n;var ee=q.mesh.geometry.getBuffer("aVertexPosition"),te=q.mesh.geometry.getBuffer("aTextureCoord"),ne=q.mesh.geometry.getIndex();ee.data=q.vertices,te.data=q.uvs,ne.data=q.indices,ee.update(),te.update(),ne.update()}for(_=0;_<i.length;_++)pl.push(i[_])},t.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},t.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);var n=hl.available[this._fontName],r=n.distanceFieldRange,i=n.distanceFieldType,o=n.size;if("none"!==i)for(var a=this.worldTransform,s=a.a,l=a.b,u=a.c,c=a.d,h=Math.sqrt(s*s+l*l),d=Math.sqrt(u*u+c*c),f=(Math.abs(h)+Math.abs(d))/2,p=this._fontSize/o,y=0,m=this._activePagesMeshData;y<m.length;y++)m[y].mesh.shader.uniforms.uFWidth=f*r*p*this._resolution;e.prototype._render.call(this,t)},t.prototype.getLocalBounds=function(){return this.validate(),e.prototype.getLocalBounds.call(this)},t.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){if(this._tint!==e){this._tint=e;for(var t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontName",{get:function(){return this._fontName},set:function(e){if(!hl.available[e])throw new Error('Missing BitmapFont "'+e+'"');this._fontName!==e&&(this._fontName=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(e){"number"==typeof e?this._anchor.set(e):this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){e=String(null==e?"":e),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)},enumerable:!1,configurable:!0}),t.prototype.destroy=function(t){var n=this._textureCache;for(var r in n)n[r].destroy(),delete n[r];this._textureCache=null,e.prototype.destroy.call(this,t)},t.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},t}(Wt),ml=function(){function e(){}return e.add=function(){qo.setExtensionXhrType("fnt",qo.XHR_RESPONSE_TYPE.TEXT)},e.use=function(t,n){var r=sl(t.data);if(r)for(var i=e.getBaseUrl(this,t),o=r.parse(t.data),a={},s=function(e){a[e.metadata.pageFile]=e.texture,Object.keys(a).length===o.page.length&&(t.bitmapFont=hl.install(o,a,!0),n())},l=0;l<o.page.length;++l){var u=o.page[l].file,c=i+u,h=!1;for(var d in this.resources){var f=this.resources[d];if(f.url===c){f.metadata.pageFile=u,f.texture?s(f):f.onAfterMiddleware.add(s),h=!0;break}}if(!h){var p={crossOrigin:t.crossOrigin,loadType:qo.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},t.metadata.imageMetadata),parentResource:t};this.add(c,p,s)}}else n()},e.getBaseUrl=function(t,n){var r=n.isDataUrl?"":e.dirname(n.url);return n.isDataUrl&&("."===r&&(r=""),t.baseUrl&&r&&"/"===t.baseUrl.charAt(t.baseUrl.length-1)&&(r+="/")),(r=r.replace(t.baseUrl,""))&&"/"!==r.charAt(r.length-1)&&(r+="/"),r},e.dirname=function(e){var t=e.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return t===e?".":""===t?"/":t},e}(),gl=function(e,t){return gl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},gl(e,t)};!function(e){function t(t){void 0===t&&(t=1);var n=e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return n.alpha=t,n}(function(e,t){function n(){this.constructor=e}gl(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(t,e),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0})}(kr);var vl=function(e,t){return vl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},vl(e,t)};function _l(e,t){function n(){this.constructor=e}vl(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var bl,xl,El,Sl,Tl,wl,Al,Pl,Ol,Rl,Cl,Il,Nl,Ml,kl,Dl,Ll,Fl,Ul,Bl={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Gl=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");!function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"}(bl||(bl={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"}(xl||(xl={})),function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"}(El||(El={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"}(Sl||(Sl={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Tl||(Tl={})),function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(wl||(wl={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Al||(Al={})),function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"}(Pl||(Pl={})),function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"}(Ol||(Ol={})),function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"}(Rl||(Rl={})),function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Cl||(Cl={})),function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"}(Il||(Il={})),function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(Nl||(Nl={})),function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"}(Ml||(Ml={})),function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"}(kl||(kl={})),function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"}(Dl||(Dl={})),function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"}(Ll||(Ll={})),function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"}(Fl||(Fl={})),function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(Ul||(Ul={}));var jl=function(e){function t(t,n,r,i,o){void 0===n&&(n=8),void 0===r&&(r=4),void 0===i&&(i=Ee.FILTER_RESOLUTION),void 0===o&&(o=5);var a=this,s=function(e,t){var n,r=Math.ceil(e/2),i="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",o="";n=t?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<e;a++){var s=n.replace("%index%",a.toString());o+=s=s.replace("%sampleIndex%",a-(r-1)+".0"),o+="\n"}return(i=i.replace("%blur%",o)).replace("%size%",e.toString())}(o,t),l=function(e){for(var t,n=Bl[e],r=n.length,i=Gl,o="",a=0;a<e;a++){var s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",a.toString());t=a,a>=r&&(t=e-a-1),o+=s=s.replace("%value%",n[t].toString()),o+="\n"}return(i=i.replace("%blur%",o)).replace("%size%",e.toString())}(o);return(a=e.call(this,s,l)||this).horizontal=t,a.resolution=i,a._quality=0,a.quality=r,a.blur=n,a}return _l(t,e),t.prototype.apply=function(e,t,n,r){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/t.width):this.uniforms.strength=1/n.height*(n.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,n,r);else{var i=e.getFilterTexture(),o=e.renderer,a=t,s=i;this.state.blend=!1,e.applyFilter(this,a,s,Ml.CLEAR);for(var l=1;l<this.passes-1;l++){e.bindAndClear(a,Ml.BLIT),this.uniforms.uSampler=s;var u=s;s=a,a=u,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,s,n,r),e.returnFilterTexture(i)}},Object.defineProperty(t.prototype,"blur",{get:function(){return this.strength},set:function(e){this.padding=1+2*Math.abs(e),this.strength=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e},enumerable:!1,configurable:!0}),t}(kr),$l=(function(e){function t(t,n,r,i){void 0===t&&(t=8),void 0===n&&(n=4),void 0===r&&(r=Ee.FILTER_RESOLUTION),void 0===i&&(i=5);var o=e.call(this)||this;return o.blurXFilter=new jl(!0,t,n,r,i),o.blurYFilter=new jl(!1,t,n,r,i),o.resolution=r,o.quality=n,o.blur=t,o.repeatEdgePixels=!1,o}_l(t,e),t.prototype.apply=function(e,t,n,r){var i=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(i&&o){var a=e.getFilterTexture();this.blurXFilter.apply(e,t,a,Ml.CLEAR),this.blurYFilter.apply(e,a,n,r),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,t,n,r):this.blurXFilter.apply(e,t,n,r)},t.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(t.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(e){this.blurYFilter.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(e){this._repeatEdgePixels=e,this.updatePadding()},enumerable:!1,configurable:!0})}(kr),function(e,t){return $l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},$l(e,t)}),zl=function(e){function t(){var t=this,n={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(t=e.call(this,ci,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",n)||this).alpha=1,t}return function(e,t){function n(){this.constructor=e}$l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype._loadMatrix=function(e,t){void 0===t&&(t=!1);var n=e;t&&(this._multiply(n,this.uniforms.m,e),n=this._colorMatrix(n)),this.uniforms.m=n},t.prototype._multiply=function(e,t,n){return e[0]=t[0]*n[0]+t[1]*n[5]+t[2]*n[10]+t[3]*n[15],e[1]=t[0]*n[1]+t[1]*n[6]+t[2]*n[11]+t[3]*n[16],e[2]=t[0]*n[2]+t[1]*n[7]+t[2]*n[12]+t[3]*n[17],e[3]=t[0]*n[3]+t[1]*n[8]+t[2]*n[13]+t[3]*n[18],e[4]=t[0]*n[4]+t[1]*n[9]+t[2]*n[14]+t[3]*n[19]+t[4],e[5]=t[5]*n[0]+t[6]*n[5]+t[7]*n[10]+t[8]*n[15],e[6]=t[5]*n[1]+t[6]*n[6]+t[7]*n[11]+t[8]*n[16],e[7]=t[5]*n[2]+t[6]*n[7]+t[7]*n[12]+t[8]*n[17],e[8]=t[5]*n[3]+t[6]*n[8]+t[7]*n[13]+t[8]*n[18],e[9]=t[5]*n[4]+t[6]*n[9]+t[7]*n[14]+t[8]*n[19]+t[9],e[10]=t[10]*n[0]+t[11]*n[5]+t[12]*n[10]+t[13]*n[15],e[11]=t[10]*n[1]+t[11]*n[6]+t[12]*n[11]+t[13]*n[16],e[12]=t[10]*n[2]+t[11]*n[7]+t[12]*n[12]+t[13]*n[17],e[13]=t[10]*n[3]+t[11]*n[8]+t[12]*n[13]+t[13]*n[18],e[14]=t[10]*n[4]+t[11]*n[9]+t[12]*n[14]+t[13]*n[19]+t[14],e[15]=t[15]*n[0]+t[16]*n[5]+t[17]*n[10]+t[18]*n[15],e[16]=t[15]*n[1]+t[16]*n[6]+t[17]*n[11]+t[18]*n[16],e[17]=t[15]*n[2]+t[16]*n[7]+t[17]*n[12]+t[18]*n[17],e[18]=t[15]*n[3]+t[16]*n[8]+t[17]*n[13]+t[18]*n[18],e[19]=t[15]*n[4]+t[16]*n[9]+t[17]*n[14]+t[18]*n[19]+t[19],e},t.prototype._colorMatrix=function(e){var t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t},t.prototype.brightness=function(e,t){var n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.tint=function(e,t){var n=[(e>>16&255)/255,0,0,0,0,0,(e>>8&255)/255,0,0,0,0,0,(255&e)/255,0,0,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.greyscale=function(e,t){var n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.blackAndWhite=function(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)},t.prototype.hue=function(e,t){e=(e||0)/180*Math.PI;var n=Math.cos(e),r=Math.sin(e),i=1/3,o=(0,Math.sqrt)(i),a=[n+(1-n)*i,i*(1-n)-o*r,i*(1-n)+o*r,0,0,i*(1-n)+o*r,n+i*(1-n),i*(1-n)-o*r,0,0,i*(1-n)-o*r,i*(1-n)+o*r,n+i*(1-n),0,0,0,0,0,1,0];this._loadMatrix(a,t)},t.prototype.contrast=function(e,t){var n=(e||0)+1,r=-.5*(n-1),i=[n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0];this._loadMatrix(i,t)},t.prototype.saturate=function(e,t){void 0===e&&(e=0);var n=2*e/3+1,r=-.5*(n-1),i=[n,r,r,0,0,r,n,r,0,0,r,r,n,0,0,0,0,0,1,0];this._loadMatrix(i,t)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(e){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)},t.prototype.sepia=function(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)},t.prototype.technicolor=function(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)},t.prototype.polaroid=function(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)},t.prototype.toBGR=function(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)},t.prototype.kodachrome=function(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)},t.prototype.browni=function(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)},t.prototype.vintage=function(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)},t.prototype.colorTone=function(e,t,n,r,i){var o=((n=n||16770432)>>16&255)/255,a=(n>>8&255)/255,s=(255&n)/255,l=((r=r||3375104)>>16&255)/255,u=(r>>8&255)/255,c=(255&r)/255,h=[.3,.59,.11,0,0,o,a,s,e=e||.2,0,l,u,c,t=t||.15,0,o-l,a-u,s-c,0,0];this._loadMatrix(h,i)},t.prototype.night=function(e,t){var n=[-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.predator=function(e,t){var n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.lsd=function(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)},t.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(t.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0}),t}(kr);zl.prototype.grayscale=zl.prototype.greyscale;var Xl=function(e,t){return Xl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Xl(e,t)};!function(e){function t(t,n){var r=this,i=new ft;return t.renderable=!1,(r=e.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:t._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=t,r.maskMatrix=i,null==n&&(n=20),r.scale=new ot(n,n),r}(function(e,t){function n(){this.constructor=e}Xl(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(t,e),t.prototype.apply=function(e,t,n,r){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var i=this.maskSprite.worldTransform,o=Math.sqrt(i.a*i.a+i.b*i.b),a=Math.sqrt(i.c*i.c+i.d*i.d);0!==o&&0!==a&&(this.uniforms.rotation[0]=i.a/o,this.uniforms.rotation[1]=i.b/o,this.uniforms.rotation[2]=i.c/a,this.uniforms.rotation[3]=i.d/a),e.applyFilter(this,t,n,r)},Object.defineProperty(t.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e},enumerable:!1,configurable:!0})}(kr);var Hl,Vl=function(e,t){return Vl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Vl(e,t)};(function(e,t){function n(){this.constructor=e}Vl(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})((function(){return Hl.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}),Hl=kr);var Yl,Wl,ql,Kl,Ql,Zl,Jl,eu,tu,nu,ru,iu,ou,au,su,lu,uu,cu,hu,du=function(e,t){return du=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},du(e,t)};!function(e){function t(t,n){void 0===t&&(t=.5),void 0===n&&(n=Math.random());var r=e.call(this,ci,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return r.noise=t,r.seed=n,r}(function(e,t){function n(){this.constructor=e}du(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(t,e),Object.defineProperty(t.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e},enumerable:!1,configurable:!0})}(kr),function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"}(Yl||(Yl={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"}(Wl||(Wl={})),function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"}(ql||(ql={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"}(Kl||(Kl={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Ql||(Ql={})),function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(Zl||(Zl={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Jl||(Jl={})),function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"}(eu||(eu={})),function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"}(tu||(tu={})),function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"}(nu||(nu={})),function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(ru||(ru={})),function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"}(iu||(iu={})),function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(ou||(ou={})),function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"}(au||(au={})),function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"}(su||(su={})),function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"}(lu||(lu={})),function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"}(uu||(uu={})),function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"}(cu||(cu={})),function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(hu||(hu={}));var fu=new ft;Ht.prototype._cacheAsBitmap=!1,Ht.prototype._cacheData=null,Ht.prototype._cacheAsBitmapResolution=null,Ht.prototype._cacheAsBitmapMultisample=cu.NONE;var pu=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(Ht.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){var t;this._cacheAsBitmap!==e&&(this._cacheAsBitmap=e,e?(this._cacheData||(this._cacheData=new pu),(t=this._cacheData).originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((t=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea))}}}),Ht.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},Ht.prototype._initCachedDisplayObject=function(e){var t;if(!this._cacheData||!this._cacheData.sprite){var n=this.alpha;this.alpha=1,e.batch.flush();var r=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var i=this.filters[0].padding;r.pad(i)}r.ceil(Ee.RESOLUTION);var o=e.renderTexture.current,a=e.renderTexture.sourceFrame.clone(),s=e.renderTexture.destinationFrame.clone(),l=e.projection.transform,u=Ln.create({width:r.width,height:r.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:null!==(t=this.cacheAsBitmapMultisample)&&void 0!==t?t:e.multisample}),c="cacheAsBitmap_"+Ve();this._cacheData.textureCacheId=c,vn.addToCache(u.baseTexture,c),Dn.addToCache(u,c);var h=this.transform.localTransform.copyTo(fu).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:u,clear:!0,transform:h,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=l,e.renderTexture.bind(o,a,s),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var d=new ps(u);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-r.x/r.width,d.anchor.y=-r.y/r.height,d.alpha=n,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)}},Ht.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},Ht.prototype._initCachedDisplayObjectCanvas=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;var r=e.context,i=e._projTransform;t.ceil(Ee.RESOLUTION);var o=Ln.create({width:t.width,height:t.height}),a="cacheAsBitmap_"+Ve();this._cacheData.textureCacheId=a,vn.addToCache(o.baseTexture,a),Dn.addToCache(o,a);var s=fu;this.transform.localTransform.copyTo(s),s.invert(),s.tx-=t.x,s.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:o,clear:!0,transform:s,skipUpdateTransform:!1}),e.context=r,e._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var l=new ps(o);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-t.x/t.width,l.anchor.y=-t.y/t.height,l.alpha=n,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)}},Ht.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},Ht.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},Ht.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,vn.removeFromCache(this._cacheData.textureCacheId),Dn.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},Ht.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)},Ht.prototype.name=null,Wt.prototype.getChildByName=function(e,t){for(var n=0,r=this.children.length;n<r;n++)if(this.children[n].name===e)return this.children[n];if(t)for(n=0,r=this.children.length;n<r;n++)if(this.children[n].getChildByName){var i=this.children[n].getChildByName(e,!0);if(i)return i}return null},Ht.prototype.getGlobalPosition=function(e,t){return void 0===e&&(e=new ot),void 0===t&&(t=!1),this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e};var yu=function(e,t){return yu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},yu(e,t)};function mu(e,t){function n(){this.constructor=e}yu(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var gu=function(e){function t(t,n,r,i){void 0===t&&(t=100),void 0===n&&(n=100),void 0===r&&(r=10),void 0===i&&(i=10);var o=e.call(this)||this;return o.segWidth=r,o.segHeight=i,o.width=t,o.height=n,o.build(),o}return mu(t,e),t.prototype.build=function(){for(var e=this.segWidth*this.segHeight,t=[],n=[],r=[],i=this.segWidth-1,o=this.segHeight-1,a=this.width/i,s=this.height/o,l=0;l<e;l++){var u=l%this.segWidth,c=l/this.segWidth|0;t.push(u*a,c*s),n.push(u/i,c/o)}var h=i*o;for(l=0;l<h;l++){var d=l%i,f=l/i|0,p=f*this.segWidth+d,y=f*this.segWidth+d+1,m=(f+1)*this.segWidth+d,g=(f+1)*this.segWidth+d+1;r.push(p,y,m,y,g,m)}this.buffers[0].data=new Float32Array(t),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(r),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},t}(el),vu=function(e){function t(t,n,r){void 0===t&&(t=200),void 0===r&&(r=0);var i=e.call(this,new Float32Array(4*n.length),new Float32Array(4*n.length),new Uint16Array(6*(n.length-1)))||this;return i.points=n,i._width=t,i.textureScale=r,i.build(),i}return mu(t,e),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),t.prototype.build=function(){var e=this.points;if(e){var t=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),r=this.getIndex();if(!(e.length<1)){t.data.length/4!==e.length&&(t.data=new Float32Array(4*e.length),n.data=new Float32Array(4*e.length),r.data=new Uint16Array(6*(e.length-1)));var i=n.data,o=r.data;i[0]=0,i[1]=0,i[2]=0,i[3]=1;for(var a=0,s=e[0],l=this._width*this.textureScale,u=e.length,c=0;c<u;c++){var h=4*c;if(this.textureScale>0){var d=s.x-e[c].x,f=s.y-e[c].y,p=Math.sqrt(d*d+f*f);s=e[c],a+=p/l}else a=c/(u-1);i[h]=a,i[h+1]=0,i[h+2]=a,i[h+3]=1}var y=0;for(c=0;c<u-1;c++)h=2*c,o[y++]=h,o[y++]=h+1,o[y++]=h+2,o[y++]=h+2,o[y++]=h+1,o[y++]=h+3;n.update(),r.update(),this.updateVertices()}}},t.prototype.updateVertices=function(){var e=this.points;if(!(e.length<1)){for(var t,n=e[0],r=0,i=0,o=this.buffers[0].data,a=e.length,s=0;s<a;s++){var l=e[s],u=4*s;i=-((t=s<e.length-1?e[s+1]:l).x-n.x),r=t.y-n.y;var c=Math.sqrt(r*r+i*i),h=this.textureScale>0?this.textureScale*this._width/2:this._width/2;r/=c,i/=c,r*=h,i*=h,o[u]=l.x+r,o[u+1]=l.y+i,o[u+2]=l.x-r,o[u+3]=l.y-i,n=l}this.buffers[0].update()}},t.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},t}(el),_u=function(e){function t(t,n,r){void 0===r&&(r=0);var i=this,o=new vu(t.height,n,r),a=new Js(t);return r>0&&(t.baseTexture.wrapMode=fe.REPEAT),(i=e.call(this,o,a)||this).autoUpdate=!0,i}return mu(t,e),t.prototype._render=function(t){var n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),e.prototype._render.call(this,t)},t}(Zs),bu=function(e){function t(t,n,r){var i=this,o=new gu(t.width,t.height,n,r),a=new Js(Dn.WHITE);return(i=e.call(this,o,a)||this).texture=t,i.autoResize=!0,i}return mu(t,e),t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var e=this.geometry,t=this.shader.texture,n=t.width,r=t.height;!this.autoResize||e.width===n&&e.height===r||(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())},Object.defineProperty(t.prototype,"texture",{get:function(){return this.shader.texture},set:function(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),t.prototype._render=function(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),e.prototype._render.call(this,t)},t.prototype.destroy=function(t){this.shader.texture.off("update",this.textureUpdated,this),e.prototype.destroy.call(this,t)},t}(Zs),xu=function(e){function t(t,n,r,i,o){void 0===t&&(t=Dn.EMPTY);var a=this,s=new el(n,r,i);s.getBuffer("aVertexPosition").static=!1;var l=new Js(t);return(a=e.call(this,s,l,null,o)||this).autoUpdate=!0,a}return mu(t,e),Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),t.prototype._render=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),e.prototype._render.call(this,t)},t}(Zs),Eu=function(e){function t(t,n,r,i,o){void 0===n&&(n=10),void 0===r&&(r=10),void 0===i&&(i=10),void 0===o&&(o=10);var a=e.call(this,Dn.WHITE,4,4)||this;return a._origWidth=t.orig.width,a._origHeight=t.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=n,a._rightWidth=i,a._topHeight=r,a._bottomHeight=o,a.texture=t,a}return mu(t,e),t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),t.prototype.updateHorizontalVertices=function(){var e=this.vertices,t=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*t,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*t,e[25]=e[27]=e[29]=e[31]=this._height},t.prototype.updateVerticalVertices=function(){var e=this.vertices,t=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*t,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*t,e[6]=e[14]=e[22]=e[30]=this._width},t.prototype._getMinScale=function(){var e=this._leftWidth+this._rightWidth,t=this._width>e?1:this._width/e,n=this._topHeight+this._bottomHeight,r=this._height>n?1:this._height/n;return Math.min(t,r)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topHeight",{get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()},enumerable:!1,configurable:!0}),t.prototype._refresh=function(){var e=this.texture,t=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;var n=1/this._origWidth,r=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=n*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-n*this._rightWidth,t[9]=t[11]=t[13]=t[15]=r*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},t}(bu),Su=function(e,t){return Su=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Su(e,t)},Tu=function(e){function t(t,n){void 0===n&&(n=!0);var r=e.call(this,t[0]instanceof Dn?t[0]:t[0].texture)||this;return r._textures=null,r._durations=null,r._autoUpdate=n,r._isConnectedToTicker=!1,r.animationSpeed=1,r.loop=!0,r.updateAnchor=!1,r.onComplete=null,r.onFrameChange=null,r.onLoop=null,r._currentTime=0,r._playing=!1,r._previousFrame=null,r.textures=t,r}return function(e,t){function n(){this.constructor=e}Su(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Zt.shared.remove(this.update,this),this._isConnectedToTicker=!1))},t.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Zt.shared.add(this.update,this,qt.HIGH),this._isConnectedToTicker=!0))},t.prototype.gotoAndStop=function(e){this.stop();var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture()},t.prototype.gotoAndPlay=function(e){var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture(),this.play()},t.prototype.update=function(e){if(this._playing){var t=this.animationSpeed*e,n=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=t/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this.updateTexture())}},t.prototype.updateTexture=function(){var e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},t.prototype.destroy=function(t){this.stop(),e.prototype.destroy.call(this,t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},t.fromFrames=function(e){for(var n=[],r=0;r<e.length;++r)n.push(Dn.from(e[r]));return new t(n)},t.fromImages=function(e){for(var n=[],r=0;r<e.length;++r)n.push(Dn.from(e[r]));return new t(n)},Object.defineProperty(t.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textures",{get:function(){return this._textures},set:function(e){if(e[0]instanceof Dn)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentFrame",{get:function(){var e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Zt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Zt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),t}(ps);ui.registerPlugin("accessibility",Kt),ui.registerPlugin("extract",Bo),ui.registerPlugin("interaction",ln),ui.registerPlugin("particle",ka),ui.registerPlugin("prepare",Fs),ui.registerPlugin("batch",bi),ui.registerPlugin("tilingSprite",Vs),ta.registerPlugin(ml),ta.registerPlugin(fa),ta.registerPlugin(Ea),ta.registerPlugin(Pa),ta.registerPlugin(Bs),Ai.registerPlugin(Jt),Ai.registerPlugin(ia);var wu=n(7378);function Au(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Au(Object(n),!0).forEach((function(t){Cu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Au(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ou(e){return(Ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ru(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Iu(){return(Iu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Nu(e){return(Nu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mu(e,t){return(Mu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ku(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Du(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lu(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Du(e):t}function Fu(e){return function(e){if(Array.isArray(e))return Uu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Uu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Uu(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bu(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i]}function Gu(e){var t=[];if(void 0===e)return t;if("string"==typeof e)t=e.split(",");else if("number"==typeof e)t=[e];else if(Array.isArray(e))t=Fu(e);else{if(null===e||"object"!==Ou(e))return t;t=[e&&(null==e?void 0:e.x)||0,e&&(null==e?void 0:e.y)||0]}return t.filter((function(e){return!function(e){return null==e}(e)&&!isNaN(e)})).map(Number)}function ju(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function $u(e){return e instanceof ot||e instanceof dt}var zu=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];function Xu(e,t,n){if($u(e[t])&&$u(n))e[t].copyFrom(n);else if($u(e[t])){var r=Gu(n);Bu(void 0!==r&&r.length>0&&r.length<3,"The property `%s` is a `PIXI.Point` or `PIXI.ObservablePoint` and must be set to a comma-separated string of either 1 or 2 coordinates, a 1 or 2 element array containing coordinates, or a PIXI Point/ObservablePoint. If only one coordinate is given then X and Y will be set to the provided value. Received: `%s` of type `%s`.",t,JSON.stringify(n),Ou(n)),e[t].set(r.shift(),r.shift())}else e[t]=n}var Hu,Vu,Yu=(Cu(Hu={},"children",!0),Cu(Hu,"parent",!0),Cu(Hu,"worldAlpha",!0),Cu(Hu,"worldTransform",!0),Cu(Hu,"worldVisible",!0),Hu),Wu={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},qu=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=function(e){return requestAnimationFrame((function(){var t,n;null==e||null===(t=e.__reactpixi)||void 0===t||null===(n=t.root)||void 0===n||n.emit("__REACT_PIXI_REQUEST_RENDER__")}))},i=function(t,r){if(n.hasOwnProperty(t))return Bu(r.typeofs.some((function(e){return Ou(n[t])===e}))||r.instanceofs.some((function(e){return n[t]instanceof e})),"".concat(e," ").concat(t," prop is invalid")),n[t]};if(n.texture)return Bu(n.texture instanceof Dn,"".concat(e," texture needs to be typeof `PIXI.Texture`")),n.texture;var o=i("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||i("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||i("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,Dn]});Bu(!!o,"".concat(e," could not get texture from props"));var a=Dn.from(o);return a.__reactpixi={root:t},a.once("update",r),a.once("loaded",r),a.valid&&r(a),a},Ku=(Vu=function(e){var t,n=e;if(!Array.isArray(n)){if(t=e,"[object Object]"!==Object.prototype.toString.call(t))throw new Error("collection needs to be an Array or Object");n=Object.keys(e)}var r={};return n.forEach((function(e){r[e]=!0})),function(e){return void 0!==r[e]}}([].concat(Fu(Object.keys(Yu)),Fu(zu))),function(){return!Vu.apply(void 0,arguments)});function Qu(e,t,n){var r=!1;if(Bu(Ht.prototype.isPrototypeOf(e),"instance needs to be typeof `PIXI.DisplayObject`, got `%s`",Ou(e)),!n.ignoreEvents)for(var i="function"==typeof e.removeListener,o="function"==typeof e.on,a=0;a<zu.length;a++){var s=zu[a];t[s]!==n[s]&&(r=!0,"function"==typeof t[s]&&i&&e.removeListener(s,t[s]),"function"==typeof n[s]&&o&&e.on(s,n[s]))}var l=Object.keys(n||{});if(!n.overwriteProps){for(var u=l.filter(Ku),c=0;c<u.length;c++){var h=u[c],d=n[h];n[h]!==t[h]&&(r=!0),void 0!==d?Xu(e,h,d):h in Wu?(console.warn("setting default value: ".concat(h,", from: ").concat(e[h]," to: ").concat(d," for"),e),r=!0,Xu(e,h,Wu[h])):console.warn("ignoring prop: ".concat(h,", from ").concat(e[h]," to ").concat(d," for"),e)}return r}for(var f=0;f<l.length;f++){var p=l[f];t[p]!==n[p]&&(r=!0,Xu(e,p,n[p]))}}var Zu=["draw","geometry"],Ju=["image","texture"],ec=["image","texture"],tc=["textures","isPlaying","initialFrame"],nc=["tileScale","tilePosition","image","texture"],rc=["image","texture"],ic=["image","texture"],oc=Object.freeze({__proto__:null,BitmapText:function(e,t){var n=t.text,r=t.style;return new yl(n,r)},Container:function(){return new Wt},Graphics:function(e,t){var n=t.geometry;Bu(!n||n instanceof cs,"Graphics geometry needs to be a `PIXI.Graphics`");var r=n?new cs(n.geometry):new cs;return r.applyProps=function(e,t,n){var i=n.draw;n.geometry;var o=Qu(e,t,ku(n,Zu));return t.draw!==i&&"function"==typeof i&&(o=!0,i.call(r,r)),o},r},NineSlicePlane:function(e,t){var n=t.leftWidth,r=void 0===n?10:n,i=t.topHeight,o=void 0===i?10:i,a=t.rightWidth,s=void 0===a?10:a,l=t.bottomHeight,u=void 0===l?10:l,c=qu("NineSlicePlane",e,t),h=new Eu(c,r,o,s,u);return h.applyProps=function(t,n,r){var i=r.image,o=r.texture,a=Qu(t,n,ku(r,Ju));return(i||o)&&(o!==n.texture&&(a=!0),t.texture=qu("NineSlicePlane",e,r)),a},h},ParticleContainer:function(e,t){var n=t.maxSize,r=void 0===n?1500:n,i=t.batchSize,o=void 0===i?16384:i,a=t.autoResize,s=void 0!==a&&a,l=Pu(Pu({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),t.properties||{}),u=Pu(Pu({},{children:!1,texture:!1,baseTexture:!1}),t.destroyOptions||{}),c=new Na(r,l,o,s);return c.willUnmount=function(e,t,n){e.destroy(u)},c},Sprite:function(e,t){var n=new ps(qu("Sprite",e,t));return n.applyProps=function(t,n,r){var i=r.image,o=r.texture,a=Qu(t,n,ku(r,ec));return(o&&n.texture!==r.texture||i&&n.image!==r.image)&&(n.texture!==r.texture&&(a=!0),t.texture=qu("Sprite",e,r)),a},n},Text:function(e,t){var n=t.text,r=void 0===n?"":n,i=t.style,o=void 0===i?{}:i,a=t.isSprite,s=new Ts(r,o);return a?(s.updateText(),new ps(s.texture)):s},TilingSprite:function(e,t){var n=t.width,r=void 0===n?100:n,i=t.height,o=void 0===i?100:i,a=qu("TilingSprite",e,t),s=new zs(a,r,o);return s.applyProps=function(t,n,r){var i=r.tileScale,o=r.tilePosition,a=r.image,s=r.texture,l=Qu(t,n,ku(r,nc));if(o){var u,c=Gu(o);(u=t.tilePosition).set.apply(u,Fu(c)),l=!ju(Gu(n.tilePosition),c)||l}if(i){var h,d=Gu(i);(h=t.tileScale).set.apply(h,Fu(d)),l=!ju(Gu(n.tileScale),d)||l}return(a||s)&&(s!==n.texture&&(l=!0),t.texture=qu("Sprite",e,r)),l},s},SimpleMesh:function(e,t){var n=qu("Mesh",e,t),r=t.vertices,i=t.uvs,o=t.indices,a=t.drawMode,s=void 0===a?se.TRIANGLES:a,l=new xu(n,r,i,o,s);return l.applyProps=function(t,n,r){var i=r.image,o=r.texture,a=Qu(t,n,ku(r,rc));return(i||o)&&(o!==n.texture&&(a=!0),t.texture=qu("Mesh",e,r)),a},l},SimpleRope:function(e,t){var n=qu("SimpleRope",e,t),r=t.points,i=new _u(n,r);return i.applyProps=function(t,n,r){var i=r.image,o=r.texture,a=ku(r,ic);Bu(Array.isArray(r.points),"SimpleRope points needs to be %s","Array<PIXI.Point>");var s=Qu(t,n,a);return(i||o)&&(o!==n.texture&&(s=!0),t.texture=qu("SimpleRope",e,r)),s},i},AnimatedSprite:function(e,t){var n=t.textures,r=t.images,i=t.isPlaying,o=void 0===i||i,a=t.initialFrame,s=function(e){return e.map((function(e){return Bu(e instanceof Dn||(null==e?void 0:e.texture),"AnimationSprite texture needs to be an array of `PIXI.Texture` or `{ texture: PIXI.Texture, time: number }`"),e}))},l=r?Tu.fromImages(r):new Tu(s(n));return l[o?"gotoAndPlay":"gotoAndStop"](a||0),l.applyProps=function(e,t,n){var r=n.textures,i=n.isPlaying,o=n.initialFrame,a=Qu(e,t,ku(n,tc));if(r&&t.textures!==r&&(e.textures=s(r),a=!0),i!==t.isPlaying||o!==t.initialFrame){var u="number"==typeof o?o:l.currentFrame||0;l[i?"gotoAndPlay":"gotoAndStop"](u),a=!0}return a},l}}),ac={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},sc=Object.keys(ac).reduce((function(e,t){return Pu(Pu({},e),{},Cu({},t,oc[t]))}),{}),lc={},uc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function cc(e,t){return e(t={exports:{}},t.exports),t.exports}var hc=Object.getOwnPropertySymbols,dc=Object.prototype.hasOwnProperty,fc=Object.prototype.propertyIsEnumerable;function pc(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var yc=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,i=pc(e),o=1;o<arguments.length;o++){for(var a in n=Object(arguments[o]))dc.call(n,a)&&(i[a]=n[a]);if(hc){r=hc(n);for(var s=0;s<r.length;s++)fc.call(n,r[s])&&(i[r[s]]=n[r[s]])}}return i},mc=cc((function(e,t){var n,r,i,o;if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var u=null,c=null,h=function(){if(null!==u)try{var e=t.unstable_now();u(!0,e),u=null}catch(e){throw setTimeout(h,0),e}};n=function(e){null!==u?setTimeout(n,0,e):(u=e,setTimeout(h,0))},r=function(e,t){c=setTimeout(e,t)},i=function(){clearTimeout(c)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,f=window.clearTimeout;if("undefined"!=typeof console){var p=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var y=!1,m=null,g=-1,v=5,_=0;t.unstable_shouldYield=function(){return t.unstable_now()>=_},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,x=b.port2;b.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();_=e+v;try{m(!0,e)?x.postMessage(null):(y=!1,m=null)}catch(e){throw x.postMessage(null),e}}else y=!1},n=function(e){m=e,y||(y=!0,x.postMessage(null))},r=function(e,n){g=d((function(){e(t.unstable_now())}),n)},i=function(){f(g),g=-1}}function E(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<w(i,t)))break e;e[r]=t,e[n]=i,n=r}}function S(e){return void 0===(e=e[0])?null:e}function T(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,l=e[s];if(void 0!==a&&0>w(a,n))void 0!==l&&0>w(l,a)?(e[r]=l,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==l&&0>w(l,n)))break e;e[r]=l,e[s]=n,r=s}}}return t}return null}function w(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var A=[],P=[],O=1,R=null,C=3,I=!1,N=!1,M=!1;function k(e){for(var t=S(P);null!==t;){if(null===t.callback)T(P);else{if(!(t.startTime<=e))break;T(P),t.sortIndex=t.expirationTime,E(A,t)}t=S(P)}}function D(e){if(M=!1,k(e),!N)if(null!==S(A))N=!0,n(L);else{var t=S(P);null!==t&&r(D,t.startTime-e)}}function L(e,n){N=!1,M&&(M=!1,i()),I=!0;var o=C;try{for(k(n),R=S(A);null!==R&&(!(R.expirationTime>n)||e&&!t.unstable_shouldYield());){var a=R.callback;if("function"==typeof a){R.callback=null,C=R.priorityLevel;var s=a(R.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?R.callback=s:R===S(A)&&T(A),k(n)}else T(A);R=S(A)}if(null!==R)var l=!0;else{var u=S(P);null!==u&&r(D,u.startTime-n),l=!1}return l}finally{R=null,C=o,I=!1}}var F=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){N||I||(N=!0,n(L))},t.unstable_getCurrentPriorityLevel=function(){return C},t.unstable_getFirstCallbackNode=function(){return S(A)},t.unstable_next=function(e){switch(C){case 1:case 2:case 3:var t=3;break;default:t=C}var n=C;C=t;try{return e()}finally{C=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=C;C=e;try{return t()}finally{C=n}},t.unstable_scheduleCallback=function(e,o,a){var s=t.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?s+a:s,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:O++,callback:o,priorityLevel:e,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>s?(e.sortIndex=a,E(P,e),null===S(A)&&e===S(P)&&(M?i():M=!0,r(D,a-s))):(e.sortIndex=l,E(A,e),N||I||(N=!0,n(L))),e},t.unstable_wrapCallback=function(e){var t=C;return function(){var n=C;C=t;try{return e.apply(this,arguments)}finally{C=n}}}}));mc.unstable_now,mc.unstable_shouldYield,mc.unstable_forceFrameRate,mc.unstable_IdlePriority,mc.unstable_ImmediatePriority,mc.unstable_LowPriority,mc.unstable_NormalPriority,mc.unstable_Profiling,mc.unstable_UserBlockingPriority,mc.unstable_cancelCallback,mc.unstable_continueExecution,mc.unstable_getCurrentPriorityLevel,mc.unstable_getFirstCallbackNode,mc.unstable_next,mc.unstable_pauseExecution,mc.unstable_requestPaint,mc.unstable_runWithPriority,mc.unstable_scheduleCallback,mc.unstable_wrapCallback;var gc=cc((function(e,t){}));gc.unstable_now,gc.unstable_shouldYield,gc.unstable_forceFrameRate,gc.unstable_IdlePriority,gc.unstable_ImmediatePriority,gc.unstable_LowPriority,gc.unstable_NormalPriority,gc.unstable_Profiling,gc.unstable_UserBlockingPriority,gc.unstable_cancelCallback,gc.unstable_continueExecution,gc.unstable_getCurrentPriorityLevel,gc.unstable_getFirstCallbackNode,gc.unstable_next,gc.unstable_pauseExecution,gc.unstable_requestPaint,gc.unstable_runWithPriority,gc.unstable_scheduleCallback,gc.unstable_wrapCallback;var vc=cc((function(e){e.exports=mc}));vc.unstable_scheduleCallback,vc.unstable_cancelCallback;var _c=cc((function(e){e.exports=function(t){var n={},r=yc,i=wu,o=vc;function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=60103,u=60106,c=60107,h=60108,d=60114,f=60109,p=60110,y=60112,m=60113,g=60120,v=60115,_=60116,b=60121,x=60129,E=60130,S=60131;if("function"==typeof Symbol&&Symbol.for){var T=Symbol.for;l=T("react.element"),u=T("react.portal"),c=T("react.fragment"),h=T("react.strict_mode"),d=T("react.profiler"),f=T("react.provider"),p=T("react.context"),y=T("react.forward_ref"),m=T("react.suspense"),g=T("react.suspense_list"),v=T("react.memo"),_=T("react.lazy"),b=T("react.block"),T("react.scope"),x=T("react.debug_trace_mode"),E=T("react.offscreen"),S=T("react.legacy_hidden")}var w="function"==typeof Symbol&&Symbol.iterator;function A(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=w&&e[w]||e["@@iterator"])?e:null}function P(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case c:return"Fragment";case u:return"Portal";case d:return"Profiler";case h:return"StrictMode";case m:return"Suspense";case g:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case p:return(e.displayName||"Context")+".Consumer";case f:return(e._context.displayName||"Context")+".Provider";case y:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case v:return P(e.type);case b:return P(e._render);case _:t=e._payload,e=e._init;try{return P(e(t))}catch(e){}}return null}function O(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function R(e){if(O(e)!==e)throw Error(a(188))}function C(e){var t=e.alternate;if(!t){if(null===(t=O(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return R(i),e;if(o===r)return R(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}function I(e){if(!(e=C(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function N(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var M,k=t.getPublicInstance,D=t.getRootHostContext,L=t.getChildHostContext,F=t.prepareForCommit,U=t.resetAfterCommit,B=t.createInstance,G=t.appendInitialChild,j=t.finalizeInitialChildren,$=t.prepareUpdate,z=t.shouldSetTextContent,X=t.createTextInstance,H=t.scheduleTimeout,V=t.cancelTimeout,Y=t.noTimeout,W=t.isPrimaryRenderer,q=t.supportsMutation,K=t.supportsPersistence,Q=t.supportsHydration,Z=t.getInstanceFromNode,J=t.makeOpaqueHydratingObject,ee=t.makeClientId,te=t.beforeActiveInstanceBlur,ne=t.afterActiveInstanceBlur,re=t.preparePortalMount,ie=t.supportsTestSelectors,oe=t.findFiberRoot,ae=t.getBoundingRect,se=t.getTextContent,le=t.isHiddenSubtree,ue=t.matchAccessibilityRole,ce=t.setFocusIfFocusable,he=t.setupIntersectionObserver,de=t.appendChild,fe=t.appendChildToContainer,pe=t.commitTextUpdate,ye=t.commitMount,me=t.commitUpdate,ge=t.insertBefore,ve=t.insertInContainerBefore,_e=t.removeChild,be=t.removeChildFromContainer,xe=t.resetTextContent,Ee=t.hideInstance,Se=t.hideTextInstance,Te=t.unhideInstance,we=t.unhideTextInstance,Ae=t.clearContainer,Pe=t.cloneInstance,Oe=t.createContainerChildSet,Re=t.appendChildToContainerChildSet,Ce=t.finalizeContainerChildren,Ie=t.replaceContainerChildren,Ne=t.cloneHiddenInstance,Me=t.cloneHiddenTextInstance,ke=t.canHydrateInstance,De=t.canHydrateTextInstance,Le=t.isSuspenseInstancePending,Fe=t.isSuspenseInstanceFallback,Ue=t.getNextHydratableSibling,Be=t.getFirstHydratableChild,Ge=t.hydrateInstance,je=t.hydrateTextInstance,$e=t.getNextHydratableInstanceAfterSuspenseInstance,ze=t.commitHydratedContainer,Xe=t.commitHydratedSuspenseInstance;function He(e){if(void 0===M)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var Ve=!1;function Ye(e,t){if(!e||Ve)return"";Ve=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{Ve=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?He(e):""}var We=[],qe=-1;function Ke(e){return{current:e}}function Qe(e){0>qe||(e.current=We[qe],We[qe]=null,qe--)}function Ze(e,t){qe++,We[qe]=e.current,e.current=t}var Je={},et=Ke(Je),tt=Ke(!1),nt=Je;function rt(e,t){var n=e.type.contextTypes;if(!n)return Je;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function it(e){return null!=e.childContextTypes}function ot(){Qe(tt),Qe(et)}function at(e,t,n){if(et.current!==Je)throw Error(a(168));Ze(et,t),Ze(tt,n)}function st(e,t,n){var i=e.stateNode;if(e=t.childContextTypes,"function"!=typeof i.getChildContext)return n;for(var o in i=i.getChildContext())if(!(o in e))throw Error(a(108,P(t)||"Unknown",o));return r({},n,i)}function lt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Je,nt=et.current,Ze(et,e),Ze(tt,tt.current),!0}function ut(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=st(e,t,nt),r.__reactInternalMemoizedMergedChildContext=e,Qe(tt),Qe(et),Ze(et,e)):Qe(tt),Ze(tt,n)}var ct=null,ht=null;(0,o.unstable_now)();var dt=0,ft=8;function pt(e){if(0!=(1&e))return ft=15,1;if(0!=(2&e))return ft=14,2;if(0!=(4&e))return ft=13,4;var t=24&e;return 0!==t?(ft=12,t):0!=(32&e)?(ft=11,32):0!=(t=192&e)?(ft=10,t):0!=(256&e)?(ft=9,256):0!=(t=3584&e)?(ft=8,t):0!=(4096&e)?(ft=7,4096):0!=(t=4186112&e)?(ft=6,t):0!=(t=62914560&e)?(ft=5,t):67108864&e?(ft=4,67108864):0!=(134217728&e)?(ft=3,134217728):0!=(t=805306368&e)?(ft=2,t):0!=(1073741824&e)?(ft=1,1073741824):(ft=8,e)}function yt(e,t){var n=e.pendingLanes;if(0===n)return ft=0;var r=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,i=ft=15;else if(0!=(o=134217727&n)){var l=o&~a;0!==l?(r=pt(l),i=ft):0!=(s&=o)&&(r=pt(s),i=ft)}else 0!=(o=n&~a)?(r=pt(o),i=ft):0!==s&&(r=pt(s),i=ft);if(0===r)return 0;if(r=n&((0>(r=31-xt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&a)){if(pt(t),i<=ft)return t;ft=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-xt(t)),r|=e[n],t&=~i;return r}function mt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=vt(24&~t))?gt(10,t):e;case 10:return 0===(e=vt(192&~t))?gt(8,t):e;case 8:return 0===(e=vt(3584&~t))&&0===(e=vt(4186112&~t))&&(e=512),e;case 2:return 0===(t=vt(805306368&~t))&&(t=268435456),t}throw Error(a(358,e))}function vt(e){return e&-e}function _t(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-xt(t)]=n}var xt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Et(e)/St|0)|0},Et=Math.log,St=Math.LN2,Tt=o.unstable_runWithPriority,wt=o.unstable_scheduleCallback,At=o.unstable_cancelCallback,Pt=o.unstable_shouldYield,Ot=o.unstable_requestPaint,Rt=o.unstable_now,Ct=o.unstable_getCurrentPriorityLevel,It=o.unstable_ImmediatePriority,Nt=o.unstable_UserBlockingPriority,Mt=o.unstable_NormalPriority,kt=o.unstable_LowPriority,Dt=o.unstable_IdlePriority,Lt={},Ft=void 0!==Ot?Ot:function(){},Ut=null,Bt=null,Gt=!1,jt=Rt(),$t=1e4>jt?Rt:function(){return Rt()-jt};function zt(){switch(Ct()){case It:return 99;case Nt:return 98;case Mt:return 97;case kt:return 96;case Dt:return 95;default:throw Error(a(332))}}function Xt(e){switch(e){case 99:return It;case 98:return Nt;case 97:return Mt;case 96:return kt;case 95:return Dt;default:throw Error(a(332))}}function Ht(e,t){return e=Xt(e),Tt(e,t)}function Vt(e,t,n){return e=Xt(e),wt(e,t,n)}function Yt(){if(null!==Bt){var e=Bt;Bt=null,At(e)}Wt()}function Wt(){if(!Gt&&null!==Ut){Gt=!0;var e=0;try{var t=Ut;Ht(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ut=null}catch(t){throw null!==Ut&&(Ut=Ut.slice(e+1)),wt(It,Yt),t}finally{Gt=!1}}}var qt=s.ReactCurrentBatchConfig,Kt="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Qt=Object.prototype.hasOwnProperty;function Zt(e,t){if(Kt(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Qt.call(t,n[r])||!Kt(e[n[r]],t[n[r]]))return!1;return!0}function Jt(e){switch(e.tag){case 5:return He(e.type);case 16:return He("Lazy");case 13:return He("Suspense");case 19:return He("SuspenseList");case 0:case 2:case 15:return Ye(e.type,!1);case 11:return Ye(e.type.render,!1);case 22:return Ye(e.type._render,!1);case 1:return Ye(e.type,!0);default:return""}}function en(e,t){if(e&&e.defaultProps){for(var n in t=r({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var tn=Ke(null),nn=null,rn=null,on=null;function an(){on=rn=nn=null}function sn(e,t){e=e.type._context,W?(Ze(tn,e._currentValue),e._currentValue=t):(Ze(tn,e._currentValue2),e._currentValue2=t)}function ln(e){var t=tn.current;Qe(tn),e=e.type._context,W?e._currentValue=t:e._currentValue2=t}function un(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function cn(e,t){nn=e,on=rn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(jr=!0),e.firstContext=null)}function hn(e,t){if(on!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(on=e,t=1073741823),t={context:e,observedBits:t,next:null},null===rn){if(null===nn)throw Error(a(308));rn=t,nn.dependencies={lanes:0,firstContext:t,responders:null}}else rn=rn.next=t;return W?e._currentValue:e._currentValue2}var dn=!1;function fn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function pn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function yn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function mn(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function gn(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function vn(e,t,n,i){var o=e.updateQueue;dn=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,l=o.shared.pending;if(null!==l){o.shared.pending=null;var u=l,c=u.next;u.next=null,null===s?a=c:s.next=c,s=u;var h=e.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==s&&(null===d?h.firstBaseUpdate=c:d.next=c,h.lastBaseUpdate=u)}}if(null!==a){for(d=o.baseState,s=0,h=c=u=null;;){l=a.lane;var f=a.eventTime;if((i&l)===l){null!==h&&(h=h.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,y=a;switch(l=t,f=n,y.tag){case 1:if("function"==typeof(p=y.payload)){d=p.call(f,d,l);break e}d=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null==(l="function"==typeof(p=y.payload)?p.call(f,d,l):p))break e;d=r({},d,l);break e;case 2:dn=!0}}null!==a.callback&&(e.flags|=32,null===(l=o.effects)?o.effects=[a]:l.push(a))}else f={eventTime:f,lane:l,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(c=h=f,u=d):h=h.next=f,s|=l;if(null===(a=a.next)){if(null===(l=o.shared.pending))break;a=l.next,l.next=null,o.lastBaseUpdate=l,o.shared.pending=null}}null===h&&(u=d),o.baseState=u,o.firstBaseUpdate=c,o.lastBaseUpdate=h,lo|=s,e.lanes=s,e.memoizedState=d}}function _n(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(a(191,i));i.call(r)}}}var bn=(new i.Component).refs;function xn(e,t,n,i){n=null==(n=n(i,t=e.memoizedState))?t:r({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var En={isMounted:function(e){return!!(e=e._reactInternals)&&O(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ko(),i=Do(e),o=yn(r,i);o.payload=t,null!=n&&(o.callback=n),mn(e,o),Lo(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ko(),i=Do(e),o=yn(r,i);o.tag=1,o.payload=t,null!=n&&(o.callback=n),mn(e,o),Lo(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ko(),r=Do(e),i=yn(n,r);i.tag=2,null!=t&&(i.callback=t),mn(e,i),Lo(e,r,n)}};function Sn(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!(t.prototype&&t.prototype.isPureReactComponent&&Zt(n,r)&&Zt(i,o))}function Tn(e,t,n){var r=!1,i=Je,o=t.contextType;return"object"==typeof o&&null!==o?o=hn(o):(i=it(t)?nt:et.current,o=(r=null!=(r=t.contextTypes))?rt(e,i):Je),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=En,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function wn(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&En.enqueueReplaceState(t,t.state,null)}function An(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=bn,fn(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=hn(o):(o=it(t)?nt:et.current,i.context=rt(e,o)),vn(e,n,i,r),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(xn(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&En.enqueueReplaceState(i,i.state,null),vn(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}var Pn=Array.isArray;function On(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===bn&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Rn(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Cn(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=xa(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function h(e,t,n,r){return null===t||6!==t.tag?((t=wa(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=On(e,t,n),r.return=e,r):((r=Ea(n.type,n.key,n.props,null,e.mode,r)).ref=On(e,t,n),r.return=e,r)}function f(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Aa(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function p(e,t,n,r,o){return null===t||7!==t.tag?((t=Sa(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function y(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=wa(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case l:return(n=Ea(t.type,t.key,t.props,null,e.mode,n)).ref=On(e,null,t),n.return=e,n;case u:return(t=Aa(t,e.mode,n)).return=e,t}if(Pn(t)||A(t))return(t=Sa(t,e.mode,n,null)).return=e,t;Rn(e,t)}return null}function m(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:h(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case l:return n.key===i?n.type===c?p(e,t,n.props.children,r,i):d(e,t,n,r):null;case u:return n.key===i?f(e,t,n,r):null}if(Pn(n)||A(n))return null!==i?null:p(e,t,n,r,null);Rn(e,n)}return null}function g(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return h(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case l:return e=e.get(null===r.key?n:r.key)||null,r.type===c?p(t,e,r.props.children,i,r.key):d(t,e,r,i);case u:return f(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Pn(r)||A(r))return p(t,e=e.get(n)||null,r,i,null);Rn(t,r)}return null}function v(i,a,s,l){for(var u=null,c=null,h=a,d=a=0,f=null;null!==h&&d<s.length;d++){h.index>d?(f=h,h=null):f=h.sibling;var p=m(i,h,s[d],l);if(null===p){null===h&&(h=f);break}e&&h&&null===p.alternate&&t(i,h),a=o(p,a,d),null===c?u=p:c.sibling=p,c=p,h=f}if(d===s.length)return n(i,h),u;if(null===h){for(;d<s.length;d++)null!==(h=y(i,s[d],l))&&(a=o(h,a,d),null===c?u=h:c.sibling=h,c=h);return u}for(h=r(i,h);d<s.length;d++)null!==(f=g(h,i,d,s[d],l))&&(e&&null!==f.alternate&&h.delete(null===f.key?d:f.key),a=o(f,a,d),null===c?u=f:c.sibling=f,c=f);return e&&h.forEach((function(e){return t(i,e)})),u}function _(i,s,l,u){var c=A(l);if("function"!=typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var h=c=null,d=s,f=s=0,p=null,v=l.next();null!==d&&!v.done;f++,v=l.next()){d.index>f?(p=d,d=null):p=d.sibling;var _=m(i,d,v.value,u);if(null===_){null===d&&(d=p);break}e&&d&&null===_.alternate&&t(i,d),s=o(_,s,f),null===h?c=_:h.sibling=_,h=_,d=p}if(v.done)return n(i,d),c;if(null===d){for(;!v.done;f++,v=l.next())null!==(v=y(i,v.value,u))&&(s=o(v,s,f),null===h?c=v:h.sibling=v,h=v);return c}for(d=r(i,d);!v.done;f++,v=l.next())null!==(v=g(d,i,f,v.value,u))&&(e&&null!==v.alternate&&d.delete(null===v.key?f:v.key),s=o(v,s,f),null===h?c=v:h.sibling=v,h=v);return e&&d.forEach((function(e){return t(i,e)})),c}return function(e,r,o,h){var d="object"==typeof o&&null!==o&&o.type===c&&null===o.key;d&&(o=o.props.children);var f="object"==typeof o&&null!==o;if(f)switch(o.$$typeof){case l:e:{for(f=o.key,d=r;null!==d;){if(d.key===f){if(7===d.tag){if(o.type===c){n(e,d.sibling),(r=i(d,o.props.children)).return=e,e=r;break e}}else if(d.elementType===o.type){n(e,d.sibling),(r=i(d,o.props)).ref=On(e,d,o),r.return=e,e=r;break e}n(e,d);break}t(e,d),d=d.sibling}o.type===c?((r=Sa(o.props.children,e.mode,h,o.key)).return=e,e=r):((h=Ea(o.type,o.key,o.props,null,e.mode,h)).ref=On(e,r,o),h.return=e,e=h)}return s(e);case u:e:{for(d=o.key;null!==r;){if(r.key===d){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Aa(o,e.mode,h)).return=e,e=r}return s(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=wa(o,e.mode,h)).return=e,e=r),s(e);if(Pn(o))return v(e,r,o,h);if(A(o))return _(e,r,o,h);if(f&&Rn(e,o),void 0===o&&!d)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,P(e.type)||"Component"))}return n(e,r)}}var In=Cn(!0),Nn=Cn(!1),Mn={},kn=Ke(Mn),Dn=Ke(Mn),Ln=Ke(Mn);function Fn(e){if(e===Mn)throw Error(a(174));return e}function Un(e,t){Ze(Ln,t),Ze(Dn,e),Ze(kn,Mn),e=D(t),Qe(kn),Ze(kn,e)}function Bn(){Qe(kn),Qe(Dn),Qe(Ln)}function Gn(e){var t=Fn(Ln.current),n=Fn(kn.current);n!==(t=L(n,e.type,t))&&(Ze(Dn,e),Ze(kn,t))}function jn(e){Dn.current===e&&(Qe(kn),Qe(Dn))}var $n=Ke(0);function zn(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Le(n)||Fe(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Xn=null,Hn=null,Vn=!1;function Yn(e,t){var n=_a(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Wn(e,t){switch(e.tag){case 5:return null!==(t=ke(t,e.type,e.pendingProps))&&(e.stateNode=t,!0);case 6:return null!==(t=De(t,e.pendingProps))&&(e.stateNode=t,!0);default:return!1}}function qn(e){if(Vn){var t=Hn;if(t){var n=t;if(!Wn(e,t)){if(!(t=Ue(n))||!Wn(e,t))return e.flags=-1025&e.flags|2,Vn=!1,void(Xn=e);Yn(Xn,n)}Xn=e,Hn=Be(t)}else e.flags=-1025&e.flags|2,Vn=!1,Xn=e}}function Kn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Xn=e}function Qn(e){if(!Q||e!==Xn)return!1;if(!Vn)return Kn(e),Vn=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!z(t,e.memoizedProps))for(t=Hn;t;)Yn(e,t),t=Ue(t);if(Kn(e),13===e.tag){if(!Q)throw Error(a(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));Hn=$e(e)}else Hn=Xn?Ue(e.stateNode):null;return!0}function Zn(){Q&&(Hn=Xn=null,Vn=!1)}var Jn=[];function er(){for(var e=0;e<Jn.length;e++){var t=Jn[e];W?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}Jn.length=0}var tr=s.ReactCurrentDispatcher,nr=s.ReactCurrentBatchConfig,rr=0,ir=null,or=null,ar=null,sr=!1,lr=!1;function ur(){throw Error(a(321))}function cr(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Kt(e[n],t[n]))return!1;return!0}function hr(e,t,n,r,i,o){if(rr=o,ir=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,tr.current=null===e||null===e.memoizedState?Fr:Ur,e=n(r,i),lr){o=0;do{if(lr=!1,!(25>o))throw Error(a(301));o+=1,ar=or=null,t.updateQueue=null,tr.current=Br,e=n(r,i)}while(lr)}if(tr.current=Lr,t=null!==or&&null!==or.next,rr=0,ar=or=ir=null,sr=!1,t)throw Error(a(300));return e}function dr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ar?ir.memoizedState=ar=e:ar=ar.next=e,ar}function fr(){if(null===or){var e=ir.alternate;e=null!==e?e.memoizedState:null}else e=or.next;var t=null===ar?ir.memoizedState:ar.next;if(null!==t)ar=t,or=e;else{if(null===e)throw Error(a(310));e={memoizedState:(or=e).memoizedState,baseState:or.baseState,baseQueue:or.baseQueue,queue:or.queue,next:null},null===ar?ir.memoizedState=ar=e:ar=ar.next=e}return ar}function pr(e,t){return"function"==typeof t?t(e):t}function yr(e){var t=fr(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=or,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=s=o=null,u=i;do{var c=u.lane;if((rr&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var h={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(s=l=h,o=r):l=l.next=h,ir.lanes|=c,lo|=c}u=u.next}while(null!==u&&u!==i);null===l?o=r:l.next=s,Kt(r,t.memoizedState)||(jr=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function mr(e){var t=fr(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);Kt(o,t.memoizedState)||(jr=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function gr(e,t,n){var r=t._getVersion;r=r(t._source);var i=W?t._workInProgressVersionPrimary:t._workInProgressVersionSecondary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(rr&e)===e)&&(W?t._workInProgressVersionPrimary=r:t._workInProgressVersionSecondary=r,Jn.push(t))),e)return n(t._source);throw Jn.push(t),Error(a(350))}function vr(e,t,n,r){var i=eo;if(null===i)throw Error(a(349));var o=t._getVersion,s=o(t._source),l=tr.current,u=l.useState((function(){return gr(i,t,n)})),c=u[1],h=u[0];u=ar;var d=e.memoizedState,f=d.refs,p=f.getSnapshot,y=d.source;d=d.subscribe;var m=ir;return e.memoizedState={refs:f,source:t,subscribe:r},l.useEffect((function(){f.getSnapshot=n,f.setSnapshot=c;var e=o(t._source);if(!Kt(s,e)){e=n(t._source),Kt(h,e)||(c(e),e=Do(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,a=e;0<a;){var l=31-xt(a),u=1<<l;r[l]|=e,a&=~u}}}),[n,t,r]),l.useEffect((function(){return r(t._source,(function(){var e=f.getSnapshot,n=f.setSnapshot;try{n(e(t._source));var r=Do(m);i.mutableReadLanes|=r&i.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),Kt(p,n)&&Kt(y,t)&&Kt(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:pr,lastRenderedState:h}).dispatch=c=Dr.bind(null,ir,e),u.queue=e,u.baseQueue=null,h=gr(i,t,n),u.memoizedState=u.baseState=h),h}function _r(e,t,n){return vr(fr(),e,t,n)}function br(e){var t=dr();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:pr,lastRenderedState:e}).dispatch=Dr.bind(null,ir,e),[t.memoizedState,e]}function xr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ir.updateQueue)?(t={lastEffect:null},ir.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Er(e){return e={current:e},dr().memoizedState=e}function Sr(){return fr().memoizedState}function Tr(e,t,n,r){var i=dr();ir.flags|=e,i.memoizedState=xr(1|t,n,void 0,void 0===r?null:r)}function wr(e,t,n,r){var i=fr();r=void 0===r?null:r;var o=void 0;if(null!==or){var a=or.memoizedState;if(o=a.destroy,null!==r&&cr(r,a.deps))return void xr(t,n,o,r)}ir.flags|=e,i.memoizedState=xr(1|t,n,o,r)}function Ar(e,t){return Tr(516,4,e,t)}function Pr(e,t){return wr(516,4,e,t)}function Or(e,t){return wr(4,2,e,t)}function Rr(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Cr(e,t,n){return n=null!=n?n.concat([e]):null,wr(4,2,Rr.bind(null,t,e),n)}function Ir(){}function Nr(e,t){var n=fr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&cr(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Mr(e,t){var n=fr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&cr(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function kr(e,t){var n=zt();Ht(98>n?98:n,(function(){e(!0)})),Ht(97<n?97:n,(function(){var n=nr.transition;nr.transition=1;try{e(!1),t()}finally{nr.transition=n}}))}function Dr(e,t,n){var r=ko(),i=Do(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===ir||null!==a&&a===ir)lr=sr=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,l=a(s,n);if(o.eagerReducer=a,o.eagerState=l,Kt(l,s))return}catch(e){}Lo(e,i,r)}}var Lr={readContext:hn,useCallback:ur,useContext:ur,useEffect:ur,useImperativeHandle:ur,useLayoutEffect:ur,useMemo:ur,useReducer:ur,useRef:ur,useState:ur,useDebugValue:ur,useDeferredValue:ur,useTransition:ur,useMutableSource:ur,useOpaqueIdentifier:ur,unstable_isNewReconciler:!1},Fr={readContext:hn,useCallback:function(e,t){return dr().memoizedState=[e,void 0===t?null:t],e},useContext:hn,useEffect:Ar,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Tr(4,2,Rr.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Tr(4,2,e,t)},useMemo:function(e,t){var n=dr();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=dr();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Dr.bind(null,ir,e),[r.memoizedState,e]},useRef:Er,useState:br,useDebugValue:Ir,useDeferredValue:function(e){var t=br(e),n=t[0],r=t[1];return Ar((function(){var t=nr.transition;nr.transition=1;try{r(e)}finally{nr.transition=t}}),[e]),n},useTransition:function(){var e=br(!1),t=e[0];return Er(e=kr.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=dr();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},vr(r,e,t,n)},useOpaqueIdentifier:function(){if(Vn){var e=!1,t=J((function(){throw e||(e=!0,n(ee())),Error(a(355))})),n=br(t)[1];return 0==(2&ir.mode)&&(ir.flags|=516,xr(5,(function(){n(ee())}),void 0,null)),t}return br(t=ee()),t},unstable_isNewReconciler:!1},Ur={readContext:hn,useCallback:Nr,useContext:hn,useEffect:Pr,useImperativeHandle:Cr,useLayoutEffect:Or,useMemo:Mr,useReducer:yr,useRef:Sr,useState:function(){return yr(pr)},useDebugValue:Ir,useDeferredValue:function(e){var t=yr(pr),n=t[0],r=t[1];return Pr((function(){var t=nr.transition;nr.transition=1;try{r(e)}finally{nr.transition=t}}),[e]),n},useTransition:function(){var e=yr(pr)[0];return[Sr().current,e]},useMutableSource:_r,useOpaqueIdentifier:function(){return yr(pr)[0]},unstable_isNewReconciler:!1},Br={readContext:hn,useCallback:Nr,useContext:hn,useEffect:Pr,useImperativeHandle:Cr,useLayoutEffect:Or,useMemo:Mr,useReducer:mr,useRef:Sr,useState:function(){return mr(pr)},useDebugValue:Ir,useDeferredValue:function(e){var t=mr(pr),n=t[0],r=t[1];return Pr((function(){var t=nr.transition;nr.transition=1;try{r(e)}finally{nr.transition=t}}),[e]),n},useTransition:function(){var e=mr(pr)[0];return[Sr().current,e]},useMutableSource:_r,useOpaqueIdentifier:function(){return mr(pr)[0]},unstable_isNewReconciler:!1},Gr=s.ReactCurrentOwner,jr=!1;function $r(e,t,n,r){t.child=null===e?Nn(t,null,n,r):In(t,e.child,n,r)}function zr(e,t,n,r,i){n=n.render;var o=t.ref;return cn(t,i),r=hr(e,t,n,r,o,i),null===e||jr?(t.flags|=1,$r(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,li(e,t,i))}function Xr(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!=typeof a||ba(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ea(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Hr(e,t,a,r,i,o))}return a=e.child,0==(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:Zt)(i,r)&&e.ref===t.ref)?li(e,t,o):(t.flags|=1,(e=xa(a,r)).ref=t.ref,e.return=t,t.child=e)}function Hr(e,t,n,r,i,o){if(null!==e&&Zt(e.memoizedProps,r)&&e.ref===t.ref){if(jr=!1,0==(o&i))return t.lanes=e.lanes,li(e,t,o);0!=(16384&e.flags)&&(jr=!0)}return Wr(e,t,n,r,o)}function Vr(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},Xo(0,n);else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},Xo(0,e),null;t.memoizedState={baseLanes:0},Xo(0,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Xo(0,r);return $r(e,t,i,n),t.child}function Yr(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Wr(e,t,n,r,i){var o=it(n)?nt:et.current;return o=rt(t,o),cn(t,i),n=hr(e,t,n,r,o,i),null===e||jr?(t.flags|=1,$r(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,li(e,t,i))}function qr(e,t,n,r,i){if(it(n)){var o=!0;lt(t)}else o=!1;if(cn(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),Tn(t,n,r),An(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;u="object"==typeof u&&null!==u?hn(u):rt(t,u=it(n)?nt:et.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==u)&&wn(t,a,r,u),dn=!1;var d=t.memoizedState;a.state=d,vn(t,r,a,i),l=t.memoizedState,s!==r||d!==l||tt.current||dn?("function"==typeof c&&(xn(t,n,c,r),l=t.memoizedState),(s=dn||Sn(t,n,s,r,d,l,u))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4)):("function"==typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"==typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,pn(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:en(t.type,s),a.props=u,h=t.pendingProps,d=a.context,l="object"==typeof(l=n.contextType)&&null!==l?hn(l):rt(t,l=it(n)?nt:et.current);var f=n.getDerivedStateFromProps;(c="function"==typeof f||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==h||d!==l)&&wn(t,a,r,l),dn=!1,d=t.memoizedState,a.state=d,vn(t,r,a,i);var p=t.memoizedState;s!==h||d!==p||tt.current||dn?("function"==typeof f&&(xn(t,n,f,r),p=t.memoizedState),(u=dn||Sn(t,n,u,r,d,p,l))?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=u):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return Kr(e,t,n,r,o,i)}function Kr(e,t,n,r,i,o){Yr(e,t);var a=0!=(64&t.flags);if(!r&&!a)return i&&ut(t,n,!1),li(e,t,o);r=t.stateNode,Gr.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=In(t,e.child,null,o),t.child=In(t,null,s,o)):$r(e,t,s,o),t.memoizedState=r.state,i&&ut(t,n,!0),t.child}function Qr(e){var t=e.stateNode;t.pendingContext?at(0,t.pendingContext,t.pendingContext!==t.context):t.context&&at(0,t.context,!1),Un(e,t.containerInfo)}var Zr,Jr,ei,ti,ni={dehydrated:null,retryLane:0};function ri(e,t,n){var r,i=t.pendingProps,o=$n.current,a=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),Ze($n,1&o),null===e?(void 0!==i.fallback&&qn(t),e=i.children,o=i.fallback,a?(e=ii(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=ni,e):"number"==typeof i.unstable_expectedLoadTime?(e=ii(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=ni,t.lanes=33554432,e):((n=Ta({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(i=function(e,t,n,r,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0==(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=xa(a,s),null!==e?r=xa(e,r):(r=Sa(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=ni,i):(n=function(e,t,n,r){var i=e.child;return e=i.sibling,n=xa(i,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}(e,t,i.children,n),t.memoizedState=null,n))}function ii(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0==(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Ta(t,i,0,null),n=Sa(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function oi(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),un(e.return,t)}function ai(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function si(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if($r(e,t,r.children,n),0!=(2&(r=$n.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&oi(e,n);else if(19===e.tag)oi(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ze($n,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===zn(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ai(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===zn(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ai(t,!0,n,null,o,t.lastEffect);break;case"together":ai(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function li(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),lo|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=xa(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=xa(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ui(e){e.flags|=4}if(q)Zr=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)G(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Jr=function(){},ei=function(e,t,n,r,i){if((e=e.memoizedProps)!==r){var o=t.stateNode,a=Fn(kn.current);n=$(o,n,e,r,i,a),(t.updateQueue=n)&&ui(t)}},ti=function(e,t,n,r){n!==r&&ui(t)};else if(K){Zr=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var o=i.stateNode;n&&r&&(o=Ne(o,i.type,i.memoizedProps,i)),G(e,o)}else if(6===i.tag)o=i.stateNode,n&&r&&(o=Me(o,i.memoizedProps,i)),G(e,o);else if(4!==i.tag){if(13===i.tag&&0!=(4&i.flags)&&(o=null!==i.memoizedState)){var a=i.child;if(null!==a&&(null!==a.child&&(a.child.return=a,Zr(e,a,!0,o)),null!==(o=a.sibling))){o.return=i,i=o;continue}}if(null!==i.child){i.child.return=i,i=i.child;continue}}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var ci=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var o=i.stateNode;n&&r&&(o=Ne(o,i.type,i.memoizedProps,i)),Re(e,o)}else if(6===i.tag)o=i.stateNode,n&&r&&(o=Me(o,i.memoizedProps,i)),Re(e,o);else if(4!==i.tag){if(13===i.tag&&0!=(4&i.flags)&&(o=null!==i.memoizedState)){var a=i.child;if(null!==a&&(null!==a.child&&(a.child.return=a,ci(e,a,!0,o)),null!==(o=a.sibling))){o.return=i,i=o;continue}}if(null!==i.child){i.child.return=i,i=i.child;continue}}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Jr=function(e){var t=e.stateNode;if(null!==e.firstEffect){var n=t.containerInfo,r=Oe(n);ci(r,e,!1,!1),t.pendingChildren=r,ui(e),Ce(n,r)}},ei=function(e,t,n,r,i){var o=e.stateNode,a=e.memoizedProps;if((e=null===t.firstEffect)&&a===r)t.stateNode=o;else{var s=t.stateNode,l=Fn(kn.current),u=null;a!==r&&(u=$(s,n,a,r,i,l)),e&&null===u?t.stateNode=o:(o=Pe(o,u,n,a,r,t,e,s),j(o,n,r,i,l)&&ui(t),t.stateNode=o,e?ui(t):Zr(o,t,!1,!1))}},ti=function(e,t,n,r){n!==r?(e=Fn(Ln.current),n=Fn(kn.current),t.stateNode=X(r,e,n,t),ui(t)):t.stateNode=e.stateNode}}else Jr=function(){},ei=function(){},ti=function(){};function hi(e,t){if(!Vn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function di(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return it(t.type)&&ot(),null;case 3:return Bn(),Qe(tt),Qe(et),er(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Qn(t)?ui(t):r.hydrate||(t.flags|=256)),Jr(t),null;case 5:jn(t);var i=Fn(Ln.current);if(n=t.type,null!==e&&null!=t.stateNode)ei(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(a(166));return null}if(e=Fn(kn.current),Qn(t)){if(!Q)throw Error(a(175));e=Ge(t.stateNode,t.type,t.memoizedProps,i,e,t),t.updateQueue=e,null!==e&&ui(t)}else{var o=B(n,r,i,e,t);Zr(o,t,!1,!1),t.stateNode=o,j(o,n,r,i,e)&&ui(t)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)ti(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(a(166));if(e=Fn(Ln.current),i=Fn(kn.current),Qn(t)){if(!Q)throw Error(a(176));je(t.stateNode,t.memoizedProps,t)&&ui(t)}else t.stateNode=X(r,e,i,t)}return null;case 13:return Qe($n),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,i=!1,null===e?void 0!==t.memoizedProps.fallback&&Qn(t):i=null!==e.memoizedState,r&&!i&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&$n.current)?0===oo&&(oo=3):(0!==oo&&3!==oo||(oo=4),null===eo||0==(134217727&lo)&&0==(134217727&uo)||Go(eo,no))),K&&r&&(t.flags|=4),q&&(r||i)&&(t.flags|=4),null);case 4:return Bn(),Jr(t),null===e&&re(t.stateNode.containerInfo),null;case 10:return ln(t),null;case 19:if(Qe($n),null===(r=t.memoizedState))return null;if(i=0!=(64&t.flags),null===(o=r.rendering))if(i)hi(r,!1);else{if(0!==oo||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(o=zn(e))){for(t.flags|=64,hi(r,!1),null!==(e=o.updateQueue)&&(t.updateQueue=e,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,e=n,r=t.child;null!==r;)n=e,(i=r).flags&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,null===(o=i.alternate)?(i.childLanes=0,i.lanes=n,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,n=o.dependencies,i.dependencies=null===n?null:{lanes:n.lanes,firstContext:n.firstContext}),r=r.sibling;return Ze($n,1&$n.current|2),t.child}e=e.sibling}null!==r.tail&&$t()>po&&(t.flags|=64,i=!0,hi(r,!1),t.lanes=33554432)}else{if(!i)if(null!==(e=zn(o))){if(t.flags|=64,i=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),hi(r,!0),null===r.tail&&"hidden"===r.tailMode&&!o.alternate&&!Vn)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*$t()-r.renderingStartTime>po&&1073741824!==n&&(t.flags|=64,i=!0,hi(r,!1),t.lanes=33554432);r.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=r.last)?e.sibling=o:t.child=o,r.last=o)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=$t(),e.sibling=null,t=$n.current,Ze($n,i?1&t|2:1&t),e):null;case 23:case 24:return Ho(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(a(156,t.tag))}function fi(e){switch(e.tag){case 1:it(e.type)&&ot();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Bn(),Qe(tt),Qe(et),er(),0!=(64&(t=e.flags)))throw Error(a(285));return e.flags=-4097&t|64,e;case 5:return jn(e),null;case 13:return Qe($n),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return Qe($n),null;case 4:return Bn(),null;case 10:return ln(e),null;case 23:case 24:return Ho(),null;default:return null}}function pi(e,t){try{var n="",r=t;do{n+=Jt(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function yi(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var mi="function"==typeof WeakMap?WeakMap:Map;function gi(e,t,n){(n=yn(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){vo||(vo=!0,_o=r),yi(0,t)},n}function vi(e,t,n){(n=yn(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return yi(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===bo?bo=new Set([this]):bo.add(this),yi(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var _i="function"==typeof WeakSet?WeakSet:Set;function bi(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){la(e,t)}else t.current=null}function xi(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:en(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(q&&256&t.flags&&Ae(t.stateNode.containerInfo))}throw Error(a(163))}function Ei(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function Si(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(oa(n,e),ia(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:en(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&_n(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=k(n.child.stateNode);break;case 1:e=n.child.stateNode}_n(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&ye(e,n.type,n.memoizedProps,n));case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(Q&&null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Xe(n)))))}throw Error(a(163))}function Ti(e,t){if(q)for(var n=e;;){if(5===n.tag){var r=n.stateNode;t?Ee(r):Te(n.stateNode,n.memoizedProps)}else if(6===n.tag)r=n.stateNode,t?Se(r):we(r,n.memoizedProps);else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function wi(e,t){if(ht&&"function"==typeof ht.onCommitFiberUnmount)try{ht.onCommitFiberUnmount(ct,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!=(4&r))oa(t,n);else{r=t;try{i()}catch(e){la(r,e)}}n=n.next}while(n!==e)}break;case 1:if(bi(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){la(t,e)}break;case 5:bi(t);break;case 4:q?Ni(e,t):K&&K&&(t=t.stateNode.containerInfo,e=Oe(t),Ie(t,e))}}function Ai(e,t){for(var n=t;;)if(wi(e,n),null===n.child||q&&4===n.tag){if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}else n.child.return=n,n=n.child}function Pi(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function Oi(e){return 5===e.tag||3===e.tag||4===e.tag}function Ri(e){if(q){e:{for(var t=e.return;null!==t;){if(Oi(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.flags&&(xe(t),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||Oi(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Ci(e,n,t):Ii(e,n,t)}}function Ci(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?ve(n,e,t):fe(n,e);else if(4!==r&&null!==(e=e.child))for(Ci(e,t,n),e=e.sibling;null!==e;)Ci(e,t,n),e=e.sibling}function Ii(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?ge(n,e,t):de(n,e);else if(4!==r&&null!==(e=e.child))for(Ii(e,t,n),e=e.sibling;null!==e;)Ii(e,t,n),e=e.sibling}function Ni(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(a(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag)Ai(e,i),r?be(n,i.stateNode):_e(n,i.stateNode);else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(wi(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function Mi(e,t){if(q){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void Ei(3,t);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,o=t.updateQueue;t.updateQueue=null,null!==o&&me(n,o,i,e,r,t)}return;case 6:if(null===t.stateNode)throw Error(a(162));return n=t.memoizedProps,void pe(t.stateNode,null!==e?e.memoizedProps:n,n);case 3:return void(Q&&(t=t.stateNode,t.hydrate&&(t.hydrate=!1,ze(t.containerInfo))));case 13:return ki(t),void Di(t);case 19:return void Di(t);case 23:case 24:return void Ti(t,null!==t.memoizedState)}throw Error(a(163))}switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void Ei(3,t);case 12:case 23:case 24:return;case 13:return ki(t),void Di(t);case 19:return void Di(t);case 3:Q&&(n=t.stateNode).hydrate&&(n.hydrate=!1,ze(n.containerInfo))}e:if(K){switch(t.tag){case 1:case 5:case 6:case 20:break e;case 3:case 4:t=t.stateNode,Ie(t.containerInfo,t.pendingChildren);break e}throw Error(a(163))}}function ki(e){null!==e.memoizedState&&(fo=$t(),q&&Ti(e.child,!0))}function Di(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new _i),t.forEach((function(t){var r=ca.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Li(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&null!==(t=t.memoizedState)&&null===t.dehydrated}var Fi=0,Ui=1,Bi=2,Gi=3,ji=4;if("function"==typeof Symbol&&Symbol.for){var $i=Symbol.for;Fi=$i("selector.component"),Ui=$i("selector.has_pseudo_class"),Bi=$i("selector.role"),Gi=$i("selector.test_id"),ji=$i("selector.text")}function zi(e){var t=Z(e);if(null!=t){if("string"!=typeof t.memoizedProps["data-testname"])throw Error(a(364));return t}if(null===(e=oe(e)))throw Error(a(362));return e.stateNode.current}function Xi(e,t){switch(t.$$typeof){case Fi:if(e.type===t.value)return!0;break;case Ui:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var r=e[n++],i=e[n++],o=t[i];if(5!==r.tag||!le(r)){for(;null!=o&&Xi(r,o);)o=t[++i];if(i===t.length){t=!0;break e}for(r=r.child;null!==r;)e.push(r,i),r=r.sibling}}t=!1}return t;case Bi:if(5===e.tag&&ue(e.stateNode,t.value))return!0;break;case ji:if((5===e.tag||6===e.tag)&&null!==(e=se(e))&&0<=e.indexOf(t.value))return!0;break;case Gi:if(5===e.tag&&"string"==typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase())return!0;break;default:throw Error(a(365,t))}return!1}function Hi(e){switch(e.$$typeof){case Fi:return"<"+(P(e.value)||"Unknown")+">";case Ui:return":has("+(Hi(e)||"")+")";case Bi:return'[role="'+e.value+'"]';case ji:return'"'+e.value+'"';case Gi:return'[data-testname="'+e.value+'"]';default:throw Error(a(365,e))}}function Vi(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var i=e[r++],o=e[r++],a=t[o];if(5!==i.tag||!le(i)){for(;null!=a&&Xi(i,a);)a=t[++o];if(o===t.length)n.push(i);else for(i=i.child;null!==i;)e.push(i,o),i=i.sibling}}return n}function Yi(e,t){if(!ie)throw Error(a(363));e=Vi(e=zi(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++];if(5===r.tag)le(r)||t.push(r.stateNode);else for(r=r.child;null!==r;)e.push(r),r=r.sibling}return t}var Wi=null,qi=Math.ceil,Ki=s.ReactCurrentDispatcher,Qi=s.ReactCurrentOwner,Zi=s.IsSomeRendererActing,Ji=0,eo=null,to=null,no=0,ro=0,io=Ke(0),oo=0,ao=null,so=0,lo=0,uo=0,co=0,ho=null,fo=0,po=1/0;function yo(){po=$t()+500}var mo,go=null,vo=!1,_o=null,bo=null,xo=!1,Eo=null,So=90,To=[],wo=[],Ao=null,Po=0,Oo=null,Ro=-1,Co=0,Io=0,No=null,Mo=!1;function ko(){return 0!=(48&Ji)?$t():-1!==Ro?Ro:Ro=$t()}function Do(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===zt()?1:2;if(0===Co&&(Co=so),0!==qt.transition){0!==Io&&(Io=null!==ho?ho.pendingLanes:0),e=Co;var t=4186112&~Io;return 0==(t&=-t)&&0==(t=(e=4186112&~e)&-e)&&(t=8192),t}return e=zt(),gt(0!=(4&Ji)&&98===e?12:e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),Co)}function Lo(e,t,n){if(50<Po)throw Po=0,Oo=null,Error(a(185));if(null===(e=Fo(e,t)))return null;bt(e,t,n),e===eo&&(uo|=t,4===oo&&Go(e,no));var r=zt();1===t?0!=(8&Ji)&&0==(48&Ji)?jo(e):(Uo(e,n),0===Ji&&(yo(),Yt())):(0==(4&Ji)||98!==r&&99!==r||(null===Ao?Ao=new Set([e]):Ao.add(e)),Uo(e,n)),ho=e}function Fo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Uo(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var l=31-xt(s),u=1<<l,c=o[l];if(-1===c){if(0==(u&r)||0!=(u&i)){c=t,pt(u);var h=ft;o[l]=10<=h?c+250:6<=h?c+5e3:-1}}else c<=t&&(e.expiredLanes|=u);s&=~u}if(r=yt(e,e===eo?no:0),t=ft,0===r)null!==n&&(n!==Lt&&At(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Lt&&At(n)}15===t?(n=jo.bind(null,e),null===Ut?(Ut=[n],Bt=wt(It,Wt)):Ut.push(n),n=Lt):n=14===t?Vt(99,jo.bind(null,e)):Vt(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,e))}}(t),Bo.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function Bo(e){if(Ro=-1,Io=Co=0,0!=(48&Ji))throw Error(a(327));var t=e.callbackNode;if(ra()&&e.callbackNode!==t)return null;var n=yt(e,e===eo?no:0);if(0===n)return null;var r=n,i=Ji;Ji|=16;var o=Wo();for(eo===e&&no===r||(yo(),Vo(e,r));;)try{Qo();break}catch(t){Yo(e,t)}if(an(),Ki.current=o,Ji=i,null!==to?r=0:(eo=null,no=0,r=oo),0!=(so&uo))Vo(e,0);else if(0!==r){if(2===r&&(Ji|=64,e.hydrate&&(e.hydrate=!1,Ae(e.containerInfo)),0!==(n=mt(e))&&(r=qo(e,n))),1===r)throw t=ao,Vo(e,0),Go(e,n),Uo(e,$t()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(a(345));case 2:case 5:ea(e);break;case 3:if(Go(e,n),(62914560&n)===n&&10<(r=fo+500-$t())){if(0!==yt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){ko(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=H(ea.bind(null,e),r);break}ea(e);break;case 4:if(Go(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-xt(n);o=1<<s,(s=r[s])>i&&(i=s),n&=~o}if(n=i,10<(n=(120>(n=$t()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*qi(n/1960))-n)){e.timeoutHandle=H(ea.bind(null,e),n);break}ea(e);break;default:throw Error(a(329))}}return Uo(e,$t()),e.callbackNode===t?Bo.bind(null,e):null}function Go(e,t){for(t&=~co,t&=~uo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-xt(t),r=1<<n;e[n]=-1,t&=~r}}function jo(e){if(0!=(48&Ji))throw Error(a(327));if(ra(),e===eo&&0!=(e.expiredLanes&no)){var t=no,n=qo(e,t);0!=(so&uo)&&(n=qo(e,t=yt(e,t)))}else n=qo(e,t=yt(e,0));if(0!==e.tag&&2===n&&(Ji|=64,e.hydrate&&(e.hydrate=!1,Ae(e.containerInfo)),0!==(t=mt(e))&&(n=qo(e,t))),1===n)throw n=ao,Vo(e,0),Go(e,t),Uo(e,$t()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,ea(e),Uo(e,$t()),null}function $o(e,t){var n=Ji;Ji|=1;try{return e(t)}finally{0===(Ji=n)&&(yo(),Yt())}}function zo(e,t){var n=Ji;if(0!=(48&n))return e(t);Ji|=1;try{if(e)return Ht(99,e.bind(null,t))}finally{Ji=n,Yt()}}function Xo(e,t){Ze(io,ro),ro|=t,so|=t}function Ho(){ro=io.current,Qe(io)}function Vo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==Y&&(e.timeoutHandle=Y,V(n)),null!==to)for(n=to.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&ot();break;case 3:Bn(),Qe(tt),Qe(et),er();break;case 5:jn(r);break;case 4:Bn();break;case 13:case 19:Qe($n);break;case 10:ln(r);break;case 23:case 24:Ho()}n=n.return}eo=e,to=xa(e.current,null),no=ro=so=t,oo=0,ao=null,co=uo=lo=0}function Yo(e,t){for(;;){var n=to;try{if(an(),tr.current=Lr,sr){for(var r=ir.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}sr=!1}if(rr=0,ar=or=ir=null,lr=!1,Qi.current=null,null===n||null===n.return){oo=1,ao=t,to=null;break}e:{var o=e,a=n.return,s=n,l=t;if(t=no,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l;if(0==(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!=(1&$n.current),d=a;do{var f;if(f=13===d.tag){var p=d.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var y=d.memoizedProps;f=void 0!==y.fallback&&(!0!==y.unstable_avoidThisFallback||!h)}}if(f){var m=d.updateQueue;if(null===m){var g=new Set;g.add(u),d.updateQueue=g}else m.add(u);if(0==(2&d.mode)){if(d.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var v=yn(-1,1);v.tag=2,mn(s,v)}s.lanes|=1;break e}l=void 0,s=t;var _=o.pingCache;if(null===_?(_=o.pingCache=new mi,l=new Set,_.set(u,l)):void 0===(l=_.get(u))&&(l=new Set,_.set(u,l)),!l.has(s)){l.add(s);var b=ua.bind(null,o,u,s);u.then(b,b)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);l=Error((P(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==oo&&(oo=2),l=pi(l,s),d=a;do{switch(d.tag){case 3:o=l,d.flags|=4096,t&=-t,d.lanes|=t,gn(d,gi(0,o,t));break e;case 1:o=l;var x=d.type,E=d.stateNode;if(0==(64&d.flags)&&("function"==typeof x.getDerivedStateFromError||null!==E&&"function"==typeof E.componentDidCatch&&(null===bo||!bo.has(E)))){d.flags|=4096,t&=-t,d.lanes|=t,gn(d,vi(d,o,t));break e}}d=d.return}while(null!==d)}Jo(n)}catch(e){t=e,to===n&&null!==n&&(to=n=n.return);continue}break}}function Wo(){var e=Ki.current;return Ki.current=Lr,null===e?Lr:e}function qo(e,t){var n=Ji;Ji|=16;var r=Wo();for(eo===e&&no===t||Vo(e,t);;)try{Ko();break}catch(t){Yo(e,t)}if(an(),Ji=n,Ki.current=r,null!==to)throw Error(a(261));return eo=null,no=0,oo}function Ko(){for(;null!==to;)Zo(to)}function Qo(){for(;null!==to&&!Pt();)Zo(to)}function Zo(e){var t=mo(e.alternate,e,ro);e.memoizedProps=e.pendingProps,null===t?Jo(e):to=t,Qi.current=null}function Jo(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=di(n,t,ro)))return void(to=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&ro)||0==(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=fi(t)))return n.flags&=2047,void(to=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(to=t);to=t=e}while(null!==t);0===oo&&(oo=5)}function ea(e){var t=zt();return Ht(99,ta.bind(null,e,t)),null}function ta(e,t){do{ra()}while(null!==Eo);if(0!=(48&Ji))throw Error(a(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,l=e.expirationTimes;0<o;){var u=31-xt(o),c=1<<u;i[u]=0,s[u]=-1,l[u]=-1,o&=~c}if(null!==Ao&&0==(24&r)&&Ao.has(e)&&Ao.delete(e),e===eo&&(to=eo=null,no=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){i=Ji,Ji|=32,Qi.current=null,No=F(e.containerInfo),Mo=!1,go=r;do{try{na()}catch(e){if(null===go)throw Error(a(330));la(go,e),go=go.nextEffect}}while(null!==go);No=null,go=r;do{try{for(s=e;null!==go;){var h=go.flags;if(16&h&&q&&xe(go.stateNode),128&h){var d=go.alternate;if(null!==d){var f=d.ref;null!==f&&("function"==typeof f?f(null):f.current=null)}}switch(1038&h){case 2:Ri(go),go.flags&=-3;break;case 6:Ri(go),go.flags&=-3,Mi(go.alternate,go);break;case 1024:go.flags&=-1025;break;case 1028:go.flags&=-1025,Mi(go.alternate,go);break;case 4:Mi(go.alternate,go);break;case 8:l=s,o=go,q?Ni(l,o):Ai(l,o);var p=o.alternate;Pi(o),null!==p&&Pi(p)}go=go.nextEffect}}catch(e){if(null===go)throw Error(a(330));la(go,e),go=go.nextEffect}}while(null!==go);Mo&&ne(),U(e.containerInfo),e.current=n,go=r;do{try{for(h=e;null!==go;){var y=go.flags;if(36&y&&Si(h,go.alternate,go),128&y){d=void 0;var m=go.ref;if(null!==m){var g=go.stateNode;d=5===go.tag?k(g):g,"function"==typeof m?m(d):m.current=d}}go=go.nextEffect}}catch(e){if(null===go)throw Error(a(330));la(go,e),go=go.nextEffect}}while(null!==go);go=null,Ft(),Ji=i}else e.current=n;if(xo)xo=!1,Eo=e,So=t;else for(go=r;null!==go;)t=go.nextEffect,go.nextEffect=null,8&go.flags&&((y=go).sibling=null,y.stateNode=null),go=t;if(0===(r=e.pendingLanes)&&(bo=null),1===r?e===Oo?Po++:(Po=0,Oo=e):Po=0,n=n.stateNode,ht&&"function"==typeof ht.onCommitFiberRoot)try{ht.onCommitFiberRoot(ct,n,void 0,64==(64&n.current.flags))}catch(e){}if(Uo(e,$t()),vo)throw vo=!1,e=_o,_o=null,e;return 0!=(8&Ji)||Yt(),null}function na(){for(;null!==go;){var e=go.alternate;Mo||null===No||(0!=(8&go.flags)?N(go,No)&&(Mo=!0,te()):13===go.tag&&Li(e,go)&&N(go,No)&&(Mo=!0,te()));var t=go.flags;0!=(256&t)&&xi(e,go),0==(512&t)||xo||(xo=!0,Vt(97,(function(){return ra(),null}))),go=go.nextEffect}}function ra(){if(90!==So){var e=97<So?97:So;return So=90,Ht(e,aa)}return!1}function ia(e,t){To.push(t,e),xo||(xo=!0,Vt(97,(function(){return ra(),null})))}function oa(e,t){wo.push(t,e),xo||(xo=!0,Vt(97,(function(){return ra(),null})))}function aa(){if(null===Eo)return!1;var e=Eo;if(Eo=null,0!=(48&Ji))throw Error(a(331));var t=Ji;Ji|=32;var n=wo;wo=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"==typeof s)try{s()}catch(e){if(null===o)throw Error(a(330));la(o,e)}}for(n=To,To=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var l=i.create;i.destroy=l()}catch(e){if(null===o)throw Error(a(330));la(o,e)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return Ji=t,Yt(),!0}function sa(e,t,n){mn(e,t=gi(0,t=pi(n,t),1)),t=ko(),null!==(e=Fo(e,1))&&(bt(e,1,t),Uo(e,t))}function la(e,t){if(3===e.tag)sa(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){sa(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===bo||!bo.has(r))){var i=vi(n,e=pi(t,e),1);if(mn(n,i),i=ko(),null!==(n=Fo(n,1)))bt(n,1,i),Uo(n,i);else if("function"==typeof r.componentDidCatch&&(null===bo||!bo.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function ua(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ko(),e.pingedLanes|=e.suspendedLanes&n,eo===e&&(no&n)===n&&(4===oo||3===oo&&(62914560&no)===no&&500>$t()-fo?Vo(e,0):co|=n),Uo(e,t)}function ca(e,t){var n=e.stateNode;null!==n&&n.delete(t),0==(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===zt()?1:2:(0===Co&&(Co=so),0===(t=vt(62914560&~Co))&&(t=4194304))),n=ko(),null!==(e=Fo(e,t))&&(bt(e,t,n),Uo(e,n))}mo=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||tt.current)jr=!0;else{if(0==(n&r)){switch(jr=!1,t.tag){case 3:Qr(t),Zn();break;case 5:Gn(t);break;case 1:it(t.type)&&lt(t);break;case 4:Un(t,t.stateNode.containerInfo);break;case 10:sn(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?ri(e,t,n):(Ze($n,1&$n.current),null!==(t=li(e,t,n))?t.sibling:null);Ze($n,1&$n.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return si(e,t,n);t.flags|=64}var i=t.memoizedState;if(null!==i&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ze($n,$n.current),r)break;return null;case 23:case 24:return t.lanes=0,Vr(e,t,n)}return li(e,t,n)}jr=0!=(16384&e.flags)}else jr=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=rt(t,et.current),cn(t,n),i=hr(null,t,r,e,i,n),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,it(r)){var o=!0;lt(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,fn(t);var s=r.getDerivedStateFromProps;"function"==typeof s&&xn(t,r,s,e),i.updater=En,t.stateNode=i,i._reactInternals=t,An(t,r,e,n),t=Kr(null,t,r,!0,o,n)}else t.tag=0,$r(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"==typeof e)return ba(e)?1:0;if(null!=e){if((e=e.$$typeof)===y)return 11;if(e===v)return 14}return 2}(i),e=en(i,e),o){case 0:t=Wr(null,t,i,e,n);break e;case 1:t=qr(null,t,i,e,n);break e;case 11:t=zr(null,t,i,e,n);break e;case 14:t=Xr(null,t,i,en(i.type,e),r,n);break e}throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Wr(e,t,r,i=t.elementType===r?i:en(r,i),n);case 1:return r=t.type,i=t.pendingProps,qr(e,t,r,i=t.elementType===r?i:en(r,i),n);case 3:if(Qr(t),r=t.updateQueue,null===e||null===r)throw Error(a(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,pn(e,t),vn(t,r,null,n),(r=t.memoizedState.element)===i)Zn(),t=li(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(Q?(Hn=Be(t.stateNode.containerInfo),Xn=t,o=Vn=!0):o=!1),o){if(Q&&null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)o=e[i],s=e[i+1],W?o._workInProgressVersionPrimary=s:o._workInProgressVersionSecondary=s,Jn.push(o);for(n=Nn(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else $r(e,t,r,n),Zn();t=t.child}return t;case 5:return Gn(t),null===e&&qn(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,z(r,i)?s=null:null!==o&&z(r,o)&&(t.flags|=16),Yr(e,t),$r(e,t,s,n),t.child;case 6:return null===e&&qn(t),null;case 13:return ri(e,t,n);case 4:return Un(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=In(t,null,r,n):$r(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,zr(e,t,r,i=t.elementType===r?i:en(r,i),n);case 7:return $r(e,t,t.pendingProps,n),t.child;case 8:case 12:return $r(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,sn(t,o=i.value),null!==s){var l=s.value;if(0==(o=Kt(l,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,o):1073741823))){if(s.children===i.children&&!tt.current){t=li(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){s=l.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!=(c.observedBits&o)){1===l.tag&&((c=yn(-1,n&-n)).tag=2,mn(l,c)),l.lanes|=n,null!==(c=l.alternate)&&(c.lanes|=n),un(l.return,n),u.lanes|=n;break}c=c.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}}$r(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,cn(t,n),r=r(i=hn(i,o.unstable_observedBits)),t.flags|=1,$r(e,t,r,n),t.child;case 14:return o=en(i=t.type,t.pendingProps),Xr(e,t,i,o=en(i.type,o),r,n);case 15:return Hr(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:en(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,it(r)?(e=!0,lt(t)):e=!1,cn(t,n),Tn(t,r,i),An(t,r,i,n),Kr(null,t,r,!0,e,n);case 19:return si(e,t,n);case 23:case 24:return Vr(e,t,n)}throw Error(a(156,t.tag))};var ha={current:!1},da=o.unstable_flushAllWithoutAsserting,fa="function"==typeof da;function pa(){if(void 0!==da)return da();for(var e=!1;ra();)e=!0;return e}function ya(t){try{pa(),function(t){if(null===Wi)try{var n=("require"+Math.random()).slice(0,7);Wi=(e&&e[n]).call(e,"timers").setImmediate}catch(e){Wi=function(e){var t=new MessageChannel;t.port1.onmessage=e,t.port2.postMessage(void 0)}}Wi(t)}((function(){pa()?ya(t):t()}))}catch(e){t(e)}}var ma=0,ga=!1;function va(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function _a(e,t,n,r){return new va(e,t,n,r)}function ba(e){return!(!(e=e.prototype)||!e.isReactComponent)}function xa(e,t){var n=e.alternate;return null===n?((n=_a(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ea(e,t,n,r,i,o){var s=2;if(r=e,"function"==typeof e)ba(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case c:return Sa(n.children,i,o,t);case x:s=8,i|=16;break;case h:s=8,i|=1;break;case d:return(e=_a(12,n,t,8|i)).elementType=d,e.type=d,e.lanes=o,e;case m:return(e=_a(13,n,t,i)).type=m,e.elementType=m,e.lanes=o,e;case g:return(e=_a(19,n,t,i)).elementType=g,e.lanes=o,e;case E:return Ta(n,i,o,t);case S:return(e=_a(24,n,t,i)).elementType=S,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case f:s=10;break e;case p:s=9;break e;case y:s=11;break e;case v:s=14;break e;case _:s=16,r=null;break e;case b:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=_a(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Sa(e,t,n,r){return(e=_a(7,e,r,t)).lanes=n,e}function Ta(e,t,n,r){return(e=_a(23,e,r,t)).elementType=E,e.lanes=n,e}function wa(e,t,n){return(e=_a(6,e,null,t)).lanes=n,e}function Aa(e,t,n){return(t=_a(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Pa(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Y,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=_t(0),this.expirationTimes=_t(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_t(0),Q&&(this.mutableSourceEagerHydrationData=null)}function Oa(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return null===(e=I(t))?null:e.stateNode}function Ra(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Ca(e,t){Ra(e,t),(e=e.alternate)&&Ra(e,t)}function Ia(e){return null===(e=I(e))?null:e.stateNode}function Na(){return null}return n.IsThisRendererActing=ha,n.act=function(e){function t(){ma--,Zi.current=n,ha.current=r}!1===ga&&(ga=!0,console.error("act(...) is not supported in production builds of React, and might not behave as expected.")),ma++;var n=Zi.current,r=ha.current;Zi.current=!0,ha.current=!0;try{var i=$o(e)}catch(e){throw t(),e}if(null!==i&&"object"==typeof i&&"function"==typeof i.then)return{then:function(e,r){i.then((function(){1<ma||!0===fa&&!0===n?(t(),e()):ya((function(n){t(),n?r(n):e()}))}),(function(e){t(),r(e)}))}};try{1!==ma||!1!==fa&&!1!==n||pa(),t()}catch(e){throw t(),e}return{then:function(e){e()}}},n.attemptContinuousHydration=function(e){13===e.tag&&(Lo(e,67108864,ko()),Ca(e,67108864))},n.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=ko(),n=Do(e);Lo(e,n,t),Ca(e,n)}},n.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.hydrate){var n=pt(t.pendingLanes);t.expiredLanes|=n&t.pendingLanes,Uo(t,$t()),0==(48&Ji)&&(yo(),Yt())}break;case 13:var r=ko();zo((function(){return Lo(e,1,r)})),Ca(e,4)}},n.attemptUserBlockingHydration=function(e){13===e.tag&&(Lo(e,4,ko()),Ca(e,4))},n.batchedEventUpdates=function(e,t){var n=Ji;Ji|=2;try{return e(t)}finally{0===(Ji=n)&&(yo(),Yt())}},n.batchedUpdates=$o,n.createComponentSelector=function(e){return{$$typeof:Fi,value:e}},n.createContainer=function(e,t,n){return e=new Pa(e,t,n),t=_a(3,null,null,2===t?7:1===t?3:0),e.current=t,t.stateNode=e,fn(t),e},n.createHasPsuedoClassSelector=function(e){return{$$typeof:Ui,value:e}},n.createPortal=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:u,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},n.createRoleSelector=function(e){return{$$typeof:Bi,value:e}},n.createTestNameSelector=function(e){return{$$typeof:Gi,value:e}},n.createTextSelector=function(e){return{$$typeof:ji,value:e}},n.deferredUpdates=function(e){return Ht(97,e)},n.discreteUpdates=function(e,t,n,r,i){var o=Ji;Ji|=4;try{return Ht(98,e.bind(null,t,n,r,i))}finally{0===(Ji=o)&&(yo(),Yt())}},n.findAllNodes=Yi,n.findBoundingRects=function(e,t){if(!ie)throw Error(a(363));t=Yi(e,t),e=[];for(var n=0;n<t.length;n++)e.push(ae(t[n]));for(t=e.length-1;0<t;t--)for(var r=(n=e[t]).x,i=r+n.width,o=n.y,s=o+n.height,l=t-1;0<=l;l--)if(t!==l){var u=e[l],c=u.x,h=c+u.width,d=u.y,f=d+u.height;if(r>=c&&o>=d&&i<=h&&s<=f){e.splice(t,1);break}if(!(r!==c||n.width!==u.width||f<o||d>s)){d>o&&(u.height+=d-o,u.y=o),f<s&&(u.height=s-d),e.splice(t,1);break}if(!(o!==d||n.height!==u.height||h<r||c>i)){c>r&&(u.width+=c-r,u.x=r),h<i&&(u.width=i-c),e.splice(t,1);break}}return e},n.findHostInstance=Oa,n.findHostInstanceWithNoPortals=function(e){return null===(e=function(e){if(!(e=C(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child&&4!==t.tag)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}(e))?null:20===e.tag?e.stateNode.instance:e.stateNode},n.findHostInstanceWithWarning=function(e){return Oa(e)},n.flushControlled=function(e){var t=Ji;Ji|=1;try{Ht(99,e)}finally{0===(Ji=t)&&(yo(),Yt())}},n.flushDiscreteUpdates=function(){0==(49&Ji)&&(function(){if(null!==Ao){var e=Ao;Ao=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,Uo(e,$t())}))}Yt()}(),ra())},n.flushPassiveEffects=ra,n.flushSync=zo,n.focusWithin=function(e,t){if(!ie)throw Error(a(363));for(t=Vi(e=zi(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!le(n)){if(5===n.tag&&ce(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},n.getCurrentUpdateLanePriority=function(){return dt},n.getFindAllNodesFailureDescription=function(e,t){if(!ie)throw Error(a(363));var n=0,r=[];e=[zi(e),0];for(var i=0;i<e.length;){var o=e[i++],s=e[i++],l=t[s];if((5!==o.tag||!le(o))&&(Xi(o,l)&&(r.push(Hi(l)),++s>n&&(n=s)),s<t.length))for(o=o.child;null!==o;)e.push(o,s),o=o.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(Hi(t[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},n.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?k(e.child.stateNode):e.child.stateNode:null},n.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:s.ReactCurrentDispatcher,findHostInstanceByFiber:Ia,findFiberByHostInstance:e.findFiberByHostInstance||Na,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null},"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!t.isDisabled&&t.supportsFiber)try{ct=t.inject(e),ht=t}catch(e){}e=!0}return e},n.observeVisibleRects=function(e,t,n,r){if(!ie)throw Error(a(363));e=Yi(e,t);var i=he(e,n,r).disconnect;return{disconnect:function(){i()}}},n.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},n.runWithPriority=function(e,t){var n=dt;try{return dt=e,t()}finally{dt=n}},n.shouldSuspend=function(){return!1},n.unbatchedUpdates=function(e,t){var n=Ji;Ji&=-2,Ji|=8;try{return e(t)}finally{0===(Ji=n)&&(yo(),Yt())}},n.updateContainer=function(e,t,n,r){var i=t.current,o=ko(),s=Do(i);e:if(n){t:{if(O(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(it(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(a(171))}if(1===n.tag){var u=n.type;if(it(u)){n=st(n,u,l);break e}}n=l}else n=Je;return null===t.context?t.context=n:t.pendingContext=n,(t=yn(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),mn(i,t),Lo(i,s,o),s},n}})),bc=0,xc={__interactionsRef:null,__subscriberRef:null,unstable_clear:function(e){return e()},unstable_getCurrent:function(){return null},unstable_getThreadID:function(){return++bc},unstable_subscribe:function(){},unstable_trace:function(e,t,n){return n()},unstable_unsubscribe:function(){},unstable_wrap:function(e){return e}},Ec=cc((function(e,t){}));Ec.__interactionsRef,Ec.__subscriberRef,Ec.unstable_clear,Ec.unstable_getCurrent,Ec.unstable_getThreadID,Ec.unstable_subscribe,Ec.unstable_trace,Ec.unstable_unsubscribe,Ec.unstable_wrap,cc((function(e){e.exports=xc})),cc((function(e){}));var Sc=cc((function(e){e.exports=_c})),Tc={name:"@inlet/react-pixi",version:"6.8.0",description:"Write PixiJS applications using React declarative style.",main:"index.js","umd:main":"umd.js",module:"module.js","jsnext:main":"module.js",author:"Patrick Brouwer <patrick@inlet.nl>",license:"MIT",scripts:{"docz:dev":"rimraf ./docs && docz dev","docz:build":"rimraf ./docs && yarn build:prod && docz build",eslint:"eslint .","build:watch":"cross-env FORMAT=umd NODE_ENV=development rollup -c --watch","build:dev":"cross-env NODE_ENV=development rollup -c","build:prod":"cross-env NODE_ENV=production rollup -c",build:"rimraf ./dist && npm run build:dev && npm run build:prod",test:"jest --silent","test:watch":"jest --silent --watch",prepack:'if-env CI=true && echo "skip build" || (npm run test && npm run eslint && npm run build)'},repository:{type:"git",url:"git+https://github.com/inlet/react-pixi.git"},files:["dist/","animated/","legacy/","LICENSE","index.d.ts","index.js","umd.js","module.js"],typings:"./index.d.ts",devDependencies:{"@babel/cli":"7.14.8","@babel/core":"7.14.8","@babel/plugin-proposal-class-properties":"7.14.5","@babel/plugin-proposal-decorators":"7.14.5","@babel/plugin-proposal-do-expressions":"7.14.5","@babel/plugin-proposal-export-default-from":"7.14.5","@babel/plugin-proposal-export-namespace-from":"7.14.5","@babel/plugin-proposal-function-bind":"7.14.5","@babel/plugin-proposal-function-sent":"7.14.5","@babel/plugin-proposal-json-strings":"7.14.5","@babel/plugin-proposal-logical-assignment-operators":"7.14.5","@babel/plugin-proposal-nullish-coalescing-operator":"7.14.5","@babel/plugin-proposal-numeric-separator":"7.14.5","@babel/plugin-proposal-optional-chaining":"7.14.5","@babel/plugin-proposal-pipeline-operator":"7.14.8","@babel/plugin-proposal-throw-expressions":"7.14.5","@babel/plugin-syntax-dynamic-import":"7.8.3","@babel/plugin-syntax-import-meta":"7.10.4","@babel/plugin-transform-runtime":"7.14.5","@babel/preset-env":"7.14.9","@babel/preset-react":"7.14.5","@babel/runtime":"7.14.8","@rollup/plugin-alias":"3.1.5","@testing-library/react":"12.0.0","@types/jest":"26.0.24","@types/react":"17.0.15","@types/react-dom":"17.0.9","@types/react-reconciler":"0.26.3","babel-core":"7.0.0-beta.3","babel-eslint":"10.1.0","babel-jest":"26.6.3","babel-plugin-module-resolver":"4.1.0",canvas:"2.8.0","cross-env":"7.0.3",docz:"2.3.1",eslint:"7.32.0","eslint-config-prettier":"8.3.0","eslint-plugin-prettier":"3.4.0","eslint-plugin-react":"7.24.0","if-env":"1.0.4",jest:"26.6.3","jest-webgl-canvas-mock":"0.2.3","lodash.isnil":"4.0.0","lodash.times":"4.3.2","performance-now":"2.1.0","pixi.js":"6.1.0",prettier:"2.3.2","prop-types":"15.7.2",react:"17.0.2","react-dom":"17.0.2","react-reconciler":"0.26.2","react-spring":"9.2.4","react-test-renderer":"17.0.2",rimraf:"3.0.2",rollup:"2.55.1","rollup-plugin-babel":"4.4.0","rollup-plugin-commonjs":"10.1.0","rollup-plugin-filesize":"9.1.1","rollup-plugin-json":"4.0.0","rollup-plugin-node-globals":"1.4.0","rollup-plugin-node-resolve":"5.2.0","rollup-plugin-replace":"2.2.0","rollup-plugin-terser":"7.0.2",typescript:"4.3.5"},peerDependencies:{"pixi.js":"^6.0.0","prop-types":"^15.7.2",react:"^17.0.1","react-dom":"^17.0.1"},jest:{collectCoverage:!1,roots:["./test"],setupFiles:["jest-webgl-canvas-mock","<rootDir>/test/bootstrap.js","<rootDir>/test/__mocks__/matchMediaMock.js"]},resolutions:{"get-pkg-repo":"4.1.1","hosted-git-info":"^2.1.4"},dependencies:{}},wc=void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Ac(){throw new Error("setTimeout has not been defined")}function Pc(){throw new Error("clearTimeout has not been defined")}var Oc=Ac,Rc=Pc;function Cc(e){if(Oc===setTimeout)return setTimeout(e,0);if((Oc===Ac||!Oc)&&setTimeout)return Oc=setTimeout,setTimeout(e,0);try{return Oc(e,0)}catch(t){try{return Oc.call(null,e,0)}catch(t){return Oc.call(this,e,0)}}}"function"==typeof wc.setTimeout&&(Oc=setTimeout),"function"==typeof wc.clearTimeout&&(Rc=clearTimeout);var Ic,Nc=[],Mc=!1,kc=-1;function Dc(){Mc&&Ic&&(Mc=!1,Ic.length?Nc=Ic.concat(Nc):kc=-1,Nc.length&&Lc())}function Lc(){if(!Mc){var e=Cc(Dc);Mc=!0;for(var t=Nc.length;t;){for(Ic=Nc,Nc=[];++kc<t;)Ic&&Ic[kc].run();kc=-1,t=Nc.length}Ic=null,Mc=!1,function(e){if(Rc===clearTimeout)return clearTimeout(e);if((Rc===Pc||!Rc)&&clearTimeout)return Rc=clearTimeout,clearTimeout(e);try{Rc(e)}catch(t){try{return Rc.call(null,e)}catch(t){return Rc.call(this,e)}}}(e)}}function Fc(e,t){this.fun=e,this.array=t}function Uc(){}Fc.prototype.run=function(){this.fun.apply(null,this.array)};var Bc=Uc,Gc=Uc,jc=Uc,$c=Uc,zc=Uc,Xc=Uc,Hc=Uc,Vc=wc.performance||{},Yc=Vc.now||Vc.mozNow||Vc.msNow||Vc.oNow||Vc.webkitNow||function(){return(new Date).getTime()},Wc=new Date,qc={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Nc.push(new Fc(e,t)),1!==Nc.length||Mc||Cc(Lc)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Bc,addListener:Gc,once:jc,off:$c,removeListener:zc,removeAllListeners:Xc,emit:Hc,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*Yc.call(Vc),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Wc)/1e3}},Kc=cc((function(e){(function(){var t,n,r,i,o,a;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:null!=qc&&qc.hrtime?(e.exports=function(){return(t()-o)/1e6},n=qc.hrtime,i=(t=function(){var e;return 1e9*(e=n())[0]+e[1]})(),a=1e9*qc.uptime(),o=i-a):Date.now?(e.exports=function(){return Date.now()-r},r=Date.now()):(e.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(uc)})),Qc={};function Zc(e,t){e.addChild&&(e.addChild(t),"function"==typeof t.didMount&&t.didMount.call(t,t,e))}function Jc(e,t){var n,r,i;"function"==typeof t.willUnmount&&t.willUnmount.call(t,t,e),!1!==(null==t||null===(n=t.config)||void 0===n?void 0:n.destroyChildren)&&null!==(r=t.children)&&void 0!==r&&r.length&&Fu(t.children).forEach((function(e){Jc(t,e)})),e.removeChild(t),!1!==(null==t||null===(i=t.config)||void 0===i?void 0:i.destroy)&&t.destroy()}function eh(e,t,n){Bu(t!==n,"react-pixi: PixiFiber cannot insert node before itself");var r=-1!==e.children.indexOf(t),i=e.getChildIndex(n);r?e.setChildIndex(t,i):e.addChildAt(t,i)}var th=null,nh=Sc({getRootHostContext:function(){return Qc},getChildHostContext:function(){return Qc},getChildHostContextForEventComponent:function(e){return e},getPublicInstance:function(e){return e},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=sc[e];if("function"==typeof o&&(t=o(i,r)),!t){var a=lc[e];a&&((t=a.create(r)).didMount=a.didMount?a.didMount.bind(t):void 0,t.willUnmount=a.willUnmount?a.willUnmount.bind(t):void 0,t.applyProps=a.applyProps?a.applyProps.bind(t):void 0,t.config=a.config)}return t&&(("function"==typeof(null===(n=t)||void 0===n?void 0:n.applyProps)?t.applyProps:Qu)(t,{},r),t.__reactpixi={root:i}),t},hideInstance:function(e){e.visible=!1},unhideInstance:function(e,t){var n=null==t||!t.hasOwnProperty("visible")||t.visible;e.visible=n},finalizeInitialChildren:function(e,t,n){return!1},prepareUpdate:function(e,t,n,r,i,o){return th=function(e,t,n,r,i){var o=null;for(var a in n)!r.hasOwnProperty(a)&&n.hasOwnProperty(a)&&null!=n[a]&&("children"===a||(o||(o=[]),o.push(a,null)));for(var s in r){var l=r[s],u=null!=n?n[s]:void 0;!r.hasOwnProperty(s)||l===u||null==l&&null==u||"children"===s||(o||(o=[]),o.push(s,l))}return o}(0,0,n,r)},shouldSetTextContent:function(e,t){return!1},shouldDeprioritizeSubtree:function(e,t){var n=void 0===t.alpha||t.alpha>0,r=void 0===t.renderable||!0===t.renderable,i=void 0===t.visible||!0===t.visible;return!(n&&r&&i)},createTextInstance:function(e,t,n){Bu(!1,'react-pixi: Error trying to add text node "'+e+'"',"PixiFiber does not support text nodes as children of a Pixi component. To pass a string value to your component, use a property other than children. If you wish to display some text, you can use &lt;Text text={string} /&gt; instead.")},unhideTextInstance:function(e,t){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:Kc,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,appendInitialChild:function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=Zc.apply(null,r);return null===(e=r[0].__reactpixi)||void 0===e||null===(t=e.root)||void 0===t||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),o},appendChild:function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=Zc.apply(null,r);return null===(e=r[0].__reactpixi)||void 0===e||null===(t=e.root)||void 0===t||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),o},appendChildToContainer:function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=Zc.apply(null,r);return null===(e=r[0].__reactpixi)||void 0===e||null===(t=e.root)||void 0===t||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),o},removeChild:function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=Jc.apply(null,r);return null===(e=r[0].__reactpixi)||void 0===e||null===(t=e.root)||void 0===t||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),o},removeChildFromContainer:function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=Jc.apply(null,r);return null===(e=r[0].__reactpixi)||void 0===e||null===(t=e.root)||void 0===t||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),o},insertBefore:eh,insertInContainerBefore:function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=eh.apply(null,r);return null===(e=r[0].__reactpixi)||void 0===e||null===(t=e.root)||void 0===t||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),o},commitUpdate:function(e,t,n,r,i){var o,a,s=e&&e.applyProps;"function"!=typeof s&&(s=Qu),(s(e,r,i)||th)&&(null===(o=e.__reactpixi)||void 0===o||null===(a=o.root)||void 0===a||a.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(e,t,n,r,i){},commitTextUpdate:function(e,t,n){},resetTextContent:function(e){},clearContainer:function(e){},getFundamentalComponentInstance:function(e){throw new Error("Not yet implemented.")},mountFundamentalComponent:function(e){throw new Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(e){throw new Error("Not yet implemented.")},unmountFundamentalComponent:function(e){throw new Error("Not yet implemented.")},getInstanceFromNode:function(e){throw new Error("Not yet implemented.")},isOpaqueHydratingObject:function(e){throw new Error("Not yet implemented")},makeOpaqueHydratingObject:function(e){throw new Error("Not yet implemented.")},makeClientIdInDEV:function(e){throw new Error("Not yet implemented")},beforeActiveInstanceBlur:function(e){},afterActiveInstanceBlur:function(){},preparePortalMount:function(e){}}),rh=Tc.devDependencies["react-dom"].replace(/[^0-9.]/g,""),ih=Tc.name;nh.injectIntoDevTools({bundleType:0,version:rh,rendererPackageName:ih,findHostInstanceByFiber:nh.findHostInstance}),new Map;var oh="function"==typeof Symbol&&Symbol.for,ah=oh?Symbol.for("react.element"):60103,sh=oh?Symbol.for("react.portal"):60106,lh=oh?Symbol.for("react.fragment"):60107,uh=oh?Symbol.for("react.strict_mode"):60108,ch=oh?Symbol.for("react.profiler"):60114,hh=oh?Symbol.for("react.provider"):60109,dh=oh?Symbol.for("react.context"):60110,fh=oh?Symbol.for("react.async_mode"):60111,ph=oh?Symbol.for("react.concurrent_mode"):60111,yh=oh?Symbol.for("react.forward_ref"):60112,mh=oh?Symbol.for("react.suspense"):60113,gh=oh?Symbol.for("react.suspense_list"):60120,vh=oh?Symbol.for("react.memo"):60115,_h=oh?Symbol.for("react.lazy"):60116,bh=oh?Symbol.for("react.block"):60121,xh=oh?Symbol.for("react.fundamental"):60117,Eh=oh?Symbol.for("react.responder"):60118,Sh=oh?Symbol.for("react.scope"):60119;function Th(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case ah:switch(e=e.type){case fh:case ph:case lh:case ch:case uh:case mh:return e;default:switch(e=e&&e.$$typeof){case dh:case yh:case _h:case vh:case hh:return e;default:return t}}case sh:return t}}}function wh(e){return Th(e)===ph}var Ah={AsyncMode:fh,ConcurrentMode:ph,ContextConsumer:dh,ContextProvider:hh,Element:ah,ForwardRef:yh,Fragment:lh,Lazy:_h,Memo:vh,Portal:sh,Profiler:ch,StrictMode:uh,Suspense:mh,isAsyncMode:function(e){return wh(e)||Th(e)===fh},isConcurrentMode:wh,isContextConsumer:function(e){return Th(e)===dh},isContextProvider:function(e){return Th(e)===hh},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===ah},isForwardRef:function(e){return Th(e)===yh},isFragment:function(e){return Th(e)===lh},isLazy:function(e){return Th(e)===_h},isMemo:function(e){return Th(e)===vh},isPortal:function(e){return Th(e)===sh},isProfiler:function(e){return Th(e)===ch},isStrictMode:function(e){return Th(e)===uh},isSuspense:function(e){return Th(e)===mh},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===lh||e===ph||e===ch||e===uh||e===mh||e===gh||"object"==typeof e&&null!==e&&(e.$$typeof===_h||e.$$typeof===vh||e.$$typeof===hh||e.$$typeof===dh||e.$$typeof===yh||e.$$typeof===xh||e.$$typeof===Eh||e.$$typeof===Sh||e.$$typeof===bh)},typeOf:Th},Ph=cc((function(e,t){}));function Oh(){}function Rh(){}Ph.AsyncMode,Ph.ConcurrentMode,Ph.ContextConsumer,Ph.ContextProvider,Ph.Element,Ph.ForwardRef,Ph.Fragment,Ph.Lazy,Ph.Memo,Ph.Portal,Ph.Profiler,Ph.StrictMode,Ph.Suspense,Ph.isAsyncMode,Ph.isConcurrentMode,Ph.isContextConsumer,Ph.isContextProvider,Ph.isElement,Ph.isForwardRef,Ph.isFragment,Ph.isLazy,Ph.isMemo,Ph.isPortal,Ph.isProfiler,Ph.isStrictMode,Ph.isSuspense,Ph.isValidElementType,Ph.typeOf,cc((function(e){e.exports=Ah})),Function.call.bind(Object.prototype.hasOwnProperty),Rh.resetWarningCache=Oh;var Ch=cc((function(e){e.exports=function(){function e(e,t,n,r,i,o){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==o){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Rh,resetWarningCache:Oh};return n.PropTypes=n,n}()})),Ih=wu.createContext(null),Nh=Ih.Provider,Mh=(Ih.Consumer,function(){}),kh={width:Ch.number,height:Ch.number,onMount:Ch.func,onUnmount:Ch.func,raf:Ch.bool,renderOnComponentChange:Ch.bool,children:Ch.node,options:Ch.shape({autoStart:Ch.bool,width:Ch.number,height:Ch.number,useContextAlpha:Ch.bool,backgroundAlpha:Ch.number,autoDensity:Ch.bool,antialias:Ch.bool,preserveDrawingBuffer:Ch.bool,resolution:Ch.number,forceCanvas:Ch.bool,backgroundColor:Ch.number,clearBeforeRender:Ch.bool,powerPreference:Ch.string,sharedTicker:Ch.bool,sharedLoader:Ch.bool,resizeTo:function(e,t){var n=e[t];n&&Bu(n===window||n instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(Ou(n),", expect `window` or an `HTMLElement`."))},view:function(e,t,n){var r=e[t];r&&Bu(r instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(Ou(r),", supplied to ").concat(n,", expected `<canvas> Element`"))}})},Dh={width:800,height:600,onMount:Mh,onUnmount:Mh,raf:!0,renderOnComponentChange:!0},Lh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mu(e,t)}(o,wu.Component);var t,n,r,i=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Nu(t);if(n){var i=Nu(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Lu(this,e)});function o(){var e;Ru(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Cu(Du(e=i.call.apply(i,[this].concat(n))),"_canvas",null),Cu(Du(e),"_mediaQuery",null),Cu(Du(e),"_ticker",null),Cu(Du(e),"_needsUpdate",!0),Cu(Du(e),"app",null),Cu(Du(e),"updateSize",(function(){var t=e.props,n=t.width,r=t.height,i=t.options;null!=i&&i.resolution||(e.app.renderer.resolution=window.devicePixelRatio,e.resetInteractionManager()),e.app.renderer.resize(n,r)})),Cu(Du(e),"needsRenderUpdate",(function(){e._needsUpdate=!0})),Cu(Du(e),"renderStage",(function(){var t=e.props,n=t.renderOnComponentChange;!t.raf&&n&&e._needsUpdate&&(e._needsUpdate=!1,e.app.renderer.render(e.app.stage))})),e}return(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.onMount,n=e.width,r=e.height,i=e.options,o=e.raf,a=e.renderOnComponentChange;this.app=new Ai(Pu(Pu({width:n,height:r,view:this._canvas},i),{},{autoDensity:!1!==(null==i?void 0:i.autoDensity)})),this.app.ticker.autoStart=!1,this.app.ticker[o?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=nh.createContainer(this.app.stage),nh.updateContainer(this.getChildren(),this.mountNode,this),t(this.app),null!=i&&i.autoDensity&&window.matchMedia&&void 0===(null==i?void 0:i.resolution)&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),a&&!o&&(this._ticker=new Zt,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(e,t,n){var r,i=this.props,o=i.width,a=i.height,s=i.raf,l=i.renderOnComponentChange,u=i.options;void 0!==(null==u?void 0:u.resolution)&&(null==e?void 0:e.options.resolution)!==(null==u?void 0:u.resolution)&&(this.app.renderer.resolution=u.resolution,this.resetInteractionManager()),e.height===a&&e.width===o&&(null===(r=e.options)||void 0===r?void 0:r.resolution)===(null==u?void 0:u.resolution)||this.updateSize(),e.raf!==s&&this.app.ticker[s?"start":"stop"](),nh.updateContainer(this.getChildren(),this.mountNode,this),e.width===o&&e.height===a&&e.raf===s&&e.renderOnComponentChange===l&&e.options===u||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){"interaction"in this.app.renderer.plugins&&(this.app.renderer.plugins.interaction.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var e=this.props.children;return wu.createElement(Nh,{value:this.app},e)}},{key:"componentDidCatch",value:function(e,t){console.error("Error occurred in `Stage`."),console.error(e),console.error(t)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),nh.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var e,t,n=this,r=this.props.options;return r&&r.view?(Bu(r.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):wu.createElement("canvas",Iu({},(e=this.props,t=[].concat(Fu(Object.keys(kh)),Fu(Object.keys(Wu))),Object.keys(e).filter((function(e){return!t.includes(e)})).reduce((function(t,n){return Pu(Pu({},t),{},Cu({},n,e[n]))}),{})),{ref:function(e){return n._canvas=e}}))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(o.prototype,r),o}();Lh.propTypes=kh,Lh.defaultProps=Dh;var Fh=ac.Container,Uh=ac.Graphics,Bh=ac.Text},6170:(e,t,n)=>{e.exports=n(2480)},3593:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;const r=n(6460),i=n(7903),o=n(57),a=n(1949),s=["/properties"],l="http://json-schema.org/draft-07/schema";class u extends r.default{_addVocabularies(){super._addVocabularies(),i.default.forEach((e=>this.addVocabulary(e))),this.opts.discriminator&&this.addKeyword(o.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(a,s):a;this.addMetaSchema(e,l,!1),this.refs["http://json-schema.org/schema"]=l}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}e.exports=t=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var c=n(703);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return c.KeywordCxt}});var h=n(8292);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return h._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return h.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return h.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return h.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return h.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return h.CodeGen}})},969:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class n{}t._CodeOrName=n,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends n{constructor(e){if(super(),!t.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=r;class i extends n{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce(((e,t)=>`${e}${t}`),"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce(((e,t)=>(t instanceof r&&(e[t.str]=(e[t.str]||0)+1),e)),{})}}function o(e,...t){const n=[e[0]];let r=0;for(;r<t.length;)l(n,t[r]),n.push(e[++r]);return new i(n)}t._Code=i,t.nil=new i(""),t._=o;const a=new i("+");function s(e,...t){const n=[c(e[0])];let r=0;for(;r<t.length;)n.push(a),l(n,t[r]),n.push(a,c(e[++r]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===a){const n=u(e[t-1],e[t+1]);if(void 0!==n){e.splice(t-1,3,n);continue}e[t++]="+"}t++}}(n),new i(n)}function l(e,t){var n;t instanceof i?e.push(...t._items):t instanceof r?e.push(t):e.push("number"==typeof(n=t)||"boolean"==typeof n||null===n?n:c(Array.isArray(n)?n.join(","):n))}function u(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof r||'"'!==e[e.length-1])return;return"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof r?void 0:`"${e}${t.slice(1)}`}function c(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.str=s,t.addCodeArg=l,t.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:s`${e}${t}`},t.stringify=function(e){return new i(c(e))},t.safeStringify=c,t.getProperty=function(e){return"string"==typeof e&&t.IDENTIFIER.test(e)?new i(`.${e}`):o`[${e}]`},t.getEsmExportName=function(e){if("string"==typeof e&&t.IDENTIFIER.test(e))return new i(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)},t.regexpCode=function(e){return new i(e.toString())}},8292:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const r=n(969),i=n(6329);var o=n(969);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return o._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return o.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return o.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return o.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return o.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return o.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return o.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return o.Name}});var a=n(6329);Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return a.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return a.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return a.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return a.varKinds}}),t.operators={GT:new r._Code(">"),GTE:new r._Code(">="),LT:new r._Code("<"),LTE:new r._Code("<="),EQ:new r._Code("==="),NEQ:new r._Code("!=="),NOT:new r._Code("!"),OR:new r._Code("||"),AND:new r._Code("&&"),ADD:new r._Code("+")};class s{optimizeNodes(){return this}optimizeNames(e,t){return this}}class l extends s{constructor(e,t,n){super(),this.varKind=e,this.name=t,this.rhs=n}render({es5:e,_n:t}){const n=e?i.varKinds.var:this.varKind,r=void 0===this.rhs?"":` = ${this.rhs}`;return`${n} ${this.name}${r};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=I(this.rhs,e,t)),this}get names(){return this.rhs instanceof r._CodeOrName?this.rhs.names:{}}}class u extends s{constructor(e,t,n){super(),this.lhs=e,this.rhs=t,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,t){if(!(this.lhs instanceof r.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=I(this.rhs,e,t),this}get names(){return C(this.lhs instanceof r.Name?{}:{...this.lhs.names},this.rhs)}}class c extends u{constructor(e,t,n,r){super(e,n,r),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class h extends s{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class d extends s{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}}class f extends s{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class p extends s{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=I(this.code,e,t),this}get names(){return this.code instanceof r._CodeOrName?this.code.names:{}}}class y extends s{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce(((t,n)=>t+n.render(e)),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const n=e[t].optimizeNodes();Array.isArray(n)?e.splice(t,1,...n):n?e[t]=n:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:n}=this;let r=n.length;for(;r--;){const i=n[r];i.optimizeNames(e,t)||(N(e,i.names),n.splice(r,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce(((e,t)=>R(e,t.names)),{})}}class m extends y{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class g extends y{}class v extends m{}v.kind="else";class _ extends m{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new v(e):e}return t?!1===e?t instanceof _?t:t.nodes:this.nodes.length?this:new _(M(e),t instanceof _?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var n;if(this.else=null===(n=this.else)||void 0===n?void 0:n.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=I(this.condition,e,t),this}get names(){const e=super.names;return C(e,this.condition),this.else&&R(e,this.else.names),e}}_.kind="if";class b extends m{}b.kind="for";class x extends b{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=I(this.iteration,e,t),this}get names(){return R(super.names,this.iteration.names)}}class E extends b{constructor(e,t,n,r){super(),this.varKind=e,this.name=t,this.from=n,this.to=r}render(e){const t=e.es5?i.varKinds.var:this.varKind,{name:n,from:r,to:o}=this;return`for(${t} ${n}=${r}; ${n}<${o}; ${n}++)`+super.render(e)}get names(){const e=C(super.names,this.from);return C(e,this.to)}}class S extends b{constructor(e,t,n,r){super(),this.loop=e,this.varKind=t,this.name=n,this.iterable=r}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=I(this.iterable,e,t),this}get names(){return R(super.names,this.iterable.names)}}class T extends m{constructor(e,t,n){super(),this.name=e,this.args=t,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}T.kind="func";class w extends y{render(e){return"return "+super.render(e)}}w.kind="return";class A extends m{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var n,r;return super.optimizeNames(e,t),null===(n=this.catch)||void 0===n||n.optimizeNames(e,t),null===(r=this.finally)||void 0===r||r.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&R(e,this.catch.names),this.finally&&R(e,this.finally.names),e}}class P extends m{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}P.kind="catch";class O extends m{render(e){return"finally"+super.render(e)}}function R(e,t){for(const n in t)e[n]=(e[n]||0)+(t[n]||0);return e}function C(e,t){return t instanceof r._CodeOrName?R(e,t.names):e}function I(e,t,n){return e instanceof r.Name?o(e):(i=e)instanceof r._Code&&i._items.some((e=>e instanceof r.Name&&1===t[e.str]&&void 0!==n[e.str]))?new r._Code(e._items.reduce(((e,t)=>(t instanceof r.Name&&(t=o(t)),t instanceof r._Code?e.push(...t._items):e.push(t),e)),[])):e;var i;function o(e){const r=n[e.str];return void 0===r||1!==t[e.str]?e:(delete t[e.str],r)}}function N(e,t){for(const n in t)e[n]=(e[n]||0)-(t[n]||0)}function M(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:r._`!${F(e)}`}O.kind="finally",t.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new i.Scope({parent:e}),this._nodes=[new g]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const n=this._extScope.value(e,t);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,n,r){const i=this._scope.toName(t);return void 0!==n&&r&&(this._constants[i.str]=n),this._leafNode(new l(e,i,n)),i}const(e,t,n){return this._def(i.varKinds.const,e,t,n)}let(e,t,n){return this._def(i.varKinds.let,e,t,n)}var(e,t,n){return this._def(i.varKinds.var,e,t,n)}assign(e,t,n){return this._leafNode(new u(e,t,n))}add(e,n){return this._leafNode(new c(e,t.operators.ADD,n))}code(e){return"function"==typeof e?e():e!==r.nil&&this._leafNode(new p(e)),this}object(...e){const t=["{"];for(const[n,i]of e)t.length>1&&t.push(","),t.push(n),(n!==i||this.opts.es5)&&(t.push(":"),(0,r.addCodeArg)(t,i));return t.push("}"),new r._Code(t)}if(e,t,n){if(this._blockNode(new _(e)),t&&n)this.code(t).else().code(n).endIf();else if(t)this.code(t).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new _(e))}else(){return this._elseNode(new v)}endIf(){return this._endBlockNode(_,v)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new x(e),t)}forRange(e,t,n,r,o=(this.opts.es5?i.varKinds.var:i.varKinds.let)){const a=this._scope.toName(e);return this._for(new E(o,a,t,n),(()=>r(a)))}forOf(e,t,n,o=i.varKinds.const){const a=this._scope.toName(e);if(this.opts.es5){const e=t instanceof r.Name?t:this.var("_arr",t);return this.forRange("_i",0,r._`${e}.length`,(t=>{this.var(a,r._`${e}[${t}]`),n(a)}))}return this._for(new S("of",o,a,t),(()=>n(a)))}forIn(e,t,n,o=(this.opts.es5?i.varKinds.var:i.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,r._`Object.keys(${t})`,n);const a=this._scope.toName(e);return this._for(new S("in",o,a,t),(()=>n(a)))}endFor(){return this._endBlockNode(b)}label(e){return this._leafNode(new h(e))}break(e){return this._leafNode(new d(e))}return(e){const t=new w;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(w)}try(e,t,n){if(!t&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');const r=new A;if(this._blockNode(r),this.code(e),t){const e=this.name("e");this._currNode=r.catch=new P(e),t(e)}return n&&(this._currNode=r.finally=new O,this.code(n)),this._endBlockNode(P,O)}throw(e){return this._leafNode(new f(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const n=this._nodes.length-t;if(n<0||void 0!==e&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=t,this}func(e,t=r.nil,n,i){return this._blockNode(new T(e,t,n)),i&&this.code(i).endFunc(),this}endFunc(){return this._endBlockNode(T)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const n=this._currNode;if(n instanceof e||t&&n instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof _))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},t.not=M;const k=L(t.operators.AND);t.and=function(...e){return e.reduce(k)};const D=L(t.operators.OR);function L(e){return(t,n)=>t===r.nil?n:n===r.nil?t:r._`${F(t)} ${e} ${F(n)}`}function F(e){return e instanceof r.Name?e:r._`(${e})`}t.or=function(...e){return e.reduce(D)}},6329:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const r=n(969);class i extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var o;!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(o=t.UsedValueState||(t.UsedValueState={})),t.varKinds={const:new r.Name("const"),let:new r.Name("let"),var:new r.Name("var")};class a{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof r.Name?e:this.name(e)}name(e){return new r.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,n;if((null===(n=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===n?void 0:n.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}t.Scope=a;class s extends r.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:t,itemIndex:n}){this.value=e,this.scopePath=r._`.${new r.Name(t)}[${n}]`}}t.ValueScopeName=s;const l=r._`\n`;t.ValueScope=class extends a{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?l:r.nil}}get(){return this._scope}name(e){return new s(e,this._newName(e))}value(e,t){var n;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const r=this.toName(e),{prefix:i}=r,o=null!==(n=t.key)&&void 0!==n?n:t.ref;let a=this._values[i];if(a){const e=a.get(o);if(e)return e}else a=this._values[i]=new Map;a.set(o,r);const s=this._scope[i]||(this._scope[i]=[]),l=s.length;return s[l]=t.ref,r.setValue(t,{property:i,itemIndex:l}),r}getValue(e,t){const n=this._values[e];if(n)return n.get(t)}scopeRefs(e,t=this._values){return this._reduceValues(t,(t=>{if(void 0===t.scopePath)throw new Error(`CodeGen: name "${t}" has no value`);return r._`${e}${t.scopePath}`}))}scopeCode(e=this._values,t,n){return this._reduceValues(e,(e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code}),t,n)}_reduceValues(e,n,a={},s){let l=r.nil;for(const u in e){const c=e[u];if(!c)continue;const h=a[u]=a[u]||new Map;c.forEach((e=>{if(h.has(e))return;h.set(e,o.Started);let a=n(e);if(a){const n=this.opts.es5?t.varKinds.var:t.varKinds.const;l=r._`${l}${n} ${e} = ${a};${this.opts._n}`}else{if(!(a=null==s?void 0:s(e)))throw new i(e);l=r._`${l}${a}${this.opts._n}`}h.set(e,o.Completed)}))}return l}}},3029:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const r=n(8292),i=n(269),o=n(9903);function a(e,t){const n=e.const("err",t);e.if(r._`${o.default.vErrors} === null`,(()=>e.assign(o.default.vErrors,r._`[${n}]`)),r._`${o.default.vErrors}.push(${n})`),e.code(r._`${o.default.errors}++`)}function s(e,t){const{gen:n,validateName:i,schemaEnv:o}=e;o.$async?n.throw(r._`new ${e.ValidationError}(${t})`):(n.assign(r._`${i}.errors`,t),n.return(!1))}t.keywordError={message:({keyword:e})=>r.str`must pass "${e}" keyword validation`},t.keyword$DataError={message:({keyword:e,schemaType:t})=>t?r.str`"${e}" keyword must be ${t} ($data)`:r.str`"${e}" keyword is invalid ($data)`},t.reportError=function(e,n=t.keywordError,i,o){const{it:l}=e,{gen:c,compositeRule:h,allErrors:d}=l,f=u(e,n,i);(null!=o?o:h||d)?a(c,f):s(l,r._`[${f}]`)},t.reportExtraError=function(e,n=t.keywordError,r){const{it:i}=e,{gen:l,compositeRule:c,allErrors:h}=i;a(l,u(e,n,r)),c||h||s(i,o.default.vErrors)},t.resetErrorsCount=function(e,t){e.assign(o.default.errors,t),e.if(r._`${o.default.vErrors} !== null`,(()=>e.if(t,(()=>e.assign(r._`${o.default.vErrors}.length`,t)),(()=>e.assign(o.default.vErrors,null)))))},t.extendErrors=function({gen:e,keyword:t,schemaValue:n,data:i,errsCount:a,it:s}){if(void 0===a)throw new Error("ajv implementation error");const l=e.name("err");e.forRange("i",a,o.default.errors,(a=>{e.const(l,r._`${o.default.vErrors}[${a}]`),e.if(r._`${l}.instancePath === undefined`,(()=>e.assign(r._`${l}.instancePath`,(0,r.strConcat)(o.default.instancePath,s.errorPath)))),e.assign(r._`${l}.schemaPath`,r.str`${s.errSchemaPath}/${t}`),s.opts.verbose&&(e.assign(r._`${l}.schema`,n),e.assign(r._`${l}.data`,i))}))};const l={keyword:new r.Name("keyword"),schemaPath:new r.Name("schemaPath"),params:new r.Name("params"),propertyName:new r.Name("propertyName"),message:new r.Name("message"),schema:new r.Name("schema"),parentSchema:new r.Name("parentSchema")};function u(e,t,n){const{createErrors:i}=e.it;return!1===i?r._`{}`:function(e,t,n={}){const{gen:i,it:a}=e,s=[c(a,n),h(e,n)];return function(e,{params:t,message:n},i){const{keyword:a,data:s,schemaValue:u,it:c}=e,{opts:h,propertyName:d,topSchemaRef:f,schemaPath:p}=c;i.push([l.keyword,a],[l.params,"function"==typeof t?t(e):t||r._`{}`]),h.messages&&i.push([l.message,"function"==typeof n?n(e):n]),h.verbose&&i.push([l.schema,u],[l.parentSchema,r._`${f}${p}`],[o.default.data,s]),d&&i.push([l.propertyName,d])}(e,t,s),i.object(...s)}(e,t,n)}function c({errorPath:e},{instancePath:t}){const n=t?r.str`${e}${(0,i.getErrorPath)(t,i.Type.Str)}`:e;return[o.default.instancePath,(0,r.strConcat)(o.default.instancePath,n)]}function h({keyword:e,it:{errSchemaPath:t}},{schemaPath:n,parentSchema:o}){let a=o?t:r.str`${t}/${e}`;return n&&(a=r.str`${a}${(0,i.getErrorPath)(n,i.Type.Str)}`),[l.schemaPath,a]}},1023:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSchema=t.getCompilingSchema=t.resolveRef=t.compileSchema=t.SchemaEnv=void 0;const r=n(8292),i=n(7169),o=n(9903),a=n(2722),s=n(269),l=n(703);class u{constructor(e){var t;let n;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:(0,a.normalizeId)(null==n?void 0:n[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==n?void 0:n.$async,this.refs={}}}function c(e){const t=d.call(this,e);if(t)return t;const n=(0,a.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:s,lines:u}=this.opts.code,{ownProperties:c}=this.opts,h=new r.CodeGen(this.scope,{es5:s,lines:u,ownProperties:c});let f;e.$async&&(f=h.scopeValue("Error",{ref:i.default,code:r._`require("ajv/dist/runtime/validation_error").default`}));const p=h.scopeName("validate");e.validateName=p;const y={gen:h,allErrors:this.opts.allErrors,data:o.default.data,parentData:o.default.parentData,parentDataProperty:o.default.parentDataProperty,dataNames:[o.default.data],dataPathArr:[r.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:h.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,r.stringify)(e.schema)}:{ref:e.schema}),validateName:p,ValidationError:f,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:r.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:r._`""`,opts:this.opts,self:this};let m;try{this._compilations.add(e),(0,l.validateFunctionCode)(y),h.optimize(this.opts.code.optimize);const t=h.toString();m=`${h.scopeRefs(o.default.scope)}return ${t}`,this.opts.code.process&&(m=this.opts.code.process(m,e));const n=new Function(`${o.default.self}`,`${o.default.scope}`,m)(this,this.scope.get());if(this.scope.value(p,{ref:n}),n.errors=null,n.schema=e.schema,n.schemaEnv=e,e.$async&&(n.$async=!0),!0===this.opts.code.source&&(n.source={validateName:p,validateCode:t,scopeValues:h._values}),this.opts.unevaluated){const{props:e,items:t}=y;n.evaluated={props:e instanceof r.Name?void 0:e,items:t instanceof r.Name?void 0:t,dynamicProps:e instanceof r.Name,dynamicItems:t instanceof r.Name},n.source&&(n.source.evaluated=(0,r.stringify)(n.evaluated))}return e.validate=n,e}catch(t){throw delete e.validate,delete e.validateName,m&&this.logger.error("Error compiling schema, function code:",m),t}finally{this._compilations.delete(e)}}function h(e){return(0,a.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:c.call(this,e)}function d(e){for(const r of this._compilations)if(n=e,(t=r).schema===n.schema&&t.root===n.root&&t.baseId===n.baseId)return r;var t,n}function f(e,t){let n;for(;"string"==typeof(n=this.refs[t]);)t=n;return n||this.schemas[t]||p.call(this,e,t)}function p(e,t){const n=this.opts.uriResolver.parse(t),r=(0,a._getFullPath)(this.opts.uriResolver,n);let i=(0,a.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return m.call(this,n,e);const o=(0,a.normalizeId)(r),s=this.refs[o]||this.schemas[o];if("string"==typeof s){const t=p.call(this,e,s);if("object"!=typeof(null==t?void 0:t.schema))return;return m.call(this,n,t)}if("object"==typeof(null==s?void 0:s.schema)){if(s.validate||c.call(this,s),o===(0,a.normalizeId)(t)){const{schema:t}=s,{schemaId:n}=this.opts,r=t[n];return r&&(i=(0,a.resolveUrl)(this.opts.uriResolver,i,r)),new u({schema:t,schemaId:n,root:e,baseId:i})}return m.call(this,n,s)}}t.SchemaEnv=u,t.compileSchema=c,t.resolveRef=function(e,t,n){var r;n=(0,a.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let o=f.call(this,e,n);if(void 0===o){const i=null===(r=e.localRefs)||void 0===r?void 0:r[n],{schemaId:a}=this.opts;i&&(o=new u({schema:i,schemaId:a,root:e,baseId:t}))}return void 0!==o?e.refs[n]=h.call(this,o):void 0},t.getCompilingSchema=d,t.resolveSchema=p;const y=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function m(e,{baseId:t,schema:n,root:r}){var i;if("/"!==(null===(i=e.fragment)||void 0===i?void 0:i[0]))return;for(const r of e.fragment.slice(1).split("/")){if("boolean"==typeof n)return;const e=n[(0,s.unescapeFragment)(r)];if(void 0===e)return;const i="object"==typeof(n=e)&&n[this.opts.schemaId];!y.has(r)&&i&&(t=(0,a.resolveUrl)(this.opts.uriResolver,t,i))}let o;if("boolean"!=typeof n&&n.$ref&&!(0,s.schemaHasRulesButRef)(n,this.RULES)){const e=(0,a.resolveUrl)(this.opts.uriResolver,t,n.$ref);o=p.call(this,r,e)}const{schemaId:l}=this.opts;return o=o||new u({schema:n,schemaId:l,root:r,baseId:t}),o.schema!==o.root.schema?o:void 0}},9903:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8292),i={data:new r.Name("data"),valCxt:new r.Name("valCxt"),instancePath:new r.Name("instancePath"),parentData:new r.Name("parentData"),parentDataProperty:new r.Name("parentDataProperty"),rootData:new r.Name("rootData"),dynamicAnchors:new r.Name("dynamicAnchors"),vErrors:new r.Name("vErrors"),errors:new r.Name("errors"),this:new r.Name("this"),self:new r.Name("self"),scope:new r.Name("scope"),json:new r.Name("json"),jsonPos:new r.Name("jsonPos"),jsonLen:new r.Name("jsonLen"),jsonPart:new r.Name("jsonPart")};t.default=i},5588:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2722);class i extends Error{constructor(e,t,n,i){super(i||`can't resolve reference ${n} from id ${t}`),this.missingRef=(0,r.resolveUrl)(e,t,n),this.missingSchema=(0,r.normalizeId)((0,r.getFullPath)(e,this.missingRef))}}t.default=i},2722:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSchemaRefs=t.resolveUrl=t.normalizeId=t._getFullPath=t.getFullPath=t.inlineRef=void 0;const r=n(269),i=n(6471),o=n(1550),a=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);t.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!l(e):!!t&&u(e)<=t)};const s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function l(e){for(const t in e){if(s.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(l))return!0;if("object"==typeof n&&l(n))return!0}return!1}function u(e){let t=0;for(const n in e){if("$ref"===n)return 1/0;if(t++,!a.has(n)&&("object"==typeof e[n]&&(0,r.eachItem)(e[n],(e=>t+=u(e))),t===1/0))return 1/0}return t}function c(e,t="",n){!1!==n&&(t=f(t));const r=e.parse(t);return h(e,r)}function h(e,t){return e.serialize(t).split("#")[0]+"#"}t.getFullPath=c,t._getFullPath=h;const d=/#\/?$/;function f(e){return e?e.replace(d,""):""}t.normalizeId=f,t.resolveUrl=function(e,t,n){return n=f(n),e.resolve(t,n)};const p=/^[a-z_][-a-z0-9._]*$/i;t.getSchemaRefs=function(e,t){if("boolean"==typeof e)return{};const{schemaId:n,uriResolver:r}=this.opts,a=f(e[n]||t),s={"":a},l=c(r,a,!1),u={},h=new Set;return o(e,{allKeys:!0},((e,t,r,i)=>{if(void 0===i)return;const o=l+t;let a=s[i];function c(t){const n=this.opts.uriResolver.resolve;if(t=f(a?n(a,t):t),h.has(t))throw y(t);h.add(t);let r=this.refs[t];return"string"==typeof r&&(r=this.refs[r]),"object"==typeof r?d(e,r.schema,t):t!==f(o)&&("#"===t[0]?(d(e,u[t],t),u[t]=e):this.refs[t]=o),t}function m(e){if("string"==typeof e){if(!p.test(e))throw new Error(`invalid anchor "${e}"`);c.call(this,`#${e}`)}}"string"==typeof e[n]&&(a=c.call(this,e[n])),m.call(this,e.$anchor),m.call(this,e.$dynamicAnchor),s[t]=a})),u;function d(e,t,n){if(void 0!==t&&!i(e,t))throw y(n)}function y(e){return new Error(`reference "${e}" resolves to more than one schema`)}}},6254:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRules=t.isJSONType=void 0;const n=new Set(["string","number","integer","boolean","null","object","array"]);t.isJSONType=function(e){return"string"==typeof e&&n.has(e)},t.getRules=function(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}},269:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.getErrorPath=t.Type=t.useFunc=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;const r=n(8292),i=n(969);function o(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema)return;if("boolean"==typeof t)return;const i=r.RULES.keywords;for(const n in t)i[n]||p(e,`unknown keyword: "${n}"`)}function a(e,t){if("boolean"==typeof e)return!e;for(const n in e)if(t[n])return!0;return!1}function s(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function l(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function u({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:i}){return(o,a,s,l)=>{const u=void 0===s?a:s instanceof r.Name?(a instanceof r.Name?e(o,a,s):t(o,a,s),s):a instanceof r.Name?(t(o,s,a),a):n(a,s);return l!==r.Name||u instanceof r.Name?u:i(o,u)}}function c(e,t){if(!0===t)return e.var("props",!0);const n=e.var("props",r._`{}`);return void 0!==t&&h(e,n,t),n}function h(e,t,n){Object.keys(n).forEach((n=>e.assign(r._`${t}${(0,r.getProperty)(n)}`,!0)))}t.toHash=function(e){const t={};for(const n of e)t[n]=!0;return t},t.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(o(e,t),!a(t,e.self.RULES.all))},t.checkUnknownRules=o,t.schemaHasRules=a,t.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const n in e)if("$ref"!==n&&t.all[n])return!0;return!1},t.schemaRefOrVal=function({topSchemaRef:e,schemaPath:t},n,i,o){if(!o){if("number"==typeof n||"boolean"==typeof n)return n;if("string"==typeof n)return r._`${n}`}return r._`${e}${t}${(0,r.getProperty)(i)}`},t.unescapeFragment=function(e){return l(decodeURIComponent(e))},t.escapeFragment=function(e){return encodeURIComponent(s(e))},t.escapeJsonPointer=s,t.unescapeJsonPointer=l,t.eachItem=function(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)},t.mergeEvaluated={props:u({mergeNames:(e,t,n)=>e.if(r._`${n} !== true && ${t} !== undefined`,(()=>{e.if(r._`${t} === true`,(()=>e.assign(n,!0)),(()=>e.assign(n,r._`${n} || {}`).code(r._`Object.assign(${n}, ${t})`)))})),mergeToName:(e,t,n)=>e.if(r._`${n} !== true`,(()=>{!0===t?e.assign(n,!0):(e.assign(n,r._`${n} || {}`),h(e,n,t))})),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:c}),items:u({mergeNames:(e,t,n)=>e.if(r._`${n} !== true && ${t} !== undefined`,(()=>e.assign(n,r._`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`))),mergeToName:(e,t,n)=>e.if(r._`${n} !== true`,(()=>e.assign(n,!0===t||r._`${n} > ${t} ? ${n} : ${t}`))),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},t.evaluatedPropsToName=c,t.setEvaluated=h;const d={};var f;function p(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,!0===n)throw new Error(t);e.self.logger.warn(t)}}t.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:d[t.code]||(d[t.code]=new i._Code(t.code))})},function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(f=t.Type||(t.Type={})),t.getErrorPath=function(e,t,n){if(e instanceof r.Name){const i=t===f.Num;return n?i?r._`"[" + ${e} + "]"`:r._`"['" + ${e} + "']"`:i?r._`"/" + ${e}`:r._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,r.getProperty)(e).toString():"/"+s(e)},t.checkStrictMode=p},1775:(e,t)=>{"use strict";function n(e,t){return t.rules.some((t=>r(e,t)))}function r(e,t){var n;return void 0!==e[t.keyword]||(null===(n=t.definition.implements)||void 0===n?void 0:n.some((t=>void 0!==e[t])))}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUseRule=t.shouldUseGroup=t.schemaHasRulesForType=void 0,t.schemaHasRulesForType=function({schema:e,self:t},r){const i=t.RULES.types[r];return i&&!0!==i&&n(e,i)},t.shouldUseGroup=n,t.shouldUseRule=r},1555:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.boolOrEmptySchema=t.topBoolOrEmptySchema=void 0;const r=n(3029),i=n(8292),o=n(9903),a={message:"boolean schema is false"};function s(e,t){const{gen:n,data:i}=e,o={gen:n,keyword:"false schema",data:i,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,r.reportError)(o,a,void 0,t)}t.topBoolOrEmptySchema=function(e){const{gen:t,schema:n,validateName:r}=e;!1===n?s(e,!1):"object"==typeof n&&!0===n.$async?t.return(o.default.data):(t.assign(i._`${r}.errors`,null),t.return(!0))},t.boolOrEmptySchema=function(e,t){const{gen:n,schema:r}=e;!1===r?(n.var(t,!1),s(e)):n.var(t,!0)}},335:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;const r=n(6254),i=n(1775),o=n(3029),a=n(8292),s=n(269);var l;function u(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(r.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(l=t.DataType||(t.DataType={})),t.getSchemaTypes=function(e){const t=u(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},t.getJSONTypes=u,t.coerceAndCheckDataType=function(e,t){const{gen:n,data:r,opts:o}=e,s=function(e,t){return t?e.filter((e=>c.has(e)||"array"===t&&"array"===e)):[]}(t,o.coerceTypes),u=t.length>0&&!(0===s.length&&1===t.length&&(0,i.schemaHasRulesForType)(e,t[0]));if(u){const i=d(t,r,o.strictNumbers,l.Wrong);n.if(i,(()=>{s.length?function(e,t,n){const{gen:r,data:i,opts:o}=e,s=r.let("dataType",a._`typeof ${i}`),l=r.let("coerced",a._`undefined`);"array"===o.coerceTypes&&r.if(a._`${s} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,(()=>r.assign(i,a._`${i}[0]`).assign(s,a._`typeof ${i}`).if(d(t,i,o.strictNumbers),(()=>r.assign(l,i))))),r.if(a._`${l} !== undefined`);for(const e of n)(c.has(e)||"array"===e&&"array"===o.coerceTypes)&&u(e);function u(e){switch(e){case"string":return void r.elseIf(a._`${s} == "number" || ${s} == "boolean"`).assign(l,a._`"" + ${i}`).elseIf(a._`${i} === null`).assign(l,a._`""`);case"number":return void r.elseIf(a._`${s} == "boolean" || ${i} === null
              || (${s} == "string" && ${i} && ${i} == +${i})`).assign(l,a._`+${i}`);case"integer":return void r.elseIf(a._`${s} === "boolean" || ${i} === null
              || (${s} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(l,a._`+${i}`);case"boolean":return void r.elseIf(a._`${i} === "false" || ${i} === 0 || ${i} === null`).assign(l,!1).elseIf(a._`${i} === "true" || ${i} === 1`).assign(l,!0);case"null":return r.elseIf(a._`${i} === "" || ${i} === 0 || ${i} === false`),void r.assign(l,null);case"array":r.elseIf(a._`${s} === "string" || ${s} === "number"
              || ${s} === "boolean" || ${i} === null`).assign(l,a._`[${i}]`)}}r.else(),p(e),r.endIf(),r.if(a._`${l} !== undefined`,(()=>{r.assign(i,l),function({gen:e,parentData:t,parentDataProperty:n},r){e.if(a._`${t} !== undefined`,(()=>e.assign(a._`${t}[${n}]`,r)))}(e,l)}))}(e,t,s):p(e)}))}return u};const c=new Set(["string","number","integer","boolean","null"]);function h(e,t,n,r=l.Correct){const i=r===l.Correct?a.operators.EQ:a.operators.NEQ;let o;switch(e){case"null":return a._`${t} ${i} null`;case"array":o=a._`Array.isArray(${t})`;break;case"object":o=a._`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=s(a._`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=s();break;default:return a._`typeof ${t} ${i} ${e}`}return r===l.Correct?o:(0,a.not)(o);function s(e=a.nil){return(0,a.and)(a._`typeof ${t} == "number"`,e,n?a._`isFinite(${t})`:a.nil)}}function d(e,t,n,r){if(1===e.length)return h(e[0],t,n,r);let i;const o=(0,s.toHash)(e);if(o.array&&o.object){const e=a._`typeof ${t} != "object"`;i=o.null?e:a._`!${t} || ${e}`,delete o.null,delete o.array,delete o.object}else i=a.nil;o.number&&delete o.integer;for(const e in o)i=(0,a.and)(i,h(e,t,n,r));return i}t.checkDataType=h,t.checkDataTypes=d;const f={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?a._`{type: ${e}}`:a._`{type: ${t}}`};function p(e){const t=function(e){const{gen:t,data:n,schema:r}=e,i=(0,s.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}(e);(0,o.reportError)(t,f)}t.reportTypeError=p},6716:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assignDefaults=void 0;const r=n(8292),i=n(269);function o(e,t,n){const{gen:o,compositeRule:a,data:s,opts:l}=e;if(void 0===n)return;const u=r._`${s}${(0,r.getProperty)(t)}`;if(a)return void(0,i.checkStrictMode)(e,`default is ignored for: ${u}`);let c=r._`${u} === undefined`;"empty"===l.useDefaults&&(c=r._`${c} || ${u} === null || ${u} === ""`),o.if(c,r._`${u} = ${(0,r.stringify)(n)}`)}t.assignDefaults=function(e,t){const{properties:n,items:r}=e.schema;if("object"===t&&n)for(const t in n)o(e,t,n[t].default);else"array"===t&&Array.isArray(r)&&r.forEach(((t,n)=>o(e,n,t.default)))}},703:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getData=t.KeywordCxt=t.validateFunctionCode=void 0;const r=n(1555),i=n(335),o=n(1775),a=n(335),s=n(6716),l=n(5443),u=n(8581),c=n(8292),h=n(9903),d=n(2722),f=n(269),p=n(3029);function y({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},o){i.code.es5?e.func(t,c._`${h.default.data}, ${h.default.valCxt}`,r.$async,(()=>{e.code(c._`"use strict"; ${m(n,i)}`),function(e,t){e.if(h.default.valCxt,(()=>{e.var(h.default.instancePath,c._`${h.default.valCxt}.${h.default.instancePath}`),e.var(h.default.parentData,c._`${h.default.valCxt}.${h.default.parentData}`),e.var(h.default.parentDataProperty,c._`${h.default.valCxt}.${h.default.parentDataProperty}`),e.var(h.default.rootData,c._`${h.default.valCxt}.${h.default.rootData}`),t.dynamicRef&&e.var(h.default.dynamicAnchors,c._`${h.default.valCxt}.${h.default.dynamicAnchors}`)}),(()=>{e.var(h.default.instancePath,c._`""`),e.var(h.default.parentData,c._`undefined`),e.var(h.default.parentDataProperty,c._`undefined`),e.var(h.default.rootData,h.default.data),t.dynamicRef&&e.var(h.default.dynamicAnchors,c._`{}`)}))}(e,i),e.code(o)})):e.func(t,c._`${h.default.data}, ${function(e){return c._`{${h.default.instancePath}="", ${h.default.parentData}, ${h.default.parentDataProperty}, ${h.default.rootData}=${h.default.data}${e.dynamicRef?c._`, ${h.default.dynamicAnchors}={}`:c.nil}}={}`}(i)}`,r.$async,(()=>e.code(m(n,i)).code(o)))}function m(e,t){const n="object"==typeof e&&e[t.schemaId];return n&&(t.code.source||t.code.process)?c._`/*# sourceURL=${n} */`:c.nil}function g({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function v(e){return"boolean"!=typeof e.schema}function _(e){(0,f.checkUnknownRules)(e),function(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,f.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}(e)}function b(e,t){if(e.opts.jtd)return E(e,[],!1,t);const n=(0,i.getSchemaTypes)(e.schema);E(e,n,!(0,i.coerceAndCheckDataType)(e,n),t)}function x({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const o=n.$comment;if(!0===i.$comment)e.code(c._`${h.default.self}.logger.log(${o})`);else if("function"==typeof i.$comment){const n=c.str`${r}/$comment`,i=e.scopeValue("root",{ref:t.root});e.code(c._`${h.default.self}.opts.$comment(${o}, ${n}, ${i}.schema)`)}}function E(e,t,n,r){const{gen:i,schema:s,data:l,allErrors:u,opts:d,self:p}=e,{RULES:y}=p;function m(f){(0,o.shouldUseGroup)(s,f)&&(f.type?(i.if((0,a.checkDataType)(f.type,l,d.strictNumbers)),S(e,f),1===t.length&&t[0]===f.type&&n&&(i.else(),(0,a.reportTypeError)(e)),i.endIf()):S(e,f),u||i.if(c._`${h.default.errors} === ${r||0}`))}!s.$ref||!d.ignoreKeywordsWithRef&&(0,f.schemaHasRulesButRef)(s,y)?(d.jtd||function(e,t){!e.schemaEnv.meta&&e.opts.strictTypes&&(function(e,t){t.length&&(e.dataTypes.length?(t.forEach((t=>{T(e.dataTypes,t)||w(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)})),e.dataTypes=e.dataTypes.filter((e=>T(t,e)))):e.dataTypes=t)}(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&w(e,"use allowUnionTypes to allow union type keyword")}(e,t),function(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if("object"==typeof i&&(0,o.shouldUseRule)(e.schema,i)){const{type:n}=i.definition;n.length&&!n.some((e=>{return r=e,(n=t).includes(r)||"number"===r&&n.includes("integer");var n,r}))&&w(e,`missing type "${n.join(",")}" for keyword "${r}"`)}}}(e,e.dataTypes))}(e,t),i.block((()=>{for(const e of y.rules)m(e);m(y.post)}))):i.block((()=>P(e,"$ref",y.all.$ref.definition)))}function S(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,s.assignDefaults)(e,t.type),n.block((()=>{for(const n of t.rules)(0,o.shouldUseRule)(r,n)&&P(e,n.keyword,n.definition,t.type)}))}function T(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function w(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,(0,f.checkStrictMode)(e,t,e.opts.strictTypes)}t.validateFunctionCode=function(e){v(e)&&(_(e),g(e))?function(e){const{schema:t,opts:n,gen:r}=e;y(e,(()=>{n.$comment&&t.$comment&&x(e),function(e){const{schema:t,opts:n}=e;void 0!==t.default&&n.useDefaults&&n.strictSchema&&(0,f.checkStrictMode)(e,"default is ignored in the schema root")}(e),r.let(h.default.vErrors,null),r.let(h.default.errors,0),n.unevaluated&&function(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",c._`${n}.evaluated`),t.if(c._`${e.evaluated}.dynamicProps`,(()=>t.assign(c._`${e.evaluated}.props`,c._`undefined`))),t.if(c._`${e.evaluated}.dynamicItems`,(()=>t.assign(c._`${e.evaluated}.items`,c._`undefined`)))}(e),b(e),function(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:o}=e;n.$async?t.if(c._`${h.default.errors} === 0`,(()=>t.return(h.default.data)),(()=>t.throw(c._`new ${i}(${h.default.vErrors})`))):(t.assign(c._`${r}.errors`,h.default.vErrors),o.unevaluated&&function({gen:e,evaluated:t,props:n,items:r}){n instanceof c.Name&&e.assign(c._`${t}.props`,n),r instanceof c.Name&&e.assign(c._`${t}.items`,r)}(e),t.return(c._`${h.default.errors} === 0`))}(e)}))}(e):y(e,(()=>(0,r.topBoolOrEmptySchema)(e)))};class A{constructor(e,t,n){if((0,l.validateKeywordUsage)(e,t,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,f.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",C(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,l.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",h.default.errors))}result(e,t,n){this.failResult((0,c.not)(e),t,n)}failResult(e,t,n){this.gen.if(e),n?n():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,c.not)(e),void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail(c._`${t} !== undefined && (${(0,c.or)(this.invalid$data(),e)})`)}error(e,t,n){if(t)return this.setParams(t),this._error(e,n),void this.setParams({});this._error(e,n)}_error(e,t){(e?p.reportExtraError:p.reportError)(this,this.def.error,t)}$dataError(){(0,p.reportError)(this,this.def.$dataError||p.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,p.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,n=c.nil){this.gen.block((()=>{this.check$data(e,n),t()}))}check$data(e=c.nil,t=c.nil){if(!this.$data)return;const{gen:n,schemaCode:r,schemaType:i,def:o}=this;n.if((0,c.or)(c._`${r} === undefined`,t)),e!==c.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==c.nil&&n.assign(e,!1)),n.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:n,def:r,it:i}=this;return(0,c.or)(function(){if(n.length){if(!(t instanceof c.Name))throw new Error("ajv implementation error");const e=Array.isArray(n)?n:[n];return c._`${(0,a.checkDataTypes)(e,t,i.opts.strictNumbers,a.DataType.Wrong)}`}return c.nil}(),function(){if(r.validateSchema){const n=e.scopeValue("validate$data",{ref:r.validateSchema});return c._`!${n}(${t})`}return c.nil}())}subschema(e,t){const n=(0,u.getSubschema)(this.it,e);(0,u.extendSubschemaData)(n,this.it,e),(0,u.extendSubschemaMode)(n,e);const i={...this.it,...n,items:void 0,props:void 0};return function(e,t){v(e)&&(_(e),g(e))?function(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&x(e),function(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,d.resolveUrl)(e.opts.uriResolver,e.baseId,t))}(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);const o=r.const("_errs",h.default.errors);b(e,o),r.var(t,c._`${o} === ${h.default.errors}`)}(e,t):(0,r.boolOrEmptySchema)(e,t)}(i,t),i}mergeEvaluated(e,t){const{it:n,gen:r}=this;n.opts.unevaluated&&(!0!==n.props&&void 0!==e.props&&(n.props=f.mergeEvaluated.props(r,e.props,n.props,t)),!0!==n.items&&void 0!==e.items&&(n.items=f.mergeEvaluated.items(r,e.items,n.items,t)))}mergeValidEvaluated(e,t){const{it:n,gen:r}=this;if(n.opts.unevaluated&&(!0!==n.props||!0!==n.items))return r.if(t,(()=>this.mergeEvaluated(e,c.Name))),!0}}function P(e,t,n,r){const i=new A(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,l.funcKeywordCode)(i,n):"macro"in n?(0,l.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,l.funcKeywordCode)(i,n)}t.KeywordCxt=A;const O=/^\/(?:[^~]|~0|~1)*$/,R=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function C(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,o;if(""===e)return h.default.rootData;if("/"===e[0]){if(!O.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,o=h.default.rootData}else{const a=R.exec(e);if(!a)throw new Error(`Invalid JSON-pointer: ${e}`);const s=+a[1];if(i=a[2],"#"===i){if(s>=t)throw new Error(l("property/index",s));return r[t-s]}if(s>t)throw new Error(l("data",s));if(o=n[t-s],!i)return o}let a=o;const s=i.split("/");for(const e of s)e&&(o=c._`${o}${(0,c.getProperty)((0,f.unescapeJsonPointer)(e))}`,a=c._`${a} && ${o}`);return a;function l(e,n){return`Cannot access ${e} ${n} levels up, current level is ${t}`}}t.getData=C},5443:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateKeywordUsage=t.validSchemaType=t.funcKeywordCode=t.macroKeywordCode=void 0;const r=n(8292),i=n(9903),o=n(2309),a=n(3029);function s(e){const{gen:t,data:n,it:i}=e;t.if(i.parentData,(()=>t.assign(n,r._`${i.parentData}[${i.parentDataProperty}]`)))}function l(e,t,n){if(void 0===n)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof n?{ref:n}:{ref:n,code:(0,r.stringify)(n)})}t.macroKeywordCode=function(e,t){const{gen:n,keyword:i,schema:o,parentSchema:a,it:s}=e,u=t.macro.call(s.self,o,a,s),c=l(n,i,u);!1!==s.opts.validateSchema&&s.self.validateSchema(u,!0);const h=n.name("valid");e.subschema({schema:u,schemaPath:r.nil,errSchemaPath:`${s.errSchemaPath}/${i}`,topSchemaRef:c,compositeRule:!0},h),e.pass(h,(()=>e.error(!0)))},t.funcKeywordCode=function(e,t){var n;const{gen:u,keyword:c,schema:h,parentSchema:d,$data:f,it:p}=e;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}(p,t);const y=!f&&t.compile?t.compile.call(p.self,h,d,p):t.validate,m=l(u,c,y),g=u.let("valid");function v(n=(t.async?r._`await `:r.nil)){const a=p.opts.passContext?i.default.this:i.default.self,s=!("compile"in t&&!f||!1===t.schema);u.assign(g,r._`${n}${(0,o.callValidateCode)(e,m,a,s)}`,t.modifying)}function _(e){var n;u.if((0,r.not)(null!==(n=t.valid)&&void 0!==n?n:g),e)}e.block$data(g,(function(){if(!1===t.errors)v(),t.modifying&&s(e),_((()=>e.error()));else{const n=t.async?function(){const e=u.let("ruleErrs",null);return u.try((()=>v(r._`await `)),(t=>u.assign(g,!1).if(r._`${t} instanceof ${p.ValidationError}`,(()=>u.assign(e,r._`${t}.errors`)),(()=>u.throw(t))))),e}():function(){const e=r._`${m}.errors`;return u.assign(e,null),v(r.nil),e}();t.modifying&&s(e),_((()=>function(e,t){const{gen:n}=e;n.if(r._`Array.isArray(${t})`,(()=>{n.assign(i.default.vErrors,r._`${i.default.vErrors} === null ? ${t} : ${i.default.vErrors}.concat(${t})`).assign(i.default.errors,r._`${i.default.vErrors}.length`),(0,a.extendErrors)(e)}),(()=>e.error()))}(e,n)))}})),e.ok(null!==(n=t.valid)&&void 0!==n?n:g)},t.validSchemaType=function(e,t,n=!1){return!t.length||t.some((t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||n&&void 0===e))},t.validateKeywordUsage=function({schema:e,opts:t,self:n,errSchemaPath:r},i,o){if(Array.isArray(i.keyword)?!i.keyword.includes(o):i.keyword!==o)throw new Error("ajv implementation error");const a=i.dependencies;if(null==a?void 0:a.some((t=>!Object.prototype.hasOwnProperty.call(e,t))))throw new Error(`parent schema must have dependencies of ${o}: ${a.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[o])){const e=`keyword "${o}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if("log"!==t.validateSchema)throw new Error(e);n.logger.error(e)}}},8581:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendSubschemaMode=t.extendSubschemaData=t.getSubschema=void 0;const r=n(8292),i=n(269);t.getSubschema=function(e,{keyword:t,schemaProp:n,schema:o,schemaPath:a,errSchemaPath:s,topSchemaRef:l}){if(void 0!==t&&void 0!==o)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){const o=e.schema[t];return void 0===n?{schema:o,schemaPath:r._`${e.schemaPath}${(0,r.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:o[n],schemaPath:r._`${e.schemaPath}${(0,r.getProperty)(t)}${(0,r.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,i.escapeFragment)(n)}`}}if(void 0!==o){if(void 0===a||void 0===s||void 0===l)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:o,schemaPath:a,topSchemaRef:l,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')},t.extendSubschemaData=function(e,t,{dataProp:n,dataPropType:o,data:a,dataTypes:s,propertyName:l}){if(void 0!==a&&void 0!==n)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:u}=t;if(void 0!==n){const{errorPath:a,dataPathArr:s,opts:l}=t;c(u.let("data",r._`${t.data}${(0,r.getProperty)(n)}`,!0)),e.errorPath=r.str`${a}${(0,i.getErrorPath)(n,o,l.jsPropertySyntax)}`,e.parentDataProperty=r._`${n}`,e.dataPathArr=[...s,e.parentDataProperty]}function c(n){e.data=n,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,n]}void 0!==a&&(c(a instanceof r.Name?a:u.let("data",a,!0)),void 0!==l&&(e.propertyName=l)),s&&(e.dataTypes=s)},t.extendSubschemaMode=function(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:o}){void 0!==r&&(e.compositeRule=r),void 0!==i&&(e.createErrors=i),void 0!==o&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=n}},6460:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var r=n(703);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return r.KeywordCxt}});var i=n(8292);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return i._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return i.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return i.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return i.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return i.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return i.CodeGen}});const o=n(7169),a=n(5588),s=n(6254),l=n(1023),u=n(8292),c=n(2722),h=n(335),d=n(269),f=n(7262),p=n(7704),y=(e,t)=>new RegExp(e,t);y.code="new RegExp";const m=["removeAdditional","useDefaults","coerceTypes"],g=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),v={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},_={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function b(e){var t,n,r,i,o,a,s,l,u,c,h,d,f,m,g,v,_,b,x,E,S,T,w,A,P;const O=e.strict,R=null===(t=e.code)||void 0===t?void 0:t.optimize,C=!0===R||void 0===R?1:R||0,I=null!==(r=null===(n=e.code)||void 0===n?void 0:n.regExp)&&void 0!==r?r:y,N=null!==(i=e.uriResolver)&&void 0!==i?i:p.default;return{strictSchema:null===(a=null!==(o=e.strictSchema)&&void 0!==o?o:O)||void 0===a||a,strictNumbers:null===(l=null!==(s=e.strictNumbers)&&void 0!==s?s:O)||void 0===l||l,strictTypes:null!==(c=null!==(u=e.strictTypes)&&void 0!==u?u:O)&&void 0!==c?c:"log",strictTuples:null!==(d=null!==(h=e.strictTuples)&&void 0!==h?h:O)&&void 0!==d?d:"log",strictRequired:null!==(m=null!==(f=e.strictRequired)&&void 0!==f?f:O)&&void 0!==m&&m,code:e.code?{...e.code,optimize:C,regExp:I}:{optimize:C,regExp:I},loopRequired:null!==(g=e.loopRequired)&&void 0!==g?g:200,loopEnum:null!==(v=e.loopEnum)&&void 0!==v?v:200,meta:null===(_=e.meta)||void 0===_||_,messages:null===(b=e.messages)||void 0===b||b,inlineRefs:null===(x=e.inlineRefs)||void 0===x||x,schemaId:null!==(E=e.schemaId)&&void 0!==E?E:"$id",addUsedSchema:null===(S=e.addUsedSchema)||void 0===S||S,validateSchema:null===(T=e.validateSchema)||void 0===T||T,validateFormats:null===(w=e.validateFormats)||void 0===w||w,unicodeRegExp:null===(A=e.unicodeRegExp)||void 0===A||A,int32range:null===(P=e.int32range)||void 0===P||P,uriResolver:N}}class x{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...b(e)};const{es5:t,lines:n}=this.opts.code;this.scope=new u.ValueScope({scope:{},prefixes:g,es5:t,lines:n}),this.logger=function(e){if(!1===e)return O;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);const r=e.validateFormats;e.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,v,e,"NOT SUPPORTED"),E.call(this,_,e,"DEPRECATED","warn"),this._metaOpts=P.call(this),e.formats&&w.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&A.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),T.call(this),e.validateFormats=r}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t,schemaId:n}=this.opts;let r=f;"id"===n&&(r={...f},r.id=r.$id,delete r.$id),t&&e&&this.addMetaSchema(r,r[n],!1)}defaultMeta(){const{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let n;if("string"==typeof e){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);const r=n(t);return"$async"in n||(this.errors=n.errors),r}compile(e,t){const n=this._addSchema(e,t);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:n}=this.opts;return r.call(this,e,t);async function r(e,t){await i.call(this,e.$schema);const n=this._addSchema(e,t);return n.validate||o.call(this,n)}async function i(e){e&&!this.getSchema(e)&&await r.call(this,{$ref:e},!0)}async function o(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof a.default))throw t;return s.call(this,t),await l.call(this,t.missingSchema),o.call(this,e)}}function s({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function l(e){const n=await u.call(this,e);this.refs[e]||await i.call(this,n.$schema),this.refs[e]||this.addSchema(n,e,t)}async function u(e){const t=this._loading[e];if(t)return t;try{return await(this._loading[e]=n(e))}finally{delete this._loading[e]}}}addSchema(e,t,n,r=this.opts.validateSchema){if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,n,r);return this}let i;if("object"==typeof e){const{schemaId:t}=this.opts;if(i=e[t],void 0!==i&&"string"!=typeof i)throw new Error(`schema ${t} must be string`)}return t=(0,c.normalizeId)(t||i),this._checkUnique(t),this.schemas[t]=this._addSchema(e,n,t,r,!0),this}addMetaSchema(e,t,n=this.opts.validateSchema){return this.addSchema(e,t,!0,n),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let n;if(n=e.$schema,void 0!==n&&"string"!=typeof n)throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const r=this.validate(n,e);if(!r&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return r}getSchema(e){let t;for(;"string"==typeof(t=S.call(this,e));)e=t;if(void 0===t){const{schemaId:n}=this.opts,r=new l.SchemaEnv({schema:{},schemaId:n});if(t=l.resolveSchema.call(this,r,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=S.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{const t=e;this._cache.delete(t);let n=e[this.opts.schemaId];return n&&(n=(0,c.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let n;if("string"==typeof e)n=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=n);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(n=(t=e).keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(C.call(this,n,t),!t)return(0,d.eachItem)(n,(e=>I.call(this,e))),this;M.call(this,t);const r={...t,type:(0,h.getJSONTypes)(t.type),schemaType:(0,h.getJSONTypes)(t.schemaType)};return(0,d.eachItem)(n,0===r.type.length?e=>I.call(this,e,r):e=>r.type.forEach((t=>I.call(this,e,r,t)))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const n of t.rules){const t=n.rules.findIndex((t=>t.keyword===e));t>=0&&n.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:n="data"}={}){return e&&0!==e.length?e.map((e=>`${n}${e.instancePath} ${e.message}`)).reduce(((e,n)=>e+t+n)):"No errors"}$dataMetaSchema(e,t){const n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const r of t){const t=r.split("/").slice(1);let i=e;for(const e of t)i=i[e];for(const e in n){const t=n[e];if("object"!=typeof t)continue;const{$data:r}=t.definition,o=i[e];r&&o&&(i[e]=D(o))}}return e}_removeAllSchemas(e,t){for(const n in e){const r=e[n];t&&!t.test(n)||("string"==typeof r?delete e[n]:r&&!r.meta&&(this._cache.delete(r.schema),delete e[n]))}}_addSchema(e,t,n,r=this.opts.validateSchema,i=this.opts.addUsedSchema){let o;const{schemaId:a}=this.opts;if("object"==typeof e)o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let s=this._cache.get(e);if(void 0!==s)return s;n=(0,c.normalizeId)(o||n);const u=c.getSchemaRefs.call(this,e,n);return s=new l.SchemaEnv({schema:e,schemaId:a,meta:t,baseId:n,localRefs:u}),this._cache.set(s.schema,s),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=s),r&&this.validateSchema(e,!0),s}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):l.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{l.compileSchema.call(this,e)}finally{this.opts=t}}}function E(e,t,n,r="error"){for(const i in e){const o=i;o in t&&this.logger[r](`${n}: option ${i}. ${e[o]}`)}}function S(e){return e=(0,c.normalizeId)(e),this.schemas[e]||this.refs[e]}function T(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function w(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function A(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const n=e[t];n.keyword||(n.keyword=t),this.addKeyword(n)}}}function P(){const e={...this.opts};for(const t of m)delete e[t];return e}t.default=x,x.ValidationError=o.default,x.MissingRefError=a.default;const O={log(){},warn(){},error(){}},R=/^[a-z_$][a-z0-9_$:-]*$/i;function C(e,t){const{RULES:n}=this;if((0,d.eachItem)(e,(e=>{if(n.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!R.test(e))throw new Error(`Keyword ${e} has invalid name`)})),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function I(e,t,n){var r;const i=null==t?void 0:t.post;if(n&&i)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:o}=this;let a=i?o.post:o.rules.find((({type:e})=>e===n));if(a||(a={type:n,rules:[]},o.rules.push(a)),o.keywords[e]=!0,!t)return;const s={keyword:e,definition:{...t,type:(0,h.getJSONTypes)(t.type),schemaType:(0,h.getJSONTypes)(t.schemaType)}};t.before?N.call(this,a,s,t.before):a.rules.push(s),o.all[e]=s,null===(r=t.implements)||void 0===r||r.forEach((e=>this.addKeyword(e)))}function N(e,t,n){const r=e.rules.findIndex((e=>e.keyword===n));r>=0?e.rules.splice(r,0,t):(e.rules.push(t),this.logger.warn(`rule ${n} is not defined`))}function M(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=D(t)),e.validateSchema=this.compile(t,!0))}const k={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function D(e){return{anyOf:[e,k]}}},4939:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6471);r.code='require("ajv/dist/runtime/equal").default',t.default=r},2188:(e,t)=>{"use strict";function n(e){const t=e.length;let n,r=0,i=0;for(;i<t;)r++,n=e.charCodeAt(i++),n>=55296&&n<=56319&&i<t&&(n=e.charCodeAt(i),56320==(64512&n)&&i++);return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.code='require("ajv/dist/runtime/ucs2length").default'},7704:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2371);r.code='require("ajv/dist/runtime/uri").default',t.default=r},7169:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}t.default=n},1799:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateAdditionalItems=void 0;const r=n(8292),i=n(269),o={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>r.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>r._`{limit: ${e}}`},code(e){const{parentSchema:t,it:n}=e,{items:r}=t;Array.isArray(r)?a(e,r):(0,i.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas')}};function a(e,t){const{gen:n,schema:o,data:a,keyword:s,it:l}=e;l.items=!0;const u=n.const("len",r._`${a}.length`);if(!1===o)e.setParams({len:t.length}),e.pass(r._`${u} <= ${t.length}`);else if("object"==typeof o&&!(0,i.alwaysValidSchema)(l,o)){const o=n.var("valid",r._`${u} <= ${t.length}`);n.if((0,r.not)(o),(()=>function(o){n.forRange("i",t.length,u,(t=>{e.subschema({keyword:s,dataProp:t,dataPropType:i.Type.Num},o),l.allErrors||n.if((0,r.not)(o),(()=>n.break()))}))}(o))),e.ok(o)}}t.validateAdditionalItems=a,t.default=o},7446:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2309),i=n(8292),o=n(9903),a=n(269),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>i._`{additionalProperty: ${e.additionalProperty}}`},code(e){const{gen:t,schema:n,parentSchema:s,data:l,errsCount:u,it:c}=e;if(!u)throw new Error("ajv implementation error");const{allErrors:h,opts:d}=c;if(c.props=!0,"all"!==d.removeAdditional&&(0,a.alwaysValidSchema)(c,n))return;const f=(0,r.allSchemaProperties)(s.properties),p=(0,r.allSchemaProperties)(s.patternProperties);function y(e){t.code(i._`delete ${l}[${e}]`)}function m(r){if("all"===d.removeAdditional||d.removeAdditional&&!1===n)y(r);else{if(!1===n)return e.setParams({additionalProperty:r}),e.error(),void(h||t.break());if("object"==typeof n&&!(0,a.alwaysValidSchema)(c,n)){const n=t.name("valid");"failing"===d.removeAdditional?(g(r,n,!1),t.if((0,i.not)(n),(()=>{e.reset(),y(r)}))):(g(r,n),h||t.if((0,i.not)(n),(()=>t.break())))}}}function g(t,n,r){const i={keyword:"additionalProperties",dataProp:t,dataPropType:a.Type.Str};!1===r&&Object.assign(i,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(i,n)}t.forIn("key",l,(n=>{f.length||p.length?t.if(function(n){let o;if(f.length>8){const e=(0,a.schemaRefOrVal)(c,s.properties,"properties");o=(0,r.isOwnProperty)(t,e,n)}else o=f.length?(0,i.or)(...f.map((e=>i._`${n} === ${e}`))):i.nil;return p.length&&(o=(0,i.or)(o,...p.map((t=>i._`${(0,r.usePattern)(e,t)}.test(${n})`)))),(0,i.not)(o)}(n),(()=>m(n))):m(n)})),e.ok(i._`${u} === ${o.default.errors}`)}};t.default=s},8045:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(269),i={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const o=t.name("valid");n.forEach(((t,n)=>{if((0,r.alwaysValidSchema)(i,t))return;const a=e.subschema({keyword:"allOf",schemaProp:n},o);e.ok(o),e.mergeEvaluated(a)}))}};t.default=i},6095:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:n(2309).validateUnion,error:{message:"must match a schema in anyOf"}};t.default=r},143:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8292),i=n(269),o={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>void 0===t?r.str`must contain at least ${e} valid item(s)`:r.str`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?r._`{minContains: ${e}}`:r._`{minContains: ${e}, maxContains: ${t}}`},code(e){const{gen:t,schema:n,parentSchema:o,data:a,it:s}=e;let l,u;const{minContains:c,maxContains:h}=o;s.opts.next?(l=void 0===c?1:c,u=h):l=1;const d=t.const("len",r._`${a}.length`);if(e.setParams({min:l,max:u}),void 0===u&&0===l)return void(0,i.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==u&&l>u)return(0,i.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),void e.fail();if((0,i.alwaysValidSchema)(s,n)){let t=r._`${d} >= ${l}`;return void 0!==u&&(t=r._`${t} && ${d} <= ${u}`),void e.pass(t)}s.items=!0;const f=t.name("valid");function p(){const e=t.name("_valid"),n=t.let("count",0);y(e,(()=>t.if(e,(()=>function(e){t.code(r._`${e}++`),void 0===u?t.if(r._`${e} >= ${l}`,(()=>t.assign(f,!0).break())):(t.if(r._`${e} > ${u}`,(()=>t.assign(f,!1).break())),1===l?t.assign(f,!0):t.if(r._`${e} >= ${l}`,(()=>t.assign(f,!0))))}(n)))))}function y(n,r){t.forRange("i",0,d,(t=>{e.subschema({keyword:"contains",dataProp:t,dataPropType:i.Type.Num,compositeRule:!0},n),r()}))}void 0===u&&1===l?y(f,(()=>t.if(f,(()=>t.break())))):0===l?(t.let(f,!0),void 0!==u&&t.if(r._`${a}.length > 0`,p)):(t.let(f,!1),p()),e.result(f,(()=>e.reset()))}};t.default=o},1908:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const r=n(8292),i=n(269),o=n(2309);t.error={message:({params:{property:e,depsCount:t,deps:n}})=>{const i=1===t?"property":"properties";return r.str`must have ${i} ${n} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:n,missingProperty:i}})=>r._`{property: ${e},
    missingProperty: ${i},
    depsCount: ${t},
    deps: ${n}}`};const a={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(e){const[t,n]=function({schema:e}){const t={},n={};for(const r in e)"__proto__"!==r&&((Array.isArray(e[r])?t:n)[r]=e[r]);return[t,n]}(e);s(e,t),l(e,n)}};function s(e,t=e.schema){const{gen:n,data:i,it:a}=e;if(0===Object.keys(t).length)return;const s=n.let("missing");for(const l in t){const u=t[l];if(0===u.length)continue;const c=(0,o.propertyInData)(n,i,l,a.opts.ownProperties);e.setParams({property:l,depsCount:u.length,deps:u.join(", ")}),a.allErrors?n.if(c,(()=>{for(const t of u)(0,o.checkReportMissingProp)(e,t)})):(n.if(r._`${c} && (${(0,o.checkMissingProp)(e,u,s)})`),(0,o.reportMissingProp)(e,s),n.else())}}function l(e,t=e.schema){const{gen:n,data:r,keyword:a,it:s}=e,l=n.name("valid");for(const u in t)(0,i.alwaysValidSchema)(s,t[u])||(n.if((0,o.propertyInData)(n,r,u,s.opts.ownProperties),(()=>{const t=e.subschema({keyword:a,schemaProp:u},l);e.mergeValidEvaluated(t,l)}),(()=>n.var(l,!0))),e.ok(l))}t.validatePropertyDeps=s,t.validateSchemaDeps=l,t.default=a},8975:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8292),i=n(269),o={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>r.str`must match "${e.ifClause}" schema`,params:({params:e})=>r._`{failingKeyword: ${e.ifClause}}`},code(e){const{gen:t,parentSchema:n,it:o}=e;void 0===n.then&&void 0===n.else&&(0,i.checkStrictMode)(o,'"if" without "then" and "else" is ignored');const s=a(o,"then"),l=a(o,"else");if(!s&&!l)return;const u=t.let("valid",!0),c=t.name("_valid");if(function(){const t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},c);e.mergeEvaluated(t)}(),e.reset(),s&&l){const n=t.let("ifClause");e.setParams({ifClause:n}),t.if(c,h("then",n),h("else",n))}else s?t.if(c,h("then")):t.if((0,r.not)(c),h("else"));function h(n,i){return()=>{const o=e.subschema({keyword:n},c);t.assign(u,c),e.mergeValidEvaluated(o,u),i?t.assign(i,r._`${n}`):e.setParams({ifClause:n})}}e.pass(u,(()=>e.error(!0)))}};function a(e,t){const n=e.schema[t];return void 0!==n&&!(0,i.alwaysValidSchema)(e,n)}t.default=o},5736:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1799),i=n(106),o=n(4608),a=n(9593),s=n(143),l=n(1908),u=n(9332),c=n(7446),h=n(6897),d=n(2751),f=n(8219),p=n(6095),y=n(1990),m=n(8045),g=n(8975),v=n(6880);t.default=function(e=!1){const t=[f.default,p.default,y.default,m.default,g.default,v.default,u.default,c.default,l.default,h.default,d.default];return e?t.push(i.default,a.default):t.push(r.default,o.default),t.push(s.default),t}},4608:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateTuple=void 0;const r=n(8292),i=n(269),o=n(2309),a={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return s(e,"additionalItems",t);n.items=!0,(0,i.alwaysValidSchema)(n,t)||e.ok((0,o.validateArray)(e))}};function s(e,t,n=e.schema){const{gen:o,parentSchema:a,data:s,keyword:l,it:u}=e;!function(e){const{opts:r,errSchemaPath:o}=u,a=n.length,s=a===e.minItems&&(a===e.maxItems||!1===e[t]);if(r.strictTuples&&!s){const e=`"${l}" is ${a}-tuple, but minItems or maxItems/${t} are not specified or different at path "${o}"`;(0,i.checkStrictMode)(u,e,r.strictTuples)}}(a),u.opts.unevaluated&&n.length&&!0!==u.items&&(u.items=i.mergeEvaluated.items(o,n.length,u.items));const c=o.name("valid"),h=o.const("len",r._`${s}.length`);n.forEach(((t,n)=>{(0,i.alwaysValidSchema)(u,t)||(o.if(r._`${h} > ${n}`,(()=>e.subschema({keyword:l,schemaProp:n,dataProp:n},c))),e.ok(c))}))}t.validateTuple=s,t.default=a},9593:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8292),i=n(269),o=n(2309),a=n(1799),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>r.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>r._`{limit: ${e}}`},code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:s}=n;r.items=!0,(0,i.alwaysValidSchema)(r,t)||(s?(0,a.validateAdditionalItems)(e,s):e.ok((0,o.validateArray)(e)))}};t.default=s},8219:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(269),i={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:i}=e;if((0,r.alwaysValidSchema)(i,n))return void e.fail();const o=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),e.failResult(o,(()=>e.reset()),(()=>e.error()))},error:{message:"must NOT be valid"}};t.default=i},1990:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8292),i=n(269),o={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>r._`{passingSchemas: ${e.passing}}`},code(e){const{gen:t,schema:n,parentSchema:o,it:a}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(a.opts.discriminator&&o.discriminator)return;const s=n,l=t.let("valid",!1),u=t.let("passing",null),c=t.name("_valid");e.setParams({passing:u}),t.block((function(){s.forEach(((n,o)=>{let s;(0,i.alwaysValidSchema)(a,n)?t.var(c,!0):s=e.subschema({keyword:"oneOf",schemaProp:o,compositeRule:!0},c),o>0&&t.if(r._`${c} && ${l}`).assign(l,!1).assign(u,r._`[${u}, ${o}]`).else(),t.if(c,(()=>{t.assign(l,!0),t.assign(u,o),s&&e.mergeEvaluated(s,r.Name)}))}))})),e.result(l,(()=>e.reset()),(()=>e.error(!0)))}};t.default=o},2751:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2309),i=n(8292),o=n(269),a=n(269),s={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:s,parentSchema:l,it:u}=e,{opts:c}=u,h=(0,r.allSchemaProperties)(n),d=h.filter((e=>(0,o.alwaysValidSchema)(u,n[e])));if(0===h.length||d.length===h.length&&(!u.opts.unevaluated||!0===u.props))return;const f=c.strictSchema&&!c.allowMatchingProperties&&l.properties,p=t.name("valid");!0===u.props||u.props instanceof i.Name||(u.props=(0,a.evaluatedPropsToName)(t,u.props));const{props:y}=u;function m(e){for(const t in f)new RegExp(e).test(t)&&(0,o.checkStrictMode)(u,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function g(n){t.forIn("key",s,(o=>{t.if(i._`${(0,r.usePattern)(e,n)}.test(${o})`,(()=>{const r=d.includes(n);r||e.subschema({keyword:"patternProperties",schemaProp:n,dataProp:o,dataPropType:a.Type.Str},p),u.opts.unevaluated&&!0!==y?t.assign(i._`${y}[${o}]`,!0):r||u.allErrors||t.if((0,i.not)(p),(()=>t.break()))}))}))}!function(){for(const e of h)f&&m(e),u.allErrors?g(e):(t.var(p,!0),g(e),t.if(p))}()}};t.default=s},106:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4608),i={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,r.validateTuple)(e,"items")};t.default=i},6897:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(703),i=n(2309),o=n(269),a=n(7446),s={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:s,data:l,it:u}=e;"all"===u.opts.removeAdditional&&void 0===s.additionalProperties&&a.default.code(new r.KeywordCxt(u,a.default,"additionalProperties"));const c=(0,i.allSchemaProperties)(n);for(const e of c)u.definedProperties.add(e);u.opts.unevaluated&&c.length&&!0!==u.props&&(u.props=o.mergeEvaluated.props(t,(0,o.toHash)(c),u.props));const h=c.filter((e=>!(0,o.alwaysValidSchema)(u,n[e])));if(0===h.length)return;const d=t.name("valid");for(const n of h)f(n)?p(n):(t.if((0,i.propertyInData)(t,l,n,u.opts.ownProperties)),p(n),u.allErrors||t.else().var(d,!0),t.endIf()),e.it.definedProperties.add(n),e.ok(d);function f(e){return u.opts.useDefaults&&!u.compositeRule&&void 0!==n[e].default}function p(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},d)}}};t.default=s},9332:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8292),i=n(269),o={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>r._`{propertyName: ${e.propertyName}}`},code(e){const{gen:t,schema:n,data:o,it:a}=e;if((0,i.alwaysValidSchema)(a,n))return;const s=t.name("valid");t.forIn("key",o,(n=>{e.setParams({propertyName:n}),e.subschema({keyword:"propertyNames",data:n,dataTypes:["string"],propertyName:n,compositeRule:!0},s),t.if((0,r.not)(s),(()=>{e.error(!0),a.allErrors||t.break()}))})),e.ok(s)}};t.default=o},6880:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(269),i={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){void 0===t.if&&(0,r.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};t.default=i},2309:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateUnion=t.validateArray=t.usePattern=t.callValidateCode=t.schemaProperties=t.allSchemaProperties=t.noPropertyInData=t.propertyInData=t.isOwnProperty=t.hasPropFunc=t.reportMissingProp=t.checkMissingProp=t.checkReportMissingProp=void 0;const r=n(8292),i=n(269),o=n(9903),a=n(269);function s(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:r._`Object.prototype.hasOwnProperty`})}function l(e,t,n){return r._`${s(e)}.call(${t}, ${n})`}function u(e,t,n,i){const o=r._`${t}${(0,r.getProperty)(n)} === undefined`;return i?(0,r.or)(o,(0,r.not)(l(e,t,n))):o}function c(e){return e?Object.keys(e).filter((e=>"__proto__"!==e)):[]}t.checkReportMissingProp=function(e,t){const{gen:n,data:i,it:o}=e;n.if(u(n,i,t,o.opts.ownProperties),(()=>{e.setParams({missingProperty:r._`${t}`},!0),e.error()}))},t.checkMissingProp=function({gen:e,data:t,it:{opts:n}},i,o){return(0,r.or)(...i.map((i=>(0,r.and)(u(e,t,i,n.ownProperties),r._`${o} = ${i}`))))},t.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},t.hasPropFunc=s,t.isOwnProperty=l,t.propertyInData=function(e,t,n,i){const o=r._`${t}${(0,r.getProperty)(n)} !== undefined`;return i?r._`${o} && ${l(e,t,n)}`:o},t.noPropertyInData=u,t.allSchemaProperties=c,t.schemaProperties=function(e,t){return c(t).filter((n=>!(0,i.alwaysValidSchema)(e,t[n])))},t.callValidateCode=function({schemaCode:e,data:t,it:{gen:n,topSchemaRef:i,schemaPath:a,errorPath:s},it:l},u,c,h){const d=h?r._`${e}, ${t}, ${i}${a}`:t,f=[[o.default.instancePath,(0,r.strConcat)(o.default.instancePath,s)],[o.default.parentData,l.parentData],[o.default.parentDataProperty,l.parentDataProperty],[o.default.rootData,o.default.rootData]];l.opts.dynamicRef&&f.push([o.default.dynamicAnchors,o.default.dynamicAnchors]);const p=r._`${d}, ${n.object(...f)}`;return c!==r.nil?r._`${u}.call(${c}, ${p})`:r._`${u}(${p})`};const h=r._`new RegExp`;t.usePattern=function({gen:e,it:{opts:t}},n){const i=t.unicodeRegExp?"u":"",{regExp:o}=t.code,s=o(n,i);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:r._`${"new RegExp"===o.code?h:(0,a.useFunc)(e,o)}(${n}, ${i})`})},t.validateArray=function(e){const{gen:t,data:n,keyword:o,it:a}=e,s=t.name("valid");if(a.allErrors){const e=t.let("valid",!0);return l((()=>t.assign(e,!1))),e}return t.var(s,!0),l((()=>t.break())),s;function l(a){const l=t.const("len",r._`${n}.length`);t.forRange("i",0,l,(n=>{e.subschema({keyword:o,dataProp:n,dataPropType:i.Type.Num},s),t.if((0,r.not)(s),a)}))}},t.validateUnion=function(e){const{gen:t,schema:n,keyword:o,it:a}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some((e=>(0,i.alwaysValidSchema)(a,e)))&&!a.opts.unevaluated)return;const s=t.let("valid",!1),l=t.name("_valid");t.block((()=>n.forEach(((n,i)=>{const a=e.subschema({keyword:o,schemaProp:i,compositeRule:!0},l);t.assign(s,r._`${s} || ${l}`),e.mergeValidEvaluated(a,l)||t.if((0,r.not)(s))})))),e.result(s,(()=>e.reset()),(()=>e.error(!0)))}},8337:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};t.default=n},2321:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8337),i=n(4497),o=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",r.default,i.default];t.default=o},4497:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.callRef=t.getValidate=void 0;const r=n(5588),i=n(2309),o=n(8292),a=n(9903),s=n(1023),l=n(269),u={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:i}=e,{baseId:a,schemaEnv:l,validateName:u,opts:d,self:f}=i,{root:p}=l;if(("#"===n||"#/"===n)&&a===p.baseId)return function(){if(l===p)return h(e,u,l,l.$async);const n=t.scopeValue("root",{ref:p});return h(e,o._`${n}.validate`,p,p.$async)}();const y=s.resolveRef.call(f,p,a,n);if(void 0===y)throw new r.default(i.opts.uriResolver,a,n);return y instanceof s.SchemaEnv?function(t){const n=c(e,t);h(e,n,t,t.$async)}(y):function(r){const i=t.scopeValue("schema",!0===d.code.source?{ref:r,code:(0,o.stringify)(r)}:{ref:r}),a=t.name("valid"),s=e.subschema({schema:r,dataTypes:[],schemaPath:o.nil,topSchemaRef:i,errSchemaPath:n},a);e.mergeEvaluated(s),e.ok(a)}(y)}};function c(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):o._`${n.scopeValue("wrapper",{ref:t})}.validate`}function h(e,t,n,r){const{gen:s,it:u}=e,{allErrors:c,schemaEnv:h,opts:d}=u,f=d.passContext?a.default.this:o.nil;function p(e){const t=o._`${e}.errors`;s.assign(a.default.vErrors,o._`${a.default.vErrors} === null ? ${t} : ${a.default.vErrors}.concat(${t})`),s.assign(a.default.errors,o._`${a.default.vErrors}.length`)}function y(e){var t;if(!u.opts.unevaluated)return;const r=null===(t=null==n?void 0:n.validate)||void 0===t?void 0:t.evaluated;if(!0!==u.props)if(r&&!r.dynamicProps)void 0!==r.props&&(u.props=l.mergeEvaluated.props(s,r.props,u.props));else{const t=s.var("props",o._`${e}.evaluated.props`);u.props=l.mergeEvaluated.props(s,t,u.props,o.Name)}if(!0!==u.items)if(r&&!r.dynamicItems)void 0!==r.items&&(u.items=l.mergeEvaluated.items(s,r.items,u.items));else{const t=s.var("items",o._`${e}.evaluated.items`);u.items=l.mergeEvaluated.items(s,t,u.items,o.Name)}}r?function(){if(!h.$async)throw new Error("async schema referenced by sync schema");const n=s.let("valid");s.try((()=>{s.code(o._`await ${(0,i.callValidateCode)(e,t,f)}`),y(t),c||s.assign(n,!0)}),(e=>{s.if(o._`!(${e} instanceof ${u.ValidationError})`,(()=>s.throw(e))),p(e),c||s.assign(n,!1)})),e.ok(n)}():e.result((0,i.callValidateCode)(e,t,f),(()=>y(t)),(()=>p(t)))}t.getValidate=c,t.callRef=h,t.default=u},57:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8292),i=n(967),o=n(1023),a=n(269),s={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===i.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>r._`{error: ${e}, tag: ${n}, tagValue: ${t}}`},code(e){const{gen:t,data:n,schema:s,parentSchema:l,it:u}=e,{oneOf:c}=l;if(!u.opts.discriminator)throw new Error("discriminator: requires discriminator option");const h=s.propertyName;if("string"!=typeof h)throw new Error("discriminator: requires propertyName");if(s.mapping)throw new Error("discriminator: mapping is not supported");if(!c)throw new Error("discriminator: requires oneOf keyword");const d=t.let("valid",!1),f=t.const("tag",r._`${n}${(0,r.getProperty)(h)}`);function p(n){const i=t.name("valid"),o=e.subschema({keyword:"oneOf",schemaProp:n},i);return e.mergeEvaluated(o,r.Name),i}t.if(r._`typeof ${f} == "string"`,(()=>function(){const n=function(){var e;const t={},n=i(l);let r=!0;for(let t=0;t<c.length;t++){let l=c[t];(null==l?void 0:l.$ref)&&!(0,a.schemaHasRulesButRef)(l,u.self.RULES)&&(l=o.resolveRef.call(u.self,u.schemaEnv.root,u.baseId,null==l?void 0:l.$ref),l instanceof o.SchemaEnv&&(l=l.schema));const d=null===(e=null==l?void 0:l.properties)||void 0===e?void 0:e[h];if("object"!=typeof d)throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${h}"`);r=r&&(n||i(l)),s(d,t)}if(!r)throw new Error(`discriminator: "${h}" must be required`);return t;function i({required:e}){return Array.isArray(e)&&e.includes(h)}function s(e,t){if(e.const)d(e.const,t);else{if(!e.enum)throw new Error(`discriminator: "properties/${h}" must have "const" or "enum"`);for(const n of e.enum)d(n,t)}}function d(e,n){if("string"!=typeof e||e in t)throw new Error(`discriminator: "${h}" values must be unique strings`);t[e]=n}}();t.if(!1);for(const e in n)t.elseIf(r._`${f} === ${e}`),t.assign(d,p(n[e]));t.else(),e.error(!1,{discrError:i.DiscrError.Mapping,tag:f,tagName:h}),t.endIf()}()),(()=>e.error(!1,{discrError:i.DiscrError.Tag,tag:f,tagName:h}))),e.ok(d)}};t.default=s},967:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DiscrError=void 0,(n=t.DiscrError||(t.DiscrError={})).Tag="tag",n.Mapping="mapping"},7903:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2321),i=n(2780),o=n(5736),a=n(8574),s=n(5685),l=[r.default,i.default,(0,o.default)(),a.default,s.metadataVocabulary,s.contentVocabulary];t.default=l},7778:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8292),i={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>r.str`must match format "${e}"`,params:({schemaCode:e})=>r._`{format: ${e}}`},code(e,t){const{gen:n,data:i,$data:o,schema:a,schemaCode:s,it:l}=e,{opts:u,errSchemaPath:c,schemaEnv:h,self:d}=l;u.validateFormats&&(o?function(){const o=n.scopeValue("formats",{ref:d.formats,code:u.code.formats}),a=n.const("fDef",r._`${o}[${s}]`),l=n.let("fType"),c=n.let("format");n.if(r._`typeof ${a} == "object" && !(${a} instanceof RegExp)`,(()=>n.assign(l,r._`${a}.type || "string"`).assign(c,r._`${a}.validate`)),(()=>n.assign(l,r._`"string"`).assign(c,a))),e.fail$data((0,r.or)(!1===u.strictSchema?r.nil:r._`${s} && !${c}`,function(){const e=h.$async?r._`(${a}.async ? await ${c}(${i}) : ${c}(${i}))`:r._`${c}(${i})`,n=r._`(typeof ${c} == "function" ? ${e} : ${c}.test(${i}))`;return r._`${c} && ${c} !== true && ${l} === ${t} && !${n}`}()))}():function(){const o=d.formats[a];if(!o)return void function(){if(!1!==u.strictSchema)throw new Error(e());function e(){return`unknown format "${a}" ignored in schema at path "${c}"`}d.logger.warn(e())}();if(!0===o)return;const[s,l,f]=function(e){const t=e instanceof RegExp?(0,r.regexpCode)(e):u.code.formats?r._`${u.code.formats}${(0,r.getProperty)(a)}`:void 0,i=n.scopeValue("formats",{key:a,ref:e,code:t});return"object"!=typeof e||e instanceof RegExp?["string",e,i]:[e.type||"string",e.validate,r._`${i}.validate`]}(o);s===t&&e.pass(function(){if("object"==typeof o&&!(o instanceof RegExp)&&o.async){if(!h.$async)throw new Error("async format in sync schema");return r._`await ${f}(${i})`}return"function"==typeof l?r._`${f}(${i})`:r._`${f}.test(${i})`}())}())}};t.default=i},8574:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=[n(7778).default];t.default=r},5685:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentVocabulary=t.metadataVocabulary=void 0,t.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],t.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},3367:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8292),i=n(269),o=n(4939),a={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>r._`{allowedValue: ${e}}`},code(e){const{gen:t,data:n,$data:a,schemaCode:s,schema:l}=e;a||l&&"object"==typeof l?e.fail$data(r._`!${(0,i.useFunc)(t,o.default)}(${n}, ${s})`):e.fail(r._`${l} !== ${n}`)}};t.default=a},946:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8292),i=n(269),o=n(4939),a={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>r._`{allowedValues: ${e}}`},code(e){const{gen:t,data:n,$data:a,schema:s,schemaCode:l,it:u}=e;if(!a&&0===s.length)throw new Error("enum must have non-empty array");const c=s.length>=u.opts.loopEnum;let h;const d=()=>null!=h?h:h=(0,i.useFunc)(t,o.default);let f;if(c||a)f=t.let("valid"),e.block$data(f,(function(){t.assign(f,!1),t.forOf("v",l,(e=>t.if(r._`${d()}(${n}, ${e})`,(()=>t.assign(f,!0).break()))))}));else{if(!Array.isArray(s))throw new Error("ajv implementation error");const e=t.const("vSchema",l);f=(0,r.or)(...s.map(((t,i)=>function(e,t){const i=s[t];return"object"==typeof i&&null!==i?r._`${d()}(${n}, ${e}[${t}])`:r._`${n} === ${i}`}(e,i))))}e.pass(f)}};t.default=a},2780:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(522),i=n(6509),o=n(5586),a=n(8519),s=n(9992),l=n(4829),u=n(8692),c=n(7231),h=n(3367),d=n(946),f=[r.default,i.default,o.default,a.default,s.default,l.default,u.default,c.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},h.default,d.default];t.default=f},8692:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8292),i={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const n="maxItems"===e?"more":"fewer";return r.str`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>r._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:i}=e,o="maxItems"===t?r.operators.GT:r.operators.LT;e.fail$data(r._`${n}.length ${o} ${i}`)}};t.default=i},5586:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8292),i=n(269),o=n(2188),a={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const n="maxLength"===e?"more":"fewer";return r.str`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>r._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:a,it:s}=e,l="maxLength"===t?r.operators.GT:r.operators.LT,u=!1===s.opts.unicode?r._`${n}.length`:r._`${(0,i.useFunc)(e.gen,o.default)}(${n})`;e.fail$data(r._`${u} ${l} ${a}`)}};t.default=a},522:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8292),i=r.operators,o={maximum:{okStr:"<=",ok:i.LTE,fail:i.GT},minimum:{okStr:">=",ok:i.GTE,fail:i.LT},exclusiveMaximum:{okStr:"<",ok:i.LT,fail:i.GTE},exclusiveMinimum:{okStr:">",ok:i.GT,fail:i.LTE}},a={message:({keyword:e,schemaCode:t})=>r.str`must be ${o[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>r._`{comparison: ${o[e].okStr}, limit: ${t}}`},s={keyword:Object.keys(o),type:"number",schemaType:"number",$data:!0,error:a,code(e){const{keyword:t,data:n,schemaCode:i}=e;e.fail$data(r._`${n} ${o[t].fail} ${i} || isNaN(${n})`)}};t.default=s},9992:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8292),i={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const n="maxProperties"===e?"more":"fewer";return r.str`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>r._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:i}=e,o="maxProperties"===t?r.operators.GT:r.operators.LT;e.fail$data(r._`Object.keys(${n}).length ${o} ${i}`)}};t.default=i},6509:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8292),i={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>r.str`must be multiple of ${e}`,params:({schemaCode:e})=>r._`{multipleOf: ${e}}`},code(e){const{gen:t,data:n,schemaCode:i,it:o}=e,a=o.opts.multipleOfPrecision,s=t.let("res"),l=a?r._`Math.abs(Math.round(${s}) - ${s}) > 1e-${a}`:r._`${s} !== parseInt(${s})`;e.fail$data(r._`(${i} === 0 || (${s} = ${n}/${i}, ${l}))`)}};t.default=i},8519:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2309),i=n(8292),o={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>i.str`must match pattern "${e}"`,params:({schemaCode:e})=>i._`{pattern: ${e}}`},code(e){const{data:t,$data:n,schema:o,schemaCode:a,it:s}=e,l=s.opts.unicodeRegExp?"u":"",u=n?i._`(new RegExp(${a}, ${l}))`:(0,r.usePattern)(e,o);e.fail$data(i._`!${u}.test(${t})`)}};t.default=o},4829:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2309),i=n(8292),o=n(269),a={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>i.str`must have required property '${e}'`,params:({params:{missingProperty:e}})=>i._`{missingProperty: ${e}}`},code(e){const{gen:t,schema:n,schemaCode:a,data:s,$data:l,it:u}=e,{opts:c}=u;if(!l&&0===n.length)return;const h=n.length>=c.loopRequired;if(u.allErrors?function(){if(h||l)e.block$data(i.nil,d);else for(const t of n)(0,r.checkReportMissingProp)(e,t)}():function(){const o=t.let("missing");if(h||l){const n=t.let("valid",!0);e.block$data(n,(()=>function(n,o){e.setParams({missingProperty:n}),t.forOf(n,a,(()=>{t.assign(o,(0,r.propertyInData)(t,s,n,c.ownProperties)),t.if((0,i.not)(o),(()=>{e.error(),t.break()}))}),i.nil)}(o,n))),e.ok(n)}else t.if((0,r.checkMissingProp)(e,n,o)),(0,r.reportMissingProp)(e,o),t.else()}(),c.strictRequired){const t=e.parentSchema.properties,{definedProperties:r}=e.it;for(const e of n)if(void 0===(null==t?void 0:t[e])&&!r.has(e)){const t=`required property "${e}" is not defined at "${u.schemaEnv.baseId+u.errSchemaPath}" (strictRequired)`;(0,o.checkStrictMode)(u,t,u.opts.strictRequired)}}function d(){t.forOf("prop",a,(n=>{e.setParams({missingProperty:n}),t.if((0,r.noPropertyInData)(t,s,n,c.ownProperties),(()=>e.error()))}))}}};t.default=a},7231:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(335),i=n(8292),o=n(269),a=n(4939),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>i.str`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>i._`{i: ${e}, j: ${t}}`},code(e){const{gen:t,data:n,$data:s,schema:l,parentSchema:u,schemaCode:c,it:h}=e;if(!s&&!l)return;const d=t.let("valid"),f=u.items?(0,r.getSchemaTypes)(u.items):[];function p(o,a){const s=t.name("item"),l=(0,r.checkDataTypes)(f,s,h.opts.strictNumbers,r.DataType.Wrong),u=t.const("indices",i._`{}`);t.for(i._`;${o}--;`,(()=>{t.let(s,i._`${n}[${o}]`),t.if(l,i._`continue`),f.length>1&&t.if(i._`typeof ${s} == "string"`,i._`${s} += "_"`),t.if(i._`typeof ${u}[${s}] == "number"`,(()=>{t.assign(a,i._`${u}[${s}]`),e.error(),t.assign(d,!1).break()})).code(i._`${u}[${s}] = ${o}`)}))}function y(r,s){const l=(0,o.useFunc)(t,a.default),u=t.name("outer");t.label(u).for(i._`;${r}--;`,(()=>t.for(i._`${s} = ${r}; ${s}--;`,(()=>t.if(i._`${l}(${n}[${r}], ${n}[${s}])`,(()=>{e.error(),t.assign(d,!1).break(u)}))))))}e.block$data(d,(function(){const r=t.let("i",i._`${n}.length`),o=t.let("j");e.setParams({i:r,j:o}),t.assign(d,!0),t.if(i._`${r} > 1`,(()=>(f.length>0&&!f.some((e=>"object"===e||"array"===e))?p:y)(r,o)))}),i._`${c} === false`),e.ok(d)}};t.default=s},1550:e=>{"use strict";var t=e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),n(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};function n(e,r,i,o,a,s,l,u,c,h){if(o&&"object"==typeof o&&!Array.isArray(o)){for(var d in r(o,a,s,l,u,c,h),o){var f=o[d];if(Array.isArray(f)){if(d in t.arrayKeywords)for(var p=0;p<f.length;p++)n(e,r,i,f[p],a+"/"+d+"/"+p,s,a,d,o,p)}else if(d in t.propsKeywords){if(f&&"object"==typeof f)for(var y in f)n(e,r,i,f[y],a+"/"+d+"/"+y.replace(/~/g,"~0").replace(/\//g,"~1"),s,a,d,o,y)}else(d in t.keywords||e.allKeys&&!(d in t.skipKeywords))&&n(e,r,i,f,a+"/"+d,s,a,d,o)}i(o,a,s,l,u,c,h)}}t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},2360:e=>{e.exports=function(e,t,n,r,i,o){var a,s,l,u,c=n.length,h=n[0].length;if(t<1)throw new Error("degree must be at least 1 (linear)");if(t>c-1)throw new Error("degree must be less than or equal to point count - 1");if(!i)for(i=[],a=0;a<c;a++)i[a]=1;if(r){if(r.length!==c+t+1)throw new Error("bad knot vector length")}else for(r=[],a=0;a<c+t+1;a++)r[a]=a;var d=[t,r.length-1-t],f=r[d[0]],p=r[d[1]];if((e=e*(p-f)+f)<f||e>p)throw new Error("out of bounds");for(l=d[0];l<d[1]&&!(e>=r[l]&&e<=r[l+1]);l++);var y,m=[];for(a=0;a<c;a++){for(m[a]=[],s=0;s<h;s++)m[a][s]=n[a][s]*i[a];m[a][h]=i[a]}for(u=1;u<=t+1;u++)for(a=l;a>l-t-1+u;a--)for(y=(e-r[a])/(r[a+t+1-u]-r[a]),s=0;s<h+1;s++)m[a][s]=(1-y)*m[a-1][s]+y*m[a][s];for(o=o||[],a=0;a<h;a++)o[a]=m[l][a]/m[l][h];return o}},2737:(e,t,n)=>{"use strict";var r=n(8750),i=n(4573),o=i(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"==typeof n&&o(e,".prototype.")>-1?i(n):n}},4573:(e,t,n)=>{"use strict";var r=n(132),i=n(8750),o=i("%Function.prototype.apply%"),a=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||r.call(a,o),l=i("%Object.getOwnPropertyDescriptor%",!0),u=i("%Object.defineProperty%",!0),c=i("%Math.max%");if(u)try{u({},"a",{value:1})}catch(e){u=null}e.exports=function(e){var t=s(r,a,arguments);if(l&&u){var n=l(t,"length");n.configurable&&u(t,"length",{value:1+c(0,e.length-(arguments.length-1))})}return t};var h=function(){return s(r,o,arguments)};u?u(e.exports,"apply",{value:h}):e.exports.apply=h},1660:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(4933),i=n.n(r),o=n(3476),a=n.n(o)()(i());a.push([e.id,"/* PrismJS 1.26.0\nhttps://prismjs.com/download.html#themes=prism-twilight&languages=markup+clike+javascript+jsx+tsx+typescript&plugins=line-numbers+toolbar+copy-to-clipboard */\ncode[class*=language-],pre[class*=language-]{color:#fff;background:0 0;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;font-size:1em;text-align:left;text-shadow:0 -.1em .2em #000;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}:not(pre)>code[class*=language-],pre[class*=language-]{background:#141414}pre[class*=language-]{border-radius:.5em;border:.3em solid #545454;box-shadow:1px 1px .5em #000 inset;margin:.5em 0;overflow:auto;padding:1em}pre[class*=language-]::-moz-selection{background:#27292a}pre[class*=language-]::selection{background:#27292a}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:hsla(0,0%,93%,.15)}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:hsla(0,0%,93%,.15)}:not(pre)>code[class*=language-]{border-radius:.3em;border:.13em solid #545454;box-shadow:1px 1px .3em -.1em #000 inset;padding:.15em .2em .05em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#777}.token.punctuation{opacity:.7}.token.namespace{opacity:.7}.token.boolean,.token.deleted,.token.number,.token.tag{color:#ce6849}.token.builtin,.token.constant,.token.keyword,.token.property,.token.selector,.token.symbol{color:#f9ed99}.language-css .token.string,.style .token.string,.token.attr-name,.token.attr-value,.token.char,.token.entity,.token.inserted,.token.operator,.token.string,.token.url,.token.variable{color:#909e6a}.token.atrule{color:#7385a5}.token.important,.token.regex{color:#e8c062}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.language-markup .token.attr-name,.language-markup .token.punctuation,.language-markup .token.tag{color:#ac885c}.token{position:relative;z-index:1}.line-highlight.line-highlight{background:hsla(0,0%,33%,.25);background:linear-gradient(to right,hsla(0,0%,33%,.1) 70%,hsla(0,0%,33%,0));border-bottom:1px dashed #545454;border-top:1px dashed #545454;margin-top:.75em;z-index:0}.line-highlight.line-highlight:before,.line-highlight.line-highlight[data-end]:after{background-color:#8693a6;color:#f4f1ef}\npre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}\ndiv.code-toolbar{position:relative}div.code-toolbar>.toolbar{position:absolute;z-index:10;top:.3em;right:.2em;transition:opacity .3s ease-in-out;opacity:0}div.code-toolbar:hover>.toolbar{opacity:1}div.code-toolbar:focus-within>.toolbar{opacity:1}div.code-toolbar>.toolbar>.toolbar-item{display:inline-block}div.code-toolbar>.toolbar>.toolbar-item>a{cursor:pointer}div.code-toolbar>.toolbar>.toolbar-item>button{background:0 0;border:0;color:inherit;font:inherit;line-height:normal;overflow:visible;padding:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}div.code-toolbar>.toolbar>.toolbar-item>a,div.code-toolbar>.toolbar>.toolbar-item>button,div.code-toolbar>.toolbar>.toolbar-item>span{color:#bbb;font-size:.8em;padding:0 .5em;background:#f5f2f0;background:rgba(224,224,224,.2);box-shadow:0 2px 0 0 rgba(0,0,0,.2);border-radius:.5em}div.code-toolbar>.toolbar>.toolbar-item>a:focus,div.code-toolbar>.toolbar>.toolbar-item>a:hover,div.code-toolbar>.toolbar>.toolbar-item>button:focus,div.code-toolbar>.toolbar>.toolbar-item>button:hover,div.code-toolbar>.toolbar>.toolbar-item>span:focus,div.code-toolbar>.toolbar>.toolbar-item>span:hover{color:inherit;text-decoration:none}\n",""]);const s=a},3476:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,o){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var u=0;u<e.length;u++){var c=[].concat(e[u]);r&&a[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),t.push(c))}},t}},4933:e=>{"use strict";e.exports=function(e){return e[1]}},1106:e=>{"use strict";function t(e,t,o){o=o||2;var a,s,l,h,d,p,y,m=t&&t.length,g=m?t[0]*o:e.length,v=n(e,0,g,o,!0),_=[];if(!v||v.next===v.prev)return _;if(m&&(v=function(e,t,i,o){var a,s,l,h=[];for(a=0,s=t.length;a<s;a++)(l=n(e,t[a]*o,a<s-1?t[a+1]*o:e.length,o,!1))===l.next&&(l.steiner=!0),h.push(f(l));for(h.sort(u),a=0;a<h.length;a++)i=r(i=c(h[a],i),i.next);return i}(e,t,v,o)),e.length>80*o){a=l=e[0],s=h=e[1];for(var b=o;b<g;b+=o)(d=e[b])<a&&(a=d),(p=e[b+1])<s&&(s=p),d>l&&(l=d),p>h&&(h=p);y=0!==(y=Math.max(l-a,h-s))?1/y:0}return i(v,_,o,a,s,y),_}function n(e,t,n,r,i){var o,a;if(i===A(e,t,n,r)>0)for(o=t;o<n;o+=r)a=S(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=S(o,e[o],e[o+1],a);return a&&g(a,a.next)&&(T(a),a=a.next),a}function r(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!g(r,r.next)&&0!==m(r.prev,r,r.next))r=r.next;else{if(T(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function i(e,t,n,u,c,h,f){if(e){!f&&h&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=d(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,l,u=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1)}(i)}(e,u,c,h);for(var p,y,m=e;e.prev!==e.next;)if(p=e.prev,y=e.next,h?a(e,u,c,h):o(e))t.push(p.i/n),t.push(e.i/n),t.push(y.i/n),T(e),e=y.next,m=y.next;else if((e=y)===m){f?1===f?i(e=s(r(e),t,n),t,n,u,c,h,2):2===f&&l(e,t,n,u,c,h):i(r(e),t,n,u,c,h,1);break}}}function o(e){var t=e.prev,n=e,r=e.next;if(m(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(p(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&m(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function a(e,t,n,r){var i=e.prev,o=e,a=e.next;if(m(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=d(s,l,t,n,r),f=d(u,c,t,n,r),y=e.prevZ,g=e.nextZ;y&&y.z>=h&&g&&g.z<=f;){if(y!==e.prev&&y!==e.next&&p(i.x,i.y,o.x,o.y,a.x,a.y,y.x,y.y)&&m(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,g!==e.prev&&g!==e.next&&p(i.x,i.y,o.x,o.y,a.x,a.y,g.x,g.y)&&m(g.prev,g,g.next)>=0)return!1;g=g.nextZ}for(;y&&y.z>=h;){if(y!==e.prev&&y!==e.next&&p(i.x,i.y,o.x,o.y,a.x,a.y,y.x,y.y)&&m(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;g&&g.z<=f;){if(g!==e.prev&&g!==e.next&&p(i.x,i.y,o.x,o.y,a.x,a.y,g.x,g.y)&&m(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function s(e,t,n){var i=e;do{var o=i.prev,a=i.next.next;!g(o,a)&&v(o,i,i.next,a)&&x(o,a)&&x(a,o)&&(t.push(o.i/n),t.push(i.i/n),t.push(a.i/n),T(i),T(i.next),i=e=a),i=i.next}while(i!==e);return r(i)}function l(e,t,n,o,a,s){var l=e;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&y(l,u)){var c=E(l,u);return l=r(l,l.next),c=r(c,c.next),i(l,t,n,o,a,s),void i(c,t,n,o,a,s)}u=u.next}l=l.next}while(l!==e)}function u(e,t){return e.x-t.x}function c(e,t){var n=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n;var l,u=n,c=n.x,d=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&p(o<d?i:a,o,c,d,o<d?a:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),x(r,e)&&(l<f||l===f&&(r.x>n.x||r.x===n.x&&h(n,r)))&&(n=r,f=l)),r=r.next}while(r!==u);return n}(e,t);if(!n)return t;var i=E(n,e),o=r(n,n.next);return r(i,i.next),t===n?o:t}function h(e,t){return m(e.prev,e,t.prev)<0&&m(t.next,e,e.next)<0}function d(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function f(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function p(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function y(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&v(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(x(e,t)&&x(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(m(e.prev,e,t.prev)||m(e,t.prev,t))||g(e,t)&&m(e.prev,e,e.next)>0&&m(t.prev,t,t.next)>0)}function m(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function g(e,t){return e.x===t.x&&e.y===t.y}function v(e,t,n,r){var i=b(m(e,t,n)),o=b(m(e,t,r)),a=b(m(n,r,e)),s=b(m(n,r,t));return i!==o&&a!==s||!(0!==i||!_(e,n,t))||!(0!==o||!_(e,r,t))||!(0!==a||!_(n,e,r))||!(0!==s||!_(n,t,r))}function _(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function b(e){return e>0?1:e<0?-1:0}function x(e,t){return m(e.prev,e,e.next)<0?m(e,t,e.next)>=0&&m(e,e.prev,t)>=0:m(e,t,e.prev)<0||m(e,e.next,t)<0}function E(e,t){var n=new w(e.i,e.x,e.y),r=new w(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function S(e,t,n,r){var i=new w(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function T(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function w(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}e.exports=t,e.exports.default=t,t.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,a=Math.abs(A(e,0,o,n));if(i)for(var s=0,l=t.length;s<l;s++){var u=t[s]*n,c=s<l-1?t[s+1]*n:e.length;a-=Math.abs(A(e,u,c,n))}var h=0;for(s=0;s<r.length;s+=3){var d=r[s]*n,f=r[s+1]*n,p=r[s+2]*n;h+=Math.abs((e[d]-e[p])*(e[f+1]-e[d+1])-(e[d]-e[f])*(e[p+1]-e[d+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},t.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},6659:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,i),!0;case 5:return c.fn.call(c.context,t,r,i,o),!0;case 6:return c.fn.call(c.context,t,r,i,o,a),!0}for(u=1,l=new Array(h-1);u<h;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var d,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),h){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,i);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];c[u].fn.apply(c[u].context,l)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var l=0,u=[],c=s.length;l<c;l++)(s[l].fn!==t||i&&!s[l].once||r&&s[l].context!==r)&&u.push(s[l]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},6471:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n}},8458:e=>{"use strict";var t="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,r=Object.prototype.toString,i="[object Function]";e.exports=function(e){var o=this;if("function"!=typeof o||r.call(o)!==i)throw new TypeError(t+o);for(var a,s=n.call(arguments,1),l=function(){if(this instanceof a){var t=o.apply(this,s.concat(n.call(arguments)));return Object(t)===t?t:this}return o.apply(e,s.concat(n.call(arguments)))},u=Math.max(0,o.length-s.length),c=[],h=0;h<u;h++)c.push("$"+h);if(a=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(l),o.prototype){var d=function(){};d.prototype=o.prototype,a.prototype=new d,d.prototype=null}return a}},132:(e,t,n)=>{"use strict";var r=n(8458);e.exports=Function.prototype.bind||r},8750:(e,t,n)=>{"use strict";var r,i=SyntaxError,o=Function,a=TypeError,s=function(e){try{return o('"use strict"; return ('+e+").constructor;")()}catch(e){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(e){l=null}var u=function(){throw new a},c=l?function(){try{return u}catch(e){try{return l(arguments,"callee").get}catch(e){return u}}}():u,h=n(679)(),d=Object.getPrototypeOf||function(e){return e.__proto__},f={},p="undefined"==typeof Uint8Array?r:d(Uint8Array),y={"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":h?d([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":f,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?d(d([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&h?d((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&h?d((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?d(""[Symbol.iterator]()):r,"%Symbol%":h?Symbol:r,"%SyntaxError%":i,"%ThrowTypeError%":c,"%TypedArray%":p,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet},m=function e(t){var n;if("%AsyncFunction%"===t)n=s("async function () {}");else if("%GeneratorFunction%"===t)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=s("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&(n=d(i.prototype))}return y[t]=n,n},g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},v=n(132),_=n(7492),b=v.call(Function.call,Array.prototype.concat),x=v.call(Function.apply,Array.prototype.splice),E=v.call(Function.call,String.prototype.replace),S=v.call(Function.call,String.prototype.slice),T=v.call(Function.call,RegExp.prototype.exec),w=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,A=/\\(\\)?/g,P=function(e){var t=S(e,0,1),n=S(e,-1);if("%"===t&&"%"!==n)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new i("invalid intrinsic syntax, expected opening `%`");var r=[];return E(e,w,(function(e,t,n,i){r[r.length]=n?E(i,A,"$1"):t||e})),r},O=function(e,t){var n,r=e;if(_(g,r)&&(r="%"+(n=g[r])[0]+"%"),_(y,r)){var o=y[r];if(o===f&&(o=m(r)),void 0===o&&!t)throw new a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new i("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new a('"allowMissing" argument must be a boolean');if(null===T(/^%?[^%]*%?$/g,e))throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=P(e),r=n.length>0?n[0]:"",o=O("%"+r+"%",t),s=o.name,u=o.value,c=!1,h=o.alias;h&&(r=h[0],x(n,b([0,1],h)));for(var d=1,f=!0;d<n.length;d+=1){var p=n[d],m=S(p,0,1),g=S(p,-1);if(('"'===m||"'"===m||"`"===m||'"'===g||"'"===g||"`"===g)&&m!==g)throw new i("property names with quotes must have matching quotes");if("constructor"!==p&&f||(c=!0),_(y,s="%"+(r+="."+p)+"%"))u=y[s];else if(null!=u){if(!(p in u)){if(!t)throw new a("base intrinsic for "+e+" exists, but the property is not available.");return}if(l&&d+1>=n.length){var v=l(u,p);u=(f=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:u[p]}else f=_(u,p),u=u[p];f&&!c&&(y[s]=u)}}return u}},679:(e,t,n)=>{"use strict";var r="undefined"!=typeof Symbol&&Symbol,i=n(8186);e.exports=function(){return"function"==typeof r&&"function"==typeof Symbol&&"symbol"==typeof r("foo")&&"symbol"==typeof Symbol("bar")&&i()}},8186:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},7492:(e,t,n)=>{"use strict";var r=n(132);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},2525:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var a,s,l=i(e),u=1;u<arguments.length;u++){for(var c in a=Object(arguments[u]))n.call(a,c)&&(l[c]=a[c]);if(t){s=t(a);for(var h=0;h<s.length;h++)r.call(a,s[h])&&(l[s[h]]=a[s[h]])}}return l}},6524:(e,t,n)=>{var r="function"==typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=r&&i&&"function"==typeof i.get?i.get:null,a=r&&Map.prototype.forEach,s="function"==typeof Set&&Set.prototype,l=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=s&&l&&"function"==typeof l.get?l.get:null,c=s&&Set.prototype.forEach,h="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,d="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,f="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,p=Boolean.prototype.valueOf,y=Object.prototype.toString,m=Function.prototype.toString,g=String.prototype.match,v=String.prototype.slice,_=String.prototype.replace,b=String.prototype.toUpperCase,x=String.prototype.toLowerCase,E=RegExp.prototype.test,S=Array.prototype.concat,T=Array.prototype.join,w=Array.prototype.slice,A=Math.floor,P="function"==typeof BigInt?BigInt.prototype.valueOf:null,O=Object.getOwnPropertySymbols,R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,C="function"==typeof Symbol&&"object"==typeof Symbol.iterator,I="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol.toStringTag,1)?Symbol.toStringTag:null,N=Object.prototype.propertyIsEnumerable,M=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function k(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||E.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var r=e<0?-A(-e):A(e);if(r!==e){var i=String(r),o=v.call(t,i.length+1);return _.call(i,n,"$&_")+"."+_.call(_.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return _.call(t,n,"$&_")}var D=n(6553),L=D.custom,F=$(L)?L:null;function U(e,t,n){var r="double"===(n.quoteStyle||t)?'"':"'";return r+e+r}function B(e){return _.call(String(e),/"/g,"&quot;")}function G(e){return!("[object Array]"!==H(e)||I&&"object"==typeof e&&I in e)}function j(e){return!("[object RegExp]"!==H(e)||I&&"object"==typeof e&&I in e)}function $(e){if(C)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!R)return!1;try{return R.call(e),!0}catch(e){}return!1}e.exports=function e(t,n,r,i){var s=n||{};if(X(s,"quoteStyle")&&"single"!==s.quoteStyle&&"double"!==s.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(X(s,"maxStringLength")&&("number"==typeof s.maxStringLength?s.maxStringLength<0&&s.maxStringLength!==1/0:null!==s.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var l=!X(s,"customInspect")||s.customInspect;if("boolean"!=typeof l&&"symbol"!==l)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(X(s,"indent")&&null!==s.indent&&"\t"!==s.indent&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(X(s,"numericSeparator")&&"boolean"!=typeof s.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var y=s.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return Y(t,s);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var b=String(t);return y?k(t,b):b}if("bigint"==typeof t){var E=String(t)+"n";return y?k(t,E):E}var A=void 0===s.depth?5:s.depth;if(void 0===r&&(r=0),r>=A&&A>0&&"object"==typeof t)return G(t)?"[Array]":"[Object]";var O,L=function(e,t){var n;if("\t"===e.indent)n="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;n=T.call(Array(e.indent+1)," ")}return{base:n,prev:T.call(Array(t+1),n)}}(s,r);if(void 0===i)i=[];else if(V(i,t)>=0)return"[Circular]";function z(t,n,o){if(n&&(i=w.call(i)).push(n),o){var a={depth:s.depth};return X(s,"quoteStyle")&&(a.quoteStyle=s.quoteStyle),e(t,a,r+1,i)}return e(t,s,r+1,i)}if("function"==typeof t&&!j(t)){var W=function(e){if(e.name)return e.name;var t=g.call(m.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),ee=J(t,z);return"[Function"+(W?": "+W:" (anonymous)")+"]"+(ee.length>0?" { "+T.call(ee,", ")+" }":"")}if($(t)){var te=C?_.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):R.call(t);return"object"!=typeof t||C?te:q(te)}if((O=t)&&"object"==typeof O&&("undefined"!=typeof HTMLElement&&O instanceof HTMLElement||"string"==typeof O.nodeName&&"function"==typeof O.getAttribute)){for(var ne="<"+x.call(String(t.nodeName)),re=t.attributes||[],ie=0;ie<re.length;ie++)ne+=" "+re[ie].name+"="+U(B(re[ie].value),"double",s);return ne+=">",t.childNodes&&t.childNodes.length&&(ne+="..."),ne+"</"+x.call(String(t.nodeName))+">"}if(G(t)){if(0===t.length)return"[]";var oe=J(t,z);return L&&!function(e){for(var t=0;t<e.length;t++)if(V(e[t],"\n")>=0)return!1;return!0}(oe)?"["+Z(oe,L)+"]":"[ "+T.call(oe,", ")+" ]"}if(function(e){return!("[object Error]"!==H(e)||I&&"object"==typeof e&&I in e)}(t)){var ae=J(t,z);return"cause"in Error.prototype||!("cause"in t)||N.call(t,"cause")?0===ae.length?"["+String(t)+"]":"{ ["+String(t)+"] "+T.call(ae,", ")+" }":"{ ["+String(t)+"] "+T.call(S.call("[cause]: "+z(t.cause),ae),", ")+" }"}if("object"==typeof t&&l){if(F&&"function"==typeof t[F]&&D)return D(t,{depth:A-r});if("symbol"!==l&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!o||!e||"object"!=typeof e)return!1;try{o.call(e);try{u.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var se=[];return a.call(t,(function(e,n){se.push(z(n,t,!0)+" => "+z(e,t))})),Q("Map",o.call(t),se,L)}if(function(e){if(!u||!e||"object"!=typeof e)return!1;try{u.call(e);try{o.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var le=[];return c.call(t,(function(e){le.push(z(e,t))})),Q("Set",u.call(t),le,L)}if(function(e){if(!h||!e||"object"!=typeof e)return!1;try{h.call(e,h);try{d.call(e,d)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return K("WeakMap");if(function(e){if(!d||!e||"object"!=typeof e)return!1;try{d.call(e,d);try{h.call(e,h)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return K("WeakSet");if(function(e){if(!f||!e||"object"!=typeof e)return!1;try{return f.call(e),!0}catch(e){}return!1}(t))return K("WeakRef");if(function(e){return!("[object Number]"!==H(e)||I&&"object"==typeof e&&I in e)}(t))return q(z(Number(t)));if(function(e){if(!e||"object"!=typeof e||!P)return!1;try{return P.call(e),!0}catch(e){}return!1}(t))return q(z(P.call(t)));if(function(e){return!("[object Boolean]"!==H(e)||I&&"object"==typeof e&&I in e)}(t))return q(p.call(t));if(function(e){return!("[object String]"!==H(e)||I&&"object"==typeof e&&I in e)}(t))return q(z(String(t)));if(!function(e){return!("[object Date]"!==H(e)||I&&"object"==typeof e&&I in e)}(t)&&!j(t)){var ue=J(t,z),ce=M?M(t)===Object.prototype:t instanceof Object||t.constructor===Object,he=t instanceof Object?"":"null prototype",de=!ce&&I&&Object(t)===t&&I in t?v.call(H(t),8,-1):he?"Object":"",fe=(ce||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(de||he?"["+T.call(S.call([],de||[],he||[]),": ")+"] ":"");return 0===ue.length?fe+"{}":L?fe+"{"+Z(ue,L)+"}":fe+"{ "+T.call(ue,", ")+" }"}return String(t)};var z=Object.prototype.hasOwnProperty||function(e){return e in this};function X(e,t){return z.call(e,t)}function H(e){return y.call(e)}function V(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function Y(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return Y(v.call(e,0,t.maxStringLength),t)+r}return U(_.call(_.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,W),"single",t)}function W(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+b.call(t.toString(16))}function q(e){return"Object("+e+")"}function K(e){return e+" { ? }"}function Q(e,t,n,r){return e+" ("+t+") {"+(r?Z(n,r):T.call(n,", "))+"}"}function Z(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+T.call(e,","+n)+"\n"+t.prev}function J(e,t){var n=G(e),r=[];if(n){r.length=e.length;for(var i=0;i<e.length;i++)r[i]=X(e,i)?t(e[i],e):""}var o,a="function"==typeof O?O(e):[];if(C){o={};for(var s=0;s<a.length;s++)o["$"+a[s]]=a[s]}for(var l in e)X(e,l)&&(n&&String(Number(l))===l&&l<e.length||C&&o["$"+l]instanceof Symbol||(E.call(/[^\w$]/,l)?r.push(t(l,e)+": "+t(e[l],e)):r.push(l+": "+t(e[l],e))));if("function"==typeof O)for(var u=0;u<a.length;u++)N.call(e,a[u])&&r.push("["+t(a[u])+"]: "+t(e[a[u]],e));return r}},9771:e=>{"use strict";var t=String.prototype.replace,n=/%20/g,r="RFC3986";e.exports={default:r,formatters:{RFC1738:function(e){return t.call(e,n,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:r}},8139:(e,t,n)=>{"use strict";var r=n(6360),i=n(9520),o=n(9771);e.exports={formats:o,parse:i,stringify:r}},9520:(e,t,n)=>{"use strict";var r=n(4330),i=Object.prototype.hasOwnProperty,o=Array.isArray,a={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},l=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},u=function(e,t,n,r){if(e){var o=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,s=n.depth>0&&/(\[[^[\]]*])/.exec(o),u=s?o.slice(0,s.index):o,c=[];if(u){if(!n.plainObjects&&i.call(Object.prototype,u)&&!n.allowPrototypes)return;c.push(u)}for(var h=0;n.depth>0&&null!==(s=a.exec(o))&&h<n.depth;){if(h+=1,!n.plainObjects&&i.call(Object.prototype,s[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(s[1])}return s&&c.push("["+o.slice(s.index)+"]"),function(e,t,n,r){for(var i=r?t:l(t,n),o=e.length-1;o>=0;--o){var a,s=e[o];if("[]"===s&&n.parseArrays)a=[].concat(i);else{a=n.plainObjects?Object.create(null):{};var u="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,c=parseInt(u,10);n.parseArrays||""!==u?!isNaN(c)&&s!==u&&String(c)===u&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(a=[])[c]=i:"__proto__"!==u&&(a[u]=i):a={0:i}}i=a}return i}(c,t,n,r)}};e.exports=function(e,t){var n=function(e){if(!e)return a;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?a.charset:e.charset;return{allowDots:void 0===e.allowDots?a.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:a.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:a.comma,decoder:"function"==typeof e.decoder?e.decoder:a.decoder,delimiter:"string"==typeof e.delimiter||r.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:a.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:a.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling}}(t);if(""===e||null==e)return n.plainObjects?Object.create(null):{};for(var c="string"==typeof e?function(e,t){var n,u={},c=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,h=t.parameterLimit===1/0?void 0:t.parameterLimit,d=c.split(t.delimiter,h),f=-1,p=t.charset;if(t.charsetSentinel)for(n=0;n<d.length;++n)0===d[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[n]?p="utf-8":"utf8=%26%2310003%3B"===d[n]&&(p="iso-8859-1"),f=n,n=d.length);for(n=0;n<d.length;++n)if(n!==f){var y,m,g=d[n],v=g.indexOf("]="),_=-1===v?g.indexOf("="):v+1;-1===_?(y=t.decoder(g,a.decoder,p,"key"),m=t.strictNullHandling?null:""):(y=t.decoder(g.slice(0,_),a.decoder,p,"key"),m=r.maybeMap(l(g.slice(_+1),t),(function(e){return t.decoder(e,a.decoder,p,"value")}))),m&&t.interpretNumericEntities&&"iso-8859-1"===p&&(m=s(m)),g.indexOf("[]=")>-1&&(m=o(m)?[m]:m),i.call(u,y)?u[y]=r.combine(u[y],m):u[y]=m}return u}(e,n):e,h=n.plainObjects?Object.create(null):{},d=Object.keys(c),f=0;f<d.length;++f){var p=d[f],y=u(p,c[p],n,"string"==typeof e);h=r.merge(h,y,n)}return!0===n.allowSparse?h:r.compact(h)}},6360:(e,t,n)=>{"use strict";var r=n(5337),i=n(4330),o=n(9771),a=Object.prototype.hasOwnProperty,s={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},l=Array.isArray,u=String.prototype.split,c=Array.prototype.push,h=function(e,t){c.apply(e,l(t)?t:[t])},d=Date.prototype.toISOString,f=o.default,p={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,format:f,formatter:o.formatters[f],indices:!1,serializeDate:function(e){return d.call(e)},skipNulls:!1,strictNullHandling:!1},y={},m=function e(t,n,o,a,s,c,d,f,m,g,v,_,b,x,E){for(var S,T=t,w=E,A=0,P=!1;void 0!==(w=w.get(y))&&!P;){var O=w.get(t);if(A+=1,void 0!==O){if(O===A)throw new RangeError("Cyclic object value");P=!0}void 0===w.get(y)&&(A=0)}if("function"==typeof d?T=d(n,T):T instanceof Date?T=g(T):"comma"===o&&l(T)&&(T=i.maybeMap(T,(function(e){return e instanceof Date?g(e):e}))),null===T){if(a)return c&&!b?c(n,p.encoder,x,"key",v):n;T=""}if("string"==typeof(S=T)||"number"==typeof S||"boolean"==typeof S||"symbol"==typeof S||"bigint"==typeof S||i.isBuffer(T)){if(c){var R=b?n:c(n,p.encoder,x,"key",v);if("comma"===o&&b){for(var C=u.call(String(T),","),I="",N=0;N<C.length;++N)I+=(0===N?"":",")+_(c(C[N],p.encoder,x,"value",v));return[_(R)+"="+I]}return[_(R)+"="+_(c(T,p.encoder,x,"value",v))]}return[_(n)+"="+_(String(T))]}var M,k=[];if(void 0===T)return k;if("comma"===o&&l(T))M=[{value:T.length>0?T.join(",")||null:void 0}];else if(l(d))M=d;else{var D=Object.keys(T);M=f?D.sort(f):D}for(var L=0;L<M.length;++L){var F=M[L],U="object"==typeof F&&void 0!==F.value?F.value:T[F];if(!s||null!==U){var B=l(T)?"function"==typeof o?o(n,F):n:n+(m?"."+F:"["+F+"]");E.set(t,A);var G=r();G.set(y,E),h(k,e(U,B,o,a,s,c,d,f,m,g,v,_,b,x,G))}}return k};e.exports=function(e,t){var n,i=e,u=function(e){if(!e)return p;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||p.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=o.default;if(void 0!==e.format){if(!a.call(o.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=o.formatters[n],i=p.filter;return("function"==typeof e.filter||l(e.filter))&&(i=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:p.addQueryPrefix,allowDots:void 0===e.allowDots?p.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:p.charsetSentinel,delimiter:void 0===e.delimiter?p.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:p.encode,encoder:"function"==typeof e.encoder?e.encoder:p.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:p.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:p.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:p.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:p.strictNullHandling}}(t);"function"==typeof u.filter?i=(0,u.filter)("",i):l(u.filter)&&(n=u.filter);var c,d=[];if("object"!=typeof i||null===i)return"";c=t&&t.arrayFormat in s?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var f=s[c];n||(n=Object.keys(i)),u.sort&&n.sort(u.sort);for(var y=r(),g=0;g<n.length;++g){var v=n[g];u.skipNulls&&null===i[v]||h(d,m(i[v],v,f,u.strictNullHandling,u.skipNulls,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.format,u.formatter,u.encodeValuesOnly,u.charset,y))}var _=d.join(u.delimiter),b=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?b+="utf8=%26%2310003%3B&":b+="utf8=%E2%9C%93&"),_.length>0?b+_:""}},4330:(e,t,n)=>{"use strict";var r=n(9771),i=Object.prototype.hasOwnProperty,o=Array.isArray,a=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),s=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n};e.exports={arrayToObject:s,assign:function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var i=t[r],a=i.obj[i.prop],s=Object.keys(a),l=0;l<s.length;++l){var u=s[l],c=a[u];"object"==typeof c&&null!==c&&-1===n.indexOf(c)&&(t.push({obj:a,prop:u}),n.push(c))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(o(n)){for(var r=[],i=0;i<n.length;++i)void 0!==n[i]&&r.push(n[i]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(e){return r}},encode:function(e,t,n,i,o){if(0===e.length)return e;var s=e;if("symbol"==typeof e?s=Symbol.prototype.toString.call(e):"string"!=typeof e&&(s=String(e)),"iso-8859-1"===n)return escape(s).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var l="",u=0;u<s.length;++u){var c=s.charCodeAt(u);45===c||46===c||95===c||126===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||o===r.RFC1738&&(40===c||41===c)?l+=s.charAt(u):c<128?l+=a[c]:c<2048?l+=a[192|c>>6]+a[128|63&c]:c<55296||c>=57344?l+=a[224|c>>12]+a[128|c>>6&63]+a[128|63&c]:(u+=1,c=65536+((1023&c)<<10|1023&s.charCodeAt(u)),l+=a[240|c>>18]+a[128|c>>12&63]+a[128|c>>6&63]+a[128|63&c])}return l},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(o(e)){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)},merge:function e(t,n,r){if(!n)return t;if("object"!=typeof n){if(o(t))t.push(n);else{if(!t||"object"!=typeof t)return[t,n];(r&&(r.plainObjects||r.allowPrototypes)||!i.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(n);var a=t;return o(t)&&!o(n)&&(a=s(t,r)),o(t)&&o(n)?(n.forEach((function(n,o){if(i.call(t,o)){var a=t[o];a&&"object"==typeof a&&n&&"object"==typeof n?t[o]=e(a,n,r):t.push(n)}else t[o]=n})),t):Object.keys(n).reduce((function(t,o){var a=n[o];return i.call(t,o)?t[o]=e(t[o],a,r):t[o]=a,t}),a)}}},9350:e=>{"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,n,r,i){n=n||"&",r=r||"=";var o={};if("string"!=typeof e||0===e.length)return o;var a=/\+/g;e=e.split(n);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var l=e.length;s>0&&l>s&&(l=s);for(var u=0;u<l;++u){var c,h,d,f,p=e[u].replace(a,"%20"),y=p.indexOf(r);y>=0?(c=p.substr(0,y),h=p.substr(y+1)):(c=p,h=""),d=decodeURIComponent(c),f=decodeURIComponent(h),t(o,d)?Array.isArray(o[d])?o[d].push(f):o[d]=[o[d],f]:o[d]=f}return o}},4104:e=>{"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,n,r,i){return n=n||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(i){var o=encodeURIComponent(t(i))+r;return Array.isArray(e[i])?e[i].map((function(e){return o+encodeURIComponent(t(e))})).join(n):o+encodeURIComponent(t(e[i]))})).join(n):i?encodeURIComponent(t(i))+r+encodeURIComponent(t(e)):""}},8966:(e,t,n)=>{"use strict";t.decode=t.parse=n(9350),t.encode=t.stringify=n(4104)},3577:(e,t,n)=>{"use strict";var r=n(7378),i=n(1102);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var c=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function y(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,v);m[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,v);m[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,v);m[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),P=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var k=Symbol.iterator;function D(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=k&&e[k]||e["@@iterator"])?e:null}var L,F=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var B=!1;function G(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function j(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return G(e.type,!1);case 11:return G(e.type.render,!1);case 1:return G(e.type,!0);default:return""}}function $(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case w:return"Profiler";case T:return"StrictMode";case R:return"Suspense";case C:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case P:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case O:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:$(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return $(e(t))}catch(e){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function X(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function V(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function W(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function q(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=X(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function Z(e,t){Q(e,t);var n=X(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,X(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&W(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+X(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:X(n)}}function oe(e,t){var n=X(t.value),r=X(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ye(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ye(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ge=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(o(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Se=null,Te=null;function we(e){if(e=mi(e)){if("function"!=typeof Ee)throw Error(o(280));var t=e.stateNode;t&&(t=vi(t),Ee(e.stateNode,e.type,t))}}function Ae(e){Se?Te?Te.push(e):Te=[e]:Se=e}function Pe(){if(Se){var e=Se,t=Te;if(Te=Se=null,we(e),t)for(e=0;e<t.length;e++)we(t[e])}}function Oe(e,t){return e(t)}function Re(){}var Ce=!1;function Ie(e,t,n){if(Ce)return e(t,n);Ce=!0;try{return Oe(e,t,n)}finally{Ce=!1,(null!==Se||null!==Te)&&(Re(),Pe())}}function Ne(e,t){var n=e.stateNode;if(null===n)return null;var r=vi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(o(231,t,typeof n));return n}var Me=!1;if(c)try{var ke={};Object.defineProperty(ke,"passive",{get:function(){Me=!0}}),window.addEventListener("test",ke,ke),window.removeEventListener("test",ke,ke)}catch(ce){Me=!1}function De(e,t,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}var Le=!1,Fe=null,Ue=!1,Be=null,Ge={onError:function(e){Le=!0,Fe=e}};function je(e,t,n,r,i,o,a,s,l){Le=!1,Fe=null,De.apply(Ge,arguments)}function $e(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Xe(e){if($e(e)!==e)throw Error(o(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Xe(i),e;if(a===r)return Xe(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var Ye=i.unstable_scheduleCallback,We=i.unstable_cancelCallback,qe=i.unstable_shouldYield,Ke=i.unstable_requestPaint,Qe=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null,at=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2,ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=ht(s):0!=(o&=a)&&(r=ht(o))}else 0!=(a=n&~i)?r=ht(a):0!==o&&(r=ht(o));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!=(4194240&o)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function yt(){var e=ut;return 0==(4194240&(ut<<=1))&&(ut=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function bt(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var xt,Et,St,Tt,wt,At=!1,Pt=[],Ot=null,Rt=null,Ct=null,It=new Map,Nt=new Map,Mt=[],kt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":Ct=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nt.delete(t.pointerId)}}function Lt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&null!==(t=mi(t))&&Et(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=$e(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void wt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=mi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Bt(e,t,n){Ut(e)&&n.delete(t)}function Gt(){At=!1,null!==Ot&&Ut(Ot)&&(Ot=null),null!==Rt&&Ut(Rt)&&(Rt=null),null!==Ct&&Ut(Ct)&&(Ct=null),It.forEach(Bt),Nt.forEach(Bt)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Gt)))}function $t(e){function t(t){return jt(t,e)}if(0<Pt.length){jt(Pt[0],e);for(var n=1;n<Pt.length;n++){var r=Pt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ot&&jt(Ot,e),null!==Rt&&jt(Rt,e),null!==Ct&&jt(Ct,e),It.forEach(t),Nt.forEach(t),n=0;n<Mt.length;n++)(r=Mt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Mt.length&&null===(n=Mt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Mt.shift()}var zt=b.ReactCurrentBatchConfig,Xt=!0;function Ht(e,t,n,r){var i=_t,o=zt.transition;zt.transition=null;try{_t=1,Yt(e,t,n,r)}finally{_t=i,zt.transition=o}}function Vt(e,t,n,r){var i=_t,o=zt.transition;zt.transition=null;try{_t=4,Yt(e,t,n,r)}finally{_t=i,zt.transition=o}}function Yt(e,t,n,r){if(Xt){var i=qt(e,t,n,r);if(null===i)jr(e,t,r,Wt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ot=Lt(Ot,e,t,n,r,i),!0;case"dragenter":return Rt=Lt(Rt,e,t,n,r,i),!0;case"mouseover":return Ct=Lt(Ct,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return It.set(o,Lt(It.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Nt.set(o,Lt(Nt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<kt.indexOf(e)){for(;null!==i;){var o=mi(i);if(null!==o&&xt(o),null===(o=qt(e,t,n,r))&&jr(e,t,r,Wt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else jr(e,t,r,null,n)}}var Wt=null;function qt(e,t,n,r){if(Wt=null,null!==(e=yi(e=xe(r))))if(null===(t=$e(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Zt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Zt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(un),hn=F({},un,{view:0,detail:0}),dn=on(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(fn),yn=on(F({},fn,{dataTransfer:0})),mn=on(F({},hn,{relatedTarget:0})),gn=on(F({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=on(F({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),_n=on(F({},un,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Tn(){return Sn}var wn=on(F({},hn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),An=on(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=on(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),On=on(F({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=on(F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Cn=[9,13,27,32],In=c&&"CompositionEvent"in window,Nn=null;c&&"documentMode"in document&&(Nn=document.documentMode);var Mn=c&&"TextEvent"in window&&!Nn,kn=c&&(!In||Nn&&8<Nn&&11>=Nn),Dn=String.fromCharCode(32),Ln=!1;function Fn(e,t){switch(e){case"keyup":return-1!==Cn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1,Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function $n(e,t,n,r){Ae(r),0<(t=zr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var zn=null,Xn=null;function Hn(e){Dr(e,0)}function Vn(e){if(Y(gi(e)))return e}function Yn(e,t){if("change"===e)return t}var Wn=!1;if(c){var qn;if(c){var Kn="oninput"in document;if(!Kn){var Qn=document.createElement("div");Qn.setAttribute("oninput","return;"),Kn="function"==typeof Qn.oninput}qn=Kn}else qn=!1;Wn=qn&&(!document.documentMode||9<document.documentMode)}function Zn(){zn&&(zn.detachEvent("onpropertychange",Jn),Xn=zn=null)}function Jn(e){if("value"===e.propertyName&&Vn(Xn)){var t=[];$n(t,Xn,e,xe(e)),Ie(Hn,t)}}function er(e,t,n){"focusin"===e?(Zn(),Xn=n,(zn=t).attachEvent("onpropertychange",Jn)):"focusout"===e&&Zn()}function tr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Vn(Xn)}function nr(e,t){if("click"===e)return Vn(t)}function rr(e,t){if("input"===e||"change"===e)return Vn(t)}var ir="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function or(e,t){if(ir(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ir(e[i],t[i]))return!1}return!0}function ar(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sr(e,t){var n,r=ar(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ar(r)}}function lr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?lr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ur(){for(var e=window,t=W();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=W((e=t.contentWindow).document)}return t}function cr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=ur(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&lr(n.ownerDocument.documentElement,n)){if(null!==r&&cr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=sr(n,o);var a=sr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dr=c&&"documentMode"in document&&11>=document.documentMode,fr=null,pr=null,yr=null,mr=!1;function gr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;mr||null==fr||fr!==W(r)||(r="selectionStart"in(r=fr)&&cr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&or(yr,r)||(yr=r,0<(r=zr(pr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=fr)))}function vr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:vr("Animation","AnimationEnd"),animationiteration:vr("Animation","AnimationIteration"),animationstart:vr("Animation","AnimationStart"),transitionend:vr("Transition","TransitionEnd")},br={},xr={};function Er(e){if(br[e])return br[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in xr)return br[e]=n[t];return e}c&&(xr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Sr=Er("animationend"),Tr=Er("animationiteration"),wr=Er("animationstart"),Ar=Er("transitionend"),Pr=new Map,Or="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Pr.set(e,t),l(t,[e])}for(var Cr=0;Cr<Or.length;Cr++){var Ir=Or[Cr];Rr(Ir.toLowerCase(),"on"+(Ir[0].toUpperCase()+Ir.slice(1)))}Rr(Sr,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(wr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Ar,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nr));function kr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,l,u){if(je.apply(this,arguments),Le){if(!Le)throw Error(o(198));var c=Fe;Le=!1,Fe=null,Ue||(Ue=!0,Be=c)}}(r,t,void 0,e),e.currentTarget=null}function Dr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;kr(i,s,u),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;kr(i,s,u),o=l}}}if(Ue)throw e=Be,Ue=!1,Be=null,e}function Lr(e,t){var n=t[di];void 0===n&&(n=t[di]=new Set);var r=e+"__bubble";n.has(r)||(Gr(t,e,2,!1),n.add(r))}function Fr(e,t,n){var r=0;t&&(r|=4),Gr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Ur]){e[Ur]=!0,a.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Fr(t,!1,e),Fr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Fr("selectionchange",!1,t))}}function Gr(e,t,n,r){switch(Kt(t)){case 1:var i=Ht;break;case 4:i=Vt;break;default:i=Yt}n=i.bind(null,t,n,e),i=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function jr(e,t,n,r,i){var o=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=yi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}Ie((function(){var r=o,i=xe(n),a=[];e:{var s=Pr.get(e);if(void 0!==s){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=wn;break;case"focusin":u="focus",l=mn;break;case"focusout":u="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Sr:case Tr:case wr:l=gn;break;case Ar:l=On;break;case"scroll":l=dn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var c=0!=(4&t),h=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var f,p=r;null!==p;){var y=(f=p).stateNode;if(5===f.tag&&null!==y&&(f=y,null!==d&&null!=(y=Ne(p,d))&&c.push($r(p,y,f))),h)break;p=p.return}0<c.length&&(s=new l(s,u,null,n,i),a.push({event:s,listeners:c}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(u=n.relatedTarget||n.fromElement)||!yi(u)&&!u[hi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?yi(u):null)&&(u!==(h=$e(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,y="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=An,y="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?s:gi(l),f=null==u?s:gi(u),(s=new c(y,p+"leave",l,n,i)).target=h,s.relatedTarget=f,y=null,yi(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,y=c),h=y,l&&u)e:{for(d=u,p=0,f=c=l;f;f=Xr(f))p++;for(f=0,y=d;y;y=Xr(y))f++;for(;0<p-f;)c=Xr(c),p--;for(;0<f-p;)d=Xr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Xr(c),d=Xr(d)}c=null}else c=null;null!==l&&Hr(a,s,l,c,!1),null!==u&&null!==h&&Hr(a,h,u,c,!0)}if("select"===(l=(s=r?gi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=Yn;else if(jn(s))if(Wn)m=rr;else{m=tr;var g=er}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=nr);switch(m&&(m=m(e,r))?$n(a,m,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?gi(r):window,e){case"focusin":(jn(g)||"true"===g.contentEditable)&&(fr=g,pr=r,yr=null);break;case"focusout":yr=pr=fr=null;break;case"mousedown":mr=!0;break;case"contextmenu":case"mouseup":case"dragend":mr=!1,gr(a,n,i);break;case"selectionchange":if(dr)break;case"keydown":case"keyup":gr(a,n,i)}var v;if(In)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Bn?Fn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(kn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Bn&&(v=en()):(Zt="value"in(Qt=i)?Qt.value:Qt.textContent,Bn=!0)),0<(g=zr(r,_)).length&&(_=new _n(_,e,null,n,i),a.push({event:_,listeners:g}),(v||null!==(v=Un(n)))&&(_.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Ln=!0,Dn);case"textInput":return(e=t.data)===Dn&&Ln?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!In&&Fn(e,t)?(e=en(),Jt=Zt=Qt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=zr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v)}Dr(a,t)}))}function $r(e,t,n){return{instance:e,listener:t,currentTarget:n}}function zr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ne(e,n))&&r.unshift($r(e,o,i)),null!=(o=Ne(e,t))&&r.push($r(e,o,i))),e=e.return}return r}function Xr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Hr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Ne(n,o))&&a.unshift($r(n,l,s)):i||null!=(l=Ne(n,o))&&a.push($r(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Vr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Wr(e){return("string"==typeof e?e:""+e).replace(Vr,"\n").replace(Yr,"")}function qr(e,t,n){if(t=Wr(t),Wr(e)!==t&&n)throw Error(o(425))}function Kr(){}var Qr=null,Zr=null;function Jr(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ei="function"==typeof setTimeout?setTimeout:void 0,ti="function"==typeof clearTimeout?clearTimeout:void 0,ni="function"==typeof Promise?Promise:void 0,ri="function"==typeof queueMicrotask?queueMicrotask:void 0!==ni?function(e){return ni.resolve(null).then(e).catch(ii)}:ei;function ii(e){setTimeout((function(){throw e}))}function oi(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void $t(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);$t(t)}function ai(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function si(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var li=Math.random().toString(36).slice(2),ui="__reactFiber$"+li,ci="__reactProps$"+li,hi="__reactContainer$"+li,di="__reactEvents$"+li,fi="__reactListeners$"+li,pi="__reactHandles$"+li;function yi(e){var t=e[ui];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hi]||n[ui]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=si(e);null!==e;){if(n=e[ui])return n;e=si(e)}return t}n=(e=n).parentNode}return null}function mi(e){return!(e=e[ui]||e[hi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function gi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function vi(e){return e[ci]||null}var _i=[],bi=-1;function xi(e){return{current:e}}function Ei(e){0>bi||(e.current=_i[bi],_i[bi]=null,bi--)}function Si(e,t){bi++,_i[bi]=e.current,e.current=t}var Ti={},wi=xi(Ti),Ai=xi(!1),Pi=Ti;function Oi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ri(e){return null!=e.childContextTypes}function Ci(){Ei(Ai),Ei(wi)}function Ii(e,t,n){if(wi.current!==Ti)throw Error(o(168));Si(wi,t),Si(Ai,n)}function Ni(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,z(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Pi=wi.current,Si(wi,e),Si(Ai,Ai.current),!0}function ki(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Ni(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ai),Ei(wi),Si(wi,e)):Ei(Ai),Si(Ai,n)}var Di=null,Li=!1,Fi=!1;function Ui(e){null===Di?Di=[e]:Di.push(e)}function Bi(){if(!Fi&&null!==Di){Fi=!0;var e=0,t=_t;try{var n=Di;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Di=null,Li=!1}catch(t){throw null!==Di&&(Di=Di.slice(e+1)),Ye(Je,Bi),t}finally{_t=t,Fi=!1}}return null}var Gi=[],ji=0,$i=null,zi=0,Xi=[],Hi=0,Vi=null,Yi=1,Wi="";function qi(e,t){Gi[ji++]=zi,Gi[ji++]=$i,$i=e,zi=t}function Ki(e,t,n){Xi[Hi++]=Yi,Xi[Hi++]=Wi,Xi[Hi++]=Vi,Vi=e;var r=Yi;e=Wi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Yi=1<<32-at(t)+i|n<<i|r,Wi=o+e}else Yi=1<<o|n<<i|r,Wi=e}function Qi(e){null!==e.return&&(qi(e,1),Ki(e,1,0))}function Zi(e){for(;e===$i;)$i=Gi[--ji],Gi[ji]=null,zi=Gi[--ji],Gi[ji]=null;for(;e===Vi;)Vi=Xi[--Hi],Xi[Hi]=null,Wi=Xi[--Hi],Xi[Hi]=null,Yi=Xi[--Hi],Xi[Hi]=null}var Ji=null,eo=null,to=!1,no=null;function ro(e,t){var n=Ou(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function io(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Ji=e,eo=ai(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Ji=e,eo=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Vi?{id:Yi,overflow:Wi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ou(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Ji=e,eo=null,!0);default:return!1}}function oo(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function ao(e){if(to){var t=eo;if(t){var n=t;if(!io(e,t)){if(oo(e))throw Error(o(418));t=ai(n.nextSibling);var r=Ji;t&&io(e,t)?ro(r,n):(e.flags=-4097&e.flags|2,to=!1,Ji=e)}}else{if(oo(e))throw Error(o(418));e.flags=-4097&e.flags|2,to=!1,Ji=e}}}function so(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ji=e}function lo(e){if(e!==Ji)return!1;if(!to)return so(e),to=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Jr(e.type,e.memoizedProps)),t&&(t=eo)){if(oo(e))throw uo(),Error(o(418));for(;t;)ro(e,t),t=ai(t.nextSibling)}if(so(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){eo=ai(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}eo=null}}else eo=Ji?ai(e.stateNode.nextSibling):null;return!0}function uo(){for(var e=eo;e;)e=ai(e.nextSibling)}function co(){eo=Ji=null,to=!1}function ho(e){null===no?no=[e]:no.push(e)}var fo=b.ReactCurrentBatchConfig;function po(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var yo=xi(null),mo=null,go=null,vo=null;function _o(){vo=go=mo=null}function bo(e){var t=yo.current;Ei(yo),e._currentValue=t}function xo(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Eo(e,t){mo=e,vo=go=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(gs=!0),e.firstContext=null)}function So(e){var t=e._currentValue;if(vo!==e)if(e={context:e,memoizedValue:t,next:null},null===go){if(null===mo)throw Error(o(308));go=e,mo.dependencies={lanes:0,firstContext:e}}else go=go.next=e;return t}var To=null;function wo(e){null===To?To=[e]:To.push(e)}function Ao(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,wo(t)):(n.next=i.next,i.next=n),t.interleaved=n,Po(e,r)}function Po(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Oo=!1;function Ro(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Co(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Io(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function No(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&wl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Po(e,n)}return null===(i=r.interleaved)?(t.next=t,wo(r)):(t.next=i.next,i.next=t),r.interleaved=t,Po(e,n)}function Mo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function ko(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Do(e,t,n,r){var i=e.updateQueue;Oo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===a?o=u:a.next=u,a=l;var c=e.alternate;null!==c&&(s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l)}if(null!==o){var h=i.baseState;for(a=0,c=u=l=null,s=o;;){var d=s.lane,f=s.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,y=s;switch(d=t,f=n,y.tag){case 1:if("function"==typeof(p=y.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(d="function"==typeof(p=y.payload)?p.call(f,h,d):p))break e;h=F({},h,d);break e;case 2:Oo=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else f={eventTime:f,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,a|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Ml|=a,e.lanes=a,e.memoizedState=h}}function Lo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(o(191,i));i.call(r)}}}var Fo=(new r.Component).refs;function Uo(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Bo={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ql(),i=Zl(e),o=Io(r,i);o.payload=t,null!=n&&(o.callback=n),null!==(t=No(e,o,i))&&(Jl(t,e,i,r),Mo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ql(),i=Zl(e),o=Io(r,i);o.tag=1,o.payload=t,null!=n&&(o.callback=n),null!==(t=No(e,o,i))&&(Jl(t,e,i,r),Mo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ql(),r=Zl(e),i=Io(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=No(e,i,r))&&(Jl(t,e,r,n),Mo(t,e,r))}};function Go(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!(t.prototype&&t.prototype.isPureReactComponent&&or(n,r)&&or(i,o))}function jo(e,t,n){var r=!1,i=Ti,o=t.contextType;return"object"==typeof o&&null!==o?o=So(o):(i=Ri(t)?Pi:wi.current,o=(r=null!=(r=t.contextTypes))?Oi(e,i):Ti),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function $o(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bo.enqueueReplaceState(t,t.state,null)}function zo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Fo,Ro(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=So(o):(o=Ri(t)?Pi:wi.current,i.context=Oi(e,o)),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(Uo(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Bo.enqueueReplaceState(i,i.state,null),Do(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function Xo(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===Fo&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!=typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ho(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Vo(e){return(0,e._init)(e._payload)}function Yo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Cu(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=ku(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var o=n.type;return o===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===N&&Vo(o)===t.type)?((r=i(t,n.props)).ref=Xo(e,t,n),r.return=e,r):((r=Iu(n.type,n.key,n.props,null,e.mode,r)).ref=Xo(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Du(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Nu(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=ku(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Iu(t.type,t.key,t.props,null,e.mode,n)).ref=Xo(e,null,t),n.return=e,n;case E:return(t=Du(t,e.mode,n)).return=e,t;case N:return d(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Nu(t,e.mode,n,null)).return=e,t;Ho(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?u(e,t,n,r):null;case E:return n.key===i?c(e,t,n,r):null;case N:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:h(e,t,n,r,null);Ho(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case N:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return h(t,e=e.get(n)||null,r,i,null);Ho(t,r)}return null}function y(i,o,s,l){for(var u=null,c=null,h=o,y=o=0,m=null;null!==h&&y<s.length;y++){h.index>y?(m=h,h=null):m=h.sibling;var g=f(i,h,s[y],l);if(null===g){null===h&&(h=m);break}e&&h&&null===g.alternate&&t(i,h),o=a(g,o,y),null===c?u=g:c.sibling=g,c=g,h=m}if(y===s.length)return n(i,h),to&&qi(i,y),u;if(null===h){for(;y<s.length;y++)null!==(h=d(i,s[y],l))&&(o=a(h,o,y),null===c?u=h:c.sibling=h,c=h);return to&&qi(i,y),u}for(h=r(i,h);y<s.length;y++)null!==(m=p(h,i,y,s[y],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?y:m.key),o=a(m,o,y),null===c?u=m:c.sibling=m,c=m);return e&&h.forEach((function(e){return t(i,e)})),to&&qi(i,y),u}function m(i,s,l,u){var c=D(l);if("function"!=typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var h=c=null,y=s,m=s=0,g=null,v=l.next();null!==y&&!v.done;m++,v=l.next()){y.index>m?(g=y,y=null):g=y.sibling;var _=f(i,y,v.value,u);if(null===_){null===y&&(y=g);break}e&&y&&null===_.alternate&&t(i,y),s=a(_,s,m),null===h?c=_:h.sibling=_,h=_,y=g}if(v.done)return n(i,y),to&&qi(i,m),c;if(null===y){for(;!v.done;m++,v=l.next())null!==(v=d(i,v.value,u))&&(s=a(v,s,m),null===h?c=v:h.sibling=v,h=v);return to&&qi(i,m),c}for(y=r(i,y);!v.done;m++,v=l.next())null!==(v=p(y,i,m,v.value,u))&&(e&&null!==v.alternate&&y.delete(null===v.key?m:v.key),s=a(v,s,m),null===h?c=v:h.sibling=v,h=v);return e&&y.forEach((function(e){return t(i,e)})),to&&qi(i,m),c}return function e(r,o,a,l){if("object"==typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"==typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var u=a.key,c=o;null!==c;){if(c.key===u){if((u=a.type)===S){if(7===c.tag){n(r,c.sibling),(o=i(c,a.props.children)).return=r,r=o;break e}}else if(c.elementType===u||"object"==typeof u&&null!==u&&u.$$typeof===N&&Vo(u)===c.type){n(r,c.sibling),(o=i(c,a.props)).ref=Xo(r,c,a),o.return=r,r=o;break e}n(r,c);break}t(r,c),c=c.sibling}a.type===S?((o=Nu(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Iu(a.type,a.key,a.props,null,r.mode,l)).ref=Xo(r,o,a),l.return=r,r=l)}return s(r);case E:e:{for(c=a.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Du(a,r.mode,l)).return=r,r=o}return s(r);case N:return e(r,o,(c=a._init)(a._payload),l)}if(te(a))return y(r,o,a,l);if(D(a))return m(r,o,a,l);Ho(r,a)}return"string"==typeof a&&""!==a||"number"==typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=ku(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var Wo=Yo(!0),qo=Yo(!1),Ko={},Qo=xi(Ko),Zo=xi(Ko),Jo=xi(Ko);function ea(e){if(e===Ko)throw Error(o(174));return e}function ta(e,t){switch(Si(Jo,t),Si(Zo,e),Si(Qo,Ko),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Qo),Si(Qo,t)}function na(){Ei(Qo),Ei(Zo),Ei(Jo)}function ra(e){ea(Jo.current);var t=ea(Qo.current),n=le(t,e.type);t!==n&&(Si(Zo,e),Si(Qo,n))}function ia(e){Zo.current===e&&(Ei(Qo),Ei(Zo))}var oa=xi(0);function aa(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sa=[];function la(){for(var e=0;e<sa.length;e++)sa[e]._workInProgressVersionPrimary=null;sa.length=0}var ua=b.ReactCurrentDispatcher,ca=b.ReactCurrentBatchConfig,ha=0,da=null,fa=null,pa=null,ya=!1,ma=!1,ga=0,va=0;function _a(){throw Error(o(321))}function ba(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ir(e[n],t[n]))return!1;return!0}function xa(e,t,n,r,i,a){if(ha=a,da=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ua.current=null===e||null===e.memoizedState?is:os,e=n(r,i),ma){a=0;do{if(ma=!1,ga=0,25<=a)throw Error(o(301));a+=1,pa=fa=null,t.updateQueue=null,ua.current=as,e=n(r,i)}while(ma)}if(ua.current=rs,t=null!==fa&&null!==fa.next,ha=0,pa=fa=da=null,ya=!1,t)throw Error(o(300));return e}function Ea(){var e=0!==ga;return ga=0,e}function Sa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===pa?da.memoizedState=pa=e:pa=pa.next=e,pa}function Ta(){if(null===fa){var e=da.alternate;e=null!==e?e.memoizedState:null}else e=fa.next;var t=null===pa?da.memoizedState:pa.next;if(null!==t)pa=t,fa=e;else{if(null===e)throw Error(o(310));e={memoizedState:(fa=e).memoizedState,baseState:fa.baseState,baseQueue:fa.baseQueue,queue:fa.queue,next:null},null===pa?da.memoizedState=pa=e:pa=pa.next=e}return pa}function wa(e,t){return"function"==typeof t?t(e):t}function Aa(e){var t=Ta(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=fa,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,u=null,c=a;do{var h=c.lane;if((ha&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,s=r):u=u.next=d,da.lanes|=h,Ml|=h}c=c.next}while(null!==c&&c!==a);null===u?s=r:u.next=l,ir(r,t.memoizedState)||(gs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,da.lanes|=a,Ml|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Pa(e){var t=Ta(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);ir(a,t.memoizedState)||(gs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Oa(){}function Ra(e,t){var n=da,r=Ta(),i=t(),a=!ir(r.memoizedState,i);if(a&&(r.memoizedState=i,gs=!0),r=r.queue,ja(Na.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==pa&&1&pa.memoizedState.tag){if(n.flags|=2048,La(9,Ia.bind(null,n,r,i,t),void 0,null),null===Al)throw Error(o(349));0!=(30&ha)||Ca(n,t,i)}return i}function Ca(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=da.updateQueue)?(t={lastEffect:null,stores:null},da.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ia(e,t,n,r){t.value=n,t.getSnapshot=r,Ma(t)&&ka(e)}function Na(e,t,n){return n((function(){Ma(t)&&ka(e)}))}function Ma(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ir(e,n)}catch(e){return!0}}function ka(e){var t=Po(e,1);null!==t&&Jl(t,e,1,-1)}function Da(e){var t=Sa();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ja.bind(null,da,e),[t.memoizedState,e]}function La(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=da.updateQueue)?(t={lastEffect:null,stores:null},da.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Fa(){return Ta().memoizedState}function Ua(e,t,n,r){var i=Sa();da.flags|=e,i.memoizedState=La(1|t,n,void 0,void 0===r?null:r)}function Ba(e,t,n,r){var i=Ta();r=void 0===r?null:r;var o=void 0;if(null!==fa){var a=fa.memoizedState;if(o=a.destroy,null!==r&&ba(r,a.deps))return void(i.memoizedState=La(t,n,o,r))}da.flags|=e,i.memoizedState=La(1|t,n,o,r)}function Ga(e,t){return Ua(8390656,8,e,t)}function ja(e,t){return Ba(2048,8,e,t)}function $a(e,t){return Ba(4,2,e,t)}function za(e,t){return Ba(4,4,e,t)}function Xa(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ha(e,t,n){return n=null!=n?n.concat([e]):null,Ba(4,4,Xa.bind(null,t,e),n)}function Va(){}function Ya(e,t){var n=Ta();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ba(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wa(e,t){var n=Ta();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ba(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qa(e,t,n){return 0==(21&ha)?(e.baseState&&(e.baseState=!1,gs=!0),e.memoizedState=n):(ir(n,t)||(n=yt(),da.lanes|=n,Ml|=n,e.baseState=!0),t)}function Ka(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=ca.transition;ca.transition={};try{e(!1),t()}finally{_t=n,ca.transition=r}}function Qa(){return Ta().memoizedState}function Za(e,t,n){var r=Zl(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},es(e)?ts(t,n):null!==(n=Ao(e,t,n,r))&&(Jl(n,e,r,Ql()),ns(n,t,r))}function Ja(e,t,n){var r=Zl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(es(e))ts(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,ir(s,a)){var l=t.interleaved;return null===l?(i.next=i,wo(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(e){}null!==(n=Ao(e,t,i,r))&&(Jl(n,e,r,i=Ql()),ns(n,t,r))}}function es(e){var t=e.alternate;return e===da||null!==t&&t===da}function ts(e,t){ma=ya=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ns(e,t,n){if(0!=(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var rs={readContext:So,useCallback:_a,useContext:_a,useEffect:_a,useImperativeHandle:_a,useInsertionEffect:_a,useLayoutEffect:_a,useMemo:_a,useReducer:_a,useRef:_a,useState:_a,useDebugValue:_a,useDeferredValue:_a,useTransition:_a,useMutableSource:_a,useSyncExternalStore:_a,useId:_a,unstable_isNewReconciler:!1},is={readContext:So,useCallback:function(e,t){return Sa().memoizedState=[e,void 0===t?null:t],e},useContext:So,useEffect:Ga,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Ua(4194308,4,Xa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ua(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ua(4,2,e,t)},useMemo:function(e,t){var n=Sa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Sa();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Za.bind(null,da,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Sa().memoizedState=e},useState:Da,useDebugValue:Va,useDeferredValue:function(e){return Sa().memoizedState=e},useTransition:function(){var e=Da(!1),t=e[0];return e=Ka.bind(null,e[1]),Sa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=da,i=Sa();if(to){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Al)throw Error(o(349));0!=(30&ha)||Ca(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Ga(Na.bind(null,r,a,e),[e]),r.flags|=2048,La(9,Ia.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Sa(),t=Al.identifierPrefix;if(to){var n=Wi;t=":"+t+"R"+(n=(Yi&~(1<<32-at(Yi)-1)).toString(32)+n),0<(n=ga++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=va++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},os={readContext:So,useCallback:Ya,useContext:So,useEffect:ja,useImperativeHandle:Ha,useInsertionEffect:$a,useLayoutEffect:za,useMemo:Wa,useReducer:Aa,useRef:Fa,useState:function(){return Aa(wa)},useDebugValue:Va,useDeferredValue:function(e){return qa(Ta(),fa.memoizedState,e)},useTransition:function(){return[Aa(wa)[0],Ta().memoizedState]},useMutableSource:Oa,useSyncExternalStore:Ra,useId:Qa,unstable_isNewReconciler:!1},as={readContext:So,useCallback:Ya,useContext:So,useEffect:ja,useImperativeHandle:Ha,useInsertionEffect:$a,useLayoutEffect:za,useMemo:Wa,useReducer:Pa,useRef:Fa,useState:function(){return Pa(wa)},useDebugValue:Va,useDeferredValue:function(e){var t=Ta();return null===fa?t.memoizedState=e:qa(t,fa.memoizedState,e)},useTransition:function(){return[Pa(wa)[0],Ta().memoizedState]},useMutableSource:Oa,useSyncExternalStore:Ra,useId:Qa,unstable_isNewReconciler:!1};function ss(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i,digest:null}}function ls(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function us(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var cs="function"==typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=Io(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){jl||(jl=!0,$l=r),us(0,t)},n}function ds(e,t,n){(n=Io(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){us(0,t)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){us(0,t),"function"!=typeof r&&(null===zl?zl=new Set([this]):zl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new cs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Eu.bind(null,e,t,n),t.then(e,e))}function ps(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Io(-1,1)).tag=2,No(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ms=b.ReactCurrentOwner,gs=!1;function vs(e,t,n,r){t.child=null===e?qo(t,null,n,r):Wo(t,e.child,n,r)}function _s(e,t,n,r,i){n=n.render;var o=t.ref;return Eo(t,i),r=xa(e,t,n,r,o,i),n=Ea(),null===e||gs?(to&&n&&Qi(t),t.flags|=1,vs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,js(e,t,i))}function bs(e,t,n,r,i){if(null===e){var o=n.type;return"function"!=typeof o||Ru(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Iu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,xs(e,t,o,r,i))}if(o=e.child,0==(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:or)(a,r)&&e.ref===t.ref)return js(e,t,i)}return t.flags|=1,(e=Cu(o,r)).ref=t.ref,e.return=t,t.child=e}function xs(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(or(o,r)&&e.ref===t.ref){if(gs=!1,t.pendingProps=r=o,0==(e.lanes&i))return t.lanes=e.lanes,js(e,t,i);0!=(131072&e.flags)&&(gs=!0)}}return Ts(e,t,n,r,i)}function Es(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Cl,Rl),Rl|=n;else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Cl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Si(Cl,Rl),Rl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Si(Cl,Rl),Rl|=r;return vs(e,t,i,n),t.child}function Ss(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var o=Ri(n)?Pi:wi.current;return o=Oi(t,o),Eo(t,i),n=xa(e,t,n,r,o,i),r=Ea(),null===e||gs?(to&&r&&Qi(t),t.flags|=1,vs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,js(e,t,i))}function ws(e,t,n,r,i){if(Ri(n)){var o=!0;Mi(t)}else o=!1;if(Eo(t,i),null===t.stateNode)Gs(e,t),jo(t,n,r),zo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;u="object"==typeof u&&null!==u?So(u):Oi(t,u=Ri(n)?Pi:wi.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==u)&&$o(t,a,r,u),Oo=!1;var d=t.memoizedState;a.state=d,Do(t,r,a,i),l=t.memoizedState,s!==r||d!==l||Ai.current||Oo?("function"==typeof c&&(Uo(t,n,c,r),l=t.memoizedState),(s=Oo||Go(t,n,s,r,d,l,u))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Co(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:po(t.type,s),a.props=u,h=t.pendingProps,d=a.context,l="object"==typeof(l=n.contextType)&&null!==l?So(l):Oi(t,l=Ri(n)?Pi:wi.current);var f=n.getDerivedStateFromProps;(c="function"==typeof f||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==h||d!==l)&&$o(t,a,r,l),Oo=!1,d=t.memoizedState,a.state=d,Do(t,r,a,i);var p=t.memoizedState;s!==h||d!==p||Ai.current||Oo?("function"==typeof f&&(Uo(t,n,f,r),p=t.memoizedState),(u=Oo||Go(t,n,u,r,d,p,l)||!1)?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=u):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return As(e,t,n,r,o,i)}function As(e,t,n,r,i,o){Ss(e,t);var a=0!=(128&t.flags);if(!r&&!a)return i&&ki(t,n,!1),js(e,t,o);r=t.stateNode,ms.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Wo(t,e.child,null,o),t.child=Wo(t,null,s,o)):vs(e,t,s,o),t.memoizedState=r.state,i&&ki(t,n,!0),t.child}function Ps(e){var t=e.stateNode;t.pendingContext?Ii(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ii(0,t.context,!1),ta(e,t.containerInfo)}function Os(e,t,n,r,i){return co(),ho(i),t.flags|=256,vs(e,t,n,r),t.child}var Rs,Cs,Is,Ns={dehydrated:null,treeContext:null,retryLane:0};function Ms(e){return{baseLanes:e,cachePool:null,transitions:null}}function ks(e,t,n){var r,i=t.pendingProps,a=oa.current,s=!1,l=0!=(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!=(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Si(oa,1&a),null===e)return ao(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0==(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Mu(l,i,0,null),e=Nu(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ms(n),t.memoizedState=Ns,e):Ds(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,Ls(e,t,s,r=ls(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Mu({mode:"visible",children:r.children},i,0,null),(a=Nu(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!=(1&t.mode)&&Wo(t,e.child,null,s),t.child.memoizedState=Ms(s),t.memoizedState=Ns,a);if(0==(1&t.mode))return Ls(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ls(e,t,s,r=ls(a=Error(o(419)),r,void 0))}if(l=0!=(s&e.childLanes),gs||l){if(null!==(r=Al)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!=(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Po(e,i),Jl(r,e,i,-1))}return du(),Ls(e,t,s,r=ls(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tu.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,eo=ai(i.nextSibling),Ji=t,to=!0,no=null,null!==e&&(Xi[Hi++]=Yi,Xi[Hi++]=Wi,Xi[Hi++]=Vi,Yi=e.id,Wi=e.overflow,Vi=t),(t=Ds(t,r.children)).flags|=4096,t)}(e,t,l,i,r,a,n);if(s){s=i.fallback,l=t.mode,r=(a=e.child).sibling;var u={mode:"hidden",children:i.children};return 0==(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Cu(a,u)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Cu(r,s):(s=Nu(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Ms(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ns,i}return e=(s=e.child).sibling,i=Cu(s,{mode:"visible",children:i.children}),0==(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ds(e,t){return(t=Mu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ls(e,t,n,r){return null!==r&&ho(r),Wo(t,e.child,null,n),(e=Ds(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xo(e.return,t,n)}function Us(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Bs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(vs(e,t,r.children,n),0!=(2&(r=oa.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fs(e,n,t);else if(19===e.tag)Fs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(oa,r),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===aa(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Us(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===aa(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Us(t,!0,n,null,o);break;case"together":Us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gs(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function js(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Cu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Cu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function $s(e,t){if(!to)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function zs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xs(e,t,n){var r=t.pendingProps;switch(Zi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zs(t),null;case 1:case 17:return Ri(t.type)&&Ci(),zs(t),null;case 3:return r=t.stateNode,na(),Ei(Ai),Ei(wi),la(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(lo(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==no&&(ru(no),no=null))),zs(t),null;case 5:ia(t);var i=ea(Jo.current);if(n=t.type,null!==e&&null!=t.stateNode)Cs(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return zs(t),null}if(e=ea(Qo.current),lo(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[ui]=t,r[ci]=a,e=0!=(1&t.mode),n){case"dialog":Lr("cancel",r),Lr("close",r);break;case"iframe":case"object":case"embed":Lr("load",r);break;case"video":case"audio":for(i=0;i<Nr.length;i++)Lr(Nr[i],r);break;case"source":Lr("error",r);break;case"img":case"image":case"link":Lr("error",r),Lr("load",r);break;case"details":Lr("toggle",r);break;case"input":K(r,a),Lr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Lr("invalid",r);break;case"textarea":ie(r,a),Lr("invalid",r)}for(var l in ve(n,a),i=null,a)if(a.hasOwnProperty(l)){var u=a[l];"children"===l?"string"==typeof u?r.textContent!==u&&(!0!==a.suppressHydrationWarning&&qr(r.textContent,u,e),i=["children",u]):"number"==typeof u&&r.textContent!==""+u&&(!0!==a.suppressHydrationWarning&&qr(r.textContent,u,e),i=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Lr("scroll",r)}switch(n){case"input":V(r),J(r,a,!0);break;case"textarea":V(r),ae(r);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(r.onclick=Kr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ui]=t,e[ci]=r,Rs(e,t),t.stateNode=e;e:{switch(l=_e(n,r),n){case"dialog":Lr("cancel",e),Lr("close",e),i=r;break;case"iframe":case"object":case"embed":Lr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Nr.length;i++)Lr(Nr[i],e);i=r;break;case"source":Lr("error",e),i=r;break;case"img":case"image":case"link":Lr("error",e),Lr("load",e),i=r;break;case"details":Lr("toggle",e),i=r;break;case"input":K(e,r),i=q(e,r),Lr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Lr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Lr("invalid",e)}for(a in ve(n,i),u=i)if(u.hasOwnProperty(a)){var c=u[a];"style"===a?me(e,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===a?"string"==typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"==typeof c&&de(e,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=c&&"onScroll"===a&&Lr("scroll",e):null!=c&&_(e,a,c,l))}switch(n){case"input":V(e),J(e,r,!1);break;case"textarea":V(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+X(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Kr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return zs(t),null;case 6:if(e&&null!=t.stateNode)Is(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(o(166));if(n=ea(Jo.current),ea(Qo.current),lo(t)){if(r=t.stateNode,n=t.memoizedProps,r[ui]=t,(a=r.nodeValue!==n)&&null!==(e=Ji))switch(e.tag){case 3:qr(r.nodeValue,n,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&qr(r.nodeValue,n,0!=(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ui]=t,t.stateNode=r}return zs(t),null;case 13:if(Ei(oa),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(to&&null!==eo&&0!=(1&t.mode)&&0==(128&t.flags))uo(),co(),t.flags|=98560,a=!1;else if(a=lo(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[ui]=t}else co(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;zs(t),a=!1}else null!==no&&(ru(no),no=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!=(128&t.flags)?(t.lanes=n,t):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&oa.current)?0===Il&&(Il=3):du())),null!==t.updateQueue&&(t.flags|=4),zs(t),null);case 4:return na(),null===e&&Br(t.stateNode.containerInfo),zs(t),null;case 10:return bo(t.type._context),zs(t),null;case 19:if(Ei(oa),null===(a=t.memoizedState))return zs(t),null;if(r=0!=(128&t.flags),null===(l=a.rendering))if(r)$s(a,!1);else{if(0!==Il||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=aa(e))){for(t.flags|=128,$s(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(oa,1&oa.current|2),t.child}e=e.sibling}null!==a.tail&&Qe()>Bl&&(t.flags|=128,r=!0,$s(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=aa(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),$s(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!to)return zs(t),null}else 2*Qe()-a.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,$s(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Qe(),t.sibling=null,n=oa.current,Si(oa,r?1&n|2:1&n),t):(zs(t),null);case 22:case 23:return lu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!=(1&t.mode)?0!=(1073741824&Rl)&&(zs(t),6&t.subtreeFlags&&(t.flags|=8192)):zs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Hs(e,t){switch(Zi(t),t.tag){case 1:return Ri(t.type)&&Ci(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return na(),Ei(Ai),Ei(wi),la(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ia(t),null;case 13:if(Ei(oa),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));co()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(oa),null;case 4:return na(),null;case 10:return bo(t.type._context),null;case 22:case 23:return lu(),null;default:return null}}Rs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Cs=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ea(Qo.current);var o,a=null;switch(n){case"input":i=q(e,i),r=q(e,r),a=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Kr)}for(c in ve(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(a=a||[]).push(c,u)):"children"===c?"string"!=typeof u&&"number"!=typeof u||(a=a||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Lr("scroll",e),a||l===u||(a=[])):(a=a||[]).push(c,u))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Is=function(e,t,n,r){n!==r&&(t.flags|=4)};var Vs=!1,Ys=!1,Ws="function"==typeof WeakSet?WeakSet:Set,qs=null;function Ks(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){xu(e,t,n)}else n.current=null}function Qs(e,t,n){try{n()}catch(n){xu(e,t,n)}}var Zs=!1;function Js(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&Qs(t,n,o)}i=i.next}while(i!==r)}}function el(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function tl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function nl(e){var t=e.alternate;null!==t&&(e.alternate=null,nl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[ui],delete t[ci],delete t[di],delete t[fi],delete t[pi]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rl(e){return 5===e.tag||3===e.tag||4===e.tag}function il(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ol(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Kr));else if(4!==r&&null!==(e=e.child))for(ol(e,t,n),e=e.sibling;null!==e;)ol(e,t,n),e=e.sibling}function al(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(al(e,t,n),e=e.sibling;null!==e;)al(e,t,n),e=e.sibling}var sl=null,ll=!1;function ul(e,t,n){for(n=n.child;null!==n;)cl(e,t,n),n=n.sibling}function cl(e,t,n){if(ot&&"function"==typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(e){}switch(n.tag){case 5:Ys||Ks(n,t);case 6:var r=sl,i=ll;sl=null,ul(e,t,n),ll=i,null!==(sl=r)&&(ll?(e=sl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):sl.removeChild(n.stateNode));break;case 18:null!==sl&&(ll?(e=sl,n=n.stateNode,8===e.nodeType?oi(e.parentNode,n):1===e.nodeType&&oi(e,n),$t(e)):oi(sl,n.stateNode));break;case 4:r=sl,i=ll,sl=n.stateNode.containerInfo,ll=!0,ul(e,t,n),sl=r,ll=i;break;case 0:case 11:case 14:case 15:if(!Ys&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!=(2&o)||0!=(4&o))&&Qs(n,t,a),i=i.next}while(i!==r)}ul(e,t,n);break;case 1:if(!Ys&&(Ks(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){xu(n,t,e)}ul(e,t,n);break;case 21:ul(e,t,n);break;case 22:1&n.mode?(Ys=(r=Ys)||null!==n.memoizedState,ul(e,t,n),Ys=r):ul(e,t,n);break;default:ul(e,t,n)}}function hl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ws),t.forEach((function(t){var r=wu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function dl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:sl=l.stateNode,ll=!1;break e;case 3:case 4:sl=l.stateNode.containerInfo,ll=!0;break e}l=l.return}if(null===sl)throw Error(o(160));cl(a,s,i),sl=null,ll=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(e){xu(i,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)fl(t,e),t=t.sibling}function fl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dl(t,e),pl(e),4&r){try{Js(3,e,e.return),el(3,e)}catch(t){xu(e,e.return,t)}try{Js(5,e,e.return)}catch(t){xu(e,e.return,t)}}break;case 1:dl(t,e),pl(e),512&r&&null!==n&&Ks(n,n.return);break;case 5:if(dl(t,e),pl(e),512&r&&null!==n&&Ks(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(t){xu(e,e.return,t)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===a.type&&null!=a.name&&Q(i,a),_e(l,s);var c=_e(l,a);for(s=0;s<u.length;s+=2){var h=u[s],d=u[s+1];"style"===h?me(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):_(i,h,d,c)}switch(l){case"input":Z(i,a);break;case"textarea":oe(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[ci]=a}catch(t){xu(e,e.return,t)}}break;case 6:if(dl(t,e),pl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(t){xu(e,e.return,t)}}break;case 3:if(dl(t,e),pl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{$t(t.containerInfo)}catch(t){xu(e,e.return,t)}break;case 4:default:dl(t,e),pl(e);break;case 13:dl(t,e),pl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Ul=Qe())),4&r&&hl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ys=(c=Ys)||h,dl(t,e),Ys=c):dl(t,e),pl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!=(1&e.mode))for(qs=e,h=e.child;null!==h;){for(d=qs=h;null!==qs;){switch(p=(f=qs).child,f.tag){case 0:case 11:case 14:case 15:Js(4,f,f.return);break;case 1:Ks(f,f.return);var y=f.stateNode;if("function"==typeof y.componentWillUnmount){r=f,n=f.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(e){xu(r,n,e)}}break;case 5:Ks(f,f.return);break;case 22:if(null!==f.memoizedState){vl(d);continue}}null!==p?(p.return=f,qs=p):vl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"==typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,s=null!=(u=d.memoizedProps.style)&&u.hasOwnProperty("display")?u.display:null,l.style.display=ye("display",s))}catch(t){xu(e,e.return,t)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(t){xu(e,e.return,t)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:dl(t,e),pl(e),4&r&&hl(e);case 21:}}function pl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(rl(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),al(e,il(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ol(e,il(e),a);break;default:throw Error(o(161))}}catch(t){xu(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){qs=e,ml(e,t,n)}function ml(e,t,n){for(var r=0!=(1&e.mode);null!==qs;){var i=qs,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Vs;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Ys;s=Vs;var u=Ys;if(Vs=a,(Ys=l)&&!u)for(qs=i;null!==qs;)l=(a=qs).child,22===a.tag&&null!==a.memoizedState?_l(i):null!==l?(l.return=a,qs=l):_l(i);for(;null!==o;)qs=o,ml(o,t,n),o=o.sibling;qs=i,Vs=s,Ys=u}gl(e)}else 0!=(8772&i.subtreeFlags)&&null!==o?(o.return=i,qs=o):gl(e)}}function gl(e){for(;null!==qs;){var t=qs;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ys||el(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ys)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:po(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Lo(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Lo(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&$t(d)}}}break;default:throw Error(o(163))}Ys||512&t.flags&&tl(t)}catch(e){xu(t,t.return,e)}}if(t===e){qs=null;break}if(null!==(n=t.sibling)){n.return=t.return,qs=n;break}qs=t.return}}function vl(e){for(;null!==qs;){var t=qs;if(t===e){qs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,qs=n;break}qs=t.return}}function _l(e){for(;null!==qs;){var t=qs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{el(4,t)}catch(e){xu(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(e){xu(t,i,e)}}var o=t.return;try{tl(t)}catch(e){xu(t,o,e)}break;case 5:var a=t.return;try{tl(t)}catch(e){xu(t,a,e)}}}catch(e){xu(t,t.return,e)}if(t===e){qs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,qs=s;break}qs=t.return}}var bl,xl=Math.ceil,El=b.ReactCurrentDispatcher,Sl=b.ReactCurrentOwner,Tl=b.ReactCurrentBatchConfig,wl=0,Al=null,Pl=null,Ol=0,Rl=0,Cl=xi(0),Il=0,Nl=null,Ml=0,kl=0,Dl=0,Ll=null,Fl=null,Ul=0,Bl=1/0,Gl=null,jl=!1,$l=null,zl=null,Xl=!1,Hl=null,Vl=0,Yl=0,Wl=null,ql=-1,Kl=0;function Ql(){return 0!=(6&wl)?Qe():-1!==ql?ql:ql=Qe()}function Zl(e){return 0==(1&e.mode)?1:0!=(2&wl)&&0!==Ol?Ol&-Ol:null!==fo.transition?(0===Kl&&(Kl=yt()),Kl):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function Jl(e,t,n,r){if(50<Yl)throw Yl=0,Wl=null,Error(o(185));gt(e,n,r),0!=(2&wl)&&e===Al||(e===Al&&(0==(2&wl)&&(kl|=n),4===Il&&iu(e,Ol)),eu(e,r),1===n&&0===wl&&0==(1&t.mode)&&(Bl=Qe()+500,Li&&Bi()))}function eu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,l=i[a];-1===l?0!=(s&n)&&0==(s&r)||(i[a]=ft(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=dt(e,e===Al?Ol:0);if(0===r)null!==n&&We(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&We(n),1===t)0===e.tag?function(e){Li=!0,Ui(e)}(ou.bind(null,e)):Ui(ou.bind(null,e)),ri((function(){0==(6&wl)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Au(n,tu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function tu(e,t){if(ql=-1,Kl=0,0!=(6&wl))throw Error(o(327));var n=e.callbackNode;if(_u()&&e.callbackNode!==n)return null;var r=dt(e,e===Al?Ol:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=fu(e,r);else{t=r;var i=wl;wl|=2;var a=hu();for(Al===e&&Ol===t||(Gl=null,Bl=Qe()+500,uu(e,t));;)try{yu();break}catch(t){cu(e,t)}_o(),El.current=a,wl=i,null!==Pl?t=0:(Al=null,Ol=0,t=Il)}if(0!==t){if(2===t&&0!==(i=pt(e))&&(r=i,t=nu(e,i)),1===t)throw n=Nl,uu(e,0),iu(e,r),eu(e,Qe()),n;if(6===t)iu(e,r);else{if(i=e.current.alternate,0==(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ir(o(),i))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=fu(e,r))&&0!==(a=pt(e))&&(r=a,t=nu(e,a)),1===t))throw n=Nl,uu(e,0),iu(e,r),eu(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:vu(e,Fl,Gl);break;case 3:if(iu(e,r),(130023424&r)===r&&10<(t=Ul+500-Qe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Ql(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ei(vu.bind(null,e,Fl,Gl),t);break}vu(e,Fl,Gl);break;case 4:if(iu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xl(r/1960))-r)){e.timeoutHandle=ei(vu.bind(null,e,Fl,Gl),r);break}vu(e,Fl,Gl);break;default:throw Error(o(329))}}}return eu(e,Qe()),e.callbackNode===n?tu.bind(null,e):null}function nu(e,t){var n=Ll;return e.current.memoizedState.isDehydrated&&(uu(e,t).flags|=256),2!==(e=fu(e,t))&&(t=Fl,Fl=n,null!==t&&ru(t)),e}function ru(e){null===Fl?Fl=e:Fl.push.apply(Fl,e)}function iu(e,t){for(t&=~Dl,t&=~kl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function ou(e){if(0!=(6&wl))throw Error(o(327));_u();var t=dt(e,0);if(0==(1&t))return eu(e,Qe()),null;var n=fu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=nu(e,r))}if(1===n)throw n=Nl,uu(e,0),iu(e,t),eu(e,Qe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vu(e,Fl,Gl),eu(e,Qe()),null}function au(e,t){var n=wl;wl|=1;try{return e(t)}finally{0===(wl=n)&&(Bl=Qe()+500,Li&&Bi())}}function su(e){null!==Hl&&0===Hl.tag&&0==(6&wl)&&_u();var t=wl;wl|=1;var n=Tl.transition,r=_t;try{if(Tl.transition=null,_t=1,e)return e()}finally{_t=r,Tl.transition=n,0==(6&(wl=t))&&Bi()}}function lu(){Rl=Cl.current,Ei(Cl)}function uu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ti(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(Zi(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Ci();break;case 3:na(),Ei(Ai),Ei(wi),la();break;case 5:ia(r);break;case 4:na();break;case 13:case 19:Ei(oa);break;case 10:bo(r.type._context);break;case 22:case 23:lu()}n=n.return}if(Al=e,Pl=e=Cu(e.current,null),Ol=Rl=t,Il=0,Nl=null,Dl=kl=Ml=0,Fl=Ll=null,null!==To){for(t=0;t<To.length;t++)if(null!==(r=(n=To[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}To=null}return e}function cu(e,t){for(;;){var n=Pl;try{if(_o(),ua.current=rs,ya){for(var r=da.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ya=!1}if(ha=0,pa=fa=da=null,ma=!1,ga=0,Sl.current=null,null===n||null===n.return){Il=1,Nl=t,Pl=null;break}e:{var a=e,s=n.return,l=n,u=t;if(t=Ol,l.flags|=32768,null!==u&&"object"==typeof u&&"function"==typeof u.then){var c=u,h=l,d=h.tag;if(0==(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ps(s);if(null!==p){p.flags&=-257,ys(p,s,l,0,t),1&p.mode&&fs(a,c,t),u=c;var y=(t=p).updateQueue;if(null===y){var m=new Set;m.add(u),t.updateQueue=m}else y.add(u);break e}if(0==(1&t)){fs(a,c,t),du();break e}u=Error(o(426))}else if(to&&1&l.mode){var g=ps(s);if(null!==g){0==(65536&g.flags)&&(g.flags|=256),ys(g,s,l,0,t),ho(ss(u,l));break e}}a=u=ss(u,l),4!==Il&&(Il=2),null===Ll?Ll=[a]:Ll.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,ko(a,hs(0,u,t));break e;case 1:l=u;var v=a.type,_=a.stateNode;if(0==(128&a.flags)&&("function"==typeof v.getDerivedStateFromError||null!==_&&"function"==typeof _.componentDidCatch&&(null===zl||!zl.has(_)))){a.flags|=65536,t&=-t,a.lanes|=t,ko(a,ds(a,l,t));break e}}a=a.return}while(null!==a)}gu(n)}catch(e){t=e,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function hu(){var e=El.current;return El.current=rs,null===e?rs:e}function du(){0!==Il&&3!==Il&&2!==Il||(Il=4),null===Al||0==(268435455&Ml)&&0==(268435455&kl)||iu(Al,Ol)}function fu(e,t){var n=wl;wl|=2;var r=hu();for(Al===e&&Ol===t||(Gl=null,uu(e,t));;)try{pu();break}catch(t){cu(e,t)}if(_o(),wl=n,El.current=r,null!==Pl)throw Error(o(261));return Al=null,Ol=0,Il}function pu(){for(;null!==Pl;)mu(Pl)}function yu(){for(;null!==Pl&&!qe();)mu(Pl)}function mu(e){var t=bl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?gu(e):Pl=t,Sl.current=null}function gu(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=Xs(n,t,Rl)))return void(Pl=n)}else{if(null!==(n=Hs(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Il=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Il&&(Il=5)}function vu(e,t,n){var r=_t,i=Tl.transition;try{Tl.transition=null,_t=1,function(e,t,n,r){do{_u()}while(null!==Hl);if(0!=(6&wl))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===Al&&(Pl=Al=null,Ol=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||Xl||(Xl=!0,Au(tt,(function(){return _u(),null}))),a=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||a){a=Tl.transition,Tl.transition=null;var s=_t;_t=1;var l=wl;wl|=4,Sl.current=null,function(e,t){if(Qr=Xt,cr(e=ur())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(e){n=null;break e}var s=0,l=-1,u=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=s+i),d!==a||0!==r&&3!==d.nodeType||(u=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===i&&(l=s),f===a&&++h===r&&(u=s),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zr={focusedElem:e,selectionRange:n},Xt=!1,qs=t;null!==qs;)if(e=(t=qs).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,qs=e;else for(;null!==qs;){t=qs;try{var y=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==y){var m=y.memoizedProps,g=y.memoizedState,v=t.stateNode,_=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:po(t.type,m),g);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(e){xu(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,qs=e;break}qs=t.return}y=Zs,Zs=!1}(e,n),fl(n,e),hr(Zr),Xt=!!Qr,Zr=Qr=null,e.current=n,yl(n,e,i),Ke(),wl=l,_t=s,Tl.transition=a}else e.current=n;if(Xl&&(Xl=!1,Hl=e,Vl=i),0===(a=e.pendingLanes)&&(zl=null),function(e){if(ot&&"function"==typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128==(128&e.current.flags))}catch(e){}}(n.stateNode),eu(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(jl)throw jl=!1,e=$l,$l=null,e;0!=(1&Vl)&&0!==e.tag&&_u(),0!=(1&(a=e.pendingLanes))?e===Wl?Yl++:(Yl=0,Wl=e):Yl=0,Bi()}(e,t,n,r)}finally{Tl.transition=i,_t=r}return null}function _u(){if(null!==Hl){var e=bt(Vl),t=Tl.transition,n=_t;try{if(Tl.transition=null,_t=16>e?16:e,null===Hl)var r=!1;else{if(e=Hl,Hl=null,Vl=0,0!=(6&wl))throw Error(o(331));var i=wl;for(wl|=4,qs=e.current;null!==qs;){var a=qs,s=a.child;if(0!=(16&qs.flags)){var l=a.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(qs=c;null!==qs;){var h=qs;switch(h.tag){case 0:case 11:case 15:Js(8,h,a)}var d=h.child;if(null!==d)d.return=h,qs=d;else for(;null!==qs;){var f=(h=qs).sibling,p=h.return;if(nl(h),h===c){qs=null;break}if(null!==f){f.return=p,qs=f;break}qs=p}}}var y=a.alternate;if(null!==y){var m=y.child;if(null!==m){y.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}qs=a}}if(0!=(2064&a.subtreeFlags)&&null!==s)s.return=a,qs=s;else e:for(;null!==qs;){if(0!=(2048&(a=qs).flags))switch(a.tag){case 0:case 11:case 15:Js(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,qs=v;break e}qs=a.return}}var _=e.current;for(qs=_;null!==qs;){var b=(s=qs).child;if(0!=(2064&s.subtreeFlags)&&null!==b)b.return=s,qs=b;else e:for(s=_;null!==qs;){if(0!=(2048&(l=qs).flags))try{switch(l.tag){case 0:case 11:case 15:el(9,l)}}catch(e){xu(l,l.return,e)}if(l===s){qs=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,qs=x;break e}qs=l.return}}if(wl=i,Bi(),ot&&"function"==typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(e){}r=!0}return r}finally{_t=n,Tl.transition=t}}return!1}function bu(e,t,n){e=No(e,t=hs(0,t=ss(n,t),1),1),t=Ql(),null!==e&&(gt(e,1,t),eu(e,t))}function xu(e,t,n){if(3===e.tag)bu(e,e,n);else for(;null!==t;){if(3===t.tag){bu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===zl||!zl.has(r))){t=No(t,e=ds(t,e=ss(n,e),1),1),e=Ql(),null!==t&&(gt(t,1,e),eu(t,e));break}}t=t.return}}function Eu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Ql(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Ol&n)===n&&(4===Il||3===Il&&(130023424&Ol)===Ol&&500>Qe()-Ul?uu(e,0):Dl|=n),eu(e,t)}function Su(e,t){0===t&&(0==(1&e.mode)?t=1:(t=ct,0==(130023424&(ct<<=1))&&(ct=4194304)));var n=Ql();null!==(e=Po(e,t))&&(gt(e,t,n),eu(e,n))}function Tu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Su(e,n)}function wu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Su(e,n)}function Au(e,t){return Ye(e,t)}function Pu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ou(e,t,n,r){return new Pu(e,t,n,r)}function Ru(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Cu(e,t){var n=e.alternate;return null===n?((n=Ou(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Iu(e,t,n,r,i,a){var s=2;if(r=e,"function"==typeof e)Ru(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case S:return Nu(n.children,i,a,t);case T:s=8,i|=8;break;case w:return(e=Ou(12,n,t,2|i)).elementType=w,e.lanes=a,e;case R:return(e=Ou(13,n,t,i)).elementType=R,e.lanes=a,e;case C:return(e=Ou(19,n,t,i)).elementType=C,e.lanes=a,e;case M:return Mu(n,i,a,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case A:s=10;break e;case P:s=9;break e;case O:s=11;break e;case I:s=14;break e;case N:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ou(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Nu(e,t,n,r){return(e=Ou(7,e,r,t)).lanes=n,e}function Mu(e,t,n,r){return(e=Ou(22,e,r,t)).elementType=M,e.lanes=n,e.stateNode={isHidden:!1},e}function ku(e,t,n){return(e=Ou(6,e,null,t)).lanes=n,e}function Du(e,t,n){return(t=Ou(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Lu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fu(e,t,n,r,i,o,a,s,l){return e=new Lu(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Ou(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ro(o),e}function Uu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Bu(e){if(!e)return Ti;e:{if($e(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Ni(e,n,t)}return t}function Gu(e,t,n,r,i,o,a,s,l){return(e=Fu(n,r,!0,e,0,o,0,s,l)).context=Bu(null),n=e.current,(o=Io(r=Ql(),i=Zl(n))).callback=null!=t?t:null,No(n,o,i),e.current.lanes=i,gt(e,i,r),eu(e,r),e}function ju(e,t,n,r){var i=t.current,o=Ql(),a=Zl(i);return n=Bu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Io(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=No(i,t,a))&&(Jl(e,i,a,o),Mo(e,i,a)),a}function $u(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function zu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xu(e,t){zu(e,t),(e=e.alternate)&&zu(e,t)}bl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)gs=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return gs=!1,function(e,t,n){switch(t.tag){case 3:Ps(t),co();break;case 5:ra(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:ta(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(yo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(oa,1&oa.current),t.flags|=128,null):0!=(n&t.child.childLanes)?ks(e,t,n):(Si(oa,1&oa.current),null!==(e=js(e,t,n))?e.sibling:null);Si(oa,1&oa.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return Bs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(oa,oa.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return js(e,t,n)}(e,t,n);gs=0!=(131072&e.flags)}else gs=!1,to&&0!=(1048576&t.flags)&&Ki(t,zi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Gs(e,t),e=t.pendingProps;var i=Oi(t,wi.current);Eo(t,n),i=xa(null,t,r,e,i,n);var a=Ea();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(a=!0,Mi(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ro(t),i.updater=Bo,t.stateNode=i,i._reactInternals=t,zo(t,r,e,n),t=As(null,t,r,!0,a,n)):(t.tag=0,to&&a&&Qi(t),vs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Gs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Ru(e)?1:0;if(null!=e){if((e=e.$$typeof)===O)return 11;if(e===I)return 14}return 2}(r),e=po(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=ws(null,t,r,e,n);break e;case 11:t=_s(null,t,r,e,n);break e;case 14:t=bs(null,t,r,po(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:po(r,i),n);case 1:return r=t.type,i=t.pendingProps,ws(e,t,r,i=t.elementType===r?i:po(r,i),n);case 3:e:{if(Ps(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,Co(e,t),Do(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Os(e,t,r,n,i=ss(Error(o(423)),t));break e}if(r!==i){t=Os(e,t,r,n,i=ss(Error(o(424)),t));break e}for(eo=ai(t.stateNode.containerInfo.firstChild),Ji=t,to=!0,no=null,n=qo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(co(),r===i){t=js(e,t,n);break e}vs(e,t,r,n)}t=t.child}return t;case 5:return ra(t),null===e&&ao(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,Jr(r,i)?s=null:null!==a&&Jr(r,a)&&(t.flags|=32),Ss(e,t),vs(e,t,s,n),t.child;case 6:return null===e&&ao(t),null;case 13:return ks(e,t,n);case 4:return ta(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Wo(t,null,r,n):vs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_s(e,t,r,i=t.elementType===r?i:po(r,i),n);case 7:return vs(e,t,t.pendingProps,n),t.child;case 8:case 12:return vs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Si(yo,r._currentValue),r._currentValue=s,null!==a)if(ir(a.value,s)){if(a.children===i.children&&!Ai.current){t=js(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===a.tag){(u=Io(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),xo(a.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),xo(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}vs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Eo(t,n),r=r(i=So(i)),t.flags|=1,vs(e,t,r,n),t.child;case 14:return i=po(r=t.type,t.pendingProps),bs(e,t,r,i=po(r.type,i),n);case 15:return xs(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:po(r,i),Gs(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Eo(t,n),jo(t,r,i),zo(t,r,i,n),As(null,t,r,!0,e,n);case 19:return Bs(e,t,n);case 22:return Es(e,t,n)}throw Error(o(156,t.tag))};var Hu="function"==typeof reportError?reportError:function(e){console.error(e)};function Vu(e){this._internalRoot=e}function Yu(e){this._internalRoot=e}function Wu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ku(){}function Qu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"==typeof i){var s=i;i=function(){var e=$u(a);s.call(e)}}ju(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"==typeof r){var o=r;r=function(){var e=$u(a);o.call(e)}}var a=Gu(t,r,e,0,null,!1,0,"",Ku);return e._reactRootContainer=a,e[hi]=a.current,Br(8===e.nodeType?e.parentNode:e),su(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var s=r;r=function(){var e=$u(l);s.call(e)}}var l=Fu(e,0,!1,null,0,!1,0,"",Ku);return e._reactRootContainer=l,e[hi]=l.current,Br(8===e.nodeType?e.parentNode:e),su((function(){ju(t,l,n,r)})),l}(n,t,e,i,r);return $u(a)}Yu.prototype.render=Vu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));ju(e,t,null,null)},Yu.prototype.unmount=Vu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;su((function(){ju(null,e,null,null)})),t[hi]=null}},Yu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mt.length&&0!==t&&t<Mt[n].priority;n++);Mt.splice(n,0,e),0===n&&Ft(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),eu(t,Qe()),0==(6&wl)&&(Bl=Qe()+500,Bi()))}break;case 13:su((function(){var t=Po(e,1);if(null!==t){var n=Ql();Jl(t,e,1,n)}})),Xu(e,1)}},Et=function(e){if(13===e.tag){var t=Po(e,134217728);null!==t&&Jl(t,e,134217728,Ql()),Xu(e,134217728)}},St=function(e){if(13===e.tag){var t=Zl(e),n=Po(e,t);null!==n&&Jl(n,e,t,Ql()),Xu(e,t)}},Tt=function(){return _t},wt=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},Ee=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=vi(r);if(!i)throw Error(o(90));Y(r),Z(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Oe=au,Re=su;var Zu={usingClientEntryPoint:!1,Events:[mi,gi,vi,Ae,Pe,au]},Ju={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ec={bundleType:Ju.bundleType,version:Ju.version,rendererPackageName:Ju.rendererPackageName,rendererConfig:Ju.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:Ju.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tc.isDisabled&&tc.supportsFiber)try{it=tc.inject(ec),ot=tc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Wu(t))throw Error(o(200));return Uu(e,t,null,n)},t.createRoot=function(e,t){if(!Wu(e))throw Error(o(299));var n=!1,r="",i=Hu;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Fu(e,1,!1,null,0,n,0,r,i),e[hi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Vu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return su(e)},t.hydrate=function(e,t,n){if(!qu(t))throw Error(o(200));return Qu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Wu(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Hu;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Gu(t,null,e,1,null!=n?n:null,i,0,a,s),e[hi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yu(t)},t.render=function(e,t,n){if(!qu(t))throw Error(o(200));return Qu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!qu(e))throw Error(o(40));return!!e._reactRootContainer&&(su((function(){Qu(null,null,e,!1,(function(){e._reactRootContainer=null,e[hi]=null}))})),!0)},t.unstable_batchedUpdates=au,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!qu(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Qu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},7634:(e,t,n)=>{"use strict";var r=n(1542);t.s=r.createRoot,r.hydrateRoot},1542:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(3577)},1535:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function _(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=g.prototype;var b=_.prototype=new v;b.constructor=_,y(b,g.prototype),b.isPureReactComponent=!0;var x=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function w(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)E.call(t,i)&&!T.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:S.current}}function A(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var P=/\/+/g;function O(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===o?"."+O(l,0):o,x(a)?(i="",null!=e&&(i=e.replace(P,"$&/")+"/"),R(a,t,i,"",(function(e){return e}))):null!=a&&(A(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(P,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",x(e))for(var u=0;u<e.length;u++){var c=o+O(s=e[u],u);l+=R(s,t,i,c,a)}else if(c=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"==typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=R(s=s.value,t,i,c=o+O(s,u++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function C(e,t,n){if(null==e)return e;var r=[],i=0;return R(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},M={transition:null},k={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:M,ReactCurrentOwner:S};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=a,t.PureComponent=_,t.StrictMode=o,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=y({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)E.call(t,u)&&!T.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=w,t.createFactory=function(e){var t=w.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return N.current.useCallback(e,t)},t.useContext=function(e){return N.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return N.current.useDeferredValue(e)},t.useEffect=function(e,t){return N.current.useEffect(e,t)},t.useId=function(){return N.current.useId()},t.useImperativeHandle=function(e,t,n){return N.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.current.useMemo(e,t)},t.useReducer=function(e,t,n){return N.current.useReducer(e,t,n)},t.useRef=function(e){return N.current.useRef(e)},t.useState=function(e){return N.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return N.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return N.current.useTransition()},t.version="18.2.0"},7378:(e,t,n)=>{"use strict";e.exports=n(1535)},308:(e,t,n)=>{"use strict";var r=n(3306),i=function(e,t){if(t&&t.bbox)return{leaf:t,x:t.bbox[0],y:t.bbox[1],w:t.bbox[2]-t.bbox[0],h:t.bbox[3]-t.bbox[1]};for(var n=e.length,r=0,i=new Array(n);r<n;)i[r]=[e[r][0],e[r][1]],r++;var o=i[0];n=i.length,r=1;for(var a={min:[].concat(o),max:[].concat(o)};r<n;)i[r][0]<a.min[0]?a.min[0]=i[r][0]:i[r][0]>a.max[0]&&(a.max[0]=i[r][0]),i[r][1]<a.min[1]?a.min[1]=i[r][1]:i[r][1]>a.max[1]&&(a.max[1]=i[r][1]),r++;var s={x:a.min[0],y:a.min[1],w:a.max[0]-a.min[0],h:a.max[1]-a.min[1]};return t&&(s.leaf=t),s},o={point:function(e,t){return t.insertSubtree({x:e.geometry.coordinates[0],y:e.geometry.coordinates[1],w:0,h:0,leaf:e},t.root)},multiPointLineString:function(e,t){return t.insertSubtree(i(e.geometry.coordinates,e),t.root)},multiLineStringPolygon:function(e,t){return t.insertSubtree(i(Array.prototype.concat.apply([],e.geometry.coordinates),e),t.root)},multiPolygon:function(e,t){return t.insertSubtree(i(Array.prototype.concat.apply([],Array.prototype.concat.apply([],e.geometry.coordinates)),e),t.root)},makeRec:function(e){return r(e.x,e.y,e.w,e.h)},geometryCollection:function(e,t){if(e.bbox)return t.insertSubtree({leaf:e,x:e.bbox[0],y:e.bbox[1],w:e.bbox[2]-e.bbox[0],h:e.bbox[3]-e.bbox[1]},t.root);for(var n,r=e.geometry.geometries,a=0,s=r.length,l=[];a<s;){switch((n=r[a]).type){case"Point":l.push(o.makeRec({x:n.coordinates[0],y:n.coordinates[1],w:0,h:0}));break;case"MultiPoint":case"LineString":l.push(o.makeRec(i(n.coordinates)));break;case"MultiLineString":case"Polygon":l.push(o.makeRec(i(Array.prototype.concat.apply([],n.coordinates))));break;case"MultiPolygon":l.push(o.makeRec(i(Array.prototype.concat.apply([],Array.prototype.concat.apply([],n.coordinates)))));break;case"GeometryCollection":s=(r=r.concat(n.geometries)).length}a++}var u=l[0];for(a=1,s=l.length;a<s;)u.expand(l[a]),a++;return t.insertSubtree({leaf:e,x:u.x(),y:u.y(),h:u.h(),w:u.w()},t.root)}};t.geoJSON=function(e){var t,n,r=this;if(Array.isArray(e))t=e.slice();else if(e.features&&Array.isArray(e.features))t=e.features.slice();else{if(!(e instanceof Object))throw"this isn't what we're looking for";t=[e]}for(var i=t.length,a=0;a<i;){if("Feature"===(n=t[a]).type)switch(n.geometry.type){case"Point":o.point(n,r);break;case"MultiPoint":case"LineString":o.multiPointLineString(n,r);break;case"MultiLineString":case"Polygon":o.multiLineStringPolygon(n,r);break;case"MultiPolygon":o.multiPolygon(n,r);break;case"GeometryCollection":o.geometryCollection(n,r)}a++}},t.bbox=function(){var e,t,n,r;switch(arguments.length){case 1:e=arguments[0][0][0],t=arguments[0][0][1],n=arguments[0][1][0],r=arguments[0][1][1];break;case 2:e=arguments[0][0],t=arguments[0][1],n=arguments[1][0],r=arguments[1][1];break;case 4:e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3]}return this.search({x:e,y:t,w:n-e,h:r-t})}},8071:(e,t,n)=>{"use strict";var r=n(4590),i=n(308);r.prototype.bbox=i.bbox,r.prototype.geoJSON=i.geoJSON,r.Rectangle=n(3306),e.exports=r},3306:e=>{"use strict";function t(e,n,r,i){if(!(this instanceof t))return new t(e,n,r,i);var o,a,s;e.x?(r=e.w,i=e.h,n=e.y,0!==e.w&&!e.w&&e.x2?(r=e.x2-e.x,i=e.y2-e.y):(r=e.w,i=e.h),e=e.x,o=e+r,a=n+i,s=!(i+r)):(o=e+r,a=n+i,s=!(i+r)),this.x1=this.x=function(){return e},this.y1=this.y=function(){return n},this.x2=function(){return o},this.y2=function(){return a},this.w=function(){return r},this.h=function(){return i},this.p=function(){return s},this.overlap=function(t){return s||t.p()?e<=t.x2()&&o>=t.x()&&n<=t.y2()&&a>=t.y():e<t.x2()&&o>t.x()&&n<t.y2()&&a>t.y()},this.expand=function(t){var s,l,u=t.x(),c=t.y(),h=t.x2(),d=t.y2();return s=e>u?u:e,l=n>c?c:n,r=o>h?o-s:h-s,i=a>d?a-l:d-l,e=s,n=l,this}}t.overlapRectangle=function(e,t){return 0===e.h&&0===e.w||0===t.h&&0===t.w?e.x<=t.x+t.w&&e.x+e.w>=t.x&&e.y<=t.y+t.h&&e.y+e.h>=t.y:e.x<t.x+t.w&&e.x+e.w>t.x&&e.y<t.y+t.h&&e.y+e.h>t.y},t.containsRectangle=function(e,t){return e.x+e.w<=t.x+t.w&&e.x>=t.x&&e.y+e.h<=t.y+t.h&&e.y>=t.y},t.expandRectangle=function(e,t){var n,r,i=e.x+e.w,o=t.x+t.w,a=e.y+e.h,s=t.y+t.h;return n=e.x>t.x?t.x:e.x,r=e.y>t.y?t.y:e.y,e.w=i>o?i-n:o-n,e.h=a>s?a-r:s-r,e.x=n,e.y=r,e},t.makeMBR=function(e,n){if(!e.length)return{x:0,y:0,w:0,h:0};(n=n||{}).x=e[0].x,n.y=e[0].y,n.w=e[0].w,n.h=e[0].h;for(var r=1,i=e.length;r<i;r++)t.expandRectangle(n,e[r]);return n},t.squarifiedRatio=function(e,t,n){var r=(e+t)/2,i=e*t;return i*n/(i/(r*r))},e.exports=t},4590:(e,t,n)=>{"use strict";var r=n(3306);function i(e){if(!(this instanceof i))return new i(e);var t=3,n=6;isNaN(e)||(t=Math.floor(e/2),n=e);var o={x:0,y:0,w:0,h:0,id:"root",nodes:[]};this.root=o;var a=function(e){for(var t,n=e.slice(),r=[];n.length;)(t=n.pop()).nodes?n=n.concat(t.nodes):t.leaf&&r.push(t);return r},s=function(e,n,i){var o,s,l,u=[],c=[],f=[];if(!e||!r.overlapRectangle(e,i))return f;var p={x:e.x,y:e.y,w:e.w,h:e.h,target:n};for(c.push(i.nodes.length),u.push(i);u.length>0;)if(o=u.pop(),s=c.pop()-1,"target"in p)for(;s>=0;){if(l=o.nodes[s],r.overlapRectangle(p,l)){if(p.target&&"leaf"in l&&l.leaf===p.target||!p.target&&("leaf"in l||r.containsRectangle(l,p))){f="nodes"in l?a(o.nodes.splice(s,1)):o.nodes.splice(s,1),r.makeMBR(o.nodes,o),delete p.target;break}"nodes"in l&&(c.push(s),u.push(o),o=l,s=l.nodes.length)}s--}else if("nodes"in p){o.nodes.splice(s+1,1),o.nodes.length>0&&r.makeMBR(o.nodes,o);for(var y=0;y<p.nodes.length;y++)d(p.nodes[y],o);p.nodes=[],0===u.length&&o.nodes.length<=1?(p.nodes=h(o,!0,p.nodes,o),o.nodes=[],u.push(o),c.push(1)):u.length>0&&o.nodes.length<t?(p.nodes=h(o,!0,p.nodes,o),o.nodes=[]):delete p.nodes}else r.makeMBR(o.nodes,o);return f},l=function(e){for(var t=c(e);e.length>0;)u(e,t[0],t[1]);return t},u=function(e,n,i){for(var o,a,s,l=r.squarifiedRatio(n.w,n.h,n.nodes.length+1),u=r.squarifiedRatio(i.w,i.h,i.nodes.length+1),c=e.length-1;c>=0;c--){var h=e[c],d={};d.x=Math.min(n.x,h.x),d.y=Math.min(n.y,h.y),d.w=Math.max(n.x+n.w,h.x+h.w)-d.x,d.h=Math.max(n.y+n.h,h.y+h.h)-d.y;var f=Math.abs(r.squarifiedRatio(d.w,d.h,n.nodes.length+2)-l),p={};p.x=Math.min(i.x,h.x),p.y=Math.min(i.y,h.y),p.w=Math.max(i.x+i.w,h.x+h.w)-p.x,p.h=Math.max(i.y+i.h,h.y+h.h)-p.y;var y=Math.abs(r.squarifiedRatio(p.w,p.h,i.nodes.length+2)-u);(!a||!o||Math.abs(y-f)<o)&&(a=c,o=Math.abs(y-f),s=y<f?i:n)}var m=e.splice(a,1)[0];n.nodes.length+e.length+1<=t?(n.nodes.push(m),r.expandRectangle(n,m)):i.nodes.length+e.length+1<=t?(i.nodes.push(m),r.expandRectangle(i,m)):(s.nodes.push(m),r.expandRectangle(s,m))},c=function(e){for(var t,n,r=e.length-1,i=0,o=e.length-1,a=0,s=e.length-2;s>=0;s--){var l=e[s];l.x>e[i].x?i=s:l.x+l.w<e[r].x+e[r].w&&(r=s),l.y>e[a].y?a=s:l.y+l.h<e[o].y+e[o].h&&(o=s)}return Math.abs(e[r].x+e[r].w-e[i].x)>Math.abs(e[o].y+e[o].h-e[a].y)?r>i?(t=e.splice(r,1)[0],n=e.splice(i,1)[0]):(n=e.splice(i,1)[0],t=e.splice(r,1)[0]):o>a?(t=e.splice(o,1)[0],n=e.splice(a,1)[0]):(n=e.splice(a,1)[0],t=e.splice(o,1)[0]),[{x:t.x,y:t.y,w:t.w,h:t.h,nodes:[t]},{x:n.x,y:n.y,w:n.w,h:n.h,nodes:[n]}]},h=function(e,t,n,i){var o=[];if(!r.overlapRectangle(e,i))return n;for(o.push(i.nodes);o.length>0;)for(var a=o.pop(),s=a.length-1;s>=0;s--){var l=a[s];r.overlapRectangle(e,l)&&("nodes"in l?o.push(l.nodes):"leaf"in l&&(t?n.push(l):n.push(l.leaf)))}return n},d=function(e,t){var i;if(0===t.nodes.length)return t.x=e.x,t.y=e.y,t.w=e.w,t.h=e.h,void t.nodes.push(e);for(var o,a=function(e,t){var n,i=-1,o=[],a=!0;o.push(t);for(var s=t.nodes;a||-1!==i;){a?a=!1:(o.push(s[i]),s=s[i].nodes,i=-1);for(var l=s.length-1;l>=0;l--){var u=s[l];if("leaf"in u){i=-1;break}var c=r.squarifiedRatio(u.w,u.h,u.nodes.length+1),h=Math.max(u.x+u.w,e.x+e.w)-Math.min(u.x,e.x),d=Math.max(u.y+u.h,e.y+e.h)-Math.min(u.y,e.y),f=r.squarifiedRatio(h,d,u.nodes.length+2);(i<0||Math.abs(f-c)<n)&&(n=Math.abs(f-c),i=l)}}return o}(e,t),s=e;a.length>0;){if(i&&"nodes"in i&&0===i.nodes.length){o=i,i=a.pop();for(var u=0;u<i.nodes.length;u++)if(i.nodes[u]===o||0===i.nodes[u].nodes.length){i.nodes.splice(u,1);break}}else i=a.pop();if("leaf"in s||"nodes"in s||Array.isArray(s)){if(Array.isArray(s)){for(var c=0;c<s.length;c++)r.expandRectangle(i,s[c]);i.nodes=i.nodes.concat(s)}else r.expandRectangle(i,s),i.nodes.push(s);if(i.nodes.length<=n)s={x:i.x,y:i.y,w:i.w,h:i.h};else{var h=l(i.nodes);s=h,a.length<1&&(i.nodes.push(h[0]),a.push(i),s=h[1])}}else r.expandRectangle(i,s),s={x:i.x,y:i.y,w:i.w,h:i.h}}};this.insertSubtree=d,this.getTree=function(){return o},this.setTree=function(e,t){return t||(t=o),r=e,(n=t).nodes=r.nodes,n.x=r.x,n.y=r.y,n.w=r.w,n.h=r.h,n;var n,r},this.search=function(e,t,n){return h(e,t,n=n||[],o)},this.remove=function(e,t){return t&&"function"!=typeof t?function(e,t){return s(e,t,o)}(e,t):function(e){for(var t,n=1,r=[];n>0;)n=(t=s(e,!1,o)).length,r=r.concat(t);return r}(e)},this.insert=function(e,t){return d({x:e.x,y:e.y,w:e.w,h:e.h,leaf:t},o)}}i.prototype.toJSON=function(e){return JSON.stringify(this.root,!1,e)},i.fromJSON=function(e){var t=new i;return t.setTree(JSON.parse(e)),t},e.exports=i,"function"!=typeof Array.isArray&&(Array.isArray=function(e){return"object"==typeof e&&"[object Array]"==={}.toString.call(e)})},3323:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>o(l,n))u<i&&0>o(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>o(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,y=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,_="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function x(e){if(m=!1,b(e),!y)if(null!==r(u))y=!0,M(E);else{var t=r(c);null!==t&&k(x,t.startTime-e)}}function E(e,n){y=!1,m&&(m=!1,v(A),A=-1),p=!0;var o=f;try{for(b(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!R());){var a=d.callback;if("function"==typeof a){d.callback=null,f=d.priorityLevel;var s=a(d.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?d.callback=s:d===r(u)&&i(u),b(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&k(x,h.startTime-n),l=!1}return l}finally{d=null,f=o,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,T=!1,w=null,A=-1,P=5,O=-1;function R(){return!(t.unstable_now()-O<P)}function C(){if(null!==w){var e=t.unstable_now();O=e;var n=!0;try{n=w(!0,e)}finally{n?S():(T=!1,w=null)}}else T=!1}if("function"==typeof _)S=function(){_(C)};else if("undefined"!=typeof MessageChannel){var I=new MessageChannel,N=I.port2;I.port1.onmessage=C,S=function(){N.postMessage(null)}}else S=function(){g(C,0)};function M(e){w=e,T||(T=!0,S())}function k(e,n){A=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,M(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?a+o:a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(c,e),null===r(u)&&e===r(c)&&(m?(v(A),A=-1):m=!0,k(x,o-a))):(e.sortIndex=s,n(u,e),y||p||(y=!0,M(E))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},1102:(e,t,n)=>{"use strict";e.exports=n(3323)},5337:(e,t,n)=>{"use strict";var r=n(8750),i=n(2737),o=n(6524),a=r("%TypeError%"),s=r("%WeakMap%",!0),l=r("%Map%",!0),u=i("WeakMap.prototype.get",!0),c=i("WeakMap.prototype.set",!0),h=i("WeakMap.prototype.has",!0),d=i("Map.prototype.get",!0),f=i("Map.prototype.set",!0),p=i("Map.prototype.has",!0),y=function(e,t){for(var n,r=e;null!==(n=r.next);r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n};e.exports=function(){var e,t,n,r={assert:function(e){if(!r.has(e))throw new a("Side channel does not contain "+o(e))},get:function(r){if(s&&r&&("object"==typeof r||"function"==typeof r)){if(e)return u(e,r)}else if(l){if(t)return d(t,r)}else if(n)return function(e,t){var n=y(e,t);return n&&n.value}(n,r)},has:function(r){if(s&&r&&("object"==typeof r||"function"==typeof r)){if(e)return h(e,r)}else if(l){if(t)return p(t,r)}else if(n)return function(e,t){return!!y(e,t)}(n,r);return!1},set:function(r,i){s&&r&&("object"==typeof r||"function"==typeof r)?(e||(e=new s),c(e,r,i)):l?(t||(t=new l),f(t,r,i)):(n||(n={key:{},next:null}),function(e,t,n){var r=y(e,t);r?r.value=n:e.next={key:t,next:e.next,value:n}}(n,r,i))}};return r}},1892:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var o={},a=[],s=0;s<e.length;s++){var l=e[s],u=r.base?l[0]+r.base:l[0],c=o[u]||0,h="".concat(u," ").concat(c);o[u]=c+1;var d=n(h),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(f);else{var p=i(f,r);r.byIndex=s,t.splice(s,0,{identifier:h,updater:p,references:1})}a.push(h)}return a}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var o=r(e=e||[],i=i||{});return function(e){e=e||[];for(var a=0;a<o.length;a++){var s=n(o[a]);t[s].references--}for(var l=r(e,i),u=0;u<o.length;u++){var c=n(o[u]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}o=l}}},8311:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},8060:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},8192:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},5760:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4865:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},2371:function(e,t){!function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){t[0]=t[0].slice(0,-1);for(var r=t.length-1,i=1;i<r;++i)t[i]=t[i].slice(1,-1);return t[r]=t[r].slice(1),t.join("")}return t[0]}function n(e){return"(?:"+e+")"}function r(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function i(e){return e.toUpperCase()}function o(e){var r="[A-Za-z]",i="[0-9]",o=t(i,"[A-Fa-f]"),a=n(n("%[EFef]"+o+"%"+o+o+"%"+o+o)+"|"+n("%[89A-Fa-f]"+o+"%"+o+o)+"|"+n("%"+o+o)),s="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",l=t("[\\:\\/\\?\\#\\[\\]\\@]",s),u=e?"[\\uE000-\\uF8FF]":"[]",c=t(r,i,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),h=n(r+t(r,i,"[\\+\\-\\.]")+"*"),d=n(n(a+"|"+t(c,s,"[\\:]"))+"*"),f=(n(n("25[0-5]")+"|"+n("2[0-4][0-9]")+"|"+n("1[0-9][0-9]")+"|"+n("[1-9][0-9]")+"|"+i),n(n("25[0-5]")+"|"+n("2[0-4][0-9]")+"|"+n("1[0-9][0-9]")+"|"+n("0?[1-9][0-9]")+"|0?0?"+i)),p=n(f+"\\."+f+"\\."+f+"\\."+f),y=n(o+"{1,4}"),m=n(n(y+"\\:"+y)+"|"+p),g=n(n(y+"\\:")+"{6}"+m),v=n("\\:\\:"+n(y+"\\:")+"{5}"+m),_=n(n(y)+"?\\:\\:"+n(y+"\\:")+"{4}"+m),b=n(n(n(y+"\\:")+"{0,1}"+y)+"?\\:\\:"+n(y+"\\:")+"{3}"+m),x=n(n(n(y+"\\:")+"{0,2}"+y)+"?\\:\\:"+n(y+"\\:")+"{2}"+m),E=n(n(n(y+"\\:")+"{0,3}"+y)+"?\\:\\:"+y+"\\:"+m),S=n(n(n(y+"\\:")+"{0,4}"+y)+"?\\:\\:"+m),T=n(n(n(y+"\\:")+"{0,5}"+y)+"?\\:\\:"+y),w=n(n(n(y+"\\:")+"{0,6}"+y)+"?\\:\\:"),A=n([g,v,_,b,x,E,S,T,w].join("|")),P=n(n(c+"|"+a)+"+"),O=(n(A+"\\%25"+P),n(A+n("\\%25|\\%(?!"+o+"{2})")+P)),R=n("[vV]"+o+"+\\."+t(c,s,"[\\:]")+"+"),C=n("\\["+n(O+"|"+A+"|"+R)+"\\]"),I=n(n(a+"|"+t(c,s))+"*"),N=n(C+"|"+p+"(?!"+I+")|"+I),M=n("[0-9]*"),k=n(n(d+"@")+"?"+N+n("\\:"+M)+"?"),D=n(a+"|"+t(c,s,"[\\:\\@]")),L=n(D+"*"),F=n(D+"+"),U=n(n(a+"|"+t(c,s,"[\\@]"))+"+"),B=n(n("\\/"+L)+"*"),G=n("\\/"+n(F+B)+"?"),j=n(U+B),$=n(F+B),z="(?!"+D+")",X=(n(B+"|"+G+"|"+j+"|"+$+"|"+z),n(n(D+"|"+t("[\\/\\?]",u))+"*")),H=n(n(D+"|[\\/\\?]")+"*"),V=n(n("\\/\\/"+k+B)+"|"+G+"|"+$+"|"+z),Y=n(h+"\\:"+V+n("\\?"+X)+"?"+n("\\#"+H)+"?"),W=n(n("\\/\\/"+k+B)+"|"+G+"|"+j+"|"+z),q=n(W+n("\\?"+X)+"?"+n("\\#"+H)+"?");return n(Y+"|"+q),n(h+"\\:"+V+n("\\?"+X)+"?"),n(n("\\/\\/("+n("("+d+")@")+"?("+N+")"+n("\\:("+M+")")+"?)")+"?("+B+"|"+G+"|"+$+"|"+z+")"),n("\\?("+X+")"),n("\\#("+H+")"),n(n("\\/\\/("+n("("+d+")@")+"?("+N+")"+n("\\:("+M+")")+"?)")+"?("+B+"|"+G+"|"+j+"|"+z+")"),n("\\?("+X+")"),n("\\#("+H+")"),n(n("\\/\\/("+n("("+d+")@")+"?("+N+")"+n("\\:("+M+")")+"?)")+"?("+B+"|"+G+"|"+$+"|"+z+")"),n("\\?("+X+")"),n("\\#("+H+")"),n("("+d+")@"),n("\\:("+M+")"),{NOT_SCHEME:new RegExp(t("[^]",r,i,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",c,s),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",c,s),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",c,s),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",c,s),"g"),NOT_QUERY:new RegExp(t("[^\\%]",c,s,"[\\:\\@\\/\\?]",u),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",c,s,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",c,s),"g"),UNRESERVED:new RegExp(c,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",c,l),"g"),PCT_ENCODED:new RegExp(a,"g"),IPV4ADDRESS:new RegExp("^("+p+")$"),IPV6ADDRESS:new RegExp("^\\[?("+A+")"+n(n("\\%25|\\%(?!"+o+"{2})")+"("+P+")")+"?\\]?$")}}var a=o(!1),s=o(!0),l=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=2147483647,c=36,h=/^xn--/,d=/[^\0-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},y=Math.floor,m=String.fromCharCode;function g(e){throw new RangeError(p[e])}function v(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+function(e,t){for(var n=[],r=e.length;r--;)n[r]=t(e[r]);return n}((e=e.replace(f,".")).split("."),t).join(".")}function _(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--)}else t.push(i)}return t}var b=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},x=function(e,t,n){var r=0;for(e=n?y(e/700):e>>1,e+=y(e/t);e>455;r+=c)e=y(e/35);return y(r+36*e/(e+38))},E=function(e){var t,n=[],r=e.length,i=0,o=128,a=72,s=e.lastIndexOf("-");s<0&&(s=0);for(var l=0;l<s;++l)e.charCodeAt(l)>=128&&g("not-basic"),n.push(e.charCodeAt(l));for(var h=s>0?s+1:0;h<r;){for(var d=i,f=1,p=c;;p+=c){h>=r&&g("invalid-input");var m=(t=e.charCodeAt(h++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:c;(m>=c||m>y((u-i)/f))&&g("overflow"),i+=m*f;var v=p<=a?1:p>=a+26?26:p-a;if(m<v)break;var _=c-v;f>y(u/_)&&g("overflow"),f*=_}var b=n.length+1;a=x(i-d,b,0==d),y(i/b)>u-o&&g("overflow"),o+=y(i/b),i%=b,n.splice(i++,0,o)}return String.fromCodePoint.apply(String,n)},S=function(e){var t=[],n=(e=_(e)).length,r=128,i=0,o=72,a=!0,s=!1,l=void 0;try{for(var h,d=e[Symbol.iterator]();!(a=(h=d.next()).done);a=!0){var f=h.value;f<128&&t.push(m(f))}}catch(e){s=!0,l=e}finally{try{!a&&d.return&&d.return()}finally{if(s)throw l}}var p=t.length,v=p;for(p&&t.push("-");v<n;){var E=u,S=!0,T=!1,w=void 0;try{for(var A,P=e[Symbol.iterator]();!(S=(A=P.next()).done);S=!0){var O=A.value;O>=r&&O<E&&(E=O)}}catch(e){T=!0,w=e}finally{try{!S&&P.return&&P.return()}finally{if(T)throw w}}var R=v+1;E-r>y((u-i)/R)&&g("overflow"),i+=(E-r)*R,r=E;var C=!0,I=!1,N=void 0;try{for(var M,k=e[Symbol.iterator]();!(C=(M=k.next()).done);C=!0){var D=M.value;if(D<r&&++i>u&&g("overflow"),D==r){for(var L=i,F=c;;F+=c){var U=F<=o?1:F>=o+26?26:F-o;if(L<U)break;var B=L-U,G=c-U;t.push(m(b(U+B%G,0))),L=y(B/G)}t.push(m(b(L,0))),o=x(i,R,v==p),i=0,++v}}}catch(e){I=!0,N=e}finally{try{!C&&k.return&&k.return()}finally{if(I)throw N}}++i,++r}return t.join("")},T=function(e){return v(e,(function(e){return d.test(e)?"xn--"+S(e):e}))},w=function(e){return v(e,(function(e){return h.test(e)?E(e.slice(4).toLowerCase()):e}))},A={};function P(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function O(e){for(var t="",n=0,r=e.length;n<r;){var i=parseInt(e.substr(n+1,2),16);if(i<128)t+=String.fromCharCode(i),n+=3;else if(i>=194&&i<224){if(r-n>=6){var o=parseInt(e.substr(n+4,2),16);t+=String.fromCharCode((31&i)<<6|63&o)}else t+=e.substr(n,6);n+=6}else if(i>=224){if(r-n>=9){var a=parseInt(e.substr(n+4,2),16),s=parseInt(e.substr(n+7,2),16);t+=String.fromCharCode((15&i)<<12|(63&a)<<6|63&s)}else t+=e.substr(n,9);n+=9}else t+=e.substr(n,3),n+=3}return t}function R(e,t){function n(e){var n=O(e);return n.match(t.UNRESERVED)?n:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,n).replace(t.NOT_USERINFO,P).replace(t.PCT_ENCODED,i)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_HOST,P).replace(t.PCT_ENCODED,i)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,n).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,P).replace(t.PCT_ENCODED,i)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,n).replace(t.NOT_QUERY,P).replace(t.PCT_ENCODED,i)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,n).replace(t.NOT_FRAGMENT,P).replace(t.PCT_ENCODED,i)),e}function C(e){return e.replace(/^0*(.*)/,"$1")||"0"}function I(e,t){var n=e.match(t.IPV4ADDRESS)||[],r=l(n,2)[1];return r?r.split(".").map(C).join("."):e}function N(e,t){var n=e.match(t.IPV6ADDRESS)||[],r=l(n,3),i=r[1],o=r[2];if(i){for(var a=i.toLowerCase().split("::").reverse(),s=l(a,2),u=s[0],c=s[1],h=c?c.split(":").map(C):[],d=u.split(":").map(C),f=t.IPV4ADDRESS.test(d[d.length-1]),p=f?7:8,y=d.length-p,m=Array(p),g=0;g<p;++g)m[g]=h[g]||d[y+g]||"";f&&(m[p-1]=I(m[p-1],t));var v=m.reduce((function(e,t,n){if(!t||"0"===t){var r=e[e.length-1];r&&r.index+r.length===n?r.length++:e.push({index:n,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],_=void 0;if(v&&v.length>1){var b=m.slice(0,v.index),x=m.slice(v.index+v.length);_=b.join(":")+"::"+x.join(":")}else _=m.join(":");return o&&(_+="%"+o),_}return e}var M=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,k=void 0==="".match(/(){0}/)[1];function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=!1!==t.iri?s:a;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var i=e.match(M);if(i){k?(n.scheme=i[1],n.userinfo=i[3],n.host=i[4],n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=i[7],n.fragment=i[8],isNaN(n.port)&&(n.port=i[5])):(n.scheme=i[1]||void 0,n.userinfo=-1!==e.indexOf("@")?i[3]:void 0,n.host=-1!==e.indexOf("//")?i[4]:void 0,n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=-1!==e.indexOf("?")?i[7]:void 0,n.fragment=-1!==e.indexOf("#")?i[8]:void 0,isNaN(n.port)&&(n.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),n.host&&(n.host=N(I(n.host,r),r)),void 0!==n.scheme||void 0!==n.userinfo||void 0!==n.host||void 0!==n.port||n.path||void 0!==n.query?void 0===n.scheme?n.reference="relative":void 0===n.fragment?n.reference="absolute":n.reference="uri":n.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==n.reference&&(n.error=n.error||"URI is not a "+t.reference+" reference.");var o=A[(t.scheme||n.scheme||"").toLowerCase()];if(t.unicodeSupport||o&&o.unicodeSupport)R(n,r);else{if(n.host&&(t.domainHost||o&&o.domainHost))try{n.host=T(n.host.replace(r.PCT_ENCODED,O).toLowerCase())}catch(e){n.error=n.error||"Host's domain name can not be converted to ASCII via punycode: "+e}R(n,a)}o&&o.parse&&o.parse(n,t)}else n.error=n.error||"URI can not be parsed.";return n}function L(e,t){var n=!1!==t.iri?s:a,r=[];return void 0!==e.userinfo&&(r.push(e.userinfo),r.push("@")),void 0!==e.host&&r.push(N(I(String(e.host),n),n).replace(n.IPV6ADDRESS,(function(e,t,n){return"["+t+(n?"%25"+n:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(r.push(":"),r.push(String(e.port))),r.length?r.join(""):void 0}var F=/^\.\.?\//,U=/^\/\.(\/|$)/,B=/^\/\.\.(\/|$)/,G=/^\/?(?:.|\n)*?(?=\/|$)/;function j(e){for(var t=[];e.length;)if(e.match(F))e=e.replace(F,"");else if(e.match(U))e=e.replace(U,"/");else if(e.match(B))e=e.replace(B,"/"),t.pop();else if("."===e||".."===e)e="";else{var n=e.match(G);if(!n)throw new Error("Unexpected dot segment condition");var r=n[0];e=e.slice(r.length),t.push(r)}return t.join("")}function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.iri?s:a,r=[],i=A[(t.scheme||e.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(e,t),e.host)if(n.IPV6ADDRESS.test(e.host));else if(t.domainHost||i&&i.domainHost)try{e.host=t.iri?w(e.host):T(e.host.replace(n.PCT_ENCODED,O).toLowerCase())}catch(n){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+n}R(e,n),"suffix"!==t.reference&&e.scheme&&(r.push(e.scheme),r.push(":"));var o=L(e,t);if(void 0!==o&&("suffix"!==t.reference&&r.push("//"),r.push(o),e.path&&"/"!==e.path.charAt(0)&&r.push("/")),void 0!==e.path){var l=e.path;t.absolutePath||i&&i.absolutePath||(l=j(l)),void 0===o&&(l=l.replace(/^\/\//,"/%2F")),r.push(l)}return void 0!==e.query&&(r.push("?"),r.push(e.query)),void 0!==e.fragment&&(r.push("#"),r.push(e.fragment)),r.join("")}function z(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};return arguments[3]||(e=D($(e,n),n),t=D($(t,n),n)),!(n=n||{}).tolerant&&t.scheme?(r.scheme=t.scheme,r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=j(t.path||""),r.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=j(t.path||""),r.query=t.query):(t.path?("/"===t.path.charAt(0)?r.path=j(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?r.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:r.path=t.path:r.path="/"+t.path,r.path=j(r.path)),r.query=t.query):(r.path=e.path,void 0!==t.query?r.query=t.query:r.query=e.query),r.userinfo=e.userinfo,r.host=e.host,r.port=e.port),r.scheme=e.scheme),r.fragment=t.fragment,r}function X(e,t){return e&&e.toString().replace(t&&t.iri?s.PCT_ENCODED:a.PCT_ENCODED,O)}var H={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var n="https"===String(e.scheme).toLowerCase();return e.port!==(n?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},V={scheme:"https",domainHost:H.domainHost,parse:H.parse,serialize:H.serialize};function Y(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var W={scheme:"ws",domainHost:!0,parse:function(e,t){var n=e;return n.secure=Y(n),n.resourceName=(n.path||"/")+(n.query?"?"+n.query:""),n.path=void 0,n.query=void 0,n},serialize:function(e,t){if(e.port!==(Y(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var n=e.resourceName.split("?"),r=l(n,2),i=r[0],o=r[1];e.path=i&&"/"!==i?i:void 0,e.query=o,e.resourceName=void 0}return e.fragment=void 0,e}},q={scheme:"wss",domainHost:W.domainHost,parse:W.parse,serialize:W.serialize},K={},Q="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Z="[0-9A-Fa-f]",J=n(n("%[EFef][0-9A-Fa-f]%"+Z+Z+"%"+Z+Z)+"|"+n("%[89A-Fa-f][0-9A-Fa-f]%"+Z+Z)+"|"+n("%"+Z+Z)),ee=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),te=new RegExp(Q,"g"),ne=new RegExp(J,"g"),re=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',ee),"g"),ie=new RegExp(t("[^]",Q,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),oe=ie;function ae(e){var t=O(e);return t.match(te)?t:e}var se={scheme:"mailto",parse:function(e,t){var n=e,r=n.to=n.path?n.path.split(","):[];if(n.path=void 0,n.query){for(var i=!1,o={},a=n.query.split("&"),s=0,l=a.length;s<l;++s){var u=a[s].split("=");switch(u[0]){case"to":for(var c=u[1].split(","),h=0,d=c.length;h<d;++h)r.push(c[h]);break;case"subject":n.subject=X(u[1],t);break;case"body":n.body=X(u[1],t);break;default:i=!0,o[X(u[0],t)]=X(u[1],t)}}i&&(n.headers=o)}n.query=void 0;for(var f=0,p=r.length;f<p;++f){var y=r[f].split("@");if(y[0]=X(y[0]),t.unicodeSupport)y[1]=X(y[1],t).toLowerCase();else try{y[1]=T(X(y[1],t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}r[f]=y.join("@")}return n},serialize:function(e,t){var n,r=e,o=null!=(n=e.to)?n instanceof Array?n:"number"!=typeof n.length||n.split||n.setInterval||n.call?[n]:Array.prototype.slice.call(n):[];if(o){for(var a=0,s=o.length;a<s;++a){var l=String(o[a]),u=l.lastIndexOf("@"),c=l.slice(0,u).replace(ne,ae).replace(ne,i).replace(re,P),h=l.slice(u+1);try{h=t.iri?w(h):T(X(h,t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}o[a]=c+"@"+h}r.path=o.join(",")}var d=e.headers=e.headers||{};e.subject&&(d.subject=e.subject),e.body&&(d.body=e.body);var f=[];for(var p in d)d[p]!==K[p]&&f.push(p.replace(ne,ae).replace(ne,i).replace(ie,P)+"="+d[p].replace(ne,ae).replace(ne,i).replace(oe,P));return f.length&&(r.query=f.join("&")),r}},le=/^([^\:]+)\:(.*)/,ue={scheme:"urn",parse:function(e,t){var n=e.path&&e.path.match(le),r=e;if(n){var i=t.scheme||r.scheme||"urn",o=n[1].toLowerCase(),a=n[2],s=i+":"+(t.nid||o),l=A[s];r.nid=o,r.nss=a,r.path=void 0,l&&(r=l.parse(r,t))}else r.error=r.error||"URN can not be parsed.";return r},serialize:function(e,t){var n=t.scheme||e.scheme||"urn",r=e.nid,i=n+":"+(t.nid||r),o=A[i];o&&(e=o.serialize(e,t));var a=e,s=e.nss;return a.path=(r||t.nid)+":"+s,a}},ce=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,he={scheme:"urn:uuid",parse:function(e,t){var n=e;return n.uuid=n.nss,n.nss=void 0,t.tolerant||n.uuid&&n.uuid.match(ce)||(n.error=n.error||"UUID is not valid."),n},serialize:function(e,t){var n=e;return n.nss=(e.uuid||"").toLowerCase(),n}};A[H.scheme]=H,A[V.scheme]=V,A[W.scheme]=W,A[q.scheme]=q,A[se.scheme]=se,A[ue.scheme]=ue,A[he.scheme]=he,e.SCHEMES=A,e.pctEncChar=P,e.pctDecChars=O,e.parse=D,e.removeDotSegments=j,e.serialize=$,e.resolveComponents=z,e.resolve=function(e,t,n){var r=function(e,t){var n=e;if(t)for(var r in t)n[r]=t[r];return n}({scheme:"null"},n);return $(z(D(e,r),D(t,r),r,!0),r)},e.normalize=function(e,t){return"string"==typeof e?e=$(D(e,t),t):"object"===r(e)&&(e=D($(e,t),t)),e},e.equal=function(e,t,n){return"string"==typeof e?e=$(D(e,n),n):"object"===r(e)&&(e=$(e,n)),"string"==typeof t?t=$(D(t,n),n):"object"===r(t)&&(t=$(t,n)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?s.ESCAPE:a.ESCAPE,P)},e.unescapeComponent=X,Object.defineProperty(e,"__esModule",{value:!0})}(t)},8884:function(e,t,n){var r;e=n.nmd(e),function(i){t&&t.nodeType,e&&e.nodeType;var o="object"==typeof n.g&&n.g;o.global!==o&&o.window!==o&&o.self;var a,s=2147483647,l=36,u=/^xn--/,c=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,p=String.fromCharCode;function y(e){throw RangeError(d[e])}function m(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function g(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+m((e=e.replace(h,".")).split("."),t).join(".")}function v(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function _(e){return m(e,(function(e){var t="";return e>65535&&(t+=p((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+p(e)})).join("")}function b(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function x(e,t,n){var r=0;for(e=n?f(e/700):e>>1,e+=f(e/t);e>455;r+=l)e=f(e/35);return f(r+36*e/(e+38))}function E(e){var t,n,r,i,o,a,u,c,h,d,p,m=[],g=e.length,v=0,b=128,E=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&y("not-basic"),m.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<g;){for(o=v,a=1,u=l;i>=g&&y("invalid-input"),((c=(p=e.charCodeAt(i++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:l)>=l||c>f((s-v)/a))&&y("overflow"),v+=c*a,!(c<(h=u<=E?1:u>=E+26?26:u-E));u+=l)a>f(s/(d=l-h))&&y("overflow"),a*=d;E=x(v-o,t=m.length+1,0==o),f(v/t)>s-b&&y("overflow"),b+=f(v/t),v%=t,m.splice(v++,0,b)}return _(m)}function S(e){var t,n,r,i,o,a,u,c,h,d,m,g,_,E,S,T=[];for(g=(e=v(e)).length,t=128,n=0,o=72,a=0;a<g;++a)(m=e[a])<128&&T.push(p(m));for(r=i=T.length,i&&T.push("-");r<g;){for(u=s,a=0;a<g;++a)(m=e[a])>=t&&m<u&&(u=m);for(u-t>f((s-n)/(_=r+1))&&y("overflow"),n+=(u-t)*_,t=u,a=0;a<g;++a)if((m=e[a])<t&&++n>s&&y("overflow"),m==t){for(c=n,h=l;!(c<(d=h<=o?1:h>=o+26?26:h-o));h+=l)S=c-d,E=l-d,T.push(p(b(d+S%E,0))),c=f(S/E);T.push(p(b(c,0))),o=x(n,_,r==i),n=0,++r}++n,++t}return T.join("")}a={version:"1.3.2",ucs2:{decode:v,encode:_},decode:E,encode:S,toASCII:function(e){return g(e,(function(e){return c.test(e)?"xn--"+S(e):e}))},toUnicode:function(e){return g(e,(function(e){return u.test(e)?E(e.slice(4).toLowerCase()):e}))}},void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)}()},4760:(e,t,n)=>{"use strict";var r=n(8884),i=n(569);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.Qc=_,t.DB=function(e,t){return _(e,!1,!0).resolve(t)},t.WU=function(e){return i.isString(e)&&(e=_(e)),e instanceof o?e.format():o.prototype.format.call(e)};var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(u),h=["%","/","?",";","#"].concat(c),d=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=n(8966);function _(e,t,n){if(e&&i.isObject(e)&&e instanceof o)return e;var r=new o;return r.parse(e,t,n),r}o.prototype.parse=function(e,t,n){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),s=-1!==o&&o<e.indexOf("#")?"?":"#",u=e.split(s);u[0]=u[0].replace(/\\/g,"/");var _=e=u.join(s);if(_=_.trim(),!n&&1===e.split("#").length){var b=l.exec(_);if(b)return this.path=_,this.href=_,this.pathname=b[1],b[2]?(this.search=b[2],this.query=t?v.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var x=a.exec(_);if(x){var E=(x=x[0]).toLowerCase();this.protocol=E,_=_.substr(x.length)}if(n||x||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===_.substr(0,2);!S||x&&m[x]||(_=_.substr(2),this.slashes=!0)}if(!m[x]&&(S||x&&!g[x])){for(var T,w,A=-1,P=0;P<d.length;P++)-1!==(O=_.indexOf(d[P]))&&(-1===A||O<A)&&(A=O);for(-1!==(w=-1===A?_.lastIndexOf("@"):_.lastIndexOf("@",A))&&(T=_.slice(0,w),_=_.slice(w+1),this.auth=decodeURIComponent(T)),A=-1,P=0;P<h.length;P++){var O;-1!==(O=_.indexOf(h[P]))&&(-1===A||O<A)&&(A=O)}-1===A&&(A=_.length),this.host=_.slice(0,A),_=_.slice(A),this.parseHost(),this.hostname=this.hostname||"";var R="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!R)for(var C=this.hostname.split(/\./),I=(P=0,C.length);P<I;P++){var N=C[P];if(N&&!N.match(f)){for(var M="",k=0,D=N.length;k<D;k++)N.charCodeAt(k)>127?M+="x":M+=N[k];if(!M.match(f)){var L=C.slice(0,P),F=C.slice(P+1),U=N.match(p);U&&(L.push(U[1]),F.unshift(U[2])),F.length&&(_="/"+F.join(".")+_),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=r.toASCII(this.hostname));var B=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+B,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!y[E])for(P=0,I=c.length;P<I;P++){var j=c[P];if(-1!==_.indexOf(j)){var $=encodeURIComponent(j);$===j&&($=escape(j)),_=_.split(j).join($)}}var z=_.indexOf("#");-1!==z&&(this.hash=_.substr(z),_=_.slice(0,z));var X=_.indexOf("?");if(-1!==X?(this.search=_.substr(X),this.query=_.substr(X+1),t&&(this.query=v.parse(this.query)),_=_.slice(0,X)):t&&(this.search="",this.query={}),_&&(this.pathname=_),g[E]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var H=this.search||"";this.path=B+H}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=v.stringify(this.query));var s=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||g[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+r},o.prototype.resolve=function(e){return this.resolveObject(_(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(i.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var n=new o,r=Object.keys(this),a=0;a<r.length;a++){var s=r[a];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var l=Object.keys(e),u=0;u<l.length;u++){var c=l[u];"protocol"!==c&&(n[c]=e[c])}return g[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!g[e.protocol]){for(var h=Object.keys(e),d=0;d<h.length;d++){var f=h[d];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||m[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var y=n.pathname||"",v=n.search||"";n.path=y+v}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var _=n.pathname&&"/"===n.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),x=b||_||n.host&&e.pathname,E=x,S=n.pathname&&n.pathname.split("/")||[],T=(p=e.pathname&&e.pathname.split("/")||[],n.protocol&&!g[n.protocol]);if(T&&(n.hostname="",n.port=null,n.host&&(""===S[0]?S[0]=n.host:S.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),x=x&&(""===p[0]||""===S[0])),b)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,S=p;else if(p.length)S||(S=[]),S.pop(),S=S.concat(p),n.search=e.search,n.query=e.query;else if(!i.isNullOrUndefined(e.search))return T&&(n.hostname=n.host=S.shift(),(R=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=R.shift(),n.host=n.hostname=R.shift())),n.search=e.search,n.query=e.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!S.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var w=S.slice(-1)[0],A=(n.host||e.host||S.length>1)&&("."===w||".."===w)||""===w,P=0,O=S.length;O>=0;O--)"."===(w=S[O])?S.splice(O,1):".."===w?(S.splice(O,1),P++):P&&(S.splice(O,1),P--);if(!x&&!E)for(;P--;P)S.unshift("..");!x||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),A&&"/"!==S.join("/").substr(-1)&&S.push("");var R,C=""===S[0]||S[0]&&"/"===S[0].charAt(0);return T&&(n.hostname=n.host=C?"":S.length?S.shift():"",(R=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=R.shift(),n.host=n.hostname=R.shift())),(x=x||n.host&&S.length)&&!C&&S.unshift(""),S.length?n.pathname=S.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},569:e=>{"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},5878:(e,t)=>{"use strict";t.V=void 0,t.V=function(e,t,n){var r=25e3,i=6e4;n&&("number"==typeof n.pingInterval&&(r=n.pingInterval),"number"==typeof n.pingTimeout&&(i=n.pingTimeout));var o=!1;e.addEventListener("message",(function(e){o=!0}));var a=setInterval((function(){try{e.send(t)}catch(e){}}),r),s=setInterval((function(){o?o=!1:e.close()}),i);e.addEventListener("close",(function(e){clearInterval(a),clearInterval(s)}))}},6553:()=>{},7262:e=>{"use strict";e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},1949:e=>{"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.nc=void 0;var r={};(()=>{"use strict";n.d(r,{p:()=>yd});var e=n(7634),t=n(7378),i=(n(6704),n(1892)),o=n.n(i),a=n(5760),s=n.n(a),l=n(8311),u=n.n(l),c=n(8192),h=n.n(c),d=n(8060),f=n.n(d),p=n(4865),y=n.n(p),m=n(1660),g={};g.styleTagTransform=y(),g.setAttributes=h(),g.insert=u().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=f(),o()(m.Z,g),m.Z&&m.Z.locals&&m.Z.locals;var v=n(3593);new(n.n(v)())({removeAdditional:!0,useDefaults:!0,coerceTypes:!0}),n(8139);var _=function(){return _=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},_.apply(this,arguments)};function b(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))}function x(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create,Object.create;var E="positionLastShown",S="positionMax";function T(e,t){var n=t?"replaceState":"pushState",r=Number(sessionStorage.getItem(S))+1;sessionStorage.setItem(S,String(r)),sessionStorage.setItem(E,String(r));var i=_(_({},w()),{state:history.state});history[n](r,"",e),dispatchEvent(new CustomEvent(n,{detail:i}))}function w(){return{path:location.pathname||"/",search:location.search}}function A(e,t){var n=this,r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(e.useState((function(){return w()})),2),i=r[0],o=i.path,a=i.search,s=r[1],l=e.useRef(o+a);return e.useEffect((function(){var e,r,i=function(e){return b(n,void 0,void 0,(function(){var n,r,i,o;return x(this,(function(a){switch(a.label){case 0:return n=w(),r=n.path+n.search,l.current===r?[3,3]:(i=!0,(null==t?void 0:t.confirm)?[4,t.confirm("replace")]:[3,2]);case 1:i=a.sent(),a.label=2;case 2:i?(l.current=r,s(n)):(o=e.detail,history.replaceState(o.state,"",o.path+o.search)),a.label=3;case 3:return[2]}}))}))},o=function(){return b(n,void 0,void 0,(function(){var e,n,r;return x(this,(function(i){switch(i.label){case 0:return e=w(),n=e.path+e.search,l.current===n?[3,3]:(r=!0,(null==t?void 0:t.confirm)?[4,t.confirm("push")]:[3,2]);case 1:r=i.sent(),i.label=2;case 2:r?(l.current=n,s(e)):history.back(),i.label=3;case 3:return[2]}}))}))},a=function(){return b(n,void 0,void 0,(function(){var e,n,r;return x(this,(function(i){switch(i.label){case 0:return e=w(),n=e.path+e.search,l.current===n?[3,3]:(r=!0,(null==t?void 0:t.confirm)?[4,t.confirm("pop")]:[3,2]);case 1:r=i.sent(),i.label=2;case 2:r?(sessionStorage.setItem(E,String(history.state)),l.current=n,s(e)):(o=Number(sessionStorage.getItem(E)),history.state>o?history.back():history.state<o&&history.forward()),i.label=3;case 3:return[2]}var o}))}))};return addEventListener("popstate",a),addEventListener("replaceState",i),addEventListener("pushState",o),r=(e=w()).path+e.search,l.current!==r&&(l.current=r,s(e)),function(){removeEventListener("popstate",a),removeEventListener("replaceState",i),removeEventListener("pushState",o)}}),[]),[o,a]}function P(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function O(e){return!!e&&!!e[pe]}function R(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===ye}(e)||Array.isArray(e)||!!e[fe]||!!e.constructor[fe]||D(e)||L(e))}function C(e,t,n){void 0===n&&(n=!1),0===I(e)?(n?Object.keys:me)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function I(e){var t=e[pe];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:D(e)?2:L(e)?3:0}function N(e,t){return 2===I(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function M(e,t){return 2===I(e)?e.get(t):e[t]}function k(e,t,n){var r=I(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function D(e){return ue&&e instanceof Map}function L(e){return ce&&e instanceof Set}function F(e){return e.o||e.t}function U(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=ge(e);delete t[pe];for(var n=me(t),r=0;r<n.length;r++){var i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function B(e,t){return void 0===t&&(t=!1),j(e)||O(e)||!R(e)||(I(e)>1&&(e.set=e.add=e.clear=e.delete=G),Object.freeze(e),t&&C(e,(function(e,t){return B(t,!0)}),!0)),e}function G(){P(2)}function j(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function $(e){var t=ve[e];return t||P(18,e),t}function z(){return se}function X(e,t){t&&($("Patches"),e.u=[],e.s=[],e.v=t)}function H(e){V(e),e.p.forEach(W),e.p=null}function V(e){e===se&&(se=e.l)}function Y(e){return se={p:[],l:se,h:e,m:!0,_:0}}function W(e){var t=e[pe];0===t.i||1===t.i?t.j():t.O=!0}function q(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||$("ES5").S(t,e,r),r?(n[pe].P&&(H(t),P(4)),R(e)&&(e=K(t,e),t.l||Z(t,e)),t.u&&$("Patches").M(n[pe].t,e,t.u,t.s)):e=K(t,n,[]),H(t),t.u&&t.v(t.u,t.s),e!==de?e:void 0}function K(e,t,n){if(j(t))return t;var r=t[pe];if(!r)return C(t,(function(i,o){return Q(e,r,t,i,o,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return Z(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=U(r.k):r.o;C(3===r.i?new Set(i):i,(function(t,o){return Q(e,r,i,t,o,n)})),Z(e,i,!1),n&&e.u&&$("Patches").R(r,n,e.u,e.s)}return r.o}function Q(e,t,n,r,i,o){if(O(i)){var a=K(e,i,o&&t&&3!==t.i&&!N(t.D,r)?o.concat(r):void 0);if(k(n,r,a),!O(a))return;e.m=!1}if(R(i)&&!j(i)){if(!e.h.F&&e._<1)return;K(e,i),t&&t.A.l||Z(e,i)}}function Z(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&B(t,n)}function J(e,t){var n=e[pe];return(n?F(n):e)[t]}function ee(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function te(e){e.P||(e.P=!0,e.l&&te(e.l))}function ne(e){e.o||(e.o=U(e.t))}function re(e,t,n){var r=D(t)?$("MapSet").N(t,n):L(t)?$("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:z(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,o=_e;n&&(i=[r],o=be);var a=Proxy.revocable(i,o),s=a.revoke,l=a.proxy;return r.k=l,r.j=s,l}(t,n):$("ES5").J(t,n);return(n?n.A:z()).p.push(r),r}function ie(e){return O(e)||P(22,e),function e(t){if(!R(t))return t;var n,r=t[pe],i=I(t);if(r){if(!r.P&&(r.i<4||!$("ES5").K(r)))return r.t;r.I=!0,n=oe(t,i),r.I=!1}else n=oe(t,i);return C(n,(function(t,i){r&&M(r.t,t)===i||k(n,t,e(i))})),3===i?new Set(n):n}(e)}function oe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return U(e)}var ae,se,le="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),ue="undefined"!=typeof Map,ce="undefined"!=typeof Set,he="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,de=le?Symbol.for("immer-nothing"):((ae={})["immer-nothing"]=!0,ae),fe=le?Symbol.for("immer-draftable"):"__$immer_draftable",pe=le?Symbol.for("immer-state"):"__$immer_state",ye=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),me="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,ge=Object.getOwnPropertyDescriptors||function(e){var t={};return me(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},ve={},_e={get:function(e,t){if(t===pe)return e;var n=F(e);if(!N(n,t))return function(e,t,n){var r,i=ee(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!R(r)?r:r===J(e.t,t)?(ne(e),e.o[t]=re(e.A.h,r,e)):r},has:function(e,t){return t in F(e)},ownKeys:function(e){return Reflect.ownKeys(F(e))},set:function(e,t,n){var r=ee(F(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=J(F(e),t),o=null==i?void 0:i[pe];if(o&&o.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,i)&&(void 0!==n||N(e.t,t)))return!0;ne(e),te(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==J(e.t,t)||t in e.t?(e.D[t]=!1,ne(e),te(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=F(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){P(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){P(12)}},be={};C(_e,(function(e,t){be[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),be.deleteProperty=function(e,t){return be.set.call(this,e,t,void 0)},be.set=function(e,t,n){return _e.set.call(this,e[0],t,n,e[0])};var xe=function(){function e(e){var t=this;this.g=he,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var o=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,a=Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return o.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(a))}))}}var a;if("function"!=typeof n&&P(6),void 0!==r&&"function"!=typeof r&&P(7),R(e)){var s=Y(t),l=re(t,e,void 0),u=!0;try{a=n(l),u=!1}finally{u?H(s):V(s)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return X(s,r),q(e,s)}),(function(e){throw H(s),e})):(X(s,r),q(a,s))}if(!e||"object"!=typeof e){if(void 0===(a=n(e))&&(a=e),a===de&&(a=void 0),t.F&&B(a,!0),r){var c=[],h=[];$("Patches").M(e,a,c,h),r(c,h)}return a}P(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,o=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return[e,r,i]})):[o,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){R(e)||P(8),O(e)&&(e=ie(e));var t=Y(this),n=re(this,e,void 0);return n[pe].C=!0,V(t),n},t.finishDraft=function(e,t){var n=(e&&e[pe]).A;return X(n,t),q(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!he&&P(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=$("Patches").$;return O(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),Ee=new xe,Se=Ee.produce,Te=Ee.produceWithPatches.bind(Ee),we=(Ee.setAutoFreeze.bind(Ee),Ee.setUseProxies.bind(Ee),Ee.applyPatches.bind(Ee));Ee.createDraft.bind(Ee),Ee.finishDraft.bind(Ee);const Ae=Se;var Pe=Object.defineProperty,Oe=Object.getOwnPropertySymbols,Re=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable,Ie=(e,t,n)=>t in e?Pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ne=(e,t)=>{for(var n in t||(t={}))Re.call(t,n)&&Ie(e,n,t[n]);if(Oe)for(var n of Oe(t))Ce.call(t,n)&&Ie(e,n,t[n]);return e};function Me(e){return t.createElement("div",{style:Ne({position:"fixed",inset:"0px",cursor:"grabbing"},e.style),onMouseUp:e.onDragEnd,onMouseMove:e.onDragging,onMouseLeave:e.ignoreLeavingEvent?void 0:e.onDragEnd},e.children)}function ke(e,n){var r,i;const[o,a]=t.useState({x:0,y:0}),[s,l]=t.useState(),u=null!=(r=null==n?void 0:n.scale)?r:1,c=-(null!=(i=null==n?void 0:n.parentRotate)?i:0)*Math.PI/180;return Pt((e=>"Escape"===e.key),(()=>{a({x:0,y:0}),l(void 0)}),[l]),{offset:o,startPosition:s,onStart(e,t){var n,r;l({x:e.x-(null!=(n=null==t?void 0:t.x)?n:0),y:e.y-(null!=(r=null==t?void 0:t.y)?r:0),data:null==t?void 0:t.data})},mask:s&&t.createElement(Me,{ignoreLeavingEvent:null==n?void 0:n.ignoreLeavingEvent,onDragging:e=>{var t,r,i,o;const l={x:e.clientX,y:e.clientY};let h=null!=(r=null==(t=null==n?void 0:n.transform)?void 0:t.call(n,l))?r:l;h=Zn(s,h,null==n?void 0:n.getAngleSnap);const d=(h.x-s.x)/u,f=(h.y-s.y)/u,p=Math.sin(c),y=Math.cos(c),m={x:y*d-p*f,y:p*d+y*f};a(null!=(o=null==(i=null==n?void 0:n.transformOffset)?void 0:i.call(n,m,e))?o:m)},onDragEnd:()=>{null==e||e(),(null==n?void 0:n.repeatedly)||(a({x:0,y:0}),l(void 0))}})}}var De=Object.defineProperty,Le=Object.getOwnPropertySymbols,Fe=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable,Be=(e,t,n)=>t in e?De(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function Ge(e){const{type:n,containerSize:r,contentSize:i}=e,{onStart:o,mask:a}=ke(void 0,{transformOffset:({x:t,y:i})=>{const o=Math.max(Math.min("vertical"===n?i:t,r-s),0);return o!==u&&e.onChange((o+s/2-r/2)*l),{x:t,y:i}}});if(r>=i)return null;const s=Math.max(12,i?r*r/i:0),l=-(i-r)/(r-s),u=e.value/l+r/2-s/2,c=((e,t)=>{for(var n in t||(t={}))Fe.call(t,n)&&Be(e,n,t[n]);if(Le)for(var n of Le(t))Ue.call(t,n)&&Be(e,n,t[n]);return e})({position:"absolute",userSelect:"none"},e.style),h={background:"rgba(0, 0, 0, 0.3)",borderRadius:"4px",position:"absolute",cursor:"grab"};return"vertical"===n?(c.width="8px",c.height=`${r}px`,c.right="0px",c.top="0px",h.width="8px",h.height=`${s}px`,h.top=`${u}px`):(c.height="8px",c.width=`${r}px`,c.left="0px",c.bottom="0px",h.height="8px",h.width=`${s}px`,h.left=`${u}px`),t.createElement("div",{style:c},t.createElement("div",{style:h,onMouseDown:e=>o({x:e.clientX,y:e.clientY},{["vertical"===n?"y":"x"]:u})}),a)}function je(e=-1,n=-1){const[r,i]=t.useState(0),[o,a]=t.useState(0),s=t.useRef(null);return t.useEffect((()=>{if(!s.current)return;const t=t=>{t.preventDefault(),t.ctrlKey||(i((n=>e>=0?Math.max(-e,Math.min(e,n-t.deltaX)):n-t.deltaX)),a((e=>n>=0?Math.max(-n,Math.min(n,e-t.deltaY)):e-t.deltaY)))};return s.current.addEventListener("wheel",t,{passive:!1}),()=>{var e;null==(e=s.current)||e.removeEventListener("wheel",t)}}),[s.current,e,n]),{ref:s,x:r,y:o,setX:i,setY:a}}function $e(e){const[n,r]=t.useState(1),i=t.useRef(null),{min:o,max:a}=Ve(e);return t.useEffect((()=>{if(!i.current)return;const t=t=>{t.preventDefault(),t.ctrlKey&&r((n=>{var r;const i=Math.min(Math.max(o,n*Math.exp(-t.deltaY/100)),a);return n!==i&&(null==(r=null==e?void 0:e.onChange)||r.call(e,n,i,{x:t.clientX,y:t.clientY})),i}))};return i.current.addEventListener("wheel",t,{passive:!1}),()=>{var e;null==(e=i.current)||e.removeEventListener("wheel",t)}}),[i.current]),{ref:i,scale:n,setScale:r}}function ze(e){const[n,r]=t.useState({states:[e],stateIndex:0}),{stateIndex:i,states:o}=n,a=i>0,s=i<o.length-1,l=o[i];return t.useEffect((()=>{r({states:[e],stateIndex:0})}),[e]),{state:l,stateIndex:i,setState:e=>{const t=Ae(l,e);if(t===l)return l;const o=i+1;return r(Ae(n,(e=>{e.states.splice(o,e.states.length,t),e.stateIndex=o}))),t},canUndo:a,canRedo:s,undo:e=>{null==e||e.preventDefault(),a&&r(Ae(n,(e=>{e.stateIndex=i-1})))},redo:e=>{null==e||e.preventDefault(),s&&r(Ae(n,(e=>{e.stateIndex=i+1})))}}}function Xe(e,n,r){const[i,o]=t.useState({state:e,patchIndex:-1,patches:[]}),a=function(e,t,n){for(let r=e;r>=0;r--)if(n(t[r]))return r;return-1/0}(i.patchIndex,i.patches,(e=>e[2]===n)),s=function(e,t,n){for(let r=e;r<t.length;r++)if(n(t[r]))return r;return 1/0}(i.patchIndex+1,i.patches,(e=>e[2]===n)),l=a>=0,u=s<i.patches.length,c=(e,t,n)=>{var a;const s=we(i.state,e);null==(a=null==r?void 0:r.onChange)||a.call(r,{patches:e,oldState:i.state,newState:s});const l=i.patchIndex+1;return o(Ae(i,(r=>{r.patches.splice(l,r.patches.length,[e,t,n]),r.patchIndex=l,r.state=s}))),s},h=(e,t)=>{var i;return null==(i=null==r?void 0:r.onApplyPatchesFromSelf)||i.call(r,e,t),c(e,t,n)};return{state:i.state,applyPatchFromOtherOperators:c,applyPatchFromSelf:h,setState:e=>Ae(i.state,e,((e,t)=>{0!==e.length&&h(e,t)})),canUndo:l,canRedo:u,undo:e=>{null==e||e.preventDefault(),l&&o(Ae(i,(e=>{var t,n;e.patchIndex=a-1;const[o,s]=i.patches[a],l=we(i.state,s);null==(t=null==r?void 0:r.onApplyPatchesFromSelf)||t.call(r,s,o),null==(n=null==r?void 0:r.onChange)||n.call(r,{patches:s,oldState:i.state,newState:l}),e.state=l})))},redo:e=>{null==e||e.preventDefault(),u&&o(Ae(i,(e=>{var t,n;e.patchIndex=s;const[o,a]=i.patches[s],l=we(i.state,o);null==(t=null==r?void 0:r.onApplyPatchesFromSelf)||t.call(r,o,a),null==(n=null==r?void 0:r.onChange)||n.call(r,{patches:o,oldState:i.state,newState:l}),e.state=l})))},stateIndex:i.patchIndex}}function He(e,t,n){var r;const{min:i,max:o}=Ve(n),a=null!=(r=null==n?void 0:n.step)?r:1.25,s=n=>{n!==e&&(n>o?n=o:n<i&&(n=i),t(n))};return{canZoomIn:e<o,canZoomOut:e>i,zoomIn:t=>{null==t||t.preventDefault(),s(e*a)},zoomOut:t=>{null==t||t.preventDefault(),s(e/a)}}}function Ve(e){var t,n;return{min:null!=(t=null==e?void 0:e.min)?t:.1,max:null!=(n=null==e?void 0:e.max)?n:10}}var Ye=Object.defineProperty,We=Object.defineProperties,qe=Object.getOwnPropertyDescriptors,Ke=Object.getOwnPropertySymbols,Qe=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable,Je=(e,t,n)=>t in e?Ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function et(e,n){var r;const[i,o]=t.useState(),[a,s]=t.useState(),l=null!=(r=null==n?void 0:n.parentRotate)?r:0;return Pt((e=>"Escape"===e.key),(()=>{o(void 0),s(void 0)}),[s]),{offset:i,center:a,onStart:s,mask:a&&t.createElement(Me,{ignoreLeavingEvent:null==n?void 0:n.ignoreLeavingEvent,onDragging:e=>{var t,r,i,s;const u={x:e.clientX,y:e.clientY};let c=null!=(r=null==(t=null==n?void 0:n.transform)?void 0:t.call(n,u))?r:u;c=Zn(a,c,null==n?void 0:n.getAngleSnap);const h=(Math.atan2(c.y-a.y,c.x-a.x)/Math.PI*180+450-l)%360;o(((e,t)=>We(e,qe(t)))(((e,t)=>{for(var n in t||(t={}))Qe.call(t,n)&&Je(e,n,t[n]);if(Ke)for(var n of Ke(t))Ze.call(t,n)&&Je(e,n,t[n]);return e})({},c),{angle:null!=(s=null==(i=null==n?void 0:n.transformOffset)?void 0:i.call(n,h,e))?s:h}))},onDragEnd:()=>{null==e||e(),o(void 0),s(void 0)}})}}function tt(e){var n,r,i;const o=null!=(n=e.scale)?n:1,a=(null!=(r=e.rotateStickLength)?r:40)/o,s=1/o,l=(null!=(i=e.rotateCircleSize)?i:10)/o;return t.createElement(t.Fragment,null,t.createElement("div",{style:{left:`calc(50% - ${s/2}px)`,top:-a+"px",width:Math.max(s,1)+"px",height:a+"px",position:"absolute",boxSizing:"border-box",backgroundColor:"green"}}),t.createElement("div",{style:{left:`calc(50% - ${s/2+l/2}px)`,top:-a-l+"px",width:l+"px",height:l+"px",position:"absolute",border:`${Math.max(s,1)}px solid green`,backgroundColor:"white",borderRadius:l/2+"px",cursor:"grab",pointerEvents:"auto"},onMouseDown:e.onMouseDown}))}var nt=Object.defineProperty,rt=Object.getOwnPropertySymbols,it=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable,at=(e,t,n)=>t in e?nt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,st=(e,t)=>{for(var n in t||(t={}))it.call(t,n)&&at(e,n,t[n]);if(rt)for(var n of rt(t))ot.call(t,n)&&at(e,n,t[n]);return e};function lt(e){var n,r,i;const{resizeSize:o}=e,a=null!=(n=e.scale)?n:1,s=(null!=o?o:5)/a,l=1/a,u=s/2,c=s/2-l,h=null!=(r=e.rotate)?r:0,d=null!=(i=e.directions)?i:Ct,f=[];for(const e of Ct)if(d.includes(e)){const t={cursor:Rt(h,e)};e.includes("left")&&(t.left=-u+"px"),e.includes("right")&&(t.right=-c+"px"),e.includes("top")&&(t.top=-u+"px"),e.includes("bottom")&&(t.bottom=-c+"px"),"left"!==e&&"right"!==e&&"center"!==e||(t.top=`calc(50% - ${u}px)`),"top"!==e&&"bottom"!==e&&"center"!==e||(t.left=`calc(50% - ${u}px)`),f.push({direction:e,style:t})}return t.createElement(t.Fragment,null,f.map(((n,r)=>t.createElement("div",{key:r,style:st({width:s+"px",height:s+"px",border:`${l}px solid green`,position:"absolute",backgroundColor:"white",boxSizing:"border-box",pointerEvents:"auto"},n.style),onMouseDown:t=>{var r;null==(r=e.onMouseDown)||r.call(e,t,n.direction)},onClick:t=>{var r;null==(r=e.onClick)||r.call(e,t,n.direction)}}))))}var ut=Object.defineProperty,ct=Object.defineProperties,ht=Object.getOwnPropertyDescriptors,dt=Object.getOwnPropertySymbols,ft=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable,yt=(e,t,n)=>t in e?ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function mt(e,n){var r,i,o,a;const[s,l]=t.useState({x:0,y:0,width:0,height:0}),[u,c]=t.useState(),h=-(null!=(r=null==n?void 0:n.rotate)?r:0)*Math.PI/180,d=-(null!=(i=null==n?void 0:n.parentRotate)?i:0)*Math.PI/180,[f,p]=t.useState();return Pt((e=>"Escape"===e.key),(()=>{l({x:0,y:0,width:0,height:0}),c(void 0)}),[c]),{offset:s,cursorPosition:f,startPosition:u,onStart(e,t){var r,i;e.stopPropagation();const o={x:e.clientX,y:e.clientY};c(((e,t)=>ct(e,ht(t)))(((e,t)=>{for(var n in t||(t={}))ft.call(t,n)&&yt(e,n,t[n]);if(dt)for(var n of dt(t))pt.call(t,n)&&yt(e,n,t[n]);return e})({},null!=(i=null==(r=null==n?void 0:n.transform)?void 0:r.call(n,o))?i:o),{direction:t}))},mask:u&&t.createElement(Me,{onDragging:e=>{var t,r,i,o,a,s;let c={x:e.clientX,y:e.clientY};c=null!=(r=null==(t=null==n?void 0:n.transform)?void 0:t.call(n,c))?r:c,c=Zn(u,c,null==n?void 0:n.getAngleSnap),p(c);const f="boolean"==typeof(null==n?void 0:n.centeredScaling)?n.centeredScaling:null==(i=null==n?void 0:n.centeredScaling)?void 0:i.call(n,e),y="number"==typeof(null==n?void 0:n.keepRatio)?n.keepRatio:null==(o=null==n?void 0:n.keepRatio)?void 0:o.call(n,e),m=gt(u,c,u.direction,h,f,y,d);m&&l(null!=(s=null==(a=null==n?void 0:n.transformOffset)?void 0:a.call(n,m,e,u.direction))?s:m)},onDragEnd:()=>{e(),l({x:0,y:0,width:0,height:0}),c(void 0)},style:{cursor:Rt((null!=(o=null==n?void 0:n.rotate)?o:0)+(null!=(a=null==n?void 0:n.parentRotate)?a:0),u.direction)}})}}function gt(e,t,n,r=0,i,o,a=0){const s=t.x-e.x,l=t.y-e.y,u=Math.sin(a),c=Math.cos(a),h=c*s-u*l,d=u*s+c*l;if("center"===n)return{x:h,y:d,width:0,height:0};const f=Math.sin(r),p=Math.cos(r);let y=p*h-f*d,m=f*h+p*d;const g=n.includes("right")?1:n.includes("left")?-1:0,v=n.includes("bottom")?1:n.includes("top")?-1:0;if(o){if("left"===n||"right"===n||"top"===n||"bottom"===n)return;const e=y*g,t=m*v;y=Math.min(t*o,e)*g,m=Math.min(e/o,t)*v}const _={x:0,y:0,width:0,height:0};return _.width=y*(i?2:1)*g,_.height=m*(i?2:1)*v,i?(_.x-=y*g,_.y-=m*v):(n.includes("left")&&(_.x+=(p+1)*y/2,_.y-=f*y/2),n.includes("right")&&(_.x+=(p-1)*y/2,_.y-=f*y/2),n.includes("top")&&(_.x+=f*m/2,_.y+=(p+1)*m/2),n.includes("bottom")&&(_.x+=f*m/2,_.y+=(p-1)*m/2)),_}function vt(e,n){const[r,i]=t.useState(),[o,a]=t.useState();return Pt((e=>"Escape"===e.key),(()=>{i(void 0),a(void 0)}),[i,a]),{dragSelectStartPosition:r,onStartSelect(e,t){i({x:e.clientX,y:e.clientY,data:t})},dragSelectMask:r&&t.createElement(Me,{onDragging:e=>{if("boolean"==typeof n?n:n?n(e):void 0){const t=e.clientX-r.x,n=e.clientY-r.y,i=Math.min(Math.abs(t),Math.abs(n));a({x:t>0?r.x+i:r.x-i,y:n>0?r.y+i:r.y-i})}else a({x:e.clientX,y:e.clientY})},onDragEnd:()=>{e(r,o),i(void 0),a(void 0)},style:{cursor:o?"crosshair":"default"}},o&&t.createElement("div",{style:{position:"absolute",border:"1px dashed black",left:Math.min(r.x,o.x)+"px",top:Math.min(r.y,o.y)+"px",width:Math.abs(r.x-o.x)+"px",height:Math.abs(r.y-o.y)+"px"}}))}}var _t=Object.defineProperty,bt=Object.getOwnPropertySymbols,xt=Object.prototype.hasOwnProperty,Et=Object.prototype.propertyIsEnumerable,St=(e,t,n)=>t in e?_t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function Tt(e){var n,r,i,o;if(void 0===e.value)return null;const a=((e,t)=>{for(var n in t||(t={}))xt.call(t,n)&&St(e,n,t[n]);if(bt)for(var n of bt(t))Et.call(t,n)&&St(e,n,t[n]);return e})({position:"absolute"},e.style);return"x"===e.type?(a.borderLeft="1px dashed black",a.left=(null!=(r=null==(n=e.transformX)?void 0:n.call(e,e.value))?r:e.value)+"px",a.top="0px",a.width="1px",a.height="100%"):(a.borderTop="1px dashed black",a.top=(null!=(o=null==(i=e.transformY)?void 0:i.call(e,e.value))?o:e.value)+"px",a.left="0px",a.width="100%",a.height="1px"),t.createElement("div",{style:a})}function wt(e){const[n,r]=t.useState(),[i,o]=t.useState();return{regionAlignmentX:n,regionAlignmentY:i,changeOffsetByRegionAlignment(t,n,i){const a=function(e,t,n,r){const i=n.x+e.x,o=n.y+e.y,a={};for(const{field:e,value:s,sizeField:l}of[{field:"x",value:i,sizeField:"width"},{field:"y",value:o,sizeField:"height"}]){let i=r.find((n=>Math.abs(n[e]-s)<t));if(i)a[e]={target:i[e]-n[e],alignment:i[e]};else{const o=s+n[l]/2;if(i=r.find((n=>Math.abs(n[e]+n[l]/2-o)<t)),i)a[e]={target:i[e]+(i[l]-n[l])/2-n[e],alignment:i[e]+i[l]/2};else{const o=s+n[l];i=r.find((n=>Math.abs(n[e]+n[l]-o)<t)),i&&(a[e]={target:i[e]+i[l]-n[l]-n[e],alignment:i[e]+i[l]})}}}return a}(t,e,n,i);void 0!==a.x?(t.x=a.x.target,r(a.x.alignment)):r(void 0),void 0!==a.y?(t.y=a.y.target,o(a.y.alignment)):o(void 0)},clearRegionAlignments(){r(void 0),o(void 0)}}}function At(e){const[n,r]=t.useState(),[i,o]=t.useState();return{lineAlignmentX:n,lineAlignmentY:i,changeOffsetByLineAlignment(t,n,i,a,s){if(n.includes("bottom")){const n=i.y+i.height+t.y+t.height,r=s.find((t=>Math.abs(t-n)<e));if(void 0!==r){const e=r-n;t.height+=e,0!==t.y&&(t.height+=e,t.y-=e),o(r)}else o(void 0)}else if(n.includes("top")){const n=i.y+t.y,r=s.find((t=>Math.abs(t-n)<e));if(void 0!==r){const e=r-n;t.height-=e*(t.y+t.height!==0?2:1),t.y+=e,o(r)}else o(void 0)}else o(void 0);if(n.includes("right")){const n=i.x+i.width+t.x+t.width,o=a.find((t=>Math.abs(t-n)<e));if(void 0!==o){const e=o-n;t.width+=e,0!==t.x&&(t.width+=e,t.x-=e),r(o)}else r(void 0)}else if(n.includes("left")){const n=i.x+t.x,o=a.find((t=>Math.abs(t-n)<e));if(void 0!==o){const e=o-n;t.width-=e*(t.x+t.width!==0?2:1),t.x+=e,r(o)}else r(void 0)}else r(void 0)},clearLineAlignments(){r(void 0),o(void 0)}}}function Pt(e,n,r=[e]){t.useEffect((()=>{const t=t=>{e(t)&&n(t)};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}}),r)}function Ot(...e){return t=>{for(const n of e)"function"==typeof n?n(t):n&&(n.current=t)}}function Rt(e,t){if("center"===t)return"move";let n=0;return(e%=180)>22.5?e<67.5?n+=1:e<112.5?n+=2:e<157.5&&(n+=3):e<-22.5&&(e>-67.5?n+=3:e>-112.5?n+=2:e>-157.5&&(n+=1)),"top"===t||"bottom"===t?It[(n+2)%4]:"right"===t||"left"===t?It[n%4]:"right-top"===t||"left-bottom"===t?It[(n+3)%4]:It[(n+1)%4]}const Ct=["left","right","top","bottom","left-bottom","left-top","right-top","right-bottom","center"],It=["ew-resize","nwse-resize","ns-resize","nesw-resize"];var Nt=Object.defineProperty,Mt=Object.defineProperties,kt=Object.getOwnPropertyDescriptors,Dt=Object.getOwnPropertySymbols,Lt=Object.prototype.hasOwnProperty,Ft=Object.prototype.propertyIsEnumerable,Ut=Math.pow,Bt=(e,t,n)=>t in e?Nt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Gt=(e,t)=>{for(var n in t||(t={}))Lt.call(t,n)&&Bt(e,n,t[n]);if(Dt)for(var n of Dt(t))Ft.call(t,n)&&Bt(e,n,t[n]);return e},jt=(e,t)=>Mt(e,kt(t));function $t(e,t,n){let r=n.x-e.x,i=n.y-e.y;if(t<0&&(t=-t,r=-r,i=-i),zt(r))return{x:e.x,y:e.y+t*(i>0?1:-1)};const o=Math.sqrt(Ut(t,2)*Ut(r,2)/(Ut(r,2)+Ut(i,2)))*(r>0?1:-1);return{x:e.x+o,y:e.y+i/r*o}}function zt(e){return Math.abs(e)<1e-8}function Xt(e,t,n){if(!Ht(e,n))return $t(e,t,n)}function Ht(e,t){return On(e.x,t.x)&&On(e.y,t.y)}function Vt(e,t,n){return{x:e.x+t*Math.cos(n),y:e.y+t*Math.sin(n)}}function Yt(e,t,n){const{distance:r}=Wt(e,t,n);return r}function Wt(e,t,n){const r=Kt(e,nn(t,n));if(qt(r,t,n))return{point:r,distance:Qt(e,r)};const i=Qt(e,t),o=Qt(e,n);return i<o?{point:t,distance:i}:{point:n,distance:o}}function qt(e,t,n){return!(On(t.x,n.x)||!tn(e.x,t.x,n.x))||!(On(t.y,n.y)||!tn(e.y,t.y,n.y))}function Kt(e,t){const n=Ut(t.a,2)+Ut(t.b,2),r=t.a*t.b;return{x:(Ut(t.b,2)*e.x-r*e.y-t.a*t.c)/n,y:(-r*e.x+Ut(t.a,2)*e.y-t.b*t.c)/n}}function Qt(e,t){return Math.sqrt(Ut(e.x-t.x,2)+Ut(e.y-t.y,2))}function Zt(e,t){return Math.abs(e-t)}function Jt(e,t){return{x:en(e.x,t.x),y:en(e.y,t.y)}}function en(e,t){return(e+t)/2}function tn(e,t,n){return e<=Math.max(t,n)&&e>=Math.min(t,n)}function nn(e,t){const n=t.x-e.x,r=t.y-e.y;return{a:r,b:-n,c:-e.x*r+e.y*n}}function rn(e,t){return e.x>=t.start.x&&e.y>=t.start.y&&e.x<=t.end.x&&e.y<=t.end.y}function on(e){if(0===e.length)return;const t=e.map((e=>e.x)),n=e.map((e=>e.y));return{start:{x:Math.min(...t),y:Math.min(...n)},end:{x:Math.max(...t),y:Math.max(...n)}}}function an(e,t,n){return function(e,t,n){for(const r of ln(n))if(un(e,t,...r))return!0;return!1}(e,t,sn(n))}function sn(e){return[e.start,{x:e.start.x,y:e.end.y},e.end,{x:e.end.x,y:e.start.y}]}function*ln(e){for(let t=0;t<e.length;t++)yield[e[t],e[t+1<e.length?t+1:0]]}function un(e,t,n,r){if(!(Math.min(e.x,t.x)<=Math.max(n.x,r.x)&&Math.min(n.y,r.y)<=Math.max(e.y,t.y)&&Math.min(n.x,r.x)<=Math.max(e.x,t.x)&&Math.min(e.y,t.y)<=Math.max(n.y,r.y)))return!1;const i=(n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y),o=(r.x-e.x)*(t.y-e.y)-(t.x-e.x)*(r.y-e.y),a=(e.x-n.x)*(r.y-n.y)-(r.x-n.x)*(e.y-n.y),s=(t.x-n.x)*(r.y-n.y)-(r.x-n.x)*(t.y-n.y);return i*o<=0&&a*s<=0}function cn(e,{a:t,b:n,c:r}){const i=Ut(t,2),o=Ut(n,2),a=((o-i)*e.x-2*t*n*e.y-2*t*r)/(i+o);return{x:a,y:n*(a-e.x)/t+e.y}}function hn(e,t,n,r){const i=dn(e,t,n,r);if(i&&qt(i,e,t)&&qt(i,n,r))return i}function dn(e,t,n,r){return fn(nn(e,t),nn(n,r))}function fn(e,t){const{a:n,b:r,c:i}=e,{a:o,b:a,c:s}=t,l=o*r-n*a;if(!zt(l))return{x:(i*a-r*s)/l,y:(s*n-i*o)/l}}function pn({x:e,y:t,r:n},{x:r,y:i,r:o}){const a=r-e,s=i-t,l=Ut(a,2)+Ut(s,2),u=Math.sqrt(l),c=Ut(n,2),h=(c-Ut(o,2)+l)/2/u,d=c-Ut(h,2);if(d<0&&!zt(d))return[];const f=h/u,p=f*a+e,y=f*s+t;if(zt(d))return[{x:p,y}];const m=Math.sqrt(d)/u,g=m*s,v=m*a;return[{x:p+g,y:y-v},{x:p-g,y:y+v}]}function yn(e,t,n){return mn(e,t,n).filter((n=>qt(n,e,t)))}function mn(e,t,{x:n,y:r,r:i}){const o=t.x-e.x,a=t.y-e.y,s=n-e.x,l=r-e.y,u=Ut(o,2)+Ut(a,2),c=(o*s+a*l)/u,h=c*c-(s*s+l*l-i*i)/u;if(zt(h))return[{x:e.x+o*c,y:e.y+a*c}];if(h<0)return[];const d=Math.sqrt(h),f=-c+d,p=-c-d;return[{x:e.x-o*f,y:e.y-a*f},{x:e.x-o*p,y:e.y-a*p}]}function gn(e,t){return mn(...function({a:e,b:t,c:n}){return zt(e)?[{x:0,y:-n/t},{x:1,y:-n/t}]:zt(t)?[{x:-n/e,y:0},{x:-n/e,y:1}]:[{x:0,y:-n/t},{x:-n/e,y:0}]}(e),t)}function vn(e,t,n){return n?_n(e,t,-n*Math.PI/180):e}function _n(e,t,n){if(!n)return e;const r=e.x-t.x,i=e.y-t.y,o=Math.sin(n),a=Math.cos(n);return{x:a*r-o*i+t.x,y:o*r+a*i+t.y}}function bn(e,t,n,r){r&&(e=$t(t,Qt(e,t)/Math.cos(Math.PI/n),e=vn(e,t,180/n)));const i=[e];for(let r=1;r<n;r++)i.push(vn(e,t,360/n*r));return i}function xn(e,t,n,r){let i=0;t.forEach(((o,a)=>{0===a||(null==r?void 0:r.includes(a-1))?e.moveTo(o.x,o.y):i=function(e,t,n,r,i=0){r.length%2==1&&(r=[...r,...r]);let o=Qt(t,n),a=t;for(;o>0;){let t=0;for(let s=0;s<r.length;s++){let l=r[s];if(i>0){if(l<=i){i-=l;continue}l-=i,i=0}const u=s%2==0?"lineTo":"moveTo";if(l>=o)return e[u](n.x,n.y),t+o;const c=$t(a,l,n);e[u](c.x,c.y),o-=l,t+=l,a=c}}return 0}(e,t[a-1],o,n,i)}))}function En(e,t,n){return e+(t-e)*n}function Sn(e,t,n,r,i){const o=[];for(let a=1;a<i;a++){const s=a/i,l=En(e.x,t.x,s),u=En(e.y,t.y,s),c=En(t.x,n.x,s),h=En(t.y,n.y,s),d=En(n.x,r.x,s),f=En(n.y,r.y,s),p=En(l,c,s),y=En(u,h,s),m=En(c,d,s),g=En(h,f,s),v=En(p,m,s),_=En(y,g,s);o.push({x:v,y:_})}return o}function Tn(e){const t=[],n=[],r=e.length-1,i=[],o=[],a=[],s=[];i[0]=0,o[0]=2,a[0]=1,s[0]=e[0]+2*e[1];for(let t=1;t<r-1;t++)i[t]=1,o[t]=4,a[t]=1,s[t]=4*e[t]+2*e[t+1];i[r-1]=2,o[r-1]=7,a[r-1]=0,s[r-1]=8*e[r-1]+e[r];for(let e=1;e<r;e++){const t=i[e]/o[e-1];o[e]=o[e]-t*a[e-1],s[e]=s[e]-t*s[e-1]}t[r-1]=s[r-1]/o[r-1];for(let e=r-2;e>=0;--e)t[e]=(s[e]-a[e]*t[e+1])/o[e];for(let i=0;i<r-1;i++)n[i]=2*e[i+1]-t[i+1];return n[r-1]=.5*(e[r]+t[r-1]),{p1:t,p2:n}}function wn(e,t,n,r,i){const o=[],a=Pn(nn(e,t),i),s=Pn(nn(n,r),i);for(const e of a)for(const t of s){const n=fn(e,t);n&&o.push(n)}return o}function An(e,t,n,r){const i=[],o=Pn(nn(e,t),r),a=[n.r+r,Math.abs(n.r-r)];for(const e of o)for(const t of a)i.push(...gn(e,jt(Gt({},n),{r:t})));return i}function Pn(e,t){const n=t*Math.sqrt(Ut(e.a,2)+Ut(e.b,2));return[jt(Gt({},e),{c:e.c+n}),jt(Gt({},e),{c:e.c-n})]}function On(e,t){return zt(e-t)}function Rn(e,t){var n;const r=vn(e,{x:t.cx,y:t.cy},null!=(n=t.angle)?n:0);return 180*Math.atan2((r.y-t.cy)/t.ry,(r.x-t.cx)/t.rx)/Math.PI}function Cn(e,t){for(;e>t.endAngle;)e-=360;for(;e<t.startAngle;)e+=360;return e}function In(e){e.endAngle<e.startAngle?e.endAngle+=360:e.endAngle-e.startAngle>360&&(e.endAngle-=360)}function Nn({x:e,y:t},n){let r=!1;for(let i=0,o=n.length-1;i<n.length;o=i++){const a=n[i].x,s=n[i].y,l=n[o].x,u=n[o].y;s>t!=u>t&&e<(l-a)*(t-s)/(u-s)+a&&(r=!r)}return r}function*Mn(e){for(let t=1;t<e.length;t++)yield[e[t-1],e[t]]}function*kn(e){yield*Mn(Dn(e))}function Dn(e){return[...e,e[0]]}class Ln{constructor(){this.cache=new WeakMap}get(e,t){let n=this.cache.get(e);return n||(n=t(),this.cache.set(e,n)),n}clear(){this.cache=new WeakMap}}class Fn{constructor(){this.cache=new WeakMap}get(e,t,n){let r=this.cache.get(e);r||(r=new WeakMap,this.cache.set(e,r));let i=r.get(t);return i||(i=n(),r.set(t,i)),i}clear(){this.cache=new WeakMap}}function*Un(e,t,n,r){const i=r(e),o=r(t);if(i&&o)if(i.getCircle&&o.getCircle)yield*pn(i.getCircle(e).circle,i.getCircle(t).circle);else if(i.getCircle&&o.getGeometries){const{circle:r}=i.getCircle(e);for(const e of o.getGeometries(t,n).lines)yield*yn(...e,r)}else if(i.getGeometries&&o.getCircle){const{circle:r}=o.getCircle(t);for(const t of i.getGeometries(e,n).lines)yield*yn(...t,r)}else if(i.getGeometries&&o.getGeometries)for(const r of i.getGeometries(e,n).lines)for(const e of o.getGeometries(t,n).lines){const t=hn(...r,...e);t&&(yield t)}}function Bn(e,t){const n=new OffscreenCanvas(0,0).getContext("2d");if(n){n.font=e;const r=n.measureText(t),i=r.actualBoundingBoxAscent+r.actualBoundingBoxDescent;return{width:r.width,height:i}}}function Gn(e,t=100){return Math.round(e*t)/t}var jn=Object.defineProperty,$n=Object.defineProperties,zn=Object.getOwnPropertyDescriptors,Xn=Object.getOwnPropertySymbols,Hn=Object.prototype.hasOwnProperty,Vn=Object.prototype.propertyIsEnumerable,Yn=(e,t,n)=>t in e?jn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wn=(e,t)=>{for(var n in t||(t={}))Hn.call(t,n)&&Yn(e,n,t[n]);if(Xn)for(var n of Xn(t))Vn.call(t,n)&&Yn(e,n,t[n]);return e},qn=(e,t)=>$n(e,zn(t));function Kn(e,n,r){const[i,o]=t.useState(),[a,s]=t.useState(),[l,u]=t.useState();let c="";e&&(c=a?"3 points"===e?l?"specify third point by click":"specify second point by click":"2 points"===e?"specify second point by click, input position or input length":"specify circle edge point by click, input position or input length":"2 points"===e||"3 points"===e?"specify first point by click or input position":"specify circle center point by click or input position",(null==r?void 0:r.message)&&(c=r.message));const{input:h,setCursorPosition:d,clearText:f,cursorPosition:p,setInputPosition:y,resetInput:m}=lr(c,"center radius"===e||"center diameter"===e||"2 points"===e?(t,i,l)=>{if(null==r?void 0:r.onKeyDown)r.onKeyDown(t,i,l);else if("Enter"===t.key){const t=i.split(",");if(a){if("2 points"===e&&2===t.length){const e=+t[0],r=+t[1];if(!isNaN(e)&&!isNaN(r)){const t={x:a.x+e/2,y:a.y+r/2};n(qn(Wn({},t),{r:Qt(t,a)})),g()}return}const r=+i;if(!isNaN(r)&&r>0){let t=a.x,i=a.y;if("2 points"===e){const e=$t(a,r/2,l);t=e.x,i=e.y}n({x:t,y:i,r:"center diameter"===e||"2 points"===e?r/2:r}),g()}}else if(2===t.length){const n=+t[0],r=+t[1];if(!isNaN(n)&&!isNaN(r)){if(s({x:n,y:r}),e){const t=Qn(e,{x:n,y:r},void 0,l);t&&o(t)}f()}}}}:void 0),g=()=>{s(void 0),u(void 0),o(void 0),m()};return Pt((e=>"Escape"===e.key),g,[s,u]),{circle:i,startPosition:a,middlePosition:l,cursorPosition:p,setCursorPosition:d,setInputPosition:y,clearText:f,onClick(t){if(e)if(d(t),a)if("3 points"!==e||l){const i=Qn(e,a,l,Zn(a,t,null==r?void 0:r.getAngleSnap));i&&n(i),g()}else u(Zn(a,t,null==r?void 0:r.getAngleSnap));else s(t)},onMove(t,n){if(y(null!=n?n:t),e&&(t=Zn(a,t,null==r?void 0:r.getAngleSnap),d(t),a)){const n=Qn(e,a,l,t);n&&o(n)}},input:h}}function Qn(e,t,n,r){if("2 points"===e){const e={x:(t.x+r.x)/2,y:(t.y+r.y)/2};return qn(Wn({},e),{r:Qt(e,t)})}return"center radius"===e||"center diameter"===e?qn(Wn({},t),{r:Qt(r,t)}):n?function(e,t,n){const r=t.x-e.x,i=t.y-e.y,o=n.x-t.x,a=n.y-t.y,s=Ut(t.x,2)-Ut(e.x,2)+Ut(t.y,2)-Ut(e.y,2),l=Ut(n.x,2)-Ut(t.x,2)+Ut(n.y,2)-Ut(t.y,2),u={x:(s*a-l*i)/(r*a-o*i)/2,y:(o*s-l*r)/(o*i-a*r)/2};return jt(Gt({},u),{r:Qt(u,e)})}(t,n,r):void 0}function Zn(e,t,n){if(n&&e){const r=180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI,i=n(r);void 0!==i&&i!==r&&(t=vn(t,e,r-i))}return t}function Jn(e,n,r){const[i,o]=t.useState(),[a,s]=t.useState([]),[l,u]=t.useState(0),[c,h]=t.useState(),[d,f]=t.useState(),p=er[l],y=(l+1)%er.length,m=void 0!==c?()=>c:null==r?void 0:r.getAngleSnap,g=void 0!==d?()=>d:null==r?void 0:r.getAngleSnap;let v="";i&&(v=1===i.length?"specify start point by click, input position":`specify next point by click, input position or input ${p}, press tab to input ${er[y]}`);const{input:_,setCursorPosition:b,clearText:x,setInputPosition:E,resetInput:S}=lr(v,e?(e,t,l)=>{if("Enter"===e.key){if("angle"===p){const e=+t;if(!isNaN(e)&&(x(),i&&i.length>1)){const t=i[i.length-2];let n=Zn(t,i[i.length-1],(()=>e));n=tr(t,n,g),s([...a,n]),o([...a,n,{x:l.x,y:l.y}]),h(void 0),f(void 0)}return}const e=t.split(",");if(2===e.length){const t=+e[0],i=+e[1];if(!isNaN(t)&&!isNaN(t)){const e=a[a.length-1]||{x:0,y:0},u=e.x+t,c=e.y+i;if((null==r?void 0:r.once)&&a.length>0)return n([a[0],{x:u,y:c}]),void T();s([...a,{x:u,y:c}]),o([...a,{x:u,y:c},{x:l.x,y:l.y}]),x(),h(void 0),f(void 0)}return}if(a.length>0){const e=+t;if(!isNaN(e)&&e>0){const t=$t(a[a.length-1],e,l);if((null==r?void 0:r.once)&&a.length>0)return n([a[0],t]),void T();s([...a,t]),o([...a,t,{x:l.x,y:l.y}]),x(),h(void 0),f(void 0)}}}else if("Tab"===e.key){if(e.stopPropagation(),e.preventDefault(),t){const e=+t;isNaN(e)||("angle"===p?(h(e),f(void 0),x()):e>0&&(f(e),h(void 0),x()))}u(y)}}:void 0),T=()=>{s([]),o(void 0),S(),h(void 0),f(void 0),u(0)};return Pt((e=>"Escape"===e.key),(()=>{a.length>1&&n(a),T()}),[a,s]),{line:i,inputMode:p,onClick(t){if(!e)return;let i=Zn(a[a.length-1],t,m);if(i=tr(a[a.length-1],i,g),b(i),h(void 0),f(void 0),(null==r?void 0:r.once)&&a.length>0)return n([a[0],i]),void T();s([...a,i])},onMove(t,n){if(E(n||t),!e)return;let i=Zn(a[a.length-1],t,m);i=tr(a[a.length-1],i,g),b(i),(null==r?void 0:r.once)&&0===a.length||o([...a,i])},input:_}}const er=["length","angle"];function tr(e,t,n){if(n&&e){const r=Qt(e,t),i=n(r);void 0!==i&&i!==r&&(t=$t(e,i,t))}return t}var nr=Object.defineProperty,rr=Object.getOwnPropertySymbols,ir=Object.prototype.hasOwnProperty,or=Object.prototype.propertyIsEnumerable,ar=(e,t,n)=>t in e?nr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sr=(e,t)=>{for(var n in t||(t={}))ir.call(t,n)&&ar(e,n,t[n]);if(rr)for(var n of rr(t))or.call(t,n)&&ar(e,n,t[n]);return e};function lr(e,n,r){const[i,o]=t.useState(""),[a,s]=t.useState(),[l,u]=t.useState(),c=t.useRef(null);t.useEffect((()=>{var e;null==(e=c.current)||e.focus()}));const h=()=>{s(void 0),u(void 0),o("")};return Pt((e=>"Escape"===e.key),h,[s,u,o]),{resetInput:h,cursorPosition:a,inputPosition:l,setCursorPosition:s,setInputPosition:u,clearText(){o("")},input:l&&(e||n&&a)?t.createElement("span",{style:{position:"absolute",left:`${Math.min(l.x+10,window.innerWidth-54)}px`,top:`${Math.min(l.y-5,window.innerHeight-22)}px`}},e&&t.createElement("span",null,e),n&&a&&t.createElement("input",{ref:c,value:i,style:sr({width:"50px",opacity:(null==r?void 0:r.hideIfNoInput)&&!i?0:void 0},null==r?void 0:r.inputStyle),onChange:e=>o(e.target.value),onKeyDown:e=>n(e,i,a)})):void 0}}function ur(e){var n,r;const i=null!=(n=e.scale)?n:1,o=(null!=(r=e.resizeSize)?r:5)/i,a=1/i;return t.createElement(t.Fragment,null,e.positions.map(((n,r)=>t.createElement("div",{key:r,style:{width:o+"px",height:o+"px",border:`${a}px solid green`,position:"absolute",backgroundColor:"white",boxSizing:"border-box",pointerEvents:"auto",left:n.x-o/2+"px",top:n.y-o/2+"px",cursor:n.cursor},onMouseDown:t=>{var r;return null==(r=e.onMouseDown)?void 0:r.call(e,t,n.data,n.cursor)},onClick:t=>{var r;return null==(r=e.onClick)?void 0:r.call(e,t,n.data,n.cursor)}}))))}function cr(e){const n=e.x,r=e.y,i=[{data:"center",x:n,y:r,cursor:"move"},{data:"edge",x:n-e.radius,y:r,cursor:"ew-resize"},{data:"edge",x:n,y:r-e.radius,cursor:"ns-resize"},{data:"edge",x:n+e.radius,y:r,cursor:"ew-resize"},{data:"edge",x:n,y:r+e.radius,cursor:"ns-resize"}];return t.createElement(ur,{positions:i,scale:e.scale,resizeSize:e.resizeSize,onClick:e.onClick,onMouseDown:e.onMouseDown})}var hr=Object.defineProperty,dr=Object.defineProperties,fr=Object.getOwnPropertyDescriptors,pr=Object.getOwnPropertySymbols,yr=Object.prototype.hasOwnProperty,mr=Object.prototype.propertyIsEnumerable,gr=(e,t,n)=>t in e?hr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function vr(e,n,r,i){const[o,a]=t.useState();return Pt((e=>"Escape"===e.key),(()=>{r(),a(void 0)}),[a]),{dragStartPosition:o,onStart(e,t){var n,r;e.stopPropagation(),a(((e,t)=>dr(e,fr(t)))(((e,t)=>{for(var n in t||(t={}))yr.call(t,n)&&gr(e,n,t[n]);if(pr)for(var n of pr(t))mr.call(t,n)&&gr(e,n,t[n]);return e})({},null!=(r=null==(n=null==i?void 0:i.transform)?void 0:n.call(i,{x:e.clientX,y:e.clientY}))?r:{x:e.clientX,y:e.clientY}),{data:t}))},mask:o&&t.createElement(Me,{onDragging:e=>{var t,r;e.stopPropagation();let a={x:e.clientX,y:e.clientY};a=null!=(r=null==(t=null==i?void 0:i.transform)?void 0:t.call(i,a))?r:a,n(o,a)},onDragEnd:()=>{e(),r(),a(void 0)},style:{cursor:o.data.cursor}})}}function _r(e){const n=e.points,r=!e.isPolygon&&n.length>2&&Ht(n[0],n[n.length-1]),i=[];if(n.forEach(((t,o)=>{if(!e.isPolygon&&o===n.length-1&&r||i.push({data:[o],x:t.x,y:t.y,cursor:"move"}),!e.midpointDisabled&&o!==n.length-1){const e=n[o+1];i.push({data:[o,o+1],x:(t.x+e.x)/2,y:(t.y+e.y)/2,cursor:"move"})}if(e.isPolygon&&o===n.length-1){const e=n[0];i.push({data:[n.length-1,0],x:(t.x+e.x)/2,y:(t.y+e.y)/2,cursor:"move"})}})),r)for(const e of i)e.data.includes(0)?e.data.push(n.length-1):e.data.includes(n.length-1)&&e.data.push(0);return t.createElement(ur,{positions:i,scale:e.scale,resizeSize:e.resizeSize,onClick:e.onClick,onMouseDown:e.onMouseDown})}var br=Object.defineProperty,xr=Object.defineProperties,Er=Object.getOwnPropertyDescriptors,Sr=Object.getOwnPropertySymbols,Tr=Object.prototype.hasOwnProperty,wr=Object.prototype.propertyIsEnumerable,Ar=(e,t,n)=>t in e?br(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pr=(e,t)=>{for(var n in t||(t={}))Tr.call(t,n)&&Ar(e,n,t[n]);if(Sr)for(var n of Sr(t))wr.call(t,n)&&Ar(e,n,t[n]);return e},Or=(e,t)=>xr(e,Er(t));function Rr(e,t,n,r){return e.renderGroup([e.renderPolyline(n,Or(Pr({},r),{skippedLines:t.map((e=>e.index))})),...t.map((({index:t,color:i})=>e.renderPolyline([n[t],n[t+1]],Or(Pr({},r),{strokeColor:i}))))])}var Cr=Object.defineProperty,Ir=Object.defineProperties,Nr=Object.getOwnPropertyDescriptors,Mr=Object.getOwnPropertySymbols,kr=Object.prototype.hasOwnProperty,Dr=Object.prototype.propertyIsEnumerable,Lr=(e,t,n)=>t in e?Cr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fr=(e,t)=>{for(var n in t||(t={}))kr.call(t,n)&&Lr(e,n,t[n]);if(Mr)for(var n of Mr(t))Dr.call(t,n)&&Lr(e,n,t[n]);return e},Ur=(e,t)=>Ir(e,Nr(t));const Br={type:"svg",renderResult(e,n,r,i){var o,a,s,l,u,c,h;const d=null!=(a=null==(o=null==i?void 0:i.transform)?void 0:o.x)?a:0,f=null!=(l=null==(s=null==i?void 0:i.transform)?void 0:s.y)?l:0,p=null!=(c=null==(u=null==i?void 0:i.transform)?void 0:u.scale)?c:1,y=n/p,m=r/p,g=(n-y)/2-d/p,v=(r-m)/2-f/p;return t.createElement("svg",Ur(Fr({version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:`${g} ${v} ${y} ${m}`,width:n,height:r,colorInterpolationFilters:"sRGB"},null==i?void 0:i.attributes),{style:Ur(Fr({},null==(h=null==i?void 0:i.attributes)?void 0:h.style),{backgroundColor:void 0!==(null==i?void 0:i.backgroundColor)?jr(i.backgroundColor):void 0})}),e.map(((e,t)=>{var n;return e(t,null!=(n=null==i?void 0:i.strokeWidthScale)?n:1)})))},renderEmpty:()=>()=>t.createElement(t.Fragment,null),renderGroup(e,n){const r=[];if((null==n?void 0:n.translate)&&r.push(`translate(${n.translate.x}, ${n.translate.y})`),null==n?void 0:n.base){const e=$r(n.base.x,n.base.y,n);e&&r.push(e)}return(n,i)=>t.createElement("g",{transform:r.join(" "),key:n},e.map(((e,t)=>e(t,i))))},renderRect:(e,n,r,i,o)=>(a,s)=>{var l,u;return t.createElement("rect",{key:a,x:e,y:n,width:r,height:i,stroke:jr(null!=(l=null==o?void 0:o.strokeColor)?l:0),strokeWidth:(null!=(u=null==o?void 0:o.strokeWidth)?u:1)*s,fill:void 0!==(null==o?void 0:o.fillColor)?jr(o.fillColor):"none",transform:$r(e+r/2,n+i/2,o)})},renderPolyline(e,n){const r=null!=n?n:{},{partsStyles:i}=r,o=((e,t)=>{var n={};for(var r in e)kr.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&Mr)for(var r of Mr(e))t.indexOf(r)<0&&Dr.call(e,r)&&(n[r]=e[r]);return n})(r,["partsStyles"]);if(i&&i.length>0)return Rr(this,i,e,o);const a=void 0!==(null==n?void 0:n.fillColor)?jr(n.fillColor):"none",s=null==n?void 0:n.skippedLines;if(s&&s.length>0){const r=e.map(((e,t)=>0===t||s.includes(t-1)?`M ${e.x} ${e.y}`:`L ${e.x} ${e.y}`)).join(" ");return(e,i)=>{var o,s,l;return t.createElement("path",{d:r,key:e,strokeWidth:(null!=(o=null==n?void 0:n.strokeWidth)?o:1)*i,stroke:jr(null!=(s=null==n?void 0:n.strokeColor)?s:0),strokeDasharray:null==(l=null==n?void 0:n.dashArray)?void 0:l.join(" "),fill:a})}}const l=e.map((e=>`${e.x},${e.y}`)).join(" ");return(e,r)=>{var i,o,s;return t.createElement("polyline",{key:e,points:l,stroke:jr(null!=(i=null==n?void 0:n.strokeColor)?i:0),strokeWidth:(null!=(o=null==n?void 0:n.strokeWidth)?o:1)*r,strokeDasharray:null==(s=null==n?void 0:n.dashArray)?void 0:s.join(" "),fill:a})}},renderPolygon(e,t){return this.renderPolyline(Dn(e),t)},renderCircle(e,n,r,i){const o=void 0!==(null==i?void 0:i.fillColor)?jr(i.fillColor):"none";return(a,s)=>{var l,u;return t.createElement("circle",{key:a,stroke:jr(null!=(l=null==i?void 0:i.strokeColor)?l:0),strokeWidth:(null!=(u=null==i?void 0:i.strokeWidth)?u:1)*s,cx:e,cy:n,r,fill:o})}},renderEllipse(e,n,r,i,o){const a=void 0!==(null==o?void 0:o.fillColor)?jr(o.fillColor):"none";return(s,l)=>{var u,c;return t.createElement("ellipse",{stroke:jr(null!=(u=null==o?void 0:o.strokeColor)?u:0),key:s,strokeWidth:(null!=(c=null==o?void 0:o.strokeWidth)?c:1)*l,cx:e,cy:n,rx:r,ry:i,fill:a,transform:$r(e,n,o)})}},renderArc(e,n,r,i,o,a){const s=Gr(e,n,r,o),l=Gr(e,n,r,i),u=o-i<=180?"0":"1";return(e,n)=>{var i,o;return t.createElement("path",{key:e,d:`M ${s.x} ${s.y} A ${r} ${r} 0 ${u} 0 ${l.x} ${l.y}`,strokeWidth:(null!=(i=null==a?void 0:a.strokeWidth)?i:1)*n,stroke:jr(null!=(o=null==a?void 0:a.strokeColor)?o:0),fill:"none"})}},renderText:(e,n,r,i,o,a)=>s=>t.createElement("text",{key:s,x:e,y:n,style:{fill:jr(i),fontSize:`${o}px`,fontFamily:a}},r),renderPath(e,n){const r=e.map((e=>e.map(((e,t)=>0===t?`M ${e.x} ${e.y}`:`L ${e.x} ${e.y}`)).join(" "))).join(" ");return(e,i)=>{var o,a,s;return t.createElement("path",{d:r,key:e,strokeWidth:(null!=(o=null==n?void 0:n.strokeWidth)?o:1)*i,stroke:jr(null!=(a=null==n?void 0:n.strokeColor)?a:0),strokeDasharray:null==(s=null==n?void 0:n.dashArray)?void 0:s.join(" "),fill:"none"})}}};function Gr(e,t,n,r){const i=r*Math.PI/180;return{x:e+n*Math.cos(i),y:t+n*Math.sin(i)}}function jr(e){const t=e.toString(16);return`#${"0".repeat(6-t.length)}${t}`}function $r(e,t,n){return(null==n?void 0:n.angle)?`rotate(${n.angle},${e},${t})`:(null==n?void 0:n.rotation)?`rotate(${180*n.rotation/Math.PI},${e},${t})`:void 0}var zr=Object.defineProperty,Xr=Object.getOwnPropertySymbols,Hr=Object.prototype.hasOwnProperty,Vr=Object.prototype.propertyIsEnumerable,Yr=(e,t,n)=>t in e?zr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const Wr={type:"canvas",renderResult:(e,n,r,i)=>t.createElement(qr,{width:n,height:r,attributes:null==i?void 0:i.attributes,draws:e,transform:null==i?void 0:i.transform,backgroundColor:null==i?void 0:i.backgroundColor,debug:null==i?void 0:i.debug,strokeWidthScale:null==i?void 0:i.strokeWidthScale}),renderEmpty:()=>()=>{},renderGroup:(e,t)=>(n,r)=>{n.save(),(null==t?void 0:t.translate)&&n.translate(t.translate.x,t.translate.y),(null==t?void 0:t.angle)&&void 0!==(null==t?void 0:t.base)&&(n.translate(t.base.x,null==t?void 0:t.base.y),n.rotate(t.angle/180*Math.PI),n.translate(-t.base.x,-t.base.y)),(null==t?void 0:t.rotation)&&void 0!==(null==t?void 0:t.base)&&(n.translate(t.base.x,null==t?void 0:t.base.y),n.rotate(t.rotation),n.translate(-t.base.x,-t.base.y)),e.forEach((e=>{e(n,r)})),n.restore()},renderRect:(e,t,n,r,i)=>(o,a)=>{var s,l;o.save(),o.beginPath(),(null==i?void 0:i.angle)&&(o.translate(e+n/2,t+r/2),o.rotate(i.angle/180*Math.PI),o.translate(-(e+n/2),-(t+r/2))),(null==i?void 0:i.rotation)&&(o.translate(e+n/2,t+r/2),o.rotate(i.rotation),o.translate(-(e+n/2),-(t+r/2))),void 0!==(null==i?void 0:i.fillColor)&&(o.fillStyle=jr(i.fillColor),o.fillRect(e,t,n,r));const u=(null!=(s=null==i?void 0:i.strokeWidth)?s:1)*a;u&&(o.lineWidth=u,o.strokeStyle=jr(null!=(l=null==i?void 0:i.strokeColor)?l:0),o.strokeRect(e,t,n,r)),o.restore()},renderPolyline(e,t){const n=null!=t?t:{},{partsStyles:r}=n,i=((e,t)=>{var n={};for(var r in e)Hr.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&Xr)for(var r of Xr(e))t.indexOf(r)<0&&Vr.call(e,r)&&(n[r]=e[r]);return n})(n,["partsStyles"]);return r&&r.length>0?Rr(this,r,e,i):(n,r)=>{var i,o,a;n.save(),n.beginPath(),(null==t?void 0:t.dashArray)&&n.setLineDash(t.dashArray);for(let r=0;r<e.length;r++)0===r||(null==(i=null==t?void 0:t.skippedLines)?void 0:i.includes(r-1))?n.moveTo(e[r].x,e[r].y):n.lineTo(e[r].x,e[r].y);const s=(null!=(o=null==t?void 0:t.strokeWidth)?o:1)*r;s&&(n.lineWidth=s,n.strokeStyle=jr(null!=(a=null==t?void 0:t.strokeColor)?a:0),n.stroke()),void 0!==(null==t?void 0:t.fillColor)&&(n.fillStyle=jr(t.fillColor),n.fill()),n.restore()}},renderPolygon(e,t){return this.renderPolyline(Dn(e),t)},renderCircle:(e,t,n,r)=>(i,o)=>{var a,s;i.save(),i.beginPath(),i.arc(e,t,n,0,2*Math.PI);const l=(null!=(a=null==r?void 0:r.strokeWidth)?a:1)*o;l&&(i.strokeStyle=jr(null!=(s=null==r?void 0:r.strokeColor)?s:0),i.lineWidth=l,i.stroke()),void 0!==(null==r?void 0:r.fillColor)&&(i.fillStyle=jr(r.fillColor),i.fill()),i.restore()},renderEllipse:(e,t,n,r,i)=>(o,a)=>{var s,l,u,c;o.save(),o.beginPath();const h=null!=(l=null==i?void 0:i.rotation)?l:(null!=(s=null==i?void 0:i.angle)?s:0)/180*Math.PI;o.ellipse(e,t,n,r,h,0,2*Math.PI);const d=(null!=(u=null==i?void 0:i.strokeWidth)?u:1)*a;d&&(o.lineWidth=d,o.strokeStyle=jr(null!=(c=null==i?void 0:i.strokeColor)?c:0),o.stroke()),void 0!==(null==i?void 0:i.fillColor)&&(o.fillStyle=jr(i.fillColor),o.fill()),o.restore()},renderArc:(e,t,n,r,i,o)=>(a,s)=>{var l,u;a.save(),a.beginPath(),a.arc(e,t,n,r/180*Math.PI,i/180*Math.PI);const c=(null!=(l=null==o?void 0:o.strokeWidth)?l:1)*s;c&&(a.lineWidth=c,a.strokeStyle=jr(null!=(u=null==o?void 0:o.strokeColor)?u:0),a.stroke()),a.restore()},renderText:(e,t,n,r,i,o)=>a=>{a.save(),a.fillStyle=jr(r),a.font=`${i}px ${o}`,a.fillText(n,e,t),a.restore()},renderPath:(e,t)=>(n,r)=>{var i,o;n.beginPath(),(null==t?void 0:t.dashArray)&&n.setLineDash(t.dashArray);for(const t of e)for(let e=0;e<t.length;e++)0===e?n.moveTo(t[e].x,t[e].y):n.lineTo(t[e].x,t[e].y);const a=(null!=(i=null==t?void 0:t.strokeWidth)?i:1)*r;a&&(n.lineWidth=a,n.strokeStyle=jr(null!=(o=null==t?void 0:t.strokeColor)?o:0),n.stroke())}};function qr(e){const n=t.useRef(null);return t.useEffect((()=>{n.current&&(n.current.width=e.width,n.current.height=e.height)}),[e.width,e.height]),t.useEffect((()=>{var t,r;if(n.current){const i=n.current.getContext("2d");if(i){const n=Date.now();i.fillStyle=jr(null!=(t=e.backgroundColor)?t:16777215),i.fillRect(0,0,i.canvas.width,i.canvas.height),i.save(),e.transform&&(i.translate(e.width/2,e.height/2),i.scale(e.transform.scale,e.transform.scale),i.translate(e.transform.x/e.transform.scale-e.width/2,e.transform.y/e.transform.scale-e.height/2));for(const t of e.draws)t(i,null!=(r=e.strokeWidthScale)?r:1);i.restore(),e.debug&&console.info(Date.now()-n)}}}),[e.draws,n.current,e.transform,e.backgroundColor]),t.createElement("canvas",((e,t)=>{for(var n in t||(t={}))Hr.call(t,n)&&Yr(e,n,t[n]);if(Xr)for(var n of Xr(t))Vr.call(t,n)&&Yr(e,n,t[n]);return e})({ref:n,width:e.width,height:e.height},e.attributes))}function Kr(e,t){return t?{x:(e.x-t.center.x-t.x)/t.scale+t.center.x,y:(e.y-t.center.y-t.y)/t.scale+t.center.y}:e}function Qr(e,n,r){const[i,o]=t.useState(),[a,s]=t.useState(),[l,u]=t.useState("radius"),[c,h]=t.useState(6);let d="";e&&(d="sides"===l?"specify sides number by input":a?(null==r?void 0:r.toEdge)?"specify edge point by click or input length":"specify end point by click or input length":"specify center point by click");const{input:f,setCursorPosition:p,clearText:y,cursorPosition:m,setInputPosition:g,resetInput:v}=lr(d,e?(e,t,i)=>{if("Enter"===e.key){if((null==r?void 0:r.setSidesKey)&&t.toLowerCase()===r.setSidesKey.toLowerCase())return u("sides"),void y();if((null==r?void 0:r.switchTypeKey)&&r.switchType&&t.toLowerCase()===r.switchTypeKey.toLowerCase())return r.switchType(),void y();const e=+t;if(!isNaN(e)&&e>0)if("radius"===l){if(a){const t=$t(a,e,i);n(bn(t,a,c,null==r?void 0:r.toEdge)),_()}}else"sides"===l&&Number.isInteger(e)&&e>=3&&(h(e),u("radius"),y(),a&&o(bn(i,a,e,null==r?void 0:r.toEdge)))}}:void 0),_=()=>{s(void 0),o(void 0),v()};return Pt((e=>"Escape"===e.key),_,[s]),t.useEffect((()=>{a&&m&&o(bn(m,a,c,null==r?void 0:r.toEdge))}),[null==r?void 0:r.toEdge]),{polygon:i,startPosition:a,cursorPosition:m,onClick(t){if(e)if(p(t),a){const e=Zn(a,t,null==r?void 0:r.getAngleSnap);n(bn(e,a,c,null==r?void 0:r.toEdge)),_()}else s(t)},onMove(t,n){if(g(n||t),!e)return;const i=Zn(a,t,null==r?void 0:r.getAngleSnap);p(i),a&&o(bn(i,a,c,null==r?void 0:r.toEdge))},input:f,startSetSides(){u("sides")}}}function Zr(e,n,r){const[i,o]=t.useState(),[a,s]=t.useState(),[l,u]=t.useState();let c="";e&&(c=a?l?"specify secondary semi-axis by click, input position or input length":"specify end point by click, input position or input length":"ellipse endpoint"===e?"specify first point by click or input position":"specify ellipse center point by click or input position",(null==r?void 0:r.message)&&(c=r.message));const{input:h,setCursorPosition:d,clearText:f,cursorPosition:p,setInputPosition:y,resetInput:m}=lr(c,e?(t,i,o)=>{if(null==r?void 0:r.onKeyDown)r.onKeyDown(t,i,o);else if("Enter"===t.key&&e){const t=i.split(",");if(!a){if(2===t.length){const e=+t[0],n=+t[1];isNaN(e)||isNaN(n)||(s({x:e,y:n}),f())}return}if(!l){if(2===t.length){const e=+t[0],n=+t[1];isNaN(e)||isNaN(n)||(u({x:e,y:n}),f())}else{const e=+i;!isNaN(e)&&e>0&&(u($t(a,e,o)),f())}return}if(2===t.length){const r=+t[0],i=+t[1];isNaN(r)||isNaN(i)||(n(Jr(e,a,l,{x:r,y:i})),g())}else{const t=+i;!isNaN(t)&&t>0&&(n(Jr(e,a,l,t)),g())}}}:void 0),g=()=>{s(void 0),u(void 0),o(void 0),m()};return Pt((e=>"Escape"===e.key),g,[s,u]),{ellipse:i,startPosition:a,middlePosition:l,cursorPosition:p,setCursorPosition:d,setInputPosition:y,clearText:f,onClick(t){if(e)if(d(t),a)if(l)t=Zn("ellipse center"===e?a:{x:(a.x+l.x)/2,y:(a.y+l.y)/2},t,null==r?void 0:r.getAngleSnap),n(Jr(e,a,l,t)),g();else{const e=Zn(a,t,null==r?void 0:r.getAngleSnap);u(e)}else s(t)},onMove(t,n){if(y(n||t),!e)return;let i;i=Zn(a&&l?"ellipse center"===e?a:{x:(a.x+l.x)/2,y:(a.y+l.y)/2}:a,t,null==r?void 0:r.getAngleSnap),d(i),a&&l&&o(Jr(e,a,l,i))},input:h}}function Jr(e,t,n,r){const i="ellipse center"===e?t:{x:(t.x+n.x)/2,y:(t.y+n.y)/2};return{cx:i.x,cy:i.y,rx:Qt(i,n),ry:"number"==typeof r?r:Qt(i,r),angle:180*Math.atan2(n.y-i.y,n.x-i.x)/Math.PI}}function ei(e){var n;const r={x:e.cx,y:e.cy},i=-(null!=(n=e.angle)?n:0),o=vn({x:e.cx-e.rx,y:e.cy},r,i),a=vn({x:e.cx+e.rx,y:e.cy},r,i),s=vn({x:e.cx,y:e.cy-e.ry},r,i),l=vn({x:e.cx,y:e.cy+e.ry},r,i),u=[{data:"center",x:e.cx,y:e.cy,cursor:"move"},{data:"major axis",x:o.x,y:o.y,cursor:Rt(-i,"left")},{data:"major axis",x:a.x,y:a.y,cursor:Rt(-i,"right")},{data:"minor axis",x:s.x,y:s.y,cursor:Rt(-i,"top")},{data:"minor axis",x:l.x,y:l.y,cursor:Rt(-i,"bottom")}];return t.createElement(ur,{positions:u,scale:e.scale,resizeSize:e.resizeSize,onClick:e.onClick,onMouseDown:e.onMouseDown})}var ti=Object.defineProperty,ni=Object.defineProperties,ri=Object.getOwnPropertyDescriptors,ii=Object.getOwnPropertySymbols,oi=Object.prototype.hasOwnProperty,ai=Object.prototype.propertyIsEnumerable,si=(e,t,n)=>t in e?ti(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,li=(e,t)=>{for(var n in t||(t={}))oi.call(t,n)&&si(e,n,t[n]);if(ii)for(var n of ii(t))ai.call(t,n)&&si(e,n,t[n]);return e},ui=(e,t)=>ni(e,ri(t));function ci(e,n,r){const[i,o]=t.useState(),[a,s]=t.useState();let l;i&&(l=void 0===a?"specify start angle by click or input angle":"specify end angle by click or input angle");const{circle:u,onClick:c,onMove:h,input:d,setInputPosition:f,startPosition:p,middlePosition:y,cursorPosition:m,setCursorPosition:g,clearText:v}=Kn(e,(e=>o(e?ui(li({},e),{startAngle:0,endAngle:0}):void 0)),ui(li({},r),{message:l,onKeyDown:i?(e,t)=>{if("Enter"===e.key){let e=+t;isNaN(e)||(void 0===a?(s(e),o(ui(li({},i),{startAngle:e,endAngle:e})),v()):(e<a&&(e+=360),o(void 0),n(ui(li({},i),{startAngle:a,endAngle:e})),_()))}}:void 0})),_=()=>{s(void 0),g(void 0),o(void 0),v()};return Pt((e=>"Escape"===e.key),_,[o,s,g]),{circle:u,arc:i,startPosition:p,middlePosition:y,cursorPosition:m,onClick(t){if(e)if(i)if(t=Zn(i,t,null==r?void 0:r.getAngleSnap),void 0===a){const e=180*Math.atan2(t.y-i.y,t.x-i.x)/Math.PI;s(e),o(ui(li({},i),{startAngle:e,endAngle:e}))}else{let e=180*Math.atan2(t.y-i.y,t.x-i.x)/Math.PI;e<a&&(e+=360),o(void 0),n(ui(li({},i),{startAngle:a,endAngle:e})),_()}else c(t)},onMove(t,n){if(f(null!=n?n:t),e)if(i){if(t=Zn(i,t,null==r?void 0:r.getAngleSnap),g(t),void 0!==a){let e=180*Math.atan2(t.y-i.y,t.x-i.x)/Math.PI;e<a&&(e+=360),o(ui(li({},i),{startAngle:a,endAngle:e}))}}else h(t,n)},input:d}}function hi(e){const n=e.x,r=e.y,i=e.startAngle/180*Math.PI,o=e.endAngle/180*Math.PI,a=(i+o)/2,s=[{data:"center",x:n,y:r,cursor:"move"},{data:"start angle",x:n+e.r*Math.cos(i),y:r+e.r*Math.sin(i),cursor:Rt(e.startAngle,"top")},{data:"end angle",x:n+e.r*Math.cos(o),y:r+e.r*Math.sin(o),cursor:Rt(e.endAngle,"top")},{data:"radius",x:n+e.r*Math.cos(a),y:r+e.r*Math.sin(a),cursor:Rt((e.startAngle+e.endAngle)/2,"right")}];return t.createElement(ur,{positions:s,scale:e.scale,resizeSize:e.resizeSize,onClick:e.onClick,onMouseDown:e.onMouseDown})}var di=Object.defineProperty,fi=Object.defineProperties,pi=Object.getOwnPropertyDescriptors,yi=Object.getOwnPropertySymbols,mi=Object.prototype.hasOwnProperty,gi=Object.prototype.propertyIsEnumerable,vi=(e,t,n)=>t in e?di(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_i=(e,t)=>{for(var n in t||(t={}))mi.call(t,n)&&vi(e,n,t[n]);if(yi)for(var n of yi(t))gi.call(t,n)&&vi(e,n,t[n]);return e},bi=(e,t)=>fi(e,pi(t));function xi(e,n,r){const[i,o]=t.useState(),[a,s]=t.useState();let l;i&&(l=void 0===a?"specify start angle by click or input angle":"specify end angle by click or input angle");const{ellipse:u,onClick:c,onMove:h,input:d,startPosition:f,middlePosition:p,cursorPosition:y,setCursorPosition:m,clearText:g,setInputPosition:v}=Zr(e,(e=>o(e?bi(_i({},e),{startAngle:0,endAngle:0}):void 0)),bi(_i({},r),{message:l,onKeyDown:i?(e,t)=>{if("Enter"===e.key){let e=+t;isNaN(e)||(void 0===a?(s(e),o(bi(_i({},i),{startAngle:e,endAngle:e})),g()):(e<a&&(e+=360),o(void 0),n(bi(_i({},i),{startAngle:a,endAngle:e})),_()))}}:void 0})),_=()=>{o(void 0),s(void 0),m(void 0),g()};return Pt((e=>"Escape"===e.key),_,[o,s,m]),{ellipse:u,ellipseArc:i,startPosition:f,middlePosition:p,cursorPosition:y,onClick(t){if(e)if(i){let e=Rn(t=Zn({x:i.cx,y:i.cy},t,null==r?void 0:r.getAngleSnap),i);void 0===a?(s(e),o(bi(_i({},i),{startAngle:e,endAngle:e}))):(e<a&&(e+=360),o(void 0),n(bi(_i({},i),{startAngle:a,endAngle:e})),_())}else c(t)},onMove(t,n){if(v(null!=n?n:t),e)if(i){if(t=Zn({x:i.cx,y:i.cy},t,null==r?void 0:r.getAngleSnap),m(t),void 0!==a){let e=Rn(t,i);e<a&&(e+=360),o(bi(_i({},i),{startAngle:a,endAngle:e}))}}else h(t,n)},input:d}}var Ei=Object.defineProperty,Si=Object.defineProperties,Ti=Object.getOwnPropertyDescriptors,wi=Object.getOwnPropertySymbols,Ai=Object.prototype.hasOwnProperty,Pi=Object.prototype.propertyIsEnumerable,Oi=(e,t,n)=>t in e?Ei(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ri=(e,t)=>{for(var n in t||(t={}))Ai.call(t,n)&&Oi(e,n,t[n]);if(wi)for(var n of wi(t))Pi.call(t,n)&&Oi(e,n,t[n]);return e},Ci=(e,t)=>Si(e,Ti(t));function Ii(e,n,r){var i,o;const[a,s]=t.useState(),[l,u]=t.useState(),[c,h]=t.useState(),d=5/(null!=(i=null==r?void 0:r.scale)?i:1),f=null!=(o=null==r?void 0:r.readOnly)&&o,p=()=>{s(void 0),u(void 0),h(void 0)};return t.useEffect((()=>{!1===f&&p()}),[f]),Pt((e=>"Escape"===e.key),(()=>{p()}),[s,u,h]),{editPoint:a,getEditAssistentContents(e,t){const r=[];if(!f){const i=null==n?void 0:n(e);i&&r.push(...i.editPoints.map((e=>t({x:e.x,y:e.y,width:d,height:d}))))}return r},updateEditPreview:a&&l&&c?e=>{var t;const n=e(a.path);if(n)return a.update(n,{cursor:c,start:l,scale:null!=(t=null==r?void 0:r.scale)?t:1})}:void 0,onEditMove(e,t){if(!f)if((null==a?void 0:a.angleSnapStartPoint)?e=Zn(a.angleSnapStartPoint,e,null==r?void 0:r.getAngleSnap):l&&(e=Zn(l,e,null==r?void 0:r.getAngleSnap)),l)h(e);else{for(const{content:r,path:i}of t){const t=null==n?void 0:n(r);if(t){const n=t.editPoints.find((t=>Zt(t.x,e.x)<=d&&Zt(t.y,e.y)<=d));if(n)return void s(Ci(Ri({},n),{path:i,angleSnapStartPoint:t.angleSnapStartPoint}))}}s(void 0)}},onEditClick(t){a&&(l?(e(),p()):u(t))}}}var Ni=Object.defineProperty,Mi=Object.defineProperties,ki=Object.getOwnPropertyDescriptors,Di=Object.getOwnPropertySymbols,Li=Object.prototype.hasOwnProperty,Fi=Object.prototype.propertyIsEnumerable,Ui=(e,t,n)=>t in e?Ni(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Bi=(e,t)=>{for(var n in t||(t={}))Li.call(t,n)&&Ui(e,n,t[n]);if(Di)for(var n of Di(t))Fi.call(t,n)&&Ui(e,n,t[n]);return e},Gi=(e,t)=>Mi(e,ki(t));function ji(e){var n;const r={x:e.cx,y:e.cy},i=e.startAngle/180*Math.PI,o=e.endAngle/180*Math.PI,a=-(null!=(n=e.angle)?n:0),s=[{data:"center",x:e.cx,y:e.cy,cursor:"move"},Gi(Bi({data:"start angle"},vn({x:e.cx+e.rx*Math.cos(i),y:e.cy+e.ry*Math.sin(i)},r,a)),{cursor:Rt(e.startAngle-a,"top")}),Gi(Bi({data:"end angle"},vn({x:e.cx+e.rx*Math.cos(o),y:e.cy+e.ry*Math.sin(o)},r,a)),{cursor:Rt(e.endAngle-a,"top")})];return t.createElement(ur,{positions:s,scale:e.scale,resizeSize:e.resizeSize,onClick:e.onClick,onMouseDown:e.onMouseDown})}function $i(){const[e,n]=t.useState({width:window.innerWidth,height:window.innerHeight}),r=t.useRef();return window.addEventListener("resize",(()=>{r.current&&clearTimeout(r.current),r.current=setTimeout((()=>{n({width:window.innerWidth,height:window.innerHeight})}),500)})),e}function zi(e){const[n,r]=t.useState([]);return t.useEffect((()=>{var t;null==(t=null==e?void 0:e.onChange)||t.call(e,n)}),[n]),Pt((e=>"Escape"===e.key),(()=>{r([])}),[r]),{selected:n,filterSelection:(t,i=(null==e?void 0:e.maxCount),o=n)=>{let a=t?o.filter(t):o;return void 0!==i&&(a=a.slice(-i)),r(a),{result:a,needSelect:void 0===i?0===a.length:a.length<i}},isSelected:(e,t=n)=>Xi(e,t),addSelection:(t,i=(null==e?void 0:e.maxCount),o,a)=>{if(t=t.filter((e=>{var t;return!Xi(e,n)&&(null==(t=null==a?void 0:a(e))||t)})),t.length>0){let e=[...n,...t];void 0!==i&&(e=e.slice(-i)),r(e),void 0!==i&&i===e.length&&(null==o||o(e))}},setSelected(...e){const t=e.filter((e=>void 0!==e));0===t.length&&0===n.length||r(t)}}}function Xi(e,t){return t.some((t=>Hi(e,t)))}function Hi(e,t){if(e&&t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return void 0===e&&void 0===t}function Vi(e,n,r){const{selected:i,isSelected:o,addSelection:a,filterSelection:s,setSelected:l}=zi(r),[u,c]=t.useState({type:"select",select:e}),h=()=>{c({type:"select",select:e})};Pt((e=>"Escape"===e.key),(()=>{c({type:"select",select:e})}),[c]);const d=(e=i)=>{if("select then operate"===u.type){if(n(u.operate,e))return void h();c({type:"operate",operate:u.operate})}};Pt((e=>"Enter"===e.key),(()=>d()));let f="";"select then operate"===u.type&&(f=void 0!==u.select.count?`${i.length} selected, extra ${u.select.count-i.length} targets are needed`:i.length?`${i.length} selected, press Enter to finish selection`:"select targets");const p=e=>{var t,n,r;return!o(e)&&"operate"!==u.type&&(null==(r=null==(n=(t=u.select).selectable)?void 0:n.call(t,e))||r)};return{message:f,selected:i,isSelected:o,addSelection(...e){a(e,"operate"!==u.type?u.select.count:void 0,d,p)},setSelected:l,filterSelection:s,isSelectable:p,operations:u,executeOperation:n,startNextOperation:d,resetOperation:h,selectBeforeOperate(e,t){c({type:"select then operate",select:e,operate:t})},operate(e){c({type:"operate",operate:e})}}}var Yi=Object.defineProperty,Wi=Object.defineProperties,qi=Object.getOwnPropertyDescriptors,Ki=Object.getOwnPropertySymbols,Qi=Object.prototype.hasOwnProperty,Zi=Object.prototype.propertyIsEnumerable,Ji=(e,t,n)=>t in e?Yi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function eo(e,n){const[r,i]=t.useState();return{editingContent:no(e,r),setEditingContentPath:t=>{var r;null==(r=null==n?void 0:n.onEditingContentPathChange)||r.call(n,no(e,t)),i(t)},prependPatchPath:e=>to(e,r),getContentByPath:e=>no(e,r)}}function to(e,t){return t&&t.length>0?e.map((e=>((e,t)=>Wi(e,qi(t)))(((e,t)=>{for(var n in t||(t={}))Qi.call(t,n)&&Ji(e,n,t[n]);if(Ki)for(var n of Ki(t))Zi.call(t,n)&&Ji(e,n,t[n]);return e})({},e),{path:[...t,...e.path]}))):e}function no(e,t){if(t){let n=e;for(const e of t)n=n[e];return n}return e}var ro=Object.defineProperty,io=Object.defineProperties,oo=Object.getOwnPropertyDescriptors,ao=Object.getOwnPropertySymbols,so=Object.prototype.hasOwnProperty,lo=Object.prototype.propertyIsEnumerable,uo=(e,t,n)=>t in e?ro(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,co=(e,t)=>{for(var n in t||(t={}))so.call(t,n)&&uo(e,n,t[n]);if(ao)for(var n of ao(t))lo.call(t,n)&&uo(e,n,t[n]);return e},ho=(e,t)=>io(e,oo(t));function fo(e,n,r,i,o=1,a=5){const[s,l]=t.useState();return t.useEffect((()=>{!1===e&&l(void 0)}),[e]),{snapPoint:s,getSnapAssistentContents(e,t,n){const r=[];if(s){const i=2*a/o;"center"===s.type?r.push(e({x:s.x,y:s.y,r:i})):"endpoint"===s.type?r.push(t({x:s.x,y:s.y,width:2*i,height:2*i})):"midpoint"===s.type?r.push(n([{x:s.x-i,y:s.y+i},{x:s.x+i,y:s.y+i},{x:s.x,y:s.y-i},{x:s.x-i,y:s.y+i}])):"intersection"===s.type?r.push(n([{x:s.x-i,y:s.y-i},{x:s.x+i,y:s.y+i}]),n([{x:s.x-i,y:s.y+i},{x:s.x+i,y:s.y-i}])):"nearest"===s.type&&r.push(n([{x:s.x-i,y:s.y-i},{x:s.x+i,y:s.y+i},{x:s.x-i,y:s.y+i},{x:s.x+i,y:s.y-i},{x:s.x-i,y:s.y-i}]))}return r},getSnapPoint(t,o,s){var u,c;if(!e)return l(void 0),t;let h=o;s&&(h=s({start:{x:t.x-a,y:t.y-a},end:{x:t.x+a,y:t.y+a}}));for(const e of h){const n=null==(c=null==(u=i(e))?void 0:u.getSnapPoints)?void 0:c.call(u,e,o);if(n)for(const e of n)if(r.includes(e.type)&&Zt(t.x,e.x)<=a&&Zt(t.y,e.y)<=a)return l(e),e}if(r.includes("intersection"))for(let e=0;e<h.length;e++){const r=h[e];for(let i=e+1;i<h.length;i++){const e=h[i];for(const i of n(r,e,o))if(Zt(t.x,i.x)<=a&&Zt(t.y,i.y)<=a)return l(ho(co({},i),{type:"intersection"})),i}}if(r.includes("nearest"))for(const e of h){const n=i(e);if(n)if(n.getCircle){const{bounding:r,circle:i}=n.getCircle(e);if(r&&rn(t,{start:{x:r.start.x-a,y:r.start.y-a},end:{x:r.end.x+a,y:r.end.y+a}})&&Zt(Qt(t,i),i.r)<=a){const e=mn(t,i,i);for(const n of e)if(Qt(t,n)<=a)return l(ho(co({},n),{type:"nearest"})),n}}else if(n.getGeometries){const{bounding:r,lines:i}=n.getGeometries(e,o);if(r&&rn(t,{start:{x:r.start.x-a,y:r.start.y-a},end:{x:r.end.x+a,y:r.end.y+a}}))for(const e of i){const{point:n,distance:r}=Wt(t,...e);if(r<=a)return l(ho(co({},n),{type:"nearest"})),n}}}return l(void 0),t}}}const po=["endpoint","midpoint","center","intersection","nearest"];function yo(e,t,n){const r=$t(e,e.r,e.position),i=Qt(e,e.position),o=$t(r,t.arrowSize,e.position),a=vn(o,r,t.arrowAngle),s=vn(o,r,-t.arrowAngle),l=[i>e.r?e:r,e.position],u=[r,a,s];let c=[];const{textPosition:h,textRotation:d,size:f}=n(e);f&&(c=[{x:h.x,y:h.y-f.height},{x:h.x+f.width,y:h.y-f.height},{x:h.x+f.width,y:h.y},{x:h.x,y:h.y}].map((e=>_n(e,h,d))));const p=[...l,...u,...c];return{lines:Array.from(Mn(l)),regions:[{points:u,lines:Array.from(kn(u))},{points:c,lines:Array.from(kn(c))}],points:p,bounding:on(p)}}function mo(e,t,n){let r=e.position;const i=`R${Gn(e.r)}`,o=n(`${e.fontSize}px ${e.fontFamily}`,i);let a=Math.atan2(e.position.y-e.y,e.position.x-e.x);return o&&(Qt(e,e.position)>e.r?e.position.x>e.x?r=$t(e.position,o.width,e):a-=Math.PI:e.position.x<e.x&&(r=$t(e.position,-o.width,e),a+=Math.PI)),r=Vt(r,t,a-Math.PI/2),{textPosition:r,textRotation:a,size:o,text:i}}function go(e,t,n){const r=Jt(e.p1,e.p2);let i,o,a,s,l,u=[];const{textPosition:c,size:h,textRotation:d}=n(e),f=Math.atan2(e.position.y-r.y,e.position.x-r.x),p=Math.abs(f);if(e.direct){const n=e.p1.x>e.p2.x?e.p2:e.p1,r=e.p1.x>e.p2.x?e.p1:e.p2,u=Kt(e.position,nn(n,r)),c=Qt(e.position,u),d=Math.atan2(r.y-n.y,r.x-n.x);let p=d-f;p<-Math.PI&&(p+=2*Math.PI);const y=p>0&&p<Math.PI?-1:1;i=[n,Vt(n,c+t.margin,d+y*Math.PI/2)],o=[r,Vt(r,c+t.margin,d+y*Math.PI/2)];let m=Vt(n,c,d+y*Math.PI/2),g=Vt(r,c,d+y*Math.PI/2);const v=Qt(e.p1,e.p2);let _=1;h&&v<=2*t.arrowSize+h.width&&(_=-1);const b=Vt(m,_*t.arrowSize,d),x=Vt(g,_*t.arrowSize,d+Math.PI);s=[m,vn(b,m,t.arrowAngle),vn(b,m,-t.arrowAngle)],l=[g,vn(x,g,t.arrowAngle),vn(x,g,-t.arrowAngle)],h&&v<=2*t.arrowSize+h.width&&(m=$t(m,-2*t.arrowSize,g),g=$t(g,-2*t.arrowSize,m)),a=m.y<g.y?[{x:Math.min(m.x,g.x,e.position.x),y:Math.min(m.y,g.y,e.position.y)},{x:Math.max(m.x,g.x,e.position.x),y:Math.max(m.y,g.y,e.position.y)}]:[{x:Math.min(m.x,g.x,e.position.x),y:Math.max(m.y,g.y,e.position.y)},{x:Math.max(m.x,g.x,e.position.x),y:Math.min(m.y,g.y,e.position.y)}]}else if(p>Math.PI/4&&p<3*Math.PI/4){const n=e.position.y>r.y?1:-1;i=[e.p1,{x:e.p1.x,y:e.position.y+n*t.margin}],o=[e.p2,{x:e.p2.x,y:e.position.y+n*t.margin}];const u={x:e.p1.x,y:e.position.y},c={x:e.p2.x,y:e.position.y};a=[{x:Math.min(e.p1.x,e.p2.x,e.position.x),y:e.position.y},{x:Math.max(e.p1.x,e.p2.x,e.position.x),y:e.position.y}];let d=u.x<c.x?t.arrowSize:-t.arrowSize;h&&Math.abs(u.x-c.x)<=2*t.arrowSize+h.width&&(d=-d,a[0].x=Math.min(a[0].x,Math.min(u.x,c.x)-2*t.arrowSize),a[1].x=Math.max(a[1].x,Math.max(u.x,c.x)+2*t.arrowSize)),s=[u,vn({x:u.x+d,y:u.y},u,t.arrowAngle),vn({x:u.x+d,y:u.y},u,-t.arrowAngle)],l=[c,vn({x:c.x-d,y:c.y},c,t.arrowAngle),vn({x:c.x-d,y:c.y},c,-t.arrowAngle)]}else{const n=e.position.x>r.x?1:-1;i=[e.p1,{x:e.position.x+n*t.margin,y:e.p1.y}],o=[e.p2,{x:e.position.x+n*t.margin,y:e.p2.y}];const u={x:e.position.x,y:e.p1.y},c={x:e.position.x,y:e.p2.y};a=[{x:e.position.x,y:Math.min(e.p1.y,e.p2.y,e.position.y)},{x:e.position.x,y:Math.max(e.p1.y,e.p2.y,e.position.y)}];let d=u.y<c.y?t.arrowSize:-t.arrowSize;h&&Math.abs(u.y-c.y)<=2*t.arrowSize+h.width&&(d=-d,a[0].y=Math.min(a[0].y,Math.min(u.y,c.y)-2*t.arrowSize),a[1].y=Math.max(a[1].y,Math.max(u.y,c.y)+2*t.arrowSize)),s=[u,vn({x:u.x,y:u.y+d},u,t.arrowAngle),vn({x:u.x,y:u.y+d},u,-t.arrowAngle)],l=[c,vn({x:c.x,y:c.y-d},c,t.arrowAngle),vn({x:c.x,y:c.y-d},c,-t.arrowAngle)]}h&&(u=[{x:c.x,y:c.y-h.height},{x:c.x+h.width,y:c.y-h.height},{x:c.x+h.width,y:c.y},{x:c.x,y:c.y}].map((e=>_n(e,c,d))));const y=[...i,...o,...a,...s,...l,...u];return{lines:[...Mn(i),...Mn(o),...Mn(a)],regions:[{points:s,lines:Array.from(kn(s))},{points:l,lines:Array.from(kn(l))},{points:u,lines:Array.from(kn(u))}],points:y,bounding:on(y)}}function vo(e,t,n){const r=Jt(e.p1,e.p2);let i,o,a,s=0;const l=Math.atan2(e.position.y-r.y,e.position.x-r.x),u=Math.abs(l);if(e.direct){const r=e.p1.x>e.p2.x?e.p2:e.p1,u=e.p1.x>e.p2.x?e.p1:e.p2,c=Kt(e.position,nn(r,u)),h=Qt(e.position,c);s=Math.atan2(u.y-r.y,u.x-r.x);let d=Math.atan2(u.y-r.y,u.x-r.x)-l;d<-Math.PI&&(d+=2*Math.PI),i=$t(c,h+(d>0&&d<Math.PI?1:-1)*t,e.position),o=Gn(Zt(r.x,u.x)).toString(),a=n(`${e.fontSize}px ${e.fontFamily}`,o),a&&(i=Vt(i,a.width/2,s-Math.PI))}else u>Math.PI/4&&u<3*Math.PI/4?(i={x:e.position.x,y:e.position.y-t},o=Gn(Zt(e.p1.x,e.p2.x)).toString(),a=n(`${e.fontSize}px ${e.fontFamily}`,o),a&&(i.x-=a.width/2)):(i={x:e.position.x-t,y:e.position.y},o=Gn(Zt(e.p1.y,e.p2.y)).toString(),a=n(`${e.fontSize}px ${e.fontFamily}`,o),a&&(i.y+=a.width/2),s=-Math.PI/2);return{text:o,textPosition:i,size:a,textRotation:s}}var _o=Object.defineProperty,bo=Object.defineProperties,xo=Object.getOwnPropertyDescriptors,Eo=Object.getOwnPropertySymbols,So=Object.prototype.hasOwnProperty,To=Object.prototype.propertyIsEnumerable,wo=(e,t,n)=>t in e?_o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;class Ao{constructor(e){this.flush=e}flushLast(){this.last&&this.last.line.length>0&&(this.flush(this.last),this.last=void 0)}push(e){this.last?this.last.strokeColor===e.strokeColor&&this.last.strokeWidth===e.strokeWidth&&Hi(this.last.dashArray,e.dashArray)?this.last.line.push(e.line):(this.flushLast(),this.push(e)):this.last=((e,t)=>bo(e,xo(t)))(((e,t)=>{for(var n in t||(t={}))So.call(t,n)&&wo(e,n,t[n]);if(Eo)for(var n of Eo(t))To.call(t,n)&&wo(e,n,t[n]);return e})({},e),{line:[e.line]})}}function Po(e,n){const r=t.useRef(e);r.current!==e&&(n(r.current)||(r.current=e))}function Oo(e){const n=t.useRef();return t.useLayoutEffect((()=>{n.current=e})),t.useCallback((e=>{var t;null==(t=n.current)||t.call(n,e)}),[])}var Ro=Object.defineProperty,Co=Object.defineProperties,Io=Object.getOwnPropertyDescriptors,No=Object.getOwnPropertySymbols,Mo=Object.prototype.hasOwnProperty,ko=Object.prototype.propertyIsEnumerable,Do=(e,t,n)=>t in e?Ro(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Lo=(e,t)=>{for(var n in t||(t={}))Mo.call(t,n)&&Do(e,n,t[n]);if(No)for(var n of No(t))ko.call(t,n)&&Do(e,n,t[n]);return e},Fo=(e,t)=>Co(e,Io(t)),Uo=Object.defineProperty,Bo=Object.defineProperties,Go=Object.getOwnPropertyDescriptors,jo=Object.getOwnPropertySymbols,$o=Object.prototype.hasOwnProperty,zo=Object.prototype.propertyIsEnumerable,Xo=(e,t,n)=>t in e?Uo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ho=n(5878);const Vo={};function Yo(e){return Vo[e]}function Wo(e){Vo[e.type]=e}const qo=new Ln,Ko=new Ln,Qo=new Ln,Zo=qo.get.bind(qo),Jo=Ko.get.bind(Ko),ea=Qo.get.bind(Qo),ta=new Fn;function na(e,t,n){return ta.get(e,t,(()=>Array.from(Un(e,t,n,ra))))}function ra(e){return Yo(e.type)}function ia(e){const t=45*Math.round(e/45);if(t!==e&&Math.abs(t-e)<5)return t}const oa={position:"absolute",bottom:"10px",left:"25%",transform:"translate(-50%, 0px)"};function aa(e,t){var n,r,i,o;const a=e[t[0]];if(1===t.length)return a;const s=null==(o=null==(i=null==(r=null==(n=Yo(a.type))?void 0:n.getGeometries)?void 0:r.call(n,a))?void 0:i.lines)?void 0:o[t[1]];return s?{type:"line",points:s}:void 0}var sa=Object.defineProperty,la=Object.defineProperties,ua=Object.getOwnPropertyDescriptors,ca=Object.getOwnPropertySymbols,ha=Object.prototype.hasOwnProperty,da=Object.prototype.propertyIsEnumerable,fa=(e,t,n)=>t in e?sa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const pa={type:"line",move(e,t){for(const n of e.points)n.x+=t.x,n.y+=t.y},rotate(e,t,n){e.points=e.points.map((e=>vn(e,t,-n)))},mirror(e,t){e.points=e.points.map((e=>cn(e,t)))},break(e,t){const{lines:n}=ya(e);return ma(n,t)},render:({content:e,color:t,target:n,strokeWidth:r})=>n.renderPolyline(e.points,{strokeColor:t,dashArray:e.dashArray,strokeWidth:r}),getOperatorRenderPosition:e=>e.points[0],getDefaultColor:e=>e.strokeColor,getEditPoints:e=>ea(e,(()=>({editPoints:va(e,ga)}))),getSnapPoints:e=>Jo(e,(()=>{const{points:t,lines:n}=ya(e);return[...t.map((e=>((e,t)=>la(e,ua({type:"endpoint"})))(((e,t)=>{for(var n in t||(t={}))ha.call(t,n)&&fa(e,n,t[n]);if(ca)for(var n of ca(t))da.call(t,n)&&fa(e,n,t[n]);return e})({},e)))),...n.map((([e,t])=>({x:(e.x+t.x)/2,y:(e.y+t.y)/2,type:"midpoint"})))]})),getGeometries:ya};function ya(e){return Zo(e,(()=>({lines:Array.from(Mn(e.points)),points:e.points,bounding:on(e.points),renderingLines:[e.points]})))}function ma(e,t){const n=[];let r=[e[0][0]];if(e.forEach((e=>{const i=[],o=[];t.forEach((t=>{(function(e,t,n){const{a:r,b:i,c:o}=nn(t,n);return zt(r*e.x+i*e.y+o)})(t,...e)&&qt(t,...e)?i.push(t):o.push(t)})),0===i.length?r.push(e[1]):(t=o,i.sort(((t,n)=>Qt(t,e[0])-Qt(n,e[0]))),i.forEach((e=>{Ht(r[r.length-1],e)||r.push(e),n.push({type:"polyline",points:r}),r=[e]})),Ht(r[r.length-1],e[1])||r.push(e[1]))})),n.push({type:"polyline",points:r}),n.length>1){const e=n[0].points[0],r=n[n.length-1].points;return Ht(e,r[r.length-1])&&t.every((t=>!Ht(e,t)))?(n[0].points.unshift(...r.slice(0,r.length-1)),n.slice(0,n.length-1)):n}for(const e of n)2===e.points.length&&e.type}function ga(e){return"line"===e.type}function va(e,t,n,r){const i=e.points,o=!n&&i.length>2&&Ht(i[0],i[i.length-1]),a=[];if(i.forEach(((e,t)=>{if(!n&&t===i.length-1&&o||a.push({pointIndexes:[t],x:e.x,y:e.y}),!r&&t!==i.length-1){const n=i[t+1];a.push({pointIndexes:[t,t+1],x:(e.x+n.x)/2,y:(e.y+n.y)/2})}if(n&&t===i.length-1){const t=i[0];a.push({pointIndexes:[i.length-1,0],x:(e.x+t.x)/2,y:(e.y+t.y)/2})}})),o)for(const e of a)e.pointIndexes.includes(0)?e.pointIndexes.push(i.length-1):e.pointIndexes.includes(i.length-1)&&e.pointIndexes.push(0);return a.map((e=>({x:e.x,y:e.y,cursor:"move",update(n,{cursor:r,start:i,scale:o}){if(!t(n))return;const a=r.x-i.x,s=r.y-i.y;for(const t of e.pointIndexes)n.points[t].x+=a,n.points[t].y+=s;return{assistentContents:[{type:"line",dashArray:[4/o],points:[i,r]}]}}})))}var _a=Object.defineProperty,ba=Object.defineProperties,xa=Object.getOwnPropertyDescriptors,Ea=Object.getOwnPropertySymbols,Sa=Object.prototype.hasOwnProperty,Ta=Object.prototype.propertyIsEnumerable,wa=(e,t,n)=>t in e?_a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Aa=(e,t)=>{for(var n in t||(t={}))Sa.call(t,n)&&wa(e,n,t[n]);if(Ea)for(var n of Ea(t))Ta.call(t,n)&&wa(e,n,t[n]);return e},Pa=(e,t)=>ba(e,xa(t));const Oa={type:"ellipse",move(e,t){e.cx+=t.x,e.cy+=t.y},rotate(e,t,n){var r;const i=vn({x:e.cx,y:e.cy},t,-n);e.cx=i.x,e.cy=i.y,e.angle=(null!=(r=e.angle)?r:0)+n},mirror(e,t,n){var r;const i=cn({x:e.cx,y:e.cy},t);e.cx=i.x,e.cy=i.y,e.angle=2*n-(null!=(r=e.angle)?r:0)},fill(e,t){e.fillColor=t},break(e,t){if(t.length<2)return;const n=t.map((t=>Rn(t,e)));return n.sort(((e,t)=>e-t)),n.map(((t,r)=>Pa(Aa({},e),{type:"ellipse arc",startAngle:t,endAngle:r===n.length-1?n[0]+360:n[r+1]})))},render({content:e,color:t,target:n,strokeWidth:r}){const i=void 0!==e.fillColor?"fillColor":"strokeColor";if(void 0!==e.fillColor&&(r=0),e.dashArray){const{points:o}=Ra(e);return n.renderPolygon(o,{[i]:t,dashArray:e.dashArray,strokeWidth:r})}return n.renderEllipse(e.cx,e.cy,e.rx,e.ry,{[i]:t,angle:e.angle,strokeWidth:r})},getOperatorRenderPosition:e=>({x:e.cx,y:e.cy}),getDefaultColor:e=>void 0!==e.fillColor?e.fillColor:e.strokeColor,getEditPoints:e=>ea(e,(()=>{var t;const n={x:e.cx,y:e.cy},r=-(null!=(t=e.angle)?t:0),i=vn({x:e.cx-e.rx,y:e.cy},n,r),o=vn({x:e.cx+e.rx,y:e.cy},n,r),a=vn({x:e.cx,y:e.cy-e.ry},n,r),s=vn({x:e.cx,y:e.cy+e.ry},n,r);return{editPoints:[{x:e.cx,y:e.cy,cursor:"move",update(e,{cursor:t,start:r,scale:i}){if(Ma(e))return e.cx+=t.x-r.x,e.cy+=t.y-r.y,{assistentContents:[{type:"line",dashArray:[4/i],points:[n,t]}]}}},{x:i.x,y:i.y,cursor:Rt(-r,"left"),update(e,{cursor:t,scale:r}){if(Ma(e))return e.rx=Qt(t,n),{assistentContents:[{type:"line",dashArray:[4/r],points:[n,t]}]}}},{x:o.x,y:o.y,cursor:Rt(-r,"right"),update(e,{cursor:t,scale:r}){if(Ma(e))return e.rx=Qt(t,n),{assistentContents:[{type:"line",dashArray:[4/r],points:[n,t]}]}}},{x:a.x,y:a.y,cursor:Rt(-r,"top"),update(e,{cursor:t,scale:r}){if(Ma(e))return e.ry=Qt(t,n),{assistentContents:[{type:"line",dashArray:[4/r],points:[n,t]}]}}},{x:s.x,y:s.y,cursor:Rt(-r,"bottom"),update(e,{cursor:t,scale:r}){if(Ma(e))return e.ry=Qt(t,n),{assistentContents:[{type:"line",dashArray:[4/r],points:[n,t]}]}}}],angleSnapStartPoint:{x:e.cx,y:e.cy}}})),getSnapPoints:e=>Jo(e,(()=>[{x:e.cx,y:e.cy,type:"center"},Pa(Aa({},Ca({x:e.cx-e.rx,y:e.cy},e)),{type:"endpoint"}),Pa(Aa({},Ca({x:e.cx+e.rx,y:e.cy},e)),{type:"endpoint"}),Pa(Aa({},Ca({x:e.cx,y:e.cy-e.ry},e)),{type:"endpoint"}),Pa(Aa({},Ca({x:e.cx,y:e.cy+e.ry},e)),{type:"endpoint"})])),getGeometries:Ra};function Ra(e){return Zo(e,(()=>{const t=[];for(let n=0;n<Ia;n++){const r=Na*n*Math.PI/180,i=e.cx+e.rx*Math.cos(r),o=e.cy+e.ry*Math.sin(r);t.push(Ca({x:i,y:o},e))}const n=Array.from(kn(t));return{lines:n,points:t,bounding:on(t),renderingLines:[t],regions:void 0!==e.fillColor?[{lines:n,points:t}]:void 0}}))}function Ca(e,t){var n;return vn(e,{x:t.cx,y:t.cy},-(null!=(n=t.angle)?n:0))}const Ia=72,Na=360/Ia;function Ma(e){return"ellipse"===e.type}var ka=Object.defineProperty,Da=Object.defineProperties,La=Object.getOwnPropertyDescriptors,Fa=Object.getOwnPropertySymbols,Ua=Object.prototype.hasOwnProperty,Ba=Object.prototype.propertyIsEnumerable,Ga=(e,t,n)=>t in e?ka(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ja=(e,t)=>{for(var n in t||(t={}))Ua.call(t,n)&&Ga(e,n,t[n]);if(Fa)for(var n of Fa(t))Ba.call(t,n)&&Ga(e,n,t[n]);return e},$a=(e,t)=>Da(e,La(t));const za={type:"arc",move(e,t){e.x+=t.x,e.y+=t.y},rotate(e,t,n){const r=vn(e,t,-n);e.x=r.x,e.y=r.y,e.startAngle+=n,e.endAngle+=n},mirror(e,t,n){const r=cn(e,t);e.x=r.x,e.y=r.y;const i=2*n-e.endAngle,o=2*n-e.startAngle;e.startAngle=i,e.endAngle=o},break(e,t){if(0===t.length)return;const n=t.map((t=>Cn(180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI,e)));n.sort(((e,t)=>e-t));const r=[];return On(n[0],e.startAngle)||r.push($a(ja({},e),{type:"arc",startAngle:e.startAngle,endAngle:n[0]})),n.forEach(((t,i)=>{i===n.length-1?On(t,e.endAngle)||r.push($a(ja({},e),{type:"arc",startAngle:t,endAngle:e.endAngle})):r.push($a(ja({},e),{type:"arc",startAngle:t,endAngle:n[i+1]}))})),r.length>1?r:void 0},render({content:e,color:t,target:n,strokeWidth:r}){if(e.dashArray){const{points:i}=Xa(e);return n.renderPolyline(i,{strokeColor:t,dashArray:e.dashArray,strokeWidth:r})}return n.renderArc(e.x,e.y,e.r,e.startAngle,e.endAngle,{strokeColor:t,strokeWidth:r})},renderIfSelected({content:e,color:t,target:n,strokeWidth:r}){const{points:i}=Xa($a(ja({},e),{startAngle:e.endAngle,endAngle:e.startAngle+360}));return n.renderPolyline(i,{strokeColor:t,dashArray:[4],strokeWidth:r})},getOperatorRenderPosition(e){const{points:t}=Xa(e);return t[0]},getDefaultColor:e=>e.strokeColor,getEditPoints:e=>ea(e,(()=>{const t=e.x,n=e.y,r=e.startAngle/180*Math.PI,i=e.endAngle/180*Math.PI,o=(r+i)/2;return{editPoints:[{x:t,y:n,cursor:"move",update(t,{cursor:n,start:r,scale:i}){if(Ha(t))return t.x+=n.x-r.x,t.y+=n.y-r.y,{assistentContents:[{type:"line",dashArray:[4/i],points:[e,n]}]}}},{x:t+e.r*Math.cos(r),y:n+e.r*Math.sin(r),cursor:Rt(e.startAngle,"top"),update(t,{cursor:n,scale:r}){if(Ha(t))return t.startAngle=180*Math.atan2(n.y-t.y,n.x-t.x)/Math.PI,In(t),{assistentContents:[{type:"line",dashArray:[4/r],points:[e,n]}]}}},{x:t+e.r*Math.cos(i),y:n+e.r*Math.sin(i),cursor:Rt(e.endAngle,"top"),update(t,{cursor:n,scale:r}){if(Ha(t))return t.endAngle=180*Math.atan2(n.y-t.y,n.x-t.x)/Math.PI,In(t),{assistentContents:[{type:"line",dashArray:[4/r],points:[e,n]}]}}},{x:t+e.r*Math.cos(o),y:n+e.r*Math.sin(o),cursor:Rt((e.startAngle+e.endAngle)/2,"right"),update(t,{cursor:n,scale:r}){if(Ha(t))return t.r=Qt(n,t),{assistentContents:[{type:"line",dashArray:[4/r],points:[e,n]}]}}}],angleSnapStartPoint:e}})),getSnapPoints:e=>Jo(e,(()=>{const t=e.startAngle/180*Math.PI,n=e.endAngle/180*Math.PI,r=(t+n)/2;return[{x:e.x,y:e.y,type:"center"},{x:e.x+e.r*Math.cos(t),y:e.y+e.r*Math.sin(t),type:"endpoint"},{x:e.x+e.r*Math.cos(n),y:e.y+e.r*Math.sin(n),type:"endpoint"},{x:e.x+e.r*Math.cos(r),y:e.y+e.r*Math.sin(r),type:"midpoint"}]})),getGeometries:Xa};function Xa(e){return Zo(e,(()=>{const t=[],n=e.startAngle>e.endAngle?e.endAngle+360:e.endAngle;let r=e.startAngle;for(;r<=n;r+=Na){const n=r*Math.PI/180;t.push({x:e.x+e.r*Math.cos(n),y:e.y+e.r*Math.sin(n)})}if(r!==n){const r=n*Math.PI/180;t.push({x:e.x+e.r*Math.cos(r),y:e.y+e.r*Math.sin(r)})}return{lines:Array.from(Mn(t)),points:t,bounding:on(t),renderingLines:[t]}}))}function Ha(e){return"arc"===e.type}var Va=Object.defineProperty,Ya=Object.defineProperties,Wa=Object.getOwnPropertyDescriptors,qa=Object.getOwnPropertySymbols,Ka=Object.prototype.hasOwnProperty,Qa=Object.prototype.propertyIsEnumerable,Za=(e,t,n)=>t in e?Va(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ja=(e,t)=>{for(var n in t||(t={}))Ka.call(t,n)&&Za(e,n,t[n]);if(qa)for(var n of qa(t))Qa.call(t,n)&&Za(e,n,t[n]);return e},es=(e,t)=>Ya(e,Wa(t));const ts={type:"circle",move(e,t){e.x+=t.x,e.y+=t.y},rotate(e,t,n){const r=vn(e,t,-n);e.x=r.x,e.y=r.y},mirror(e,t){const n=cn(e,t);e.x=n.x,e.y=n.y},fill(e,t){e.fillColor=t},break(e,t){if(t.length<2)return;const n=t.map((t=>180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI));return n.sort(((e,t)=>e-t)),n.map(((t,r)=>es(Ja({},e),{type:"arc",startAngle:t,endAngle:r===n.length-1?n[0]+360:n[r+1]})))},render({content:e,color:t,target:n,strokeWidth:r}){const i=void 0!==e.fillColor?"fillColor":"strokeColor";if(void 0!==e.fillColor&&(r=0),e.dashArray){const{points:o}=ns(e);return n.renderPolyline(o,{[i]:t,dashArray:e.dashArray,strokeWidth:r})}return n.renderCircle(e.x,e.y,e.r,{[i]:t,strokeWidth:r})},getOperatorRenderPosition:e=>e,getDefaultColor:e=>void 0!==e.fillColor?e.fillColor:e.strokeColor,getEditPoints:e=>ea(e,(()=>{const t=e.x,n=e.y,r=(t,{cursor:n,scale:r})=>{if(rs(t))return t.r=Qt(n,t),{assistentContents:[{type:"line",dashArray:[4/r],points:[e,n]}]}};return{editPoints:[{x:t,y:n,cursor:"move",update(t,{cursor:n,start:r,scale:i}){if(rs(t))return t.x+=n.x-r.x,t.y+=n.y-r.y,{assistentContents:[{type:"line",dashArray:[4/i],points:[e,n]}]}}},{x:t-e.r,y:n,cursor:"ew-resize",update:r},{x:t,y:n-e.r,cursor:"ns-resize",update:r},{x:t+e.r,y:n,cursor:"ew-resize",update:r},{x:t,y:n+e.r,cursor:"ns-resize",update:r}],angleSnapStartPoint:e}})),getSnapPoints:e=>Jo(e,(()=>[{x:e.x,y:e.y,type:"center"},{x:e.x-e.r,y:e.y,type:"endpoint"},{x:e.x+e.r,y:e.y,type:"endpoint"},{x:e.x,y:e.y-e.r,type:"endpoint"},{x:e.x,y:e.y+e.r,type:"endpoint"}])),getCircle:e=>({circle:e,fill:void 0!==e.fillColor,bounding:{start:{x:e.x-e.r,y:e.y-e.r},end:{x:e.x+e.r,y:e.y+e.r}}}),getGeometries:ns};function ns(e){return Zo(e,(()=>Xa(es(Ja({},e),{startAngle:0,endAngle:360}))))}function rs(e){return"circle"===e.type}var is=Object.defineProperty,os=Object.defineProperties,as=Object.getOwnPropertyDescriptors,ss=Object.getOwnPropertySymbols,ls=Object.prototype.hasOwnProperty,us=Object.prototype.propertyIsEnumerable,cs=(e,t,n)=>t in e?is(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const hs=((e,t)=>os(e,as(t)))(((e,t)=>{for(var n in t||(t={}))ls.call(t,n)&&cs(e,n,t[n]);if(ss)for(var n of ss(t))us.call(t,n)&&cs(e,n,t[n]);return e})({},pa),{type:"polyline",explode(e){const{lines:t}=ya(e);return t.map((e=>({type:"line",points:e})))},render:({content:e,color:t,target:n,strokeWidth:r})=>n.renderPolyline(e.points,{strokeColor:t,dashArray:e.dashArray,strokeWidth:r}),getEditPoints:e=>ea(e,(()=>({editPoints:va(e,ds)}))),canSelectPart:!0});function ds(e){return"polyline"===e.type}var fs=Object.defineProperty,ps=Object.defineProperties,ys=Object.getOwnPropertyDescriptors,ms=Object.getOwnPropertySymbols,gs=Object.prototype.hasOwnProperty,vs=Object.prototype.propertyIsEnumerable,_s=(e,t,n)=>t in e?fs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bs=(e,t)=>{for(var n in t||(t={}))gs.call(t,n)&&_s(e,n,t[n]);if(ms)for(var n of ms(t))vs.call(t,n)&&_s(e,n,t[n]);return e},xs=(e,t)=>ps(e,ys(t));const Es={type:"rect",move(e,t){e.x+=t.x,e.y+=t.y},rotate(e,t,n){const r=vn(e,t,-n);e.x=r.x,e.y=r.y,e.angle+=n},explode(e){const{lines:t}=Ss(e);return t.map((e=>({type:"line",points:e})))},break(e,t){const{lines:n}=Ss(e);return ma(n,t)},fill(e,t){e.fillColor=t},mirror(e,t,n){const r=cn(e,t);e.x=r.x,e.y=r.y,e.angle=2*n-e.angle},render({content:e,color:t,target:n,strokeWidth:r}){const i=void 0!==e.fillColor?"fillColor":"strokeColor";if(void 0!==e.fillColor&&(r=0),e.dashArray){const{points:o}=Ss(e);return n.renderPolygon(o,{[i]:t,dashArray:e.dashArray,strokeWidth:r})}return n.renderRect(e.x-e.width/2,e.y-e.height/2,e.width,e.height,{[i]:t,angle:e.angle,strokeWidth:r})},getOperatorRenderPosition(e){const{points:t}=Ss(e);return t[0]},getDefaultColor:e=>void 0!==e.fillColor?e.fillColor:e.strokeColor,getEditPoints:e=>ea(e,(()=>{const{points:t,lines:n}=Ss(e);return{editPoints:[{x:e.x,y:e.y,direction:"center"},xs(bs({},t[0]),{direction:"left-top"}),xs(bs({},t[1]),{direction:"right-top"}),xs(bs({},t[2]),{direction:"right-bottom"}),xs(bs({},t[3]),{direction:"left-bottom"}),xs(bs({},Jt(...n[0])),{direction:"top"}),xs(bs({},Jt(...n[1])),{direction:"right"}),xs(bs({},Jt(...n[2])),{direction:"bottom"}),xs(bs({},Jt(...n[3])),{direction:"left"})].map((t=>({x:t.x,y:t.y,cursor:Rt(e.angle,t.direction),update(n,{cursor:r,start:i,scale:o}){if(!function(e){return"rect"===e.type}(n))return;const a=gt(i,r,t.direction,-e.angle*Math.PI/180);return a?(n.x+=a.x+a.width/2,n.y+=a.y+a.height/2,n.width+=a.width,n.height+=a.height,{assistentContents:[{type:"line",dashArray:[4/o],points:[i,r]}]}):void 0}})))}})),getSnapPoints:e=>Jo(e,(()=>{const{points:t,lines:n}=Ss(e);return[{x:e.x,y:e.y,type:"center"},...t.map((e=>xs(bs({},e),{type:"endpoint"}))),...n.map((([e,t])=>({x:(e.x+t.x)/2,y:(e.y+t.y)/2,type:"midpoint"})))]})),getGeometries:Ss,canSelectPart:!0};function Ss(e){return Zo(e,(()=>{const t=[{x:e.x-e.width/2,y:e.y-e.height/2},{x:e.x+e.width/2,y:e.y-e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x-e.width/2,y:e.y+e.height/2}].map((t=>vn(t,e,-e.angle))),n=Array.from(kn(t));return{lines:n,points:t,bounding:on(t),renderingLines:[Dn(t)],regions:void 0!==e.fillColor?[{lines:n,points:t}]:void 0}}))}const Ts={};function ws(e){return Ts[e]}function As(e,n,r,i,o,a,s){const l=[],u=[],c=[],h=[],d=[],f={},p=[];return Object.values(Ts).forEach((y=>{var m;if(y.useCommand){const p=o&&(o===y.name||(null==(m=y.type)?void 0:m.some((e=>e.name===o))))?o:void 0,{onStart:g,mask:v,updateContent:_,assistentContents:b,input:x,subcommand:E,onMove:S}=y.useCommand({onEnd:e,transform:n,getAngleSnap:r?ia:void 0,type:p,selected:a,scale:s});if(v&&u.push(t.cloneElement(v,{key:y.name})),p){if(f[y.name]=g,y.type)for(const e of y.type)f[e.name]=g;_&&h.push(_)}if(S&&c.push(S),b&&d.push(...b),x){const e=[...x.props.children];if(E){const n={key:y.name+"sub command"};i?e.push(t.cloneElement(E,n)):(n.style=oa,l.push(t.cloneElement(E,n)))}const n={key:y.name};i&&(n.style=oa),l.push(t.cloneElement(x,n,...e))}else if(E){const e={key:y.name+"sub command"};e.style=oa,l.push(t.cloneElement(E,e))}}if(y.type)for(const e of y.type)e.hotkey&&p.push({key:e.hotkey,command:e.name});else y.hotkey&&p.push({key:y.hotkey,command:y.name})})),{commandMasks:u,commandInputs:l,updateSelectedContents(e){const t=[],n=[];for(const{content:r,path:i}of a)for(const o of h){const a=o(r,e);a.assistentContents&&t.push(...a.assistentContents),a.patches&&n.push([to(a.patches[0],i),to(a.patches[1],i)]),a.newContents&&n.push(...a.newContents.map(((t,n)=>[[{op:"add",path:[e.length+n],value:t}],[{op:"remove",path:[e.length+n]}]])))}return{assistentContents:t,patches:n}},commandAssistentContents:d,startCommand(e,t){e&&f[e]&&f[e](t)},onCommandMove(e,t){for(const n of c)n(e,t)},getCommandByHotkey(e){var t;return e=e.toUpperCase(),null==(t=p.find((t=>t.key===e)))?void 0:t.command}}}function Ps(e){Ts[e.name]=e}const Os={name:"move",useCommand({onEnd:e,transform:t,getAngleSnap:n,type:r,scale:i}){const{offset:o,onStart:a,mask:s,startPosition:l}=ke(e,{transform:t,ignoreLeavingEvent:!0,getAngleSnap:n});let u="";r&&(u=l?"specify end point":"specify start point");const{input:c,setInputPosition:h}=lr(u);return{onStart:a,mask:s,input:c,onMove(e,t){h(t)},updateContent(e){if(l&&(0!==o.x||0!==o.y)){const[,...t]=Te(e,(t=>{var n,r;null==(r=null==(n=Yo(e.type))?void 0:n.move)||r.call(n,t,o)}));return{patches:t}}return{}},assistentContents:!l||0===o.x&&0===o.y?void 0:[{type:"line",dashArray:[4/i],points:[l,{x:l.x+o.x,y:l.y+o.y}]}]}},contentSelectable(e){var t;return void 0!==(null==(t=Yo(e.type))?void 0:t.move)},hotkey:"M"},Rs={name:"rotate",useCommand({onEnd:e,transform:t,getAngleSnap:n,type:r,scale:i}){const{offset:o,onStart:a,mask:s,center:l}=et(e,{transform:t,transformOffset:e=>e-90,getAngleSnap:n,ignoreLeavingEvent:!0});let u="";r&&(u=l?"specify angle point":"specify center point");const{input:c,setInputPosition:h}=lr(u);let d;if(l&&void 0!==(null==o?void 0:o.angle)){const e=Qt(l,o);d=[{type:"line",dashArray:[4/i],points:[l,o]},{type:"arc",x:l.x,y:l.y,r:e,dashArray:[4/i],startAngle:o.angle>180||o.angle<0?o.angle:0,endAngle:o.angle>180||o.angle<0?0:o.angle},{type:"line",dashArray:[4/i],points:[l,{x:l.x+e,y:l.y}]}]}return{onStart:a,mask:s,input:c,onMove(e,t){h(t)},updateContent(e,t){if(l&&void 0!==(null==o?void 0:o.angle)){const n=o.angle,[,...r]=Te(e,(r=>{var i,o;null==(o=null==(i=Yo(e.type))?void 0:i.rotate)||o.call(i,r,l,n,t)}));return{patches:r}}return{}},assistentContents:d}},contentSelectable(e){var t;return void 0!==(null==(t=Yo(e.type))?void 0:t.rotate)},hotkey:"RO"},Cs={name:"mirror",useCommand({onEnd:e,transform:n,getAngleSnap:r,type:i,scale:o}){const[a,s]=t.useState(!1),{offset:l,onStart:u,mask:c,startPosition:h}=ke(e,{transform:n,ignoreLeavingEvent:!0,getAngleSnap:r});let d="";i&&(d=h?"specify second point":"specify first point");const{input:f,setInputPosition:p,clearText:y,setCursorPosition:m}=lr(d,i?(e,t)=>{"Enter"===e.key&&("y"!==t.toLowerCase()&&"n"!==t.toLowerCase()||(s(!a),y()))}:void 0);return{onStart:u,mask:i?c:void 0,input:f,subcommand:i?t.createElement("button",{onClick:e=>{s(!a),e.stopPropagation()}},a?"create new(N)":"change original(Y)"):void 0,updateContent(e,t){if(h&&l&&(0!==l.x||0!==l.y)){const n={x:h.x+l.x,y:h.y+l.y},r=nn(h,n),i=180*Math.atan2(n.y-h.y,n.x-h.x)/Math.PI;if(a){const[,...n]=Te(e,(n=>{var o,a;null==(a=null==(o=Yo(e.type))?void 0:o.mirror)||a.call(o,n,r,i,t)}));return{patches:n}}return{newContents:[Ae(e,(e=>{var n,o;null==(o=null==(n=Yo(e.type))?void 0:n.mirror)||o.call(n,e,r,i,t)}))]}}return{}},onMove(e,t){m(e),p(t||e)},assistentContents:h&&l&&(0!==l.x||0!==l.y)?[{type:"line",dashArray:[4/o],points:[h,{x:h.x+l.x,y:h.y+l.y}]}]:void 0}},contentSelectable(e){var t;return void 0!==(null==(t=Yo(e.type))?void 0:t.mirror)},hotkey:"MI"},Is={name:"clone",useCommand({onEnd:e,transform:t,getAngleSnap:n,type:r,scale:i}){const{offset:o,onStart:a,mask:s,startPosition:l}=ke((()=>e({repeatedly:!0})),{repeatedly:!0,transform:t,ignoreLeavingEvent:!0,getAngleSnap:n});let u="";r&&(u=l?"specify end point":"specify start point");const{input:c,setInputPosition:h}=lr(u);return{onStart:a,mask:s,input:c,onMove(e,t){h(t)},updateContent:e=>!l||0===o.x&&0===o.y?{}:{newContents:[Ae(e,(e=>{var t,n;null==(n=null==(t=Yo(e.type))?void 0:t.move)||n.call(t,e,o)}))]},assistentContents:!l||0===o.x&&0===o.y?void 0:[{type:"line",dashArray:[4/i],points:[l,{x:l.x+o.x,y:l.y+o.y}]}]}},contentSelectable(e){var t;return void 0!==(null==(t=Yo(e.type))?void 0:t.move)},hotkey:"CO"},Ns={name:"explode",execute(e,t){const n=[],r=[];e.forEach(((i,o)=>{var a,s,l,u;if(Xi([o],t)&&(null==(s=null==(a=this.contentSelectable)?void 0:a.call(this,i,e))||s)){const t=null==(u=null==(l=Yo(i.type))?void 0:l.explode)?void 0:u.call(l,i,e);t&&(r.push(...t),n.push(o))}}));for(let t=e.length;t>=0;t--)n.includes(t)&&e.splice(t,1);e.push(...r)},contentSelectable(e,t){var n,r;const i=Yo(e.type);return void 0!==(null==i?void 0:i.explode)&&(null==(r=null==(n=i.deletable)?void 0:n.call(i,e,t))||r)},hotkey:"X"},Ms={name:"delete",execute(e,t){const n=[];e.forEach(((r,i)=>{var o,a;Xi([i],t)&&(null==(a=null==(o=this.contentSelectable)?void 0:o.call(this,r,e))||a)&&n.push(i)}));for(let t=e.length;t>=0;t--)n.includes(t)&&e.splice(t,1)},contentSelectable(e,t){var n,r,i;return null==(i=null==(r=null==(n=Yo(e.type))?void 0:n.deletable)?void 0:r.call(n,e,t))||i},hotkey:"E"},ks=t.memo((function(e){var n,r,i;const o=Ds[e.type||Fs()[0]],a=function(e,n,r=e){const i=t.useRef(r);return n(e)&&(i.current=e),i.current}(1/e.scale,(()=>!e.simplified),1);if(Po(e.type,(()=>Gs.clear())),Po(e.backgroundColor,(()=>Gs.clear())),!o)return null;const s=Date.now(),l=null!=(n=e.previewPatches)?n:[],u=l.length>0?we(e.contents,l):e.contents,c=new Set(l.map((e=>e.path[0])));Us.add(...Array.from(c).map((e=>u[e])));const h=jr(e.backgroundColor),d=+`0x${h.substring(1,3)}`,f=+`0x${h.substring(3,5)}`,p=+`0x${h.substring(5)}`,y=(Math.max(d,p,f)+Math.min(d,p,f))/2,m=e=>y<128?0===e?16777215:e:16777215===e?0:e;let g=[];const v=new Ao((e=>g.push(o.renderPath(e.line,{strokeColor:e.strokeColor,dashArray:e.dashArray,strokeWidth:e.strokeWidth})))),_=(t,n,r)=>{const i=Yo(t.type);if(i)if(n=m(n),e.simplified&&i.getGeometries){const{renderingLines:a}=i.getGeometries(t,e.contents);if(a)for(const e of a)v.push({line:e,strokeColor:n,strokeWidth:r});else{const a=i.render;a&&(v.flushLast(),g.push(a({content:t,color:n,target:o,strokeWidth:r,contents:e.contents})))}}else{const a=i.render;a&&(v.flushLast(),g.push(a({content:t,color:n,target:o,strokeWidth:r,contents:e.contents})))}};if(0===l.length&&e.simplified?g=Gs.get(e.contents,(()=>(e.contents.forEach((e=>{var t,n;const r=Yo(e.type);r&&_(e,null!=(n=null==(t=r.getDefaultColor)?void 0:t.call(r,e))?n:0,1)})),g))):u.forEach((e=>{var t,n;if(!Us.has(e))return;const r=Yo(e.type);r&&_(e,null!=(n=null==(t=r.getDefaultColor)?void 0:t.call(r,e))?n:0,1)})),!e.simplified){e.othersSelectedContents.length>0&&e.contents.forEach(((t,n)=>{const r=Yo(t.type);if(!r)return;const i=e.othersSelectedContents.filter((e=>e.selection.includes(n))).map((e=>e.operator));if(Xi([n],e.selected)&&i.unshift("me"),r.getOperatorRenderPosition&&i.length>0){const n=r.getOperatorRenderPosition(t,e.contents);v.flushLast(),g.push(o.renderText(n.x,n.y,i.join(","),16711680,16,"monospace"))}}));for(const t of e.hovering){const n=aa(e.contents,t);n&&_(n,65280,2)}for(const t of e.selected){const n=aa(e.contents,t);if(n){_(n,16711680,2);const e=null==(r=Yo(n.type))?void 0:r.renderIfSelected;e&&(v.flushLast(),g.push(e({content:n,color:m(16711680),target:o,strokeWidth:1})))}}null==(i=e.assistentContents)||i.forEach((e=>{var t,n;const r=Yo(e.type);r&&_(e,null!=(n=null==(t=r.getDefaultColor)?void 0:t.call(r,e))?n:0,1)}))}return v.flushLast(),console.info(Date.now()-s,g.length),o.renderResult(g,e.width,e.height,{attributes:{style:{position:"absolute",boxSizing:"border-box"},onClick:e.onClick,onMouseDown:e.onMouseDown,onContextMenu:e.onContextMenu},transform:{x:e.x,y:e.y,scale:e.scale},backgroundColor:e.backgroundColor,debug:!0,strokeWidthScale:a})})),Ds={};function Ls(e){Ds[e.type]=e}function Fs(){return Object.keys(Ds)}const Us=new class{constructor(){this.cache=new WeakSet,this.count=0}clear(){this.cache=new WeakSet,this.count=0}add(...e){for(const t of e)this.cache.add(t);this.count+=e.length}has(e){return this.cache.has(e)}delete(e){return this.count--,this.cache.delete(e)}get size(){return this.count}},Bs=e=>Us.has(e),Gs=new Ln;var js=n(6170),$s=Object.defineProperty,zs=Object.getOwnPropertySymbols,Xs=Object.prototype.hasOwnProperty,Hs=Object.prototype.propertyIsEnumerable,Vs=(e,t,n)=>t in e?$s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ys=(e,t)=>{for(var n in t||(t={}))Xs.call(t,n)&&Vs(e,n,t[n]);if(zs)for(var n of zs(t))Hs.call(t,n)&&Vs(e,n,t[n]);return e};const Ws=js.Container,qs={type:"@inlet/react-pixi",renderResult:(e,n,r,i)=>t.createElement(Ks,{width:n,height:r,options:i},e.map(((e,t)=>{var n;return e(t,null!=(n=null==i?void 0:i.strokeWidthScale)?n:1)}))),renderEmpty:()=>()=>t.createElement(t.Fragment,null),renderGroup(e,n){var r,i,o,a,s,l,u,c;const h=null!=(i=null==(r=null==n?void 0:n.base)?void 0:r.x)?i:0,d=null!=(a=null==(o=null==n?void 0:n.base)?void 0:o.y)?a:0,f=null!=(l=null==(s=null==n?void 0:n.translate)?void 0:s.x)?l:0,p=null!=(c=null==(u=null==n?void 0:n.translate)?void 0:u.y)?c:0,y={};return(null==n?void 0:n.angle)&&(y.angle=n.angle),(null==n?void 0:n.rotation)&&(y.rotation=n.rotation),(n,r)=>t.createElement(Ws,Ys({key:n,position:[h+f,d+p],pivot:[h,d]},y),e.map(((e,t)=>e(t,r))))},renderRect:(e,n,r,i,o)=>(a,s)=>t.createElement(Qs,{key:a,x:e,y:n,width:r,height:i,strokeColor:null==o?void 0:o.strokeColor,angle:null==o?void 0:o.angle,rotation:null==o?void 0:o.rotation,strokeWidth:null==o?void 0:o.strokeWidth,fillColor:null==o?void 0:o.fillColor,strokeWidthScale:s}),renderPolyline(e,n){const r=null!=n?n:{},{partsStyles:i}=r,o=((e,t)=>{var n={};for(var r in e)Xs.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&zs)for(var r of zs(e))t.indexOf(r)<0&&Hs.call(e,r)&&(n[r]=e[r]);return n})(r,["partsStyles"]);return i&&i.length>0?Rr(this,i,e,o):(r,i)=>t.createElement(Zs,{key:r,points:e,strokeColor:null==n?void 0:n.strokeColor,dashArray:null==n?void 0:n.dashArray,strokeWidth:null==n?void 0:n.strokeWidth,skippedLines:null==n?void 0:n.skippedLines,fillColor:null==n?void 0:n.fillColor,strokeWidthScale:i})},renderPolygon(e,t){return this.renderPolyline(Dn(e),t)},renderCircle:(e,n,r,i)=>(o,a)=>t.createElement(Js,{key:o,cx:e,cy:n,r,strokeColor:null==i?void 0:i.strokeColor,strokeWidth:null==i?void 0:i.strokeWidth,fillColor:null==i?void 0:i.fillColor,strokeWidthScale:a}),renderEllipse:(e,n,r,i,o)=>(a,s)=>t.createElement(el,{key:a,cx:e,cy:n,rx:r,ry:i,strokeColor:null==o?void 0:o.strokeColor,angle:null==o?void 0:o.angle,rotation:null==o?void 0:o.rotation,strokeWidth:null==o?void 0:o.strokeWidth,fillColor:null==o?void 0:o.fillColor,strokeWidthScale:s}),renderArc:(e,n,r,i,o,a)=>(s,l)=>t.createElement(tl,{key:s,cx:e,cy:n,r,startAngle:i,endAngle:o,strokeColor:null==a?void 0:a.strokeColor,strokeWidth:null==a?void 0:a.strokeWidth,strokeWidthScale:l}),renderText:(e,n,r,i,o,a)=>s=>t.createElement(js.Text,{key:s,x:e,y:n-o,text:r,style:{fill:jr(i),fontSize:o,fontFamily:a}}),renderPath:(e,n)=>(r,i)=>t.createElement(nl,{key:r,lines:e,strokeColor:null==n?void 0:n.strokeColor,dashArray:null==n?void 0:n.dashArray,strokeWidth:null==n?void 0:n.strokeWidth,strokeWidthScale:i})};function Ks(e){var n,r,i,o,a,s,l;const u=e.children.map(((e,n)=>e.key?e:t.cloneElement(e,{key:n}))),{options:c,width:h,height:d}=e,f=null!=(r=null==(n=null==c?void 0:c.transform)?void 0:n.x)?r:0,p=null!=(o=null==(i=null==c?void 0:c.transform)?void 0:i.y)?o:0,y=null!=(s=null==(a=null==c?void 0:c.transform)?void 0:a.scale)?s:1,m=null!=(l=null==c?void 0:c.backgroundColor)?l:16777215,g=t.useRef(null);return t.useEffect((()=>{g.current&&(g.current.app.renderer.backgroundColor=m)}),[m]),t.createElement(js.Stage,Ys({options:{backgroundColor:m,width:h,height:d,antialias:!0},ref:g,width:h,height:d},null==c?void 0:c.attributes),t.createElement(Ws,{position:[h/2+f,d/2+p],pivot:[h/2,d/2],scale:y},u))}function Qs(e){const n=t.useCallback((t=>{var n;t.clear(),t.lineStyle((null!=(n=e.strokeWidth)?n:1)*e.strokeWidthScale,e.strokeColor),void 0!==e.fillColor&&t.beginFill(e.fillColor),void 0!==e.angle&&(t.angle=e.angle),void 0!==e.rotation&&(t.rotation=e.rotation),t.position.x=e.x+e.width/2,t.position.y=e.y+e.height/2,t.drawRect(-e.width/2,-e.height/2,e.width,e.height)}),[e.x,e.y,e.width,e.height,e.strokeColor,e.angle,e.rotation,e.strokeWidth,e.fillColor,e.strokeWidthScale]);return t.createElement(js.Graphics,{draw:n})}function Zs(e){const n=t.useCallback((t=>{var n;t.clear(),t.lineStyle((null!=(n=e.strokeWidth)?n:1)*e.strokeWidthScale,e.strokeColor),void 0!==e.fillColor&&t.beginFill(e.fillColor),e.dashArray?xn(t,e.points,e.dashArray,e.skippedLines):e.points.forEach(((n,r)=>{var i;0===r||(null==(i=e.skippedLines)?void 0:i.includes(r-1))?t.moveTo(n.x,n.y):t.lineTo(n.x,n.y)}))}),[e.points,e.strokeColor,e.dashArray,e.strokeWidth,e.skippedLines,e.fillColor,e.strokeWidthScale]);return t.createElement(js.Graphics,{draw:n})}function Js(e){const n=t.useCallback((t=>{var n;t.clear(),t.lineStyle((null!=(n=e.strokeWidth)?n:1)*e.strokeWidthScale,e.strokeColor),void 0!==e.fillColor&&t.beginFill(e.fillColor),t.drawCircle(e.cx,e.cy,e.r)}),[e.cx,e.cy,e.r,e.strokeColor,e.strokeWidth,e.fillColor,e.strokeWidthScale]);return t.createElement(js.Graphics,{draw:n})}function el(e){const n=t.useCallback((t=>{var n;t.clear(),t.lineStyle((null!=(n=e.strokeWidth)?n:1)*e.strokeWidthScale,e.strokeColor),void 0!==e.fillColor&&t.beginFill(e.fillColor),void 0!==e.angle&&(t.angle=e.angle),void 0!==e.rotation&&(t.rotation=e.rotation),t.position.x=e.cx,t.position.y=e.cy,t.drawEllipse(0,0,e.rx,e.ry)}),[e.cx,e.cy,e.rx,e.ry,e.angle,e.rotation,e.strokeColor,e.strokeWidth,e.fillColor,e.strokeWidthScale]);return t.createElement(js.Graphics,{draw:n})}function tl(e){const n=t.useCallback((t=>{var n;t.clear(),t.lineStyle((null!=(n=e.strokeWidth)?n:1)*e.strokeWidthScale,e.strokeColor),t.arc(e.cx,e.cy,e.r,e.startAngle*Math.PI/180,e.endAngle*Math.PI/180)}),[e.cx,e.cy,e.r,e.startAngle,e.endAngle,e.strokeColor,e.strokeWidth,e.strokeWidthScale]);return t.createElement(js.Graphics,{draw:n})}function nl(e){const n=t.useCallback((t=>{var n;t.clear(),t.lineStyle((null!=(n=e.strokeWidth)?n:1)*e.strokeWidthScale,e.strokeColor);for(const n of e.lines)e.dashArray?xn(t,n,e.dashArray):n.forEach(((e,n)=>{0===n?t.moveTo(e.x,e.y):t.lineTo(e.x,e.y)}))}),[e.lines,e.dashArray,e.strokeWidth,e.strokeWidthScale,e.strokeColor]);return t.createElement(js.Graphics,{draw:n})}var rl=Object.defineProperty,il=Object.defineProperties,ol=Object.getOwnPropertyDescriptors,al=Object.getOwnPropertySymbols,sl=Object.prototype.hasOwnProperty,ll=Object.prototype.propertyIsEnumerable,ul=(e,t,n)=>t in e?rl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const cl={type:"polygon",move(e,t){for(const n of e.points)n.x+=t.x,n.y+=t.y},rotate(e,t,n){e.points=e.points.map((e=>vn(e,t,-n)))},mirror(e,t){e.points=e.points.map((e=>cn(e,t)))},explode(e){const{lines:t}=hl(e);return t.map((e=>({type:"line",points:e})))},break(e,t){const{lines:n}=hl(e);return ma(n,t)},fill(e,t){e.fillColor=t},render({content:e,color:t,target:n,strokeWidth:r}){const i=void 0!==e.fillColor?"fillColor":"strokeColor";return void 0!==e.fillColor&&(r=0),n.renderPolygon(e.points,{[i]:t,dashArray:e.dashArray,strokeWidth:r})},getOperatorRenderPosition:e=>e.points[0],getDefaultColor:e=>void 0!==e.fillColor?e.fillColor:e.strokeColor,getEditPoints:e=>ea(e,(()=>({editPoints:va(e,dl,!0)}))),getSnapPoints:e=>Jo(e,(()=>{const{points:t,lines:n}=hl(e);return[...t.map((e=>((e,t)=>il(e,ol({type:"endpoint"})))(((e,t)=>{for(var n in t||(t={}))sl.call(t,n)&&ul(e,n,t[n]);if(al)for(var n of al(t))ll.call(t,n)&&ul(e,n,t[n]);return e})({},e)))),...n.map((([e,t])=>({x:(e.x+t.x)/2,y:(e.y+t.y)/2,type:"midpoint"})))]})),getGeometries:hl,canSelectPart:!0};function hl(e){return Zo(e,(()=>{const t=Array.from(kn(e.points));return{lines:t,points:e.points,bounding:on(e.points),renderingLines:[Dn(e.points)],regions:void 0!==e.fillColor?[{lines:t,points:e.points}]:void 0}}))}function dl(e){return"polygon"===e.type}var fl=n(2360),pl=n.n(fl),yl=Object.defineProperty,ml=Object.defineProperties,gl=Object.getOwnPropertyDescriptors,vl=Object.getOwnPropertySymbols,_l=Object.prototype.hasOwnProperty,bl=Object.prototype.propertyIsEnumerable,xl=(e,t,n)=>t in e?yl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const El={type:"spline",move(e,t){for(const n of e.points)n.x+=t.x,n.y+=t.y},rotate(e,t,n){e.points=e.points.map((e=>vn(e,t,-n)))},mirror(e,t){e.points=e.points.map((e=>cn(e,t)))},render({content:e,color:t,target:n,strokeWidth:r}){const{points:i}=Sl(e);return n.renderPolyline(i,{strokeColor:t,dashArray:e.dashArray,strokeWidth:r})},renderIfSelected:({content:e,color:t,target:n,strokeWidth:r})=>n.renderPolyline(e.points,{strokeColor:t,dashArray:[4],strokeWidth:r}),getOperatorRenderPosition:e=>e.points[0],getDefaultColor:e=>e.strokeColor,getEditPoints:e=>ea(e,(()=>({editPoints:va(e,Tl,!1,!0)}))),getSnapPoints:e=>Jo(e,(()=>e.points.map((e=>((e,t)=>ml(e,gl({type:"endpoint"})))(((e,t)=>{for(var n in t||(t={}))_l.call(t,n)&&xl(e,n,t[n]);if(vl)for(var n of vl(t))bl.call(t,n)&&xl(e,n,t[n]);return e})({},e)))))),getGeometries:Sl};function Sl(e){return Zo(e,(()=>{const t=e.points.map((e=>[e.x,e.y]));let n=[];if(t.length>2)if(e.fitting){const t=function(e){const t=Tn(e.map((e=>e.x))),n=Tn(e.map((e=>e.y)));return t.p1.map(((e,r)=>[{x:t.p1[r],y:n.p1[r]},{x:t.p2[r],y:n.p2[r]}]))}(e.points);for(let r=0;r<t.length;r++)n.push(e.points[r],...Sn(e.points[r],...t[r],e.points[r+1],wl));n.push(e.points[e.points.length-1])}else{const e=2,r=[];for(let n=0;n<t.length+e+1;n++)n<e+1?r.push(0):n<t.length?r.push(n-e):r.push(t.length-e);for(let i=0;i<=wl;i++){const o=pl()(i/wl,e,t,r);n.push({x:o[0],y:o[1]})}}else n=e.points;return{lines:Array.from(Mn(n)),points:n,bounding:on(n),renderingLines:[n]}}))}function Tl(e){return"spline"===e.type}const wl=100;var Al=Object.defineProperty,Pl=Object.defineProperties,Ol=Object.getOwnPropertyDescriptors,Rl=Object.getOwnPropertySymbols,Cl=Object.prototype.hasOwnProperty,Il=Object.prototype.propertyIsEnumerable,Nl=(e,t,n)=>t in e?Al(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ml=(e,t)=>{for(var n in t||(t={}))Cl.call(t,n)&&Nl(e,n,t[n]);if(Rl)for(var n of Rl(t))Il.call(t,n)&&Nl(e,n,t[n]);return e},kl=(e,t)=>Pl(e,Ol(t));const Dl={type:"ellipse arc",move:Oa.move,rotate:Oa.rotate,mirror:Oa.mirror,break(e,t){if(0===t.length)return;const n=t.map((t=>Cn(Rn(t,e),e)));n.sort(((e,t)=>e-t));const r=[];return On(n[0],e.startAngle)||r.push(kl(Ml({},e),{type:"ellipse arc",startAngle:e.startAngle,endAngle:n[0]})),n.forEach(((t,i)=>{i===n.length-1?On(t,e.endAngle)||r.push(kl(Ml({},e),{type:"ellipse arc",startAngle:t,endAngle:e.endAngle})):r.push(kl(Ml({},e),{type:"ellipse arc",startAngle:t,endAngle:n[i+1]}))})),r.length>1?r:void 0},render({content:e,color:t,target:n,strokeWidth:r}){const{points:i}=Ll(e);return n.renderPolyline(i,{strokeColor:t,dashArray:e.dashArray,strokeWidth:r})},renderIfSelected({content:e,color:t,target:n,strokeWidth:r}){const{points:i}=Ll(kl(Ml({},e),{startAngle:e.endAngle,endAngle:e.startAngle+360}));return n.renderPolyline(i,{strokeColor:t,dashArray:[4],strokeWidth:r})},getOperatorRenderPosition(e){const{points:t}=Ll(e);return t[0]},getDefaultColor:e=>e.strokeColor,getEditPoints:e=>ea(e,(()=>{var t;const n={x:e.cx,y:e.cy},r=e.startAngle/180*Math.PI,i=e.endAngle/180*Math.PI,o=-(null!=(t=e.angle)?t:0);return{editPoints:[{x:e.cx,y:e.cy,cursor:"move",update(e,{cursor:t,start:r,scale:i}){if(Fl(e))return e.cx+=t.x-r.x,e.cy+=t.y-r.y,{assistentContents:[{type:"line",dashArray:[4/i],points:[n,t]}]}}},kl(Ml({},vn({x:e.cx+e.rx*Math.cos(r),y:e.cy+e.ry*Math.sin(r)},n,o)),{cursor:Rt(e.startAngle-o,"top"),update(t,{cursor:r,scale:i}){var o;if(!Fl(t))return;const a=vn(r,n,null!=(o=e.angle)?o:0);return t.startAngle=180*Math.atan2((a.y-e.cy)/e.ry,(a.x-e.cx)/e.rx)/Math.PI,In(t),{assistentContents:[{type:"line",dashArray:[4/i],points:[n,r]}]}}}),kl(Ml({},vn({x:e.cx+e.rx*Math.cos(i),y:e.cy+e.ry*Math.sin(i)},n,o)),{cursor:Rt(e.endAngle-o,"top"),update(t,{cursor:r,scale:i}){var o;if(!Fl(t))return;const a=vn(r,n,null!=(o=e.angle)?o:0);return t.endAngle=180*Math.atan2((a.y-e.cy)/e.ry,(a.x-e.cx)/e.rx)/Math.PI,In(t),{assistentContents:[{type:"line",dashArray:[4/i],points:[n,r]}]}}})],angleSnapStartPoint:n}})),getSnapPoints:e=>Jo(e,(()=>{const t=e.startAngle/180*Math.PI,n=e.endAngle/180*Math.PI,r=(t+n)/2;return[{x:e.cx,y:e.cy,type:"center"},kl(Ml({},Ca({x:e.cx+e.rx*Math.cos(t),y:e.cy+e.ry*Math.sin(t)},e)),{type:"endpoint"}),kl(Ml({},Ca({x:e.cx+e.rx*Math.cos(n),y:e.cy+e.ry*Math.sin(n)},e)),{type:"endpoint"}),kl(Ml({},Ca({x:e.cx+e.rx*Math.cos(r),y:e.cy+e.ry*Math.sin(r)},e)),{type:"midpoint"})]})),getGeometries:Ll};function Ll(e){return Zo(e,(()=>{const t=[],n=e.startAngle>e.endAngle?e.endAngle+360:e.endAngle;let r=e.startAngle;for(;r<=n;r+=Na){const n=r*Math.PI/180,i=e.cx+e.rx*Math.cos(n),o=e.cy+e.ry*Math.sin(n);t.push(Ca({x:i,y:o},e))}if(r!==n){const r=n*Math.PI/180,i=e.cx+e.rx*Math.cos(r),o=e.cy+e.ry*Math.sin(r);t.push(Ca({x:i,y:o},e))}return{lines:Array.from(Mn(t)),points:t,bounding:on(t),renderingLines:[t]}}))}function Fl(e){return"ellipse arc"===e.type}var Ul=Object.defineProperty,Bl=Object.defineProperties,Gl=Object.getOwnPropertyDescriptors,jl=Object.getOwnPropertySymbols,$l=Object.prototype.hasOwnProperty,zl=Object.prototype.propertyIsEnumerable,Xl=(e,t,n)=>t in e?Ul(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hl=(e,t)=>{for(var n in t||(t={}))$l.call(t,n)&&Xl(e,n,t[n]);if(jl)for(var n of jl(t))zl.call(t,n)&&Xl(e,n,t[n]);return e},Vl=(e,t)=>Bl(e,Gl(t));const Yl={type:"block reference",move(e,t){e.x+=t.x,e.y+=t.y},rotate(e,t,n,r){const i=ql(e.id,r);if(i){const r=vn({x:e.x+i.base.x,y:e.y+i.base.y},t,-n);e.x=r.x-i.base.x,e.y=r.y-i.base.y,e.angle+=n}},explode(e,t){const n=ql(e.id,t);if(n){const r=[];return n.contents.forEach((i=>{const o=Wl(i,e,n,t);o&&r.push(o)})),r}return[]},mirror(e,t,n,r){const i=ql(e.id,r);if(i){const r=cn({x:e.x+i.base.x,y:e.y+i.base.y},t);e.x=r.x-i.base.x,e.y=r.y-i.base.y,e.angle=2*n-e.angle}},render({content:e,target:t,color:n,strokeWidth:r,contents:i}){const o=ql(e.id,i);if(o){const a=tu(o,t,r,i,n);return t.renderGroup(a,{translate:e,base:o.base,angle:e.angle})}return t.renderEmpty()},getOperatorRenderPosition(e,t){const n=ql(e.id,t);return n?{x:e.x+n.base.x,y:e.y+n.base.y}:e},getEditPoints(e,t){const n=ql(e.id,t);if(n)return ea(e,(()=>{const t={x:e.x+n.base.x,y:e.y+n.base.y};return{editPoints:[Vl(Hl({},t),{cursor:"move",update(e,{cursor:n,start:r,scale:i}){if(Zl(e))return e.x+=n.x-r.x,e.y+=n.y-r.y,{assistentContents:[{type:"line",dashArray:[4/i],points:[t,n]}]}}})],angleSnapStartPoint:t}}))},getSnapPoints(e,t){const n=ql(e.id,t);return n?Ql.get(n,e,(()=>{const r=[];return n.contents.forEach((i=>{var o;const a=Yo(i.type),s=Wl(i,e,n,t);if(s){const e=null==(o=null==a?void 0:a.getSnapPoints)?void 0:o.call(a,s,t);e&&r.push(...e)}})),r})):[]},getGeometries:function(e,t){const n=ql(e.id,t);return n?Kl.get(n,e,(()=>{const r=[],i=[],o=[];return n.contents.forEach((a=>{var s,l;const u=Wl(a,e,n,t);if(u){const e=null==(l=null==(s=Yo(a.type))?void 0:s.getGeometries)?void 0:l.call(s,u);e&&(r.push(...e.lines),i.push(...e.points),e.renderingLines&&o.push(...e.renderingLines))}})),{lines:r,points:i,bounding:on(i),renderingLines:o}})):{lines:[],points:[]}}};function Wl(e,t,n,r){const i=Yo(e.type);if(i)return Ae(e,(e=>{var o,a;null==(o=i.rotate)||o.call(i,e,n.base,t.angle,r),null==(a=i.move)||a.call(i,e,t)}))}function ql(e,t){return t.find((t=>ru(t)&&t.id===e))}const Kl=new Fn,Ql=new Fn;function Zl(e){return"block reference"===e.type}const Jl={type:"block",deletable:(e,t)=>!t.some((t=>Zl(t)&&t.id===e.id)),explode:e=>e.contents,render({content:e,target:t,color:n,strokeWidth:r,contents:i}){const o=tu(e,t,r,i,n);return t.renderGroup(o)},getOperatorRenderPosition:e=>e.base,getSnapPoints:eu,getGeometries:nu};function eu(e,t){return Jo(e,(()=>{const n=[];return e.contents.forEach((e=>{var r,i;const o=null==(i=null==(r=Yo(e.type))?void 0:r.getSnapPoints)?void 0:i.call(r,e,t);o&&n.push(...o)})),n}))}function tu(e,t,n,r,i){const o=[];return e.contents.forEach((e=>{const a=Yo(e.type);if(null==a?void 0:a.render){const s=a.render;o.push(s({content:e,color:i,target:t,strokeWidth:n,contents:r}))}})),o}function nu(e){return Zo(e,(()=>{const t=[],n=[],r=[];return e.contents.forEach((e=>{var i,o;const a=null==(o=null==(i=Yo(e.type))?void 0:i.getGeometries)?void 0:o.call(i,e);a&&(t.push(...a.lines),n.push(...a.points),a.renderingLines&&r.push(...a.renderingLines))})),{lines:t,points:n,bounding:on(n),renderingLines:r}}))}function ru(e){return"block"===e.type}const iu={name:"create block",useCommand({onEnd:e,type:t}){let n="";t&&(n="specify base point");const{input:r,setInputPosition:i}=lr(n);return{onStart(t){e({updateContents:(e,n)=>{let r=1;const i=[];e.forEach(((e,t)=>{ru(e)&&(r=Math.max(r,e.id+1)),Xi([t],n)&&i.push(t)}));const o=[{type:"block",id:r,contents:e.filter(((e,t)=>Xi([t],n)&&ou(e))),base:t}];for(let t=e.length;t>=0;t--)i.includes(t)&&e.splice(t,1);e.push(...o)}})},input:r,onMove(e,t){i(t)}}},contentSelectable:ou,hotkey:"B"};function ou(e){return!Zl(e)&&!ru(e)}const au={name:"create block reference",useCommand({onEnd:e,type:t,scale:n}){let r="";t&&(r="specify target point");const{input:i,setInputPosition:o,cursorPosition:a,setCursorPosition:s,resetInput:l}=lr(r);return{onStart(t){l(),e({updateContents:(e,n)=>{e.push(...e.filter(((e,t)=>Xi([t],n)&&ru(e))).map((e=>({type:"block reference",id:e.id,x:t.x-e.base.x,y:t.y-e.base.y,angle:0})))),s(void 0)}})},input:i,onMove(e,n){o(n||e),t&&s(e)},updateContent:e=>ru(e)&&a?{newContents:[{type:"block reference",id:e.id,x:a.x-e.base.x,y:a.y-e.base.y,angle:0}],assistentContents:[{type:"line",dashArray:[4/n],points:[{x:e.base.x,y:e.base.y},a]}]}:{}}},contentSelectable:ru,selectCount:1,hotkey:"I"},su={type:"group",move(e,t){e.contents.forEach((e=>{var n,r;null==(r=null==(n=Yo(e.type))?void 0:n.move)||r.call(n,e,t)}))},rotate(e,t,n,r){e.contents.forEach((e=>{var i,o;null==(o=null==(i=Yo(e.type))?void 0:i.rotate)||o.call(i,e,t,n,r)}))},explode:e=>e.contents,mirror(e,t,n,r){e.contents.forEach((e=>{var i,o;null==(o=null==(i=Yo(e.type))?void 0:i.mirror)||o.call(i,e,t,n,r)}))},render({content:e,target:t,color:n,strokeWidth:r,contents:i}){const o=tu(e,t,r,i,n);return t.renderGroup(o)},getSnapPoints:eu,getGeometries:nu},lu={name:"start edit block",execute(e,t,n){e.forEach(((r,i)=>{var o,a;Xi([i],t)&&(null==(a=null==(o=this.contentSelectable)?void 0:o.call(this,r,e))||a)&&n(uu(r)?[i,"contents"]:void 0)}))},contentSelectable:uu,selectCount:1};function uu(e){return ru(e)||"group"===e.type}var cu=Object.defineProperty,hu=Object.defineProperties,du=Object.getOwnPropertyDescriptors,fu=Object.getOwnPropertySymbols,pu=Object.prototype.hasOwnProperty,yu=Object.prototype.propertyIsEnumerable,mu=(e,t,n)=>t in e?cu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gu=(e,t)=>{for(var n in t||(t={}))pu.call(t,n)&&mu(e,n,t[n]);if(fu)for(var n of fu(t))yu.call(t,n)&&mu(e,n,t[n]);return e};const vu={name:"create circle",type:[{name:"2 points"},{name:"3 points"},{name:"center radius",hotkey:"C"},{name:"center diameter"}],useCommand({onEnd:e,scale:t,getAngleSnap:n,type:r}){const{circle:i,onClick:o,onMove:a,input:s,startPosition:l,middlePosition:u,cursorPosition:c}=Kn("2 points"===r||"3 points"===r||"center diameter"===r||"center radius"===r?r:void 0,(t=>e({updateContents:e=>e.push(((e,t)=>hu(e,du({type:"circle"})))(gu({},t)))})),{getAngleSnap:n}),h=[];return l&&c&&(u?h.push({type:"polygon",points:[l,u,c],dashArray:[4/t]}):h.push({type:"line",points:[l,c],dashArray:[4/t]},{type:"text",x:(l.x+c.x)/2-20,y:(l.y+c.y)/2+4,text:Qt(l,c).toFixed(2),color:16711680,fontSize:16/t,fontFamily:"monospace"})),i&&h.push(gu({type:"circle"},i)),{onStart:o,input:s,onMove:a,assistentContents:h}},selectCount:0};var _u=Object.defineProperty,bu=Object.defineProperties,xu=Object.getOwnPropertyDescriptors,Eu=Object.getOwnPropertySymbols,Su=Object.prototype.hasOwnProperty,Tu=Object.prototype.propertyIsEnumerable,wu=(e,t,n)=>t in e?_u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Au=(e,t)=>{for(var n in t||(t={}))Su.call(t,n)&&wu(e,n,t[n]);if(Eu)for(var n of Eu(t))Tu.call(t,n)&&wu(e,n,t[n]);return e},Pu=(e,t)=>bu(e,xu(t));const Ou={name:"create arc",useCommand({onEnd:e,getAngleSnap:t,type:n,scale:r}){const{circle:i,arc:o,onClick:a,onMove:s,input:l,startPosition:u,middlePosition:c,cursorPosition:h}=ci("create arc"===n?"center radius":void 0,(t=>e({updateContents:e=>e.push(Pu(Au({},t),{type:"arc"}))})),{getAngleSnap:t}),d=[];return u&&h&&(c?d.push({type:"polygon",points:[u,c,h],dashArray:[4/r]}):d.push({type:"line",points:[u,h],dashArray:[4/r]},{type:"text",x:(u.x+h.x)/2-20,y:(u.y+h.y)/2+4,text:Qt(u,h).toFixed(2),color:16711680,fontSize:16/r,fontFamily:"monospace"})),o&&(d.push(Pu(Au({type:"circle"},o),{dashArray:[4/r]})),o.startAngle!==o.endAngle&&d.push({type:"line",points:[{x:o.x+o.r*Math.cos(o.startAngle/180*Math.PI),y:o.y+o.r*Math.sin(o.startAngle/180*Math.PI)},{x:o.x,y:o.y}],dashArray:[4/r]},{type:"line",points:[{x:o.x,y:o.y},{x:o.x+o.r*Math.cos(o.endAngle/180*Math.PI),y:o.y+o.r*Math.sin(o.endAngle/180*Math.PI)}],dashArray:[4/r]}),h&&d.push({type:"line",points:[o,h],dashArray:[4/r]})),i&&(d.push(Pu(Au({type:"circle"},i),{dashArray:[4/r]})),h&&d.push({type:"line",points:[i,h],dashArray:[4/r]})),o&&o.startAngle!==o.endAngle&&d.push(Au({type:"arc"},o)),{onStart:a,input:l,onMove:s,assistentContents:d}},selectCount:0,hotkey:"A"};var Ru=Object.defineProperty,Cu=Object.defineProperties,Iu=Object.getOwnPropertyDescriptors,Nu=Object.getOwnPropertySymbols,Mu=Object.prototype.hasOwnProperty,ku=Object.prototype.propertyIsEnumerable,Du=(e,t,n)=>t in e?Ru(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Lu=(e,t)=>{for(var n in t||(t={}))Mu.call(t,n)&&Du(e,n,t[n]);if(Nu)for(var n of Nu(t))ku.call(t,n)&&Du(e,n,t[n]);return e};const Fu={name:"create ellipse",type:[{name:"ellipse center",hotkey:"EL"},{name:"ellipse endpoint"}],useCommand({onEnd:e,getAngleSnap:t,type:n,scale:r}){const{ellipse:i,onClick:o,onMove:a,input:s,startPosition:l,middlePosition:u,cursorPosition:c}=Zr("ellipse center"===n||"ellipse endpoint"===n?n:void 0,(t=>e({updateContents:e=>e.push(((e,t)=>Cu(e,Iu({type:"ellipse"})))(Lu({},t)))})),{getAngleSnap:t}),h=[];return l&&c&&(u?(h.push({type:"line",points:[l,u],dashArray:[4/r]}),"ellipse center"===n?h.push({type:"line",points:[l,c],dashArray:[4/r]}):i&&h.push({type:"line",points:[{x:i.cx,y:i.cy},c],dashArray:[4/r]})):h.push({type:"line",points:[l,c],dashArray:[4/r]})),i&&h.push(Lu({type:"ellipse"},i)),{onStart:o,input:s,onMove:a,assistentContents:h}},selectCount:0};var Uu=Object.defineProperty,Bu=Object.defineProperties,Gu=Object.getOwnPropertyDescriptors,ju=Object.getOwnPropertySymbols,$u=Object.prototype.hasOwnProperty,zu=Object.prototype.propertyIsEnumerable,Xu=(e,t,n)=>t in e?Uu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hu=(e,t)=>{for(var n in t||(t={}))$u.call(t,n)&&Xu(e,n,t[n]);if(ju)for(var n of ju(t))zu.call(t,n)&&Xu(e,n,t[n]);return e},Vu=(e,t)=>Bu(e,Gu(t));const Yu={name:"create ellipse arc",useCommand({onEnd:e,getAngleSnap:t,type:n,scale:r}){const{ellipse:i,ellipseArc:o,onClick:a,onMove:s,input:l,startPosition:u,middlePosition:c,cursorPosition:h}=xi("create ellipse arc"===n?"ellipse center":void 0,(t=>e({updateContents:e=>e.push(Vu(Hu({},t),{type:"ellipse arc"}))})),{getAngleSnap:t}),d=[];if(u&&h)if(c){d.push({type:"line",points:[u,c],dashArray:[4/r]});const e="create ellipse arc"===n?u:{x:(u.x+c.x)/2,y:(u.y+c.y)/2};d.push({type:"line",points:[e,h],dashArray:[4/r]})}else d.push({type:"line",points:[u,h],dashArray:[4/r]});return o?(d.push(Vu(Hu({type:"ellipse"},o),{dashArray:[4/r]})),o.startAngle!==o.endAngle&&d.push({type:"line",points:[Ca({x:o.cx+o.rx*Math.cos(o.startAngle/180*Math.PI),y:o.cy+o.ry*Math.sin(o.startAngle/180*Math.PI)},o),{x:o.cx,y:o.cy}],dashArray:[4/r]},{type:"line",points:[{x:o.cx,y:o.cy},Ca({x:o.cx+o.rx*Math.cos(o.endAngle/180*Math.PI),y:o.cy+o.ry*Math.sin(o.endAngle/180*Math.PI)},o)],dashArray:[4/r]}),h&&d.push({type:"line",points:[{x:o.cx,y:o.cy},h],dashArray:[4/r]})):i&&(d.push(Vu(Hu({type:"ellipse"},i),{dashArray:[4/r]})),h&&d.push({type:"line",points:[{x:i.cx,y:i.cy},h],dashArray:[4/r]})),o&&o.startAngle!==o.endAngle&&d.push(Hu({type:"ellipse arc"},o)),{onStart:a,input:l,onMove:s,assistentContents:d}},selectCount:0},Wu={name:"create line",useCommand({onEnd:e,scale:t,getAngleSnap:n,type:r}){const{line:i,onClick:o,onMove:a,input:s,inputMode:l}=Jn("create line"===r,(t=>e({updateContents:e=>e.push(...Array.from(Mn(t)).map((e=>({points:e,type:"line"}))))})),{getAngleSnap:n}),u=[];if(i&&i.length>1){const e=i[i.length-2],n=i[i.length-1],r=Qt(e,n),o=180*Math.atan2(n.y-e.y,n.x-e.x)/Math.PI;u.push({type:"arc",x:e.x,y:e.y,r,dashArray:[4/t],startAngle:o>180||o<0?o:0,endAngle:o>180||o<0?0:o},{type:"line",dashArray:[4/t],points:[e,{x:e.x+r,y:e.y}]},{type:"text",x:(e.x+n.x)/2-20,y:(e.y+n.y)/2+4,text:r.toFixed(2),color:"length"===l?16711680:16764108,fontSize:16/t,fontFamily:"monospace"},{type:"text",x:n.x+10,y:n.y-10,text:`${o.toFixed(1)}°`,color:"angle"===l?16711680:16764108,fontSize:16/t,fontFamily:"monospace"})}if(i)for(const e of Mn(i))u.push({points:e,type:"line"});return{onStart:o,input:s,onMove:a,assistentContents:u}},selectCount:0,hotkey:"L"},qu={name:"create polyline",useCommand({onEnd:e,scale:t,getAngleSnap:n,type:r}){const{line:i,onClick:o,onMove:a,input:s,inputMode:l}=Jn("create polyline"===r,(t=>e({updateContents:e=>e.push({points:t,type:"polyline"})})),{getAngleSnap:n}),u=[];if(i&&i.length>1){const e=i[i.length-2],n=i[i.length-1],r=Qt(e,n),o=180*Math.atan2(n.y-e.y,n.x-e.x)/Math.PI;u.push({type:"arc",x:e.x,y:e.y,r,dashArray:[4/t],startAngle:o>180||o<0?o:0,endAngle:o>180||o<0?0:o},{type:"line",dashArray:[4/t],points:[e,{x:e.x+r,y:e.y}]},{type:"text",x:(e.x+n.x)/2-20,y:(e.y+n.y)/2+4,text:r.toFixed(2),color:"length"===l?16711680:16764108,fontSize:16/t,fontFamily:"monospace"},{type:"text",x:n.x+10,y:n.y-10,text:`${o.toFixed(1)}°`,color:"angle"===l?16711680:16764108,fontSize:16/t,fontFamily:"monospace"})}return i&&u.push({points:i,type:"polyline"}),{onStart:o,input:s,onMove:a,assistentContents:u}},selectCount:0,hotkey:"PL"},Ku={name:"create polygon",useCommand({onEnd:e,getAngleSnap:n,type:r,scale:i}){const[o,a]=t.useState("point"),{polygon:s,onClick:l,onMove:u,input:c,startSetSides:h,startPosition:d,cursorPosition:f}=Qr("create polygon"===r,(t=>e({updateContents:e=>e.push({points:t,type:"polygon"})})),{getAngleSnap:n,toEdge:"edge"===o,setSidesKey:"S",switchTypeKey:"T",switchType:()=>a("edge"===o?"point":"edge")}),p=[];return d&&f&&p.push({type:"line",points:[d,f],dashArray:[4/i]}),s&&p.push({points:s,type:"polygon"}),{onStart:l,input:c,onMove:u,subcommand:"create polygon"===r?t.createElement("span",null,t.createElement("button",{onClick:h,style:{position:"relative"}},"set sides(S)"),t.createElement("button",{onClick:()=>a("edge"===o?"point":"edge"),style:{position:"relative"}},o,"(T)")):void 0,assistentContents:p}},selectCount:0,hotkey:"POL"},Qu={name:"create rect",useCommand({onEnd:e,getAngleSnap:t,type:n}){const{line:r,onClick:i,onMove:o,input:a}=Jn("create rect"===n,(t=>e({updateContents:e=>e.push({type:"rect",x:(t[0].x+t[1].x)/2,y:(t[0].y+t[1].y)/2,width:Math.abs(t[0].x-t[1].x),height:Math.abs(t[0].y-t[1].y),angle:0})})),{once:!0,getAngleSnap:t}),s=[];return r&&s.push({type:"rect",x:(r[0].x+r[1].x)/2,y:(r[0].y+r[1].y)/2,width:Math.abs(r[0].x-r[1].x),height:Math.abs(r[0].y-r[1].y),angle:0}),{onStart:i,input:a,onMove:o,assistentContents:s}},selectCount:0,hotkey:"REC"},Zu={name:"create spline",type:[{name:"spline",hotkey:"SPL"},{name:"spline fitting"}],useCommand({onEnd:e,getAngleSnap:t,type:n,scale:r}){const{line:i,onClick:o,onMove:a,input:s}=Jn("spline"===n||"spline fitting"===n,(t=>e({updateContents:e=>e.push({points:t,type:"spline",fitting:"spline fitting"===n})})),{getAngleSnap:t}),l=[];return i&&l.push({points:i,type:"spline",fitting:"spline fitting"===n},{points:i,type:"polyline",dashArray:[4/r]}),{onStart:o,input:s,onMove:a,assistentContents:l}},selectCount:0};var Ju=Object.defineProperty,ec=Object.defineProperties,tc=Object.getOwnPropertyDescriptors,nc=Object.getOwnPropertySymbols,rc=Object.prototype.hasOwnProperty,ic=Object.prototype.propertyIsEnumerable,oc=(e,t,n)=>t in e?Ju(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ac=(e,t)=>{for(var n in t||(t={}))rc.call(t,n)&&oc(e,n,t[n]);if(nc)for(var n of nc(t))ic.call(t,n)&&oc(e,n,t[n]);return e},sc=(e,t)=>ec(e,tc(t));const lc={name:"create tangent tangent radius circle",useCommand({onEnd:e,type:n,selected:r,scale:i}){const[o,a]=t.useState([]),[s,l]=t.useState();let u="";n&&(u=o.length>0?"select one result":"input radius");const c=o.map((e=>sc(ac({},e),{type:"circle",dashArray:e===s?void 0:[4/i]}))),{input:h,setInputPosition:d,setCursorPosition:f,clearText:p,resetInput:y}=lr(u,n&&0==o.length?(e,t)=>{if("Enter"===e.key){const e=+t;isNaN(e)||(a(function(e,t,n){const r=[],i=rs(e)||Ha(e),o=rs(t)||Ha(t);return i&&o?r.push(...function(e,t,n){const r=[],i=[e.r+n,Math.abs(e.r-n)],o=[t.r+n,Math.abs(t.r-n)];for(const n of i)for(const i of o)r.push(...pn(jt(Gt({},e),{r:n}),jt(Gt({},t),{r:i})));return r}(e,t,n).map((e=>sc(ac({},e),{r:n})))):i&&ga(t)?r.push(...An(t.points[0],t.points[1],e,n).map((e=>sc(ac({},e),{r:n})))):o&&ga(e)?r.push(...An(e.points[0],e.points[1],t,n).map((e=>sc(ac({},e),{r:n})))):ga(e)&&ga(t)&&r.push(...wn(e.points[0],e.points[1],t.points[0],t.points[1],n).map((e=>sc(ac({},e),{r:n})))),r}(r[0].content,r[1].content,e)),p())}}:void 0);return Pt((e=>"Escape"===e.key),(()=>{a([]),l(void 0),p(),y()}),[a]),{onStart(t){f(t),s&&(e({updateContents:e=>{e.push(ac({type:"circle"},s))}}),a([]))},input:h,onMove(e,t){f(e),d(t||e),l(o.find((t=>Zt(Qt(t,e),t.r)<5)))},assistentContents:c}},selectCount:2,contentSelectable:e=>rs(e)||Ha(e)||ga(e),selectType:"select part"};var uc=Object.defineProperty,cc=Object.defineProperties,hc=Object.getOwnPropertyDescriptors,dc=Object.getOwnPropertySymbols,fc=Object.prototype.hasOwnProperty,pc=Object.prototype.propertyIsEnumerable,yc=(e,t,n)=>t in e?uc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mc=(e,t)=>{for(var n in t||(t={}))fc.call(t,n)&&yc(e,n,t[n]);if(dc)for(var n of dc(t))pc.call(t,n)&&yc(e,n,t[n]);return e},gc=(e,t)=>cc(e,hc(t));const vc={name:"fillet",useCommand({onEnd:e,type:n,selected:r,scale:i}){const[o,a]=t.useState([]),[s,l]=t.useState();let u="";n&&(u=o.length>0?"select one result":"input radius");const c=o.map((e=>gc(mc({},e),{type:"arc",dashArray:e===s?void 0:[4/i]}))),{input:h,setInputPosition:d,setCursorPosition:f,clearText:p,resetInput:y}=lr(u,n&&0==o.length?(e,t)=>{if("Enter"===e.key){const e=+t;isNaN(e)||(a(function(e,t,n){const r=[];return ga(e)&&ga(t)&&r.push(...wn(e.points[0],e.points[1],t.points[0],t.points[1],n).map((r=>{const i=Kt(r,nn(e.points[0],e.points[1])),o=Kt(r,nn(t.points[0],t.points[1])),a=180*Math.atan2(i.y-r.y,i.x-r.x)/Math.PI,s=180*Math.atan2(o.y-r.y,o.x-r.x)/Math.PI,l=Math.min(a,s),u=Math.max(a,s);return gc(mc({},r),u-l<180?{r:n,startAngle:l,endAngle:u}:{r:n,startAngle:u,endAngle:l+360})}))),r}(r[0].content,r[1].content,e)),p())}}:void 0);return Pt((e=>"Escape"===e.key),(()=>{a([]),l(void 0),p(),y()}),[a]),{onStart(t){f(t),s&&(e({updateContents:e=>{e.push(mc({type:"arc"},s))}}),a([]))},input:h,onMove(e,t){f(e),d(t||e),l(o.find((t=>Zt(Qt(t,e),t.r)<5)))},assistentContents:c}},selectCount:2,contentSelectable:e=>ga(e),selectType:"select part",hotkey:"F"},_c={name:"chamfer",useCommand({onEnd:e,type:n,selected:r,scale:i}){const[o,a]=t.useState([]),[s,l]=t.useState();let u="";n&&(u=o.length>0?"select one result":"input distance");const c=o.map((e=>({type:"line",points:e,dashArray:e===s?void 0:[4/i]}))),{input:h,setInputPosition:d,setCursorPosition:f,clearText:p,resetInput:y}=lr(u,n&&0==o.length?(e,t)=>{if("Enter"===e.key){const e=t.split(",");if(2===e.length){const t=+e[0],n=+e[1];isNaN(t)||isNaN(n)||(a(bc(r[0].content,r[1].content,t,n)),p())}else{const e=+t;isNaN(e)||(a(bc(r[0].content,r[1].content,e,e)),p())}}}:void 0);return Pt((e=>"Escape"===e.key),(()=>{a([]),l(void 0),p(),y()}),[a]),{onStart(t){f(t),s&&(e({updateContents:e=>{e.push({type:"line",points:s})}}),a([]))},input:h,onMove(e,t){f(e),d(t||e),l(o.find((t=>Yt(e,t[0],t[1])<5)))},assistentContents:c}},selectCount:2,contentSelectable:e=>ga(e),selectType:"select part",hotkey:"CHA"};function bc(e,t,n,r){const i=[];if(ga(e)&&ga(t)){const o=dn(e.points[0],e.points[1],t.points[0],t.points[1]);if(o){const a=[],s=Xt(o,n,e.points[0]),l=Xt(o,n,e.points[1]);s&&a.push(s),!l||s&&Ht(s,l)||a.push(l);const u=[],c=Xt(o,r,t.points[0]),h=Xt(o,r,t.points[1]);c&&u.push(c),!h||c&&Ht(c,h)||u.push(h);for(const e of a)for(const t of u)i.push([e,t])}}return i}const xc={name:"break",execute(e,t){const n=[],r=[];e.forEach(((i,o)=>{var a,s,l,u;if(Xi([o],t)&&(null==(s=null==(a=this.contentSelectable)?void 0:a.call(this,i,e))||s)){let t=[];for(let n=0;n<e.length;n++){const r=e[n];if(n!==o){const a=n<o?[r,i]:[i,r];t.push(...na(...a,e))}}if(t=function(e,t){const n=[];for(const r of e)n.every((e=>!t(e,r)))&&n.push(r);return n}(t,Ht),t.length>0){const e=null==(u=null==(l=Yo(i.type))?void 0:l.break)?void 0:u.call(l,i,t);e&&(r.push(...e),n.push(o))}}}));for(let t=e.length;t>=0;t--)n.includes(t)&&e.splice(t,1);e.push(...r)},contentSelectable(e,t){var n,r;const i=Yo(e.type);return void 0!==(null==i?void 0:i.break)&&(null==(r=null==(n=i.deletable)?void 0:n.call(i,e,t))||r)},hotkey:"BR"},Ec={name:"measure",useCommand({transform:e,getAngleSnap:t,type:n,scale:r}){const{onStart:i,mask:o,startPosition:a}=ke(void 0,{transform:e,ignoreLeavingEvent:!0,getAngleSnap:t});let s="";n&&(s=a?"specify end point":"specify start point");const{input:l,setInputPosition:u,cursorPosition:c,setCursorPosition:h}=lr(s),d=[];if(a&&c){const e=a,t=c,n=Qt(e,t),i=180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI;d.push({type:"arc",x:e.x,y:e.y,r:n,dashArray:[4/r],startAngle:i>180||i<0?i:0,endAngle:i>180||i<0?0:i},{type:"line",dashArray:[4/r],points:[e,{x:e.x+n,y:e.y}]},{type:"text",x:(e.x+t.x)/2-20,y:(e.y+t.y)/2+4,text:n.toFixed(2),color:16711680,fontSize:16/r,fontFamily:"monospace"},{type:"text",x:t.x+10,y:t.y-10,text:`${i.toFixed(1)}°`,color:16711680,fontSize:16/r,fontFamily:"monospace"},{type:"line",points:[a,c]})}return{onStart:i,mask:o,input:l,onMove(e,t){h(e),u(null!=t?t:e)},assistentContents:d}},selectCount:0},Sc={type:"radial dimension",move(e,t){e.x+=t.x,e.y+=t.y,e.position.x+=t.x,e.position.y+=t.y},render({content:e,target:t,color:n,strokeWidth:r}){const{regions:i,lines:o}=Tc(e),a=[];for(const e of o)a.push(t.renderPolyline(e,{strokeColor:n,strokeWidth:r}));i&&i.length>0&&a.push(t.renderPolyline(i[0].points,{strokeColor:n,strokeWidth:r,fillColor:n}));const{textPosition:s,textRotation:l,text:u}=Oc(e);return a.push(t.renderGroup([t.renderText(s.x,s.y,u,n,e.fontSize,e.fontFamily)],{rotation:l,base:s})),t.renderGroup(a)},getDefaultColor:e=>e.strokeColor,getEditPoints:e=>ea(e,(()=>({editPoints:[{x:e.position.x,y:e.position.y,cursor:"move",update(t,{cursor:n,start:r,scale:i}){if(function(e){return"radial dimension"===e.type}(t)&&(t.position.x+=n.x-r.x,t.position.y+=n.y-r.y,!(Qt(t,t.position)>t.r)))return{assistentContents:[{type:"line",dashArray:[4/i],points:[e,n]}]}}}]}))),getGeometries:Tc};function Tc(e){return Zo(e,(()=>yo(e,Rc,Oc)))}const wc=new class{constructor(){this.cache=new Map}get(e,t,n){let r=this.cache.get(e);r||(r=new Map,this.cache.set(e,r));let i=r.get(t);return i||(i=n(),r.set(t,i)),i}};function Ac(e,t){return wc.get(e,t,(()=>Bn(e,t)))}const Pc=new Ln;function Oc(e){return Pc.get(e,(()=>mo(e,Rc.margin,Ac)))}const Rc={margin:5,arrowAngle:15,arrowSize:10},Cc={name:"create radial dimension",selectCount:1,contentSelectable:Ic,useCommand({onEnd:e,selected:n,type:r}){const[i,o]=t.useState(),a=()=>{o(void 0)};return Pt((e=>"Escape"===e.key),a,[o]),{onStart(){i&&(e({updateContents:e=>{e.push(i)},nextCommand:r}),a())},onMove(e){if(n.length>0&&r){const t=n[0].content;Ic(t)&&o({type:"radial dimension",position:e,x:t.x,y:t.y,r:t.r,fontSize:16,fontFamily:"monospace"})}},assistentContents:i?[i]:void 0}}};function Ic(e){return Ha(e)||rs(e)}var Nc=Object.defineProperty,Mc=Object.defineProperties,kc=Object.getOwnPropertyDescriptors,Dc=Object.getOwnPropertySymbols,Lc=Object.prototype.hasOwnProperty,Fc=Object.prototype.propertyIsEnumerable,Uc=(e,t,n)=>t in e?Nc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const Bc={name:"create linear dimension",selectCount:0,useCommand({onEnd:e,type:n,scale:r}){const[i,o]=t.useState(),[a,s]=t.useState(),[l,u]=t.useState(!1),[c,h]=t.useState(),[d,f]=t.useState(),p=()=>{o(void 0),s(void 0),f(void 0)};Pt((e=>"Escape"===e.key),p,[f]);const y=[];return d?y.push(d):i&&c&&y.push({type:"line",points:[i,c],dashArray:[4/r]}),{onStart(t){i?a?d&&(e({updateContents:e=>{e.push(d)},nextCommand:n}),p()):s(t):o(t)},onMove(e){h(e),n&&i&&a&&f({type:"linear dimension",position:e,p1:i,p2:a,direct:l,fontSize:16,fontFamily:"monospace"})},subcommand:n?t.createElement("span",null,t.createElement("button",{onClick:()=>{d&&f(((e,t)=>Mc(e,kc(t)))(((e,t)=>{for(var n in t||(t={}))Lc.call(t,n)&&Uc(e,n,t[n]);if(Dc)for(var n of Dc(t))Fc.call(t,n)&&Uc(e,n,t[n]);return e})({},d),{direct:!l})),u(!l)},style:{position:"relative"}},l?"direct":"axis")):void 0,assistentContents:y}}},Gc={type:"linear dimension",move(e,t){e.p1.x+=t.x,e.p1.y+=t.y,e.p2.x+=t.x,e.p2.y+=t.y,e.position.x+=t.x,e.position.y+=t.y},render({content:e,target:t,color:n,strokeWidth:r}){const{regions:i,lines:o}=jc(e),a=[];for(const e of o)a.push(t.renderPolyline(e,{strokeColor:n,strokeWidth:r}));if(i)for(let e=0;e<2&&e<i.length;e++)a.push(t.renderPolyline(i[e].points,{strokeColor:n,strokeWidth:r,fillColor:n}));const{textPosition:s,text:l,textRotation:u}=zc(e);return a.push(t.renderGroup([t.renderText(s.x,s.y,l,n,e.fontSize,e.fontFamily)],{rotation:u,base:s})),t.renderGroup(a)},getDefaultColor:e=>e.strokeColor,getEditPoints:e=>ea(e,(()=>({editPoints:[{x:e.position.x,y:e.position.y,cursor:"move",update(e,{cursor:t,start:n,scale:r}){if(function(e){return"linear dimension"===e.type}(e))return e.position.x+=t.x-n.x,e.position.y+=t.y-n.y,{assistentContents:[{type:"line",dashArray:[4/r],points:[n,t]}]}}}]}))),getGeometries:jc};function jc(e){return Zo(e,(()=>go(e,Rc,zc)))}const $c=new Ln;function zc(e){return $c.get(e,(()=>vo(e,Rc.margin,Ac)))}const Xc={name:"create group",execute(e,t){const n={type:"group",contents:e.filter(((e,n)=>Xi([n],t)&&Hc(e)))};for(let n=e.length;n>=0;n--)Xi([n],t)&&e.splice(n,1);e.push(n)},contentSelectable:Hc,hotkey:"B"};function Hc(e){return!Zl(e)&&!ru(e)}var Vc=n(8071),Yc=n.n(Vc);const Wc={name:"fill",execute(e,t){e.forEach(((n,r)=>{var i,o,a;if(Xi([r],t)&&(null==(o=null==(i=this.contentSelectable)?void 0:i.call(this,n,e))||o)){const e=null==(a=Yo(n.type))?void 0:a.fill;e&&e(n,0)}}))},contentSelectable:e=>{var t;return void 0!==(null==(t=Yo(e.type))?void 0:t.fill)}};var qc=Object.defineProperty,Kc=Object.defineProperties,Qc=Object.getOwnPropertyDescriptors,Zc=Object.getOwnPropertySymbols,Jc=Object.prototype.hasOwnProperty,eh=Object.prototype.propertyIsEnumerable,th=Math.pow,nh=(e,t,n)=>t in e?qc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rh=(e,t)=>{for(var n in t||(t={}))Jc.call(t,n)&&nh(e,n,t[n]);if(Zc)for(var n of Zc(t))eh.call(t,n)&&nh(e,n,t[n]);return e},ih=(e,t)=>Kc(e,Qc(t));const oh=Math.round(15*Math.random()*th(16,3)+th(16,3)).toString(16),ah=/Mac|iPod|iPhone|iPad/.test(navigator.platform);(function(){function e(t){if(!R(t))return t;if(Array.isArray(t))return t.map(e);if(D(t))return new Map(Array.from(t.entries()).map((function(t){return[t[0],e(t[1])]})));if(L(t))return new Set(Array.from(t).map(e));var n=Object.create(Object.getPrototypeOf(t));for(var r in t)n[r]=e(t[r]);return N(t,fe)&&(n[fe]=t[fe]),n}function t(t){return O(t)?e(t):t}var n="add";!function(e,t){ve[e]||(ve[e]=t)}("Patches",{$:function(t,r){return r.forEach((function(r){for(var i=r.path,o=r.op,a=t,s=0;s<i.length-1;s++){var l=I(a),u=""+i[s];0!==l&&1!==l||"__proto__"!==u&&"constructor"!==u||P(24),"function"==typeof a&&"prototype"===u&&P(24),"object"!=typeof(a=M(a,u))&&P(15,i.join("/"))}var c=I(a),h=e(r.value),d=i[i.length-1];switch(o){case"replace":switch(c){case 2:return a.set(d,h);case 3:P(16);default:return a[d]=h}case n:switch(c){case 1:return"-"===d?a.push(h):a.splice(d,0,h);case 2:return a.set(d,h);case 3:return a.add(h);default:return a[d]=h}case"remove":switch(c){case 1:return a.splice(d,1);case 2:return a.delete(d);case 3:return a.delete(r.value);default:return delete a[d]}default:P(17,o)}})),t},R:function(e,r,i,o){switch(e.i){case 0:case 4:case 2:return function(e,r,i,o){var a=e.t,s=e.o;C(e.D,(function(e,l){var u=M(a,e),c=M(s,e),h=l?N(a,e)?"replace":n:"remove";if(u!==c||"replace"!==h){var d=r.concat(e);i.push("remove"===h?{op:h,path:d}:{op:h,path:d,value:c}),o.push(h===n?{op:"remove",path:d}:"remove"===h?{op:n,path:d,value:t(u)}:{op:"replace",path:d,value:t(u)})}}))}(e,r,i,o);case 5:case 1:return function(e,r,i,o){var a=e.t,s=e.D,l=e.o;if(l.length<a.length){var u=[l,a];a=u[0],l=u[1];var c=[o,i];i=c[0],o=c[1]}for(var h=0;h<a.length;h++)if(s[h]&&l[h]!==a[h]){var d=r.concat([h]);i.push({op:"replace",path:d,value:t(l[h])}),o.push({op:"replace",path:d,value:t(a[h])})}for(var f=a.length;f<l.length;f++){var p=r.concat([f]);i.push({op:n,path:p,value:t(l[f])})}a.length<l.length&&o.push({op:"replace",path:r.concat(["length"]),value:a.length})}(e,r,i,o);case 3:return function(e,t,r,i){var o=e.t,a=e.o,s=0;o.forEach((function(e){if(!a.has(e)){var o=t.concat([s]);r.push({op:"remove",path:o,value:e}),i.unshift({op:n,path:o,value:e})}s++})),s=0,a.forEach((function(e){if(!o.has(e)){var a=t.concat([s]);r.push({op:n,path:a,value:e}),i.unshift({op:"remove",path:a,value:e})}s++}))}(e,r,i,o)}},M:function(e,t,n,r){n.push({op:"replace",path:[],value:t===de?void 0:t}),r.push({op:"replace",path:[],value:e})}})})(),Wo(pa),Wo(ts),Wo(hs),Wo(Es),Wo(cl),Wo(Oa),Wo(za),Wo(El),Wo(Dl),Wo({type:"text",getDefaultColor:e=>e.color,render:({content:e,target:t,color:n})=>t.renderText(e.x,e.y,e.text,null!=n?n:e.color,e.fontSize,e.fontFamily)}),Wo(Jl),Wo(Yl),Wo(Sc),Wo(Gc),Wo(su),Ps(Os),Ps(Rs),Ps(Cs),Ps(Is),Ps(Ms),Ps(Ns),Ps(iu),Ps(lu),Ps(au),Ps(vu),Ps(Ou),Ps(Fu),Ps(Yu),Ps(Wu),Ps(qu),Ps(Ku),Ps(Qu),Ps(Zu),Ps(lc),Ps(vc),Ps(_c),Ps(xc),Ps(Ec),Ps(Cc),Ps(Bc),Ps(Xc),Ps(Wc),Ls(Br),Ls(qs),Ls(Wr);const sh="combination-2.json",lh=t.forwardRef(((e,n)=>{var r,i;const o=Date.now(),{filterSelection:a,selected:s,isSelected:l,addSelection:u,setSelected:c,isSelectable:h,operations:d,executeOperation:f,resetOperation:p,selectBeforeOperate:y,operate:m,message:g}=Vi({},((e,t)=>{if("command"===(null==e?void 0:e.type)){const n=ws(e.name);if(null==n?void 0:n.execute)return T((e=>{var r;e=k(e),null==(r=n.execute)||r.call(n,e,t,D)})),c(),!0}return!1}),{onChange:t=>e.onSendSelection(t.map((e=>e[0])))}),{snapTypes:v,angleSnapEnabled:_,renderTarget:b,readOnly:x,inputFixed:E}=e,{state:S,setState:T,undo:w,redo:A,canRedo:P,canUndo:O,applyPatchFromSelf:R,applyPatchFromOtherOperators:C}=Xe(e.initialState,oh,{onApplyPatchesFromSelf:e.onApplyPatchesFromSelf,onChange({patches:e,oldState:t,newState:n}){var r,i,o,a;const s=new Set,l=new Set;for(const r of e){const e=r.path[0];("remove"!==r.op||r.path.length>1)&&s.add(n[e]),("add"!==r.op||r.path.length>1)&&l.add(t[e])}for(const e of s){const t=null==(i=null==(r=Yo(e.type))?void 0:r.getGeometries)?void 0:i.call(r,e,n);(null==t?void 0:t.bounding)&&(null==We||We.insert({x:t.bounding.start.x,y:t.bounding.start.y,w:t.bounding.end.x-t.bounding.start.x,h:t.bounding.end.y-t.bounding.start.y},e))}for(const e of l){const n=null==(a=null==(o=Yo(e.type))?void 0:o.getGeometries)?void 0:a.call(o,e,t);(null==n?void 0:n.bounding)&&(null==We||We.remove({x:n.bounding.start.x,y:n.bounding.start.y,w:n.bounding.end.x-n.bounding.start.x,h:n.bounding.end.y-n.bounding.start.y},e))}}}),{selected:I,setSelected:N}=zi({maxCount:1}),{editingContent:M,getContentByPath:k,setEditingContentPath:D,prependPatchPath:L}=eo(S,{onEditingContentPathChange(e){Je(e)}}),[F,U]=t.useState(),B=[],G=[],{x:j,y:$,ref:z,setX:X,setY:H}=je(),{scale:V,setScale:Y,ref:W}=$e({min:.001,onChange(e,t,n){const r=function({width:e,height:t},n,r){return{setX:t=>r.x-e/2-(r.x-e/2-t)*n,setY:e=>r.y-t/2-(r.y-t/2-e)*n}}({width:ne,height:re},t/e,n);X(r.setX),H(r.setY)}}),{zoomIn:q,zoomOut:K}=He(V,Y,{min:.001});Pt((e=>"Minus"===e.code&&(ah?e.metaKey:e.ctrlKey)),K),Pt((e=>"Equal"===e.code&&(ah?e.metaKey:e.ctrlKey)),q);const{offset:Q,onStart:Z,mask:J}=ke((()=>{X((e=>e+Q.x)),H((e=>e+Q.y))})),ee=$i(),te=t.useContext(yd),ne=ee.width/2+te,re=ee.height,ie={x:j+Q.x,y:$+Q.y,scale:V,center:{x:ne/2,y:re/2}};Pt((e=>"ArrowLeft"===e.key&&(ah?e.metaKey:e.ctrlKey)),(e=>{X((e=>e+ne/10)),e.preventDefault()})),Pt((e=>"ArrowRight"===e.key&&(ah?e.metaKey:e.ctrlKey)),(e=>{X((e=>e-ne/10)),e.preventDefault()})),Pt((e=>"ArrowUp"===e.key&&(ah?e.metaKey:e.ctrlKey)),(e=>{H((e=>e+re/10)),e.preventDefault()})),Pt((e=>"ArrowDown"===e.key&&(ah?e.metaKey:e.ctrlKey)),(e=>{H((e=>e-re/10)),e.preventDefault()}));const oe=[];M.forEach(((e,t)=>{var n,r,i,o;if(l([t]))oe.push({content:e,path:[t]});else for(const a of s)if(2===a.length&&a[0]===t){const t=null==(o=null==(i=null==(r=null==(n=Yo(e.type))?void 0:n.getGeometries)?void 0:r.call(n,e))?void 0:i.lines)?void 0:o[a[1]];t&&oe.push({content:{type:"line",points:t},path:a})}}));const{editPoint:ae,updateEditPreview:se,onEditMove:le,onEditClick:ue,getEditAssistentContents:ce}=Ii((()=>R(L(B),L(G))),(e=>{var t,n;return null==(n=null==(t=Yo(e.type))?void 0:t.getEditPoints)?void 0:n.call(t,e,M)}),{scale:ie.scale,readOnly:x||"operate"===d.type,getAngleSnap:_?ia:void 0}),{getSnapAssistentContents:he,getSnapPoint:de,snapPoint:fe}=fo("operate"===d.type||void 0!==ae,na,v,ra,V),{commandMasks:pe,updateSelectedContents:ye,startCommand:me,commandInputs:ge,onCommandMove:ve,commandAssistentContents:_e,getCommandByHotkey:be}=As((({updateContents:e,nextCommand:t,repeatedly:n}={})=>{if(e){const[,...t]=Te(M,(t=>{e(t,s)}));R(L(t[0]),L(t[1]))}else R(L(B),L(G));n||(p(),c(),t&&Ve({type:"command",name:t},[]))}),(e=>de(Kr(e,ie),M,Ke)),_&&!fe,E,"operate"===d.type&&"command"===d.operate.type?d.operate.name:void 0,oe,V),{onStartSelect:xe,dragSelectMask:Ee}=vt(((e,t)=>{if(t)u(...function(e,t,n,r,i,o){const a=[],s=(l=t,u=n,{start:{x:Math.min(l.x,u.x),y:Math.min(l.y,u.y)},end:{x:Math.max(l.x,u.x),y:Math.max(l.y,u.y)}});var l,u;const c=t.x>n.x;return e.forEach(((t,n)=>{if((!o||o(t))&&(null==i?void 0:i([n]))){const i=r(t);if(null==i?void 0:i.getCircle){const{circle:e,bounding:r}=i.getCircle(t);if(rn(r.start,s)&&rn(r.end,s))a.push([n]);else if(c){const t=function(e,t){const n=sn(t),r=Array.from(ln(n));return Math.min(...r.map((t=>Yt(e,...t))))}(e,s),r=function(e,t){const n=sn(t);return Math.max(...n.map((t=>Qt(e,t))))}(e,s);t<=e.r&&r>=e.r&&a.push([n])}}else if(null==i?void 0:i.getGeometries){const{lines:r,bounding:o,regions:l}=i.getGeometries(t,e);if(o&&rn(o.start,s)&&rn(o.end,s))a.push([n]);else if(c){for(const e of r)if(an(...e,s))return void a.push([n]);if(l)for(const e of l)for(const t of e.lines)if(an(...t,s))return void a.push([n])}}}})),a}(M,Kr(e,ie),Kr(t,ie),ra,h,Bs));else{const e=[];M.forEach((t=>{const n=Yo(t.type);if(null==n?void 0:n.getCircle){const{bounding:r}=n.getCircle(t);e.push(r.start,r.end)}else if(null==n?void 0:n.getGeometries){const{bounding:r}=n.getGeometries(t,S);r&&e.push(r.start,r.end)}}));const t=function(e,{width:t,height:n},r,i=.8){if(e&&e.start.x<e.end.x&&e.start.y<e.end.y){const o=Math.min(t/(e.end.x-e.start.x),n/(e.end.y-e.start.y))*i;return{scale:o,x:(r.x-en(e.start.x,e.end.x))*o,y:(r.y-en(e.start.y,e.end.y))*o}}}(on(e),{width:ne,height:re},ie.center);t&&(Y(t.scale),X(t.x),H(t.y))}})),Se=[...he((e=>ih(rh({type:"circle"},e),{strokeColor:65280})),(e=>ih(rh({type:"rect"},e),{angle:0,strokeColor:65280})),(e=>({type:"polyline",points:e,strokeColor:65280}))),..._e];let we;if(se){const[e,t,n]=Te(M,(e=>{const t=se((t=>aa(e,t)));(null==t?void 0:t.assistentContents)&&Se.push(...t.assistentContents)}));we=e,B.push(...t),G.push(...n)}const Pe=ye(S);Se.push(...Pe.assistentContents);for(const[e,t]of Pe.patches)B.push(...e),G.push(...t);for(const{content:e,path:t}of oe)if(1===t.length){let n=e;ae&&Hi(ae.path,t)&&we&&(n=null!=(r=aa(we,t))?r:e),Se.push(...ce(n,(e=>ih(rh({type:"rect"},e),{fillColor:16777215,angle:0}))))}Pt((e=>"KeyZ"===e.code&&!e.shiftKey&&(ah?e.metaKey:e.ctrlKey)),(e=>{w(e),c()})),Pt((e=>"KeyZ"===e.code&&e.shiftKey&&(ah?e.metaKey:e.ctrlKey)),(e=>{A(e),c()})),Pt((e=>"KeyA"===e.code&&!e.shiftKey&&(ah?e.metaKey:e.ctrlKey)),(e=>{u(...M.map(((e,t)=>[t]))),e.preventDefault()})),Pt((e=>"Digit0"===e.code&&!e.shiftKey&&(ah?e.metaKey:e.ctrlKey)),(e=>{Y(1),X(0),H(0),e.preventDefault()})),t.useEffect((()=>e.setCanUndo(O)),[O]),t.useEffect((()=>e.setCanRedo(P)),[P]),t.useEffect((()=>{e.setOperation("select"!==d.type?d.operate.name:void 0)}),[d]);const[Oe,Re]=t.useState([]);t.useImperativeHandle(n,(()=>({handlePatchesEvent(e){try{C(e.patches,e.reversePatches,e.operator)}catch(e){console.error(e)}},handleSelectionEvent(e){Re(Ae(Oe,(t=>{const n=Oe.findIndex((t=>t.operator===e.operator));n>=0?t[n].selection=e.selectedContents:t.push({selection:e.selectedContents,operator:e.operator})})))},undo:w,redo:A,startOperation:Ve,exitEditBlock(){D(void 0),c()}})),[C]);const{input:Ce,inputPosition:Ie,setInputPosition:Ne,setCursorPosition:Me,clearText:De}=lr(g,"operate"===d.type||x?void 0:(e,t)=>{if("Enter"===e.key&&t){const n=be(t);n&&Ve({type:"command",name:n}),De(),e.stopPropagation()}},{hideIfNoInput:!0,inputStyle:{textTransform:"uppercase"}});let Le=Ce;!x&&Ce&&E&&(Le=t.cloneElement(Ce,{style:oa}));const Fe=Oo((e=>{const t={x:e.clientX,y:e.clientY},n=de(Kr(t,ie),M,Ke);"operate"===d.type&&"command"===d.operate.type&&me(d.operate.name,n),"operate"===d.type||Ze||(ae?ue(n):I.length>0?(u(...I),N()):xe(e))})),Ue=Oo((e=>{"operate"===d.type&&"move canvas"===d.operate.name&&Z({x:e.clientX,y:e.clientY})})),Be=Oo((e=>{const t={x:e.clientX,y:e.clientY};Ne(t);const n=Kr(t,ie);Me(n),U({x:Math.round(n.x),y:Math.round(n.y)}),"operate"===d.type&&"command"===d.operate.type&&ve(de(n,M,Ke),t),"operate"===d.type||Ze||(le(de(n,M,Ke),oe),N(function(e,t,n,r,i=!1,o,a=3){for(let s=0;s<e.length;s++){const l=e[s];if(o&&!o(l))continue;const u=r(l);if(null==u?void 0:u.getCircle){const{circle:e,fill:r}=u.getCircle(l);if(r&&n([s])&&Qt(e,t)<=e.r)return[s];if(n([s])&&Zt(Qt(e,t),e.r)<=a)return[s]}else if(null==u?void 0:u.getGeometries){const{lines:r,regions:o}=u.getGeometries(l,e);for(let e=0;e<r.length;e++)if(Yt(t,...r[e])<=a){if(i&&u.canSelectPart&&n([s,e]))return[s,e];if(n([s]))return[s]}if(o)for(let e=0;e<o.length;e++)if(Nn(t,o[e].points)){if(i&&u.canSelectPart&&n([s,e]))return[s,e+r.length];if(n([s]))return[s]}}}}(M,n,h,ra,d.select.part,Bs)))})),[Ge,ze]=t.useState(),Ve=(e,t=s)=>{if(ze(e),"command"===e.type){const n=ws(e.name);if(n){const r={count:n.selectCount,part:"select part"===n.selectType,selectable(e){var t,r;const i=aa(M,e);return!!i&&(null==(r=null==(t=n.contentSelectable)?void 0:t.call(n,i,M))||r)}},{result:i,needSelect:o}=a(r.selectable,r.count,t);if(o)return void y(r,e);if(f(e,i))return}}m(e),F&&ve(de(F,M,Ke),Ie)},Ye=Oo((e=>{Ge&&Ve(Ge),e.preventDefault()})),[We,qe]=t.useState(),Ke=e=>We?We.search({x:e.start.x,y:e.start.y,w:e.end.x-e.start.x,h:e.end.y-e.start.y}):[],Qe=Ke({start:Kr({x:0,y:0},ie),end:Kr({x:ne,y:re},ie)});Us.clear(),Us.add(...Qe),Us.add(...Se);const Ze=Qe.length>1e3,Je=e=>{var t,n;const r=Yc()();for(const i of e){const o=null==(n=null==(t=Yo(i.type))?void 0:t.getGeometries)?void 0:n.call(t,i,e);(null==o?void 0:o.bounding)&&r.insert({x:o.bounding.start.x,y:o.bounding.start.y,w:o.bounding.end.x-o.bounding.start.x,h:o.bounding.end.y-o.bounding.start.y},i)}qe(r)};return t.useEffect((()=>{Je(e.initialState)}),[e.initialState]),console.info(Date.now()-o,Qe.length),t.createElement("div",{ref:Ot(z,W)},t.createElement("div",{style:{cursor:null!=(i=null==ae?void 0:ae.cursor)?i:"operate"===d.type&&"move canvas"===d.operate.name?"grab":"crosshair",position:"absolute",inset:"0px"},onMouseMove:Be},We&&t.createElement(ks,{type:b,contents:M,previewPatches:0===B.length?void 0:B,assistentContents:0===Se.length?void 0:Se,selected:s,othersSelectedContents:Oe,hovering:I,onClick:Fe,onMouseDown:Ue,onContextMenu:Ye,x:ie.x,y:ie.y,scale:ie.scale,width:ne,height:re,backgroundColor:e.backgroundColor,simplified:Ze}),F&&t.createElement("span",{style:{position:"absolute"}},F.x,",",F.y),pe,Le,!x&&ge),Ee,J)}));var uh=Object.defineProperty,ch=Object.defineProperties,hh=Object.getOwnPropertyDescriptors,dh=Object.getOwnPropertySymbols,fh=Object.prototype.hasOwnProperty,ph=Object.prototype.propertyIsEnumerable,yh=(e,t,n)=>t in e?uh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mh=(e,t)=>{for(var n in t||(t={}))fh.call(t,n)&&yh(e,n,t[n]);if(dh)for(var n of dh(t))ph.call(t,n)&&yh(e,n,t[n]);return e},gh=(e,t)=>ch(e,hh(t)),vh=Object.defineProperty,_h=Object.defineProperties,bh=Object.getOwnPropertyDescriptors,xh=Object.getOwnPropertySymbols,Eh=Object.prototype.hasOwnProperty,Sh=Object.prototype.propertyIsEnumerable,Th=(e,t,n)=>t in e?vh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wh=(e,t)=>{for(var n in t||(t={}))Eh.call(t,n)&&Th(e,n,t[n]);if(xh)for(var n of xh(t))Sh.call(t,n)&&Th(e,n,t[n]);return e},Ah=(e,t)=>_h(e,bh(t));const Ph=[{x:500,y:100,width:100,height:100,url:"https://interactive-examples.mdn.mozilla.net/media/cc0-images/grapefruit-slice-332-332.jpg"},{x:20,y:200,width:300,height:300,url:"https://interactive-examples.mdn.mozilla.net/media/cc0-images/grapefruit-slice-332-332.jpg"},{x:200,y:20,width:200,height:200,url:"https://interactive-examples.mdn.mozilla.net/media/cc0-images/grapefruit-slice-332-332.jpg"}],Oh={count:0};var Rh=Object.defineProperty,Ch=Object.getOwnPropertySymbols,Ih=Object.prototype.hasOwnProperty,Nh=Object.prototype.propertyIsEnumerable,Mh=(e,t,n)=>t in e?Rh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kh=(e,t)=>{for(var n in t||(t={}))Ih.call(t,n)&&Mh(e,n,t[n]);if(Ch)for(var n of Ch(t))Nh.call(t,n)&&Mh(e,n,t[n]);return e};const Dh=new Fn,Lh=[{x:300,y:200,r:100},{x:450,y:350,r:130}];var Fh=Object.defineProperty,Uh=Object.defineProperties,Bh=Object.getOwnPropertyDescriptors,Gh=Object.getOwnPropertySymbols,jh=Object.prototype.hasOwnProperty,$h=Object.prototype.propertyIsEnumerable,zh=(e,t,n)=>t in e?Fh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const Xh={count:0},Hh=[{path:"circle-arc-click-create.story",name:"",Component:()=>{const[e,n]=t.useState([]),{circle:r,arc:i,onClick:o,onMove:a,input:s}=ci("center radius",(t=>{n(Ae(e,(e=>{e.push(t)})))})),l=r||i;return t.createElement("div",{onClick:e=>o({x:e.clientX,y:e.clientY}),onMouseMove:e=>a({x:e.clientX,y:e.clientY}),style:{height:"100%"}},t.createElement("svg",{viewBox:"0 0 800 600",width:800,height:600,xmlns:"http://www.w3.org/2000/svg",fill:"none",style:{position:"absolute",left:0,top:0},onClick:e=>o({x:e.clientX,y:e.clientY}),onMouseMove:e=>a({x:e.clientX,y:e.clientY})},l&&t.createElement("circle",{cx:l.x,cy:l.y,r:l.r,stroke:"#00ff00",strokeDasharray:"4"}),[...e,i].map(((e,n)=>{if(e){const r=Gr(e.x,e.y,e.r,e.endAngle),i=Gr(e.x,e.y,e.r,e.startAngle);return t.createElement("path",{key:n,d:`M ${r.x} ${r.y} A ${e.r} ${e.r} 0 ${e.endAngle-e.startAngle<=180?"0":"1"} 0 ${i.x} ${i.y}`,stroke:"#00ff00"})}return null}))),s)},code:"() => {\n  const [contents, setContents] = React.useState<Arc[]>([])\n  const { circle, arc, onClick, onMove, input } = useCircleArcClickCreate('center radius', (c) => {\n    setContents(produce(contents, (draft) => {\n      draft.push(c)\n    }))\n  })\n  const arcCircle = circle || arc\n  return (\n    <div\n      onClick={(e) => onClick({ x: e.clientX, y: e.clientY })}\n      onMouseMove={(e) => onMove({ x: e.clientX, y: e.clientY })}\n      style={{ height: '100%' }}\n    >\n      <svg\n        viewBox=\"0 0 800 600\"\n        width={800}\n        height={600}\n        xmlns=\"http://www.w3.org/2000/svg\"\n        fill='none'\n        style={{ position: 'absolute', left: 0, top: 0 }}\n        onClick={(e) => onClick({ x: e.clientX, y: e.clientY })}\n        onMouseMove={(e) => onMove({ x: e.clientX, y: e.clientY })}\n      >\n        {arcCircle && <circle\n          cx={arcCircle.x}\n          cy={arcCircle.y}\n          r={arcCircle.r}\n          stroke='#00ff00'\n          strokeDasharray='4'\n        />}\n        {[...contents, arc].map((content, i) => {\n          if (content) {\n            const start = polarToCartesian(content.x, content.y, content.r, content.endAngle)\n            const end = polarToCartesian(content.x, content.y, content.r, content.startAngle)\n            return (\n              <path\n                key={i}\n                d={`M ${start.x} ${start.y} A ${content.r} ${content.r} 0 ${content.endAngle - content.startAngle <= 180 ? \"0\" : \"1\"} 0 ${end.x} ${end.y}`}\n                stroke='#00ff00'\n              />\n            )\n          }\n          return null\n        })}\n      </svg>\n      {input}\n    </div>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"circle-arc-edit.story",name:"",Component:()=>{const[e,n]=t.useState({x:200,y:200,r:100,startAngle:-30,endAngle:120}),{offset:r,onStart:i,mask:o}=function(e,r){const[i,o]=t.useState({x:0,y:0,r:0,startAngle:0,endAngle:0}),[s,l]=t.useState(),{onStart:u,mask:c}=vr((()=>n(a)),((e,t)=>{if(t=Zn(e.data,t,void 0),l(t),"center"===e.data.type){const n=t.x-e.x,r=t.y-e.y;o({x:n,y:r,r:0,startAngle:0,endAngle:0,data:e.data.data})}else if("radius"===e.data.type){const n=Qt(t,e.data)-e.data.r;o({x:0,y:0,r:n,startAngle:0,endAngle:0,data:e.data.data})}else if("start angle"===e.data.type){const n=180*Math.atan2(t.y-e.data.y,t.x-e.data.x)/Math.PI-e.data.startAngle;o({x:0,y:0,r:0,startAngle:n,endAngle:0,data:e.data.data})}else if("end angle"===e.data.type){const n=180*Math.atan2(t.y-e.data.y,t.x-e.data.x)/Math.PI-e.data.endAngle;o({x:0,y:0,r:0,startAngle:0,endAngle:n,data:e.data.data})}}),(()=>o({x:0,y:0,r:0,startAngle:0,endAngle:0})),r);return{offset:i,onStart:u,mask:c,cursorPosition:s}}(),a=Ae(e,(e=>{r&&(e.x+=r.x,e.y+=r.y,e.r+=r.r,e.startAngle+=r.startAngle,e.endAngle+=r.endAngle,In(e))})),s=Gr(a.x,a.y,a.r,a.endAngle),l=Gr(a.x,a.y,a.r,a.startAngle);return t.createElement(t.Fragment,null,t.createElement("svg",{viewBox:"0 0 800 600",width:800,height:600,xmlns:"http://www.w3.org/2000/svg",fill:"none",style:{position:"absolute",left:0,top:0}},t.createElement("path",{d:`M ${s.x} ${s.y} A ${a.r} ${a.r} 0 ${a.endAngle-a.startAngle<=180?"0":"1"} 0 ${l.x} ${l.y}`,stroke:"#00ff00"})),t.createElement(hi,Fo(Lo({},a),{onMouseDown:(e,t,n)=>i(e,Fo(Lo({},a),{type:t,cursor:n}))})),o)},code:'() => {\n  const [content, setContent] = React.useState<Arc>({ x: 200, y: 200, r: 100, startAngle: -30, endAngle: 120 })\n  const { offset, onStart, mask } = useCircleArcEdit(() => setContent(circleArc))\n  const circleArc = produce(content, (draft) => {\n    if (offset) {\n      draft.x += offset.x\n      draft.y += offset.y\n      draft.r += offset.r\n      draft.startAngle += offset.startAngle\n      draft.endAngle += offset.endAngle\n      normalizeAngleRange(draft)\n    }\n  })\n  const start = polarToCartesian(circleArc.x, circleArc.y, circleArc.r, circleArc.endAngle)\n  const end = polarToCartesian(circleArc.x, circleArc.y, circleArc.r, circleArc.startAngle)\n  return (\n    <>\n      <svg\n        viewBox="0 0 800 600"\n        width={800}\n        height={600}\n        xmlns="http://www.w3.org/2000/svg"\n        fill=\'none\'\n        style={{ position: \'absolute\', left: 0, top: 0 }}\n      >\n        <path\n          d={`M ${start.x} ${start.y} A ${circleArc.r} ${circleArc.r} 0 ${circleArc.endAngle - circleArc.startAngle <= 180 ? "0" : "1"} 0 ${end.x} ${end.y}`}\n          stroke=\'#00ff00\'\n        />\n      </svg>\n      <CircleArcEditBar\n        {...circleArc}\n        onMouseDown={(e, type, cursor) => onStart(e, { ...circleArc, type, cursor })}\n      />\n      {mask}\n    </>\n  )\n}',props:[],componentName:"",parentComponentName:""},{path:"circle-click-create.story",name:"",Component:()=>{const[e,n]=t.useState([]),{circle:r,onClick:i,onMove:o,input:a}=Kn("center radius",(t=>{n(Ae(e,(e=>{e.push(t)})))}));return t.createElement("div",{onClick:e=>i({x:e.clientX,y:e.clientY}),onMouseMove:e=>o({x:e.clientX,y:e.clientY}),style:{height:"100%"}},[...e,r].map(((e,n)=>e&&t.createElement("div",{key:n,style:{width:2*e.r+"px",height:2*e.r+"px",left:e.x-e.r+"px",top:e.y-e.r+"px",borderRadius:`${e.r}px`,position:"absolute",border:"1px solid #00ff00"}}))),a)},code:"() => {\n  const [contents, setContents] = React.useState<Circle[]>([])\n  const { circle, onClick, onMove, input } = useCircleClickCreate('center radius', (c) => {\n    setContents(produce(contents, (draft) => {\n      draft.push(c)\n    }))\n  })\n\n  return (\n    <div\n      onClick={(e) => onClick({ x: e.clientX, y: e.clientY })}\n      onMouseMove={(e) => onMove({ x: e.clientX, y: e.clientY })}\n      style={{ height: '100%' }}\n    >\n      {[...contents, circle].map((content, i) => content && (\n        <div\n          key={i}\n          style={{\n            width: `${content.r * 2}px`,\n            height: `${content.r * 2}px`,\n            left: `${content.x - content.r}px`,\n            top: `${content.y - content.r}px`,\n            borderRadius: `${content.r}px`,\n            position: 'absolute',\n            border: '1px solid #00ff00',\n          }}\n        >\n        </div>\n      ))}\n      {input}\n    </div>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"circle-edit.story",name:"",Component:()=>{const[e,n]=t.useState({x:300,y:200,r:100}),{offset:r,onStart:i,mask:o}=function(e,r){const[i,o]=t.useState({x:0,y:0,r:0}),[s,l]=t.useState(),{onStart:u,mask:c}=vr((()=>n(a)),((e,t)=>{if(t=Zn(e.data,t,void 0),l(t),"center"===e.data.type){const n=t.x-e.x,r=t.y-e.y;o({x:n,y:r,r:0,data:e.data.data})}else{const n=Qt(t,e.data)-e.data.r;o({x:0,y:0,r:n,data:e.data.data})}}),(()=>o({x:0,y:0,r:0})),r);return{cursorPosition:s,offset:i,onStart:u,mask:c}}(),a=Ae(e,(e=>{e.x+=r.x,e.y+=r.y,e.r+=r.r}));return t.createElement(t.Fragment,null,t.createElement("div",{style:{width:2*a.r+"px",height:2*a.r+"px",left:a.x-a.r+"px",top:a.y-a.r+"px",borderRadius:`${a.r}px`,position:"absolute",border:"1px solid #00ff00"}}),t.createElement(cr,{x:a.x,y:a.y,radius:a.r,onMouseDown:(t,n,r)=>i(t,((e,t)=>Bo(e,Go(t)))(((e,t)=>{for(var n in t||(t={}))$o.call(t,n)&&Xo(e,n,t[n]);if(jo)for(var n of jo(t))zo.call(t,n)&&Xo(e,n,t[n]);return e})({},e),{type:n,cursor:r}))}),o)},code:"() => {\n  const [content, setContent] = React.useState<Circle>({ x: 300, y: 200, r: 100 })\n\n  const { offset, onStart, mask } = useCircleEdit(() => setContent(circle))\n  const circle = produce(content, (draft) => {\n    draft.x += offset.x\n    draft.y += offset.y\n    draft.r += offset.r\n  })\n\n  return (\n    <>\n      <div\n        style={{\n          width: `${circle.r * 2}px`,\n          height: `${circle.r * 2}px`,\n          left: `${circle.x - circle.r}px`,\n          top: `${circle.y - circle.r}px`,\n          borderRadius: `${circle.r}px`,\n          position: 'absolute',\n          border: '1px solid #00ff00',\n        }}\n      >\n      </div>\n      <CircleEditBar\n        x={circle.x}\n        y={circle.y}\n        radius={circle.r}\n        onMouseDown={(e, type, cursor) => onStart(e, { ...content, type, cursor })}\n      />\n      {mask}\n    </>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"combination-2.story",name:"",Component:()=>{const[e,n]=t.useState(),[r,i]=t.useState(!0);t.useEffect((()=>{var e;e=function*(){try{const e=yield fetch(`https://storage.yorkyao.com/${sh}`),t=yield e.json();n(t)}catch(e){n([])}},new Promise(((t,n)=>{var r=t=>{try{o(e.next(t))}catch(e){n(e)}},i=t=>{try{o(e.throw(t))}catch(e){n(e)}},o=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,i);o((e=e.apply(undefined,null)).next())}))}),[]);const o=t.useRef();t.useEffect((()=>(o.current=new WebSocket(`wss://storage.yorkyao.com/ws/composable-editor-canvas?key=${sh}`),(0,Ho.V)(o.current,'{"method":"ping"}'),()=>{var e;return null==(e=o.current)?void 0:e.close()})),[]);const a=t.useRef(null);t.useEffect((()=>{o.current&&a.current&&(o.current.onmessage=e=>{if(a.current&&"string"==typeof e.data&&e.data&&r){const t=JSON.parse(e.data);"patch"===t.method?a.current.handlePatchesEvent(ih(rh({},t),{patches:t.operations.map((e=>ih(rh({},e),{path:e.path.substring(1).split("/")})))})):"selection"===t.method&&a.current.handleSelectionEvent(t)}})}),[o.current,a.current]);const[s,l]=t.useState(!1),[u,c]=t.useState(!0),[h,d]=t.useState(po),[f,p]=t.useState(),[y,m]=t.useState(!1),[g,v]=t.useState(!1),[_,b]=t.useState(),[x,E]=t.useState(!1),[S,T]=t.useState(16777215),w=t.useContext(yd);return t.createElement("div",{style:{height:"100%"}},e&&t.createElement(lh,{ref:a,initialState:e,onApplyPatchesFromSelf:(e,t)=>{if(o.current&&o.current.readyState===o.current.OPEN&&r){const n=e.map((e=>ih(rh({},e),{path:e.path.map((e=>`/${e}`)).join("")})));o.current.send(JSON.stringify({method:"patch",operations:n,reversePatches:t,operator:oh}))}},onSendSelection:e=>{o.current&&o.current.readyState===o.current.OPEN&&r&&o.current.send(JSON.stringify({method:"selection",selectedContents:e,operator:oh}))},readOnly:s,angleSnapEnabled:u,snapTypes:h,renderTarget:f,setCanUndo:m,setCanRedo:v,setOperation:b,inputFixed:x,backgroundColor:S}),t.createElement("div",{style:{position:"fixed",width:`calc(50% + ${w}px)`}},["move canvas"].map((e=>t.createElement("button",{onClick:()=>{var t;return null==(t=a.current)?void 0:t.startOperation({type:"non command",name:e})},key:e,style:{position:"relative",borderColor:_===e?"red":void 0}},e))),t.createElement("button",{onClick:()=>(n(void 0),i(!1),void setTimeout((()=>{const e=[];for(let t=0;t<100;t++)for(let n=0;n<100;n++){const r=Math.random();r<.3?e.push({type:"circle",x:100*t+50*(Math.random()-.5),y:100*n+50*(Math.random()-.5),r:100*Math.random()}):r<.7?e.push({type:"rect",x:100*t+50*(Math.random()-.5),y:100*n+50*(Math.random()-.5),width:100*Math.random(),height:100*Math.random(),angle:360*Math.random()-180}):e.push({type:"ellipse",cx:100*t+50*(Math.random()-.5),cy:100*n+50*(Math.random()-.5),rx:100*Math.random(),ry:100*Math.random(),angle:360*Math.random()-180})}n(e)}),0)),style:{position:"relative"}},"add mock data"),!s&&["create line","create polyline","create polygon","create rect","2 points","3 points","center radius","center diameter","create tangent tangent radius circle","create arc","ellipse center","ellipse endpoint","create ellipse arc","spline","spline fitting","move","delete","rotate","clone","explode","mirror","create block","create block reference","start edit block","fillet","chamfer","break","measure","create radial dimension","create linear dimension","create group","fill"].map((e=>t.createElement("button",{onClick:()=>{var t;return null==(t=a.current)?void 0:t.startOperation({type:"command",name:e})},key:e,style:{position:"relative",borderColor:_===e?"red":void 0}},e))),!s&&t.createElement("button",{onClick:()=>{var e;return null==(e=a.current)?void 0:e.exitEditBlock()},style:{position:"relative"}},"exit edit block"),!s&&t.createElement("button",{disabled:!y,onClick:()=>{var e;return null==(e=a.current)?void 0:e.undo()},style:{position:"relative"}},"undo"),!s&&t.createElement("button",{disabled:!g,onClick:()=>{var e;return null==(e=a.current)?void 0:e.redo()},style:{position:"relative"}},"redo"),t.createElement("select",{onChange:e=>p(e.target.value),style:{position:"relative"}},Fs().map((e=>t.createElement("option",{key:e,value:e},e)))),!s&&po.map((e=>t.createElement("span",{key:e,style:{position:"relative"}},t.createElement("input",{type:"checkbox",checked:h.includes(e),id:e,onChange:t=>d(t.target.checked?[...h,e]:h.filter((t=>t!==e)))}),t.createElement("label",{htmlFor:e},e)))),!s&&t.createElement("span",{style:{position:"relative"}},t.createElement("input",{type:"checkbox",checked:u,id:"angle snap",onChange:e=>c(e.target.checked)}),t.createElement("label",{htmlFor:"angle snap"},"angle snap")),t.createElement("span",{style:{position:"relative"}},t.createElement("input",{type:"checkbox",checked:s,id:"read only",onChange:e=>l(e.target.checked)}),t.createElement("label",{htmlFor:"read only"},"read only")),!s&&t.createElement("span",{style:{position:"relative"}},t.createElement("input",{type:"checkbox",checked:x,id:"input fixed",onChange:e=>E(e.target.checked)}),t.createElement("label",{htmlFor:"input fixed"},"input fixed")),t.createElement("input",{type:"color",style:{position:"relative"},value:jr(S),onChange:e=>T(+`0x${e.target.value.slice(1)}`)})))},code:"() => {\n  const [initialState, setInitialState] = React.useState<BaseContent[]>()\n  const [coEdit, setCoEdit] = React.useState(true)\n  React.useEffect(() => {\n    (async () => {\n      try {\n        const res = await fetch(`https://storage.yorkyao.com/${key}`)\n        const json: BaseContent[] = await res.json()\n        setInitialState(json)\n      } catch {\n        setInitialState([])\n      }\n    })()\n  }, [])\n\n  const ws = React.useRef<WebSocket>()\n  React.useEffect(() => {\n    ws.current = new WebSocket(`wss://storage.yorkyao.com/ws/composable-editor-canvas?key=${key}`)\n    setWsHeartbeat(ws.current, '{\"method\":\"ping\"}')\n    return () => ws.current?.close()\n  }, [])\n\n  const onApplyPatchesFromSelf = (patches: Patch[], reversePatches: Patch[]) => {\n    if (ws.current && ws.current.readyState === ws.current.OPEN && coEdit) {\n      const operations = patches.map((p) => ({ ...p, path: p.path.map((c) => `/${c}`).join('') }))\n      ws.current.send(JSON.stringify({ method: 'patch', operations, reversePatches, operator: me }))\n    }\n  }\n  const onSendSelection = (selectedContents: readonly number[]) => {\n    if (ws.current && ws.current.readyState === ws.current.OPEN && coEdit) {\n      ws.current.send(JSON.stringify({ method: 'selection', selectedContents, operator: me }))\n    }\n  }\n\n  const addMockData = () => {\n    setInitialState(undefined)\n    setCoEdit(false)\n    setTimeout(() => {\n      const json: (CircleContent | RectContent | EllipseContent)[] = []\n      const max = 100\n      for (let i = 0; i < max; i++) {\n        for (let j = 0; j < max; j++) {\n          const r = Math.random()\n          if (r < 0.3) {\n            json.push({\n              type: 'circle',\n              x: i * 100 + (Math.random() - 0.5) * 50,\n              y: j * 100 + (Math.random() - 0.5) * 50,\n              r: Math.random() * 100,\n            })\n          } else if (r < 0.7) {\n            json.push({\n              type: 'rect',\n              x: i * 100 + (Math.random() - 0.5) * 50,\n              y: j * 100 + (Math.random() - 0.5) * 50,\n              width: Math.random() * 100,\n              height: Math.random() * 100,\n              angle: Math.random() * 360 - 180,\n            })\n          } else {\n            json.push({\n              type: 'ellipse',\n              cx: i * 100 + (Math.random() - 0.5) * 50,\n              cy: j * 100 + (Math.random() - 0.5) * 50,\n              rx: Math.random() * 100,\n              ry: Math.random() * 100,\n              angle: Math.random() * 360 - 180,\n            })\n          }\n        }\n      }\n      setInitialState(json)\n    }, 0)\n  }\n\n  const editorRef = React.useRef<CADEditorRef | null>(null)\n  React.useEffect(() => {\n    if (!ws.current || !editorRef.current) {\n      return\n    }\n    ws.current.onmessage = (data: MessageEvent<unknown>) => {\n      if (editorRef.current && typeof data.data === 'string' && data.data && coEdit) {\n        const json = JSON.parse(data.data) as\n          | { method: 'patch', operations: (Omit<Patch, 'path'> & { path: string })[], reversePatches: Patch[], operator: string }\n          | { method: 'selection', selectedContents: number[], operator: string }\n        if (json.method === 'patch') {\n          editorRef.current.handlePatchesEvent({\n            ...json,\n            patches: json.operations.map((p) => ({ ...p, path: p.path.substring(1).split('/') }))\n          })\n        } else if (json.method === 'selection') {\n          editorRef.current.handleSelectionEvent(json)\n        }\n      }\n    }\n  }, [ws.current, editorRef.current])\n\n  const [readOnly, setReadOnly] = React.useState(false)\n  const [angleSnapEnabled, setAngleSnapEnabled] = React.useState(true)\n  const [snapTypes, setSnapTypes] = React.useState<readonly SnapPointType[]>(allSnapTypes)\n  const [renderTarget, setRenderTarget] = React.useState<string>()\n  const [canUndo, setCanUndo] = React.useState(false)\n  const [canRedo, setCanRedo] = React.useState(false)\n  const [operation, setOperation] = React.useState<string>()\n  const [inputFixed, setInputFixed] = React.useState(false)\n  const [backgroundColor, setBackgroundColor] = React.useState(0xffffff)\n  const offsetX = React.useContext(OffsetXContext)\n\n  return (\n    <div style={{ height: '100%' }}>\n      {initialState && (\n        <CADEditor\n          ref={editorRef}\n          initialState={initialState}\n          onApplyPatchesFromSelf={onApplyPatchesFromSelf}\n          onSendSelection={onSendSelection}\n          readOnly={readOnly}\n          angleSnapEnabled={angleSnapEnabled}\n          snapTypes={snapTypes}\n          renderTarget={renderTarget}\n          setCanUndo={setCanUndo}\n          setCanRedo={setCanRedo}\n          setOperation={setOperation}\n          inputFixed={inputFixed}\n          backgroundColor={backgroundColor}\n        />\n      )}\n      <div style={{ position: 'fixed', width: `calc(50% + ${offsetX}px)` }}>\n        {(['move canvas'] as const).map((p) => <button onClick={() => editorRef.current?.startOperation({ type: 'non command', name: p })} key={p} style={{ position: 'relative', borderColor: operation === p ? 'red' : undefined }}>{p}</button>)}\n        <button onClick={() => addMockData()} style={{ position: 'relative' }}>add mock data</button>\n        {!readOnly && ['create line', 'create polyline', 'create polygon', 'create rect', '2 points', '3 points', 'center radius', 'center diameter', 'create tangent tangent radius circle', 'create arc', 'ellipse center', 'ellipse endpoint', 'create ellipse arc', 'spline', 'spline fitting', 'move', 'delete', 'rotate', 'clone', 'explode', 'mirror', 'create block', 'create block reference', 'start edit block', 'fillet', 'chamfer', 'break', 'measure', 'create radial dimension', 'create linear dimension', 'create group', 'fill'].map((p) => <button onClick={() => editorRef.current?.startOperation({ type: 'command', name: p })} key={p} style={{ position: 'relative', borderColor: operation === p ? 'red' : undefined }}>{p}</button>)}\n        {!readOnly && <button onClick={() => editorRef.current?.exitEditBlock()} style={{ position: 'relative' }}>exit edit block</button>}\n        {!readOnly && <button disabled={!canUndo} onClick={() => editorRef.current?.undo()} style={{ position: 'relative' }}>undo</button>}\n        {!readOnly && <button disabled={!canRedo} onClick={() => editorRef.current?.redo()} style={{ position: 'relative' }}>redo</button>}\n        <select onChange={(e) => setRenderTarget(e.target.value)} style={{ position: 'relative' }}>\n          {getAllRendererTypes().map((type) => <option key={type} value={type}>{type}</option>)}\n        </select>\n        {!readOnly && allSnapTypes.map((type) => (\n          <span key={type} style={{ position: 'relative' }}>\n            <input type='checkbox' checked={snapTypes.includes(type)} id={type} onChange={(e) => setSnapTypes(e.target.checked ? [...snapTypes, type] : snapTypes.filter((d) => d !== type))} />\n            <label htmlFor={type}>{type}</label>\n          </span>\n        ))}\n        {!readOnly && <span style={{ position: 'relative' }}>\n          <input type='checkbox' checked={angleSnapEnabled} id='angle snap' onChange={(e) => setAngleSnapEnabled(e.target.checked)} />\n          <label htmlFor='angle snap'>angle snap</label>\n        </span>}\n        <span style={{ position: 'relative' }}>\n          <input type='checkbox' checked={readOnly} id='read only' onChange={(e) => setReadOnly(e.target.checked)} />\n          <label htmlFor='read only'>read only</label>\n        </span>\n        {!readOnly && <span style={{ position: 'relative' }}>\n          <input type='checkbox' checked={inputFixed} id='input fixed' onChange={(e) => setInputFixed(e.target.checked)} />\n          <label htmlFor='input fixed'>input fixed</label>\n        </span>}\n        <input type='color' style={{ position: 'relative' }} value={getColorString(backgroundColor)} onChange={(e) => setBackgroundColor(colorStringToNumber(e.target.value))} />\n      </div>\n    </div>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"drag-move.story",name:"",Component:()=>{const[e,n]=t.useState(0),[r,i]=t.useState(0),{offset:o,onStart:a,mask:s}=ke((()=>{n((e=>e+o.x)),i((e=>e+o.y))}));return t.createElement("div",{style:{width:"300px",height:"300px",overflow:"hidden",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid green"}},t.createElement("div",{style:{width:"800px",height:"800px",position:"absolute",transform:`translate(${e+o.x}px, ${r+o.y}px)`,background:"radial-gradient(50% 50% at 50% 50%, red 0%, white 100%)",cursor:"grab"},onMouseDown:e=>a({x:e.clientX,y:e.clientY})}),s)},code:"() => {\n  const [x, setX] = React.useState(0)\n  const [y, setY] = React.useState(0)\n  const { offset, onStart, mask } = useDragMove(() => {\n    setX((v) => v + offset.x)\n    setY((v) => v + offset.y)\n  })\n\n  return (\n    <div\n      style={{\n        width: '300px',\n        height: '300px',\n        overflow: 'hidden',\n        position: 'absolute',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        border: '1px solid green',\n      }}\n    >\n      <div\n        style={{\n          width: '800px',\n          height: '800px',\n          position: 'absolute',\n          transform: `translate(${x + offset.x}px, ${y + offset.y}px)`,\n          background: 'radial-gradient(50% 50% at 50% 50%, red 0%, white 100%)',\n          cursor: 'grab',\n        }}\n        onMouseDown={(e) => onStart({ x: e.clientX, y: e.clientY })}\n      ></div>\n      {mask}\n    </div>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"drag-resize.story",name:"",Component:()=>{const[e,n]=t.useState({x:200,y:200,width:100,height:100}),{offset:r,onStart:i,mask:o}=mt((()=>n(a)),{centeredScaling:e=>e.shiftKey,keepRatio:t=>t.metaKey?e.width/e.height:void 0}),a=Ae(e,(e=>{e.width+=r.width,e.height+=r.height,e.x+=r.x,e.y+=r.y}));return t.createElement(t.Fragment,null,t.createElement("div",{style:{width:`${a.width}px`,height:`${a.height}px`,left:`${a.x}px`,top:`${a.y}px`,boxSizing:"border-box",position:"absolute",background:"radial-gradient(50% 50% at 50% 50%, red 0%, white 100%)"}},t.createElement(lt,{onMouseDown:i})),o)},code:"() => {\n  const [content, setContent] = React.useState({\n    x: 200,\n    y: 200,\n    width: 100,\n    height: 100,\n  })\n  const { offset, onStart, mask } = useDragResize(\n    () => setContent(previewContent),\n    {\n      centeredScaling: (e) => e.shiftKey,\n      keepRatio: (e) => e.metaKey ? content.width / content.height : undefined,\n    },\n  )\n  const previewContent = produce(content, (draft) => {\n    draft.width += offset.width\n    draft.height += offset.height\n    draft.x += offset.x\n    draft.y += offset.y\n  })\n\n  return (\n    <>\n      <div\n        style={{\n          width: `${previewContent.width}px`,\n          height: `${previewContent.height}px`,\n          left: `${previewContent.x}px`,\n          top: `${previewContent.y}px`,\n          boxSizing: 'border-box',\n          position: 'absolute',\n          background: 'radial-gradient(50% 50% at 50% 50%, red 0%, white 100%)',\n        }}\n      >\n        <ResizeBar onMouseDown={onStart} />\n      </div>\n      {mask}\n    </>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"drag-rotate.story",name:"",Component:()=>{const[e,n]=t.useState({x:200,y:200,width:100,height:100,rotate:0,url:"https://interactive-examples.mdn.mozilla.net/media/cc0-images/grapefruit-slice-332-332.jpg"}),{offset:r,onStart:i,mask:o}=et((()=>n(a)),{transformOffset:(e,t)=>{if(t&&void 0!==e&&!t.shiftKey){const t=45*Math.round(e/45);Math.abs(t-e)<5&&(e=t)}return e}}),a=Ae(e,(e=>{void 0!==(null==r?void 0:r.angle)&&(e.rotate=r.angle)}));return t.createElement(t.Fragment,null,t.createElement("div",{style:{width:`${e.width}px`,height:`${e.width}px`,left:`${e.x}px`,top:`${e.y}px`,boxSizing:"border-box",position:"absolute",transform:`rotate(${a.rotate}deg)`,background:`url(${e.url})`,backgroundSize:"contain"}},t.createElement(tt,{onMouseDown:()=>i({x:e.x+e.width/2,y:e.y+e.height/2})})),o)},code:"() => {\n  const [content, setContent] = React.useState({\n    x: 200,\n    y: 200,\n    width: 100,\n    height: 100,\n    rotate: 0,\n    url: 'https://interactive-examples.mdn.mozilla.net/media/cc0-images/grapefruit-slice-332-332.jpg',\n  })\n  const { offset, onStart, mask } = useDragRotate(\n    () => setContent(previewContent),\n    {\n      transformOffset: (r, e) => {\n        if (e && r !== undefined && !e.shiftKey) {\n          const snap = Math.round(r / 45) * 45\n          if (Math.abs(snap - r) < 5) {\n            r = snap\n          }\n        }\n        return r\n      },\n    }\n  )\n  const previewContent = produce(content, (draft) => {\n    if (offset?.angle !== undefined) {\n      draft.rotate = offset.angle\n    }\n  })\n\n  return (\n    <>\n      <div\n        style={{\n          width: `${content.width}px`,\n          height: `${content.width}px`,\n          left: `${content.x}px`,\n          top: `${content.y}px`,\n          boxSizing: 'border-box',\n          position: 'absolute',\n          transform: `rotate(${previewContent.rotate}deg)`,\n          background: `url(${content.url})`,\n          backgroundSize: 'contain',\n        }}\n      >\n        <RotationBar onMouseDown={() => onStart({ x: content.x + content.width / 2, y: content.y + content.height / 2 })} />\n      </div>\n      {mask}\n    </>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"drag-select.story",name:"",Component:()=>{const[e,n]=t.useState([]),{onStartSelect:r,dragSelectMask:i}=vt(((t,r)=>{r&&n(Ae(e,(e=>{e.push({x:Math.min(t.x,r.x),y:Math.min(t.y,r.y),width:Math.abs(r.x-t.x),height:Math.abs(r.y-t.y)})})))}),(e=>e.shiftKey));return t.createElement("div",{onMouseDown:e=>r(e,void 0),style:{height:"100%"}},e.map(((e,n)=>t.createElement("div",{key:n,style:{width:`${e.width}px`,height:`${e.height}px`,left:`${e.x}px`,top:`${e.y}px`,position:"absolute",border:"1px solid green"}}))),i)},code:"() => {\n  const [contents, setContents] = React.useState<Region[]>([])\n  const { onStartSelect, dragSelectMask } = useDragSelect<number[] | undefined>((dragSelectStartPosition, dragSelectEndPosition) => {\n    if (dragSelectEndPosition) {\n      setContents(produce(contents, (draft) => {\n        draft.push({\n          x: Math.min(dragSelectStartPosition.x, dragSelectEndPosition.x),\n          y: Math.min(dragSelectStartPosition.y, dragSelectEndPosition.y),\n          width: Math.abs(dragSelectEndPosition.x - dragSelectStartPosition.x),\n          height: Math.abs(dragSelectEndPosition.y - dragSelectStartPosition.y),\n        })\n      }))\n    }\n  }, (e) => e.shiftKey)\n\n  return (\n    <div\n      onMouseDown={(e) => onStartSelect(e, undefined)}\n      style={{ height: '100%' }}\n    >\n      {contents.map((content, i) => (\n        <div\n          key={i}\n          style={{\n            width: `${content.width}px`,\n            height: `${content.height}px`,\n            left: `${content.x}px`,\n            top: `${content.y}px`,\n            position: 'absolute',\n            border: '1px solid green',\n          }}\n        >\n        </div>\n      ))}\n      {dragSelectMask}\n    </div>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"edit.story",name:"",Component:()=>{const[e,n]=t.useState({x:300,y:200,r:100}),{editPoint:r,updateEditPreview:i,onEditMove:o,onEditClick:a,getEditAssistentContents:s}=Ii((()=>n(u)),(e=>({editPoints:[{x:e.x,y:e.y,cursor:"move",update(e,{cursor:t,start:n}){e.x+=t.x-n.x,e.y+=t.y-n.y}},{x:e.x-e.r,y:e.y,cursor:"ew-resize",update(e,{cursor:t}){e.r=Qt(t,e)}},{x:e.x,y:e.y-e.r,cursor:"ns-resize",update(e,{cursor:t}){e.r=Qt(t,e)}},{x:e.x+e.r,y:e.y,cursor:"ew-resize",update(e,{cursor:t}){e.r=Qt(t,e)}},{x:e.x,y:e.y+e.r,cursor:"ns-resize",update(e,{cursor:t}){e.r=Qt(t,e)}}]}))),l=[],u=Ae(e,(e=>{null==i||i((()=>e)),l.push(...s(e,(e=>e)))}));return t.createElement(t.Fragment,null,t.createElement("svg",{viewBox:"0 0 800 600",width:800,height:600,xmlns:"http://www.w3.org/2000/svg",fill:"none",style:{position:"absolute",left:0,top:0,cursor:null==r?void 0:r.cursor},onMouseMove:e=>o({x:e.clientX,y:e.clientY},[{content:u,path:[0]}]),onClick:e=>r&&a({x:e.clientX,y:e.clientY})},t.createElement("circle",{cx:u.x,cy:u.y,r:u.r,stroke:"#00ff00"}),l.map(((e,n)=>t.createElement("rect",{key:n,x:e.x-e.width/2,y:e.y-e.height/2,width:e.width,height:e.height,stroke:"#00ff00",fill:"#ffffff"})))))},code:"() => {\n  const [content, setContent] = React.useState<Circle>({ x: 300, y: 200, r: 100 })\n  const { editPoint, updateEditPreview, onEditMove, onEditClick, getEditAssistentContents } = useEdit<Circle>(\n    () => setContent(circle),\n    (s) => ({\n      editPoints: [\n        {\n          x: s.x,\n          y: s.y,\n          cursor: 'move',\n          update(c, { cursor, start }) {\n            c.x += cursor.x - start.x\n            c.y += cursor.y - start.y\n          }\n        },\n        { x: s.x - s.r, y: s.y, cursor: 'ew-resize', update(c, { cursor }) { c.r = getTwoPointsDistance(cursor, c) } },\n        { x: s.x, y: s.y - s.r, cursor: 'ns-resize', update(c, { cursor }) { c.r = getTwoPointsDistance(cursor, c) } },\n        { x: s.x + s.r, y: s.y, cursor: 'ew-resize', update(c, { cursor }) { c.r = getTwoPointsDistance(cursor, c) } },\n        { x: s.x, y: s.y + s.r, cursor: 'ns-resize', update(c, { cursor }) { c.r = getTwoPointsDistance(cursor, c) } },\n      ],\n    }),\n  )\n  const assistentContents: Region[] = []\n  const circle = produce(content, (draft) => {\n    updateEditPreview?.(() => draft)\n    assistentContents.push(...getEditAssistentContents(draft, (rect) => rect))\n  })\n\n  return (\n    <>\n      <svg\n        viewBox=\"0 0 800 600\"\n        width={800}\n        height={600}\n        xmlns=\"http://www.w3.org/2000/svg\"\n        fill='none'\n        style={{ position: 'absolute', left: 0, top: 0, cursor: editPoint?.cursor }}\n        onMouseMove={(e) => onEditMove({ x: e.clientX, y: e.clientY }, [{ content: circle, path: [0] }])}\n        onClick={(e) => editPoint && onEditClick({ x: e.clientX, y: e.clientY })}\n      >\n        <circle cx={circle.x} cy={circle.y} r={circle.r} stroke='#00ff00' />\n        {assistentContents.map((s, i) => <rect key={i} x={s.x - s.width / 2} y={s.y - s.height / 2} width={s.width} height={s.height} stroke='#00ff00' fill='#ffffff' />)}\n      </svg>\n    </>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"ellipse-arc-click-create.story",name:"",Component:()=>{const[e,n]=t.useState([]),{ellipse:r,ellipseArc:i,onClick:o,onMove:a,input:s}=xi("ellipse center",(t=>{n(Ae(e,(e=>{e.push(t)})))})),l=r||i;return t.createElement("div",{onClick:e=>o({x:e.clientX,y:e.clientY}),onMouseMove:e=>a({x:e.clientX,y:e.clientY}),style:{height:"100%"}},t.createElement("svg",{viewBox:"0 0 800 600",width:800,height:600,xmlns:"http://www.w3.org/2000/svg",fill:"none",style:{position:"absolute",left:0,top:0},onClick:e=>o({x:e.clientX,y:e.clientY}),onMouseMove:e=>a({x:e.clientX,y:e.clientY})},l&&t.createElement("ellipse",{stroke:"#00ff00",cx:l.cx,cy:l.cy,rx:l.rx,ry:l.ry,transform:l.angle?`rotate(${l.angle},${l.cx},${l.cy})`:void 0,strokeDasharray:"4"}),[...e,i].map(((e,n)=>{if(e){const{points:r}=Ll(e);return t.createElement("polyline",{key:n,points:r.map((e=>`${e.x},${e.y}`)).join(" "),stroke:"#00ff00"})}return null}))),s)},code:"() => {\n  const [contents, setContents] = React.useState<EllipseArc[]>([])\n  const { ellipse, ellipseArc, onClick, onMove, input } = useEllipseArcClickCreate('ellipse center', (c) => {\n    setContents(produce(contents, (draft) => {\n      draft.push(c)\n    }))\n  })\n  const arcEllipse = ellipse || ellipseArc\n  return (\n    <div\n      onClick={(e) => onClick({ x: e.clientX, y: e.clientY })}\n      onMouseMove={(e) => onMove({ x: e.clientX, y: e.clientY })}\n      style={{ height: '100%' }}\n    >\n      <svg\n        viewBox=\"0 0 800 600\"\n        width={800}\n        height={600}\n        xmlns=\"http://www.w3.org/2000/svg\"\n        fill='none'\n        style={{ position: 'absolute', left: 0, top: 0 }}\n        onClick={(e) => onClick({ x: e.clientX, y: e.clientY })}\n        onMouseMove={(e) => onMove({ x: e.clientX, y: e.clientY })}\n      >\n        {arcEllipse && <ellipse\n          stroke='#00ff00'\n          cx={arcEllipse.cx}\n          cy={arcEllipse.cy}\n          rx={arcEllipse.rx}\n          ry={arcEllipse.ry}\n          transform={arcEllipse.angle ? `rotate(${arcEllipse.angle},${arcEllipse.cx},${arcEllipse.cy})` : undefined}\n          strokeDasharray='4'\n        />}\n        {[...contents, ellipseArc].map((content, i) => {\n          if (content) {\n            const { points } = getEllipseArcGeometries(content)\n            return <polyline\n              key={i}\n              points={points.map((p) => `${p.x},${p.y}`).join(' ')}\n              stroke='#00ff00'\n            />\n          }\n          return null\n        })}\n      </svg>\n      {input}\n    </div>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"ellipse-arc-edit.story",name:"",Component:()=>{const[e,n]=t.useState({cx:200,cy:200,rx:100,ry:150,angle:45,startAngle:-30,endAngle:120}),{offset:r,onStart:i,mask:o}=function(e,r){const[i,o]=t.useState({cx:0,cy:0,rx:0,ry:0,startAngle:0,endAngle:0}),[s,l]=t.useState(),{onStart:u,mask:c}=vr((()=>n(a)),((e,t)=>{var n,r;if(t=Zn({x:e.data.cx,y:e.data.cy},t,void 0),l(t),"center"===e.data.type){const n=t.x-e.x,r=t.y-e.y;o({cx:n,cy:r,rx:0,ry:0,startAngle:0,endAngle:0,data:e.data.data})}else if("start angle"===e.data.type){const r=vn(t,{x:e.data.cx,y:e.data.cy},null!=(n=e.data.angle)?n:0),i=180*Math.atan2((r.y-e.data.cy)/e.data.ry,(r.x-e.data.cx)/e.data.rx)/Math.PI-e.data.startAngle;o({cx:0,cy:0,rx:0,ry:0,startAngle:i,endAngle:0,data:e.data.data})}else if("end angle"===e.data.type){const n=vn(t,{x:e.data.cx,y:e.data.cy},null!=(r=e.data.angle)?r:0),i=180*Math.atan2((n.y-e.data.cy)/e.data.ry,(n.x-e.data.cx)/e.data.rx)/Math.PI-e.data.endAngle;o({cx:0,cy:0,rx:0,ry:0,startAngle:0,endAngle:i,data:e.data.data})}}),(()=>o({cx:0,cy:0,rx:0,ry:0,startAngle:0,endAngle:0})),r);return{offset:i,onStart:u,mask:c,cursorPosition:s}}(),a=Ae(e,(e=>{r&&(e.cx+=r.cx,e.cy+=r.cy,e.rx+=r.rx,e.ry+=r.ry,e.startAngle+=r.startAngle,e.endAngle+=r.endAngle,In(e))})),{points:s}=Ll(a);return t.createElement(t.Fragment,null,t.createElement("svg",{viewBox:"0 0 800 600",width:800,height:600,xmlns:"http://www.w3.org/2000/svg",fill:"none",style:{position:"absolute",left:0,top:0}},t.createElement("polyline",{points:s.map((e=>`${e.x},${e.y}`)).join(" "),stroke:"#00ff00"})),t.createElement(ji,gh(mh({},a),{onMouseDown:(e,t,n)=>i(e,gh(mh({},a),{type:t,cursor:n}))})),o)},code:"() => {\n  const [content, setContent] = React.useState<EllipseArc>({ cx: 200, cy: 200, rx: 100, ry: 150, angle: 45, startAngle: -30, endAngle: 120 })\n  const { offset, onStart, mask } = useEllipseArcEdit(() => setContent(ellipseArc))\n  const ellipseArc = produce(content, (draft) => {\n    if (offset) {\n      draft.cx += offset.cx\n      draft.cy += offset.cy\n      draft.rx += offset.rx\n      draft.ry += offset.ry\n      draft.startAngle += offset.startAngle\n      draft.endAngle += offset.endAngle\n      normalizeAngleRange(draft)\n    }\n  })\n  const { points } = getEllipseArcGeometries(ellipseArc)\n  return (\n    <>\n      <svg\n        viewBox=\"0 0 800 600\"\n        width={800}\n        height={600}\n        xmlns=\"http://www.w3.org/2000/svg\"\n        fill='none'\n        style={{ position: 'absolute', left: 0, top: 0 }}\n      >\n        <polyline\n          points={points.map((p) => `${p.x},${p.y}`).join(' ')}\n          stroke='#00ff00'\n        />\n      </svg>\n      <EllipseArcEditBar\n        {...ellipseArc}\n        onMouseDown={(e, type, cursor) => onStart(e, { ...ellipseArc, type, cursor })}\n      />\n      {mask}\n    </>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"ellipse-click-create.story",name:"",Component:()=>{const[e,n]=t.useState([]),{ellipse:r,onClick:i,onMove:o,input:a}=Zr("ellipse center",(t=>{n(Ae(e,(e=>{e.push(t)})))}));return t.createElement("div",{style:{height:"100%"}},t.createElement("svg",{viewBox:"0 0 800 600",width:800,height:600,xmlns:"http://www.w3.org/2000/svg",fill:"none",style:{position:"absolute",left:0,top:0},onClick:e=>i({x:e.clientX,y:e.clientY}),onMouseMove:e=>o({x:e.clientX,y:e.clientY})},[...e,r].map(((e,n)=>e&&t.createElement("ellipse",{key:n,stroke:"#00ff00",cx:e.cx,cy:e.cy,rx:e.rx,ry:e.ry,transform:e.angle?`rotate(${e.angle},${e.cx},${e.cy})`:void 0})))),a)},code:"() => {\n  const [contents, setContents] = React.useState<Ellipse[]>([])\n  const { ellipse, onClick, onMove, input } = useEllipseClickCreate('ellipse center', (c) => {\n    setContents(produce(contents, (draft) => {\n      draft.push(c)\n    }))\n  })\n\n  return (\n    <div style={{ height: '100%' }}>\n      <svg\n        viewBox=\"0 0 800 600\"\n        width={800}\n        height={600}\n        xmlns=\"http://www.w3.org/2000/svg\"\n        fill='none'\n        style={{ position: 'absolute', left: 0, top: 0 }}\n        onClick={(e) => onClick({ x: e.clientX, y: e.clientY })}\n        onMouseMove={(e) => onMove({ x: e.clientX, y: e.clientY })}\n      >\n        {[...contents, ellipse].map((content, i) => content && <ellipse\n          key={i}\n          stroke='#00ff00'\n          cx={content.cx}\n          cy={content.cy}\n          rx={content.rx}\n          ry={content.ry}\n          transform={content.angle ? `rotate(${content.angle},${content.cx},${content.cy})` : undefined}\n        />)}\n      </svg>\n      {input}\n    </div>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"ellipse-edit.story",name:"",Component:()=>{const[e,n]=t.useState({cx:200,cy:200,rx:100,ry:150,angle:45}),{offset:r,onStart:i,mask:o}=function(e,r){const[i,o]=t.useState({cx:0,cy:0,rx:0,ry:0}),[s,l]=t.useState(),{onStart:u,mask:c}=vr((()=>n(a)),((e,t)=>{if(t=Zn({x:e.data.cx,y:e.data.cy},t,void 0),l(t),"center"===e.data.type){const n=t.x-e.x,r=t.y-e.y;o({cx:n,cy:r,rx:0,ry:0,data:e.data.data})}else{const n=Qt(t,{x:e.data.cx,y:e.data.cy});"major axis"===e.data.type?o({cx:0,cy:0,rx:n-e.data.rx,ry:0,data:e.data.data}):o({cx:0,cy:0,rx:0,ry:n-e.data.ry,data:e.data.data})}}),(()=>o({cx:0,cy:0,rx:0,ry:0})),r);return{offset:i,onStart:u,mask:c,cursorPosition:s}}(),a=Ae(e,(e=>{r&&(e.cx+=r.cx,e.cy+=r.cy,e.rx+=r.rx,e.ry+=r.ry)}));return t.createElement(t.Fragment,null,t.createElement("svg",{viewBox:"0 0 800 600",width:800,height:600,xmlns:"http://www.w3.org/2000/svg",fill:"none",style:{position:"absolute",left:0,top:0}},t.createElement("ellipse",{stroke:"#00ff00",cx:a.cx,cy:a.cy,rx:a.rx,ry:a.ry,transform:a.angle?`rotate(${a.angle},${a.cx},${a.cy})`:void 0})),t.createElement(ei,Ah(wh({},a),{onMouseDown:(e,t,n)=>i(e,Ah(wh({},a),{type:t,cursor:n}))})),o)},code:"() => {\n  const [content, setContent] = React.useState<Ellipse>({ cx: 200, cy: 200, rx: 100, ry: 150, angle: 45 })\n  const { offset, onStart, mask } = useEllipseEdit(() => setContent(ellipse))\n  const ellipse = produce(content, (draft) => {\n    if (offset) {\n      draft.cx += offset.cx\n      draft.cy += offset.cy\n      draft.rx += offset.rx\n      draft.ry += offset.ry\n    }\n  })\n  return (\n    <>\n      <svg\n        viewBox=\"0 0 800 600\"\n        width={800}\n        height={600}\n        xmlns=\"http://www.w3.org/2000/svg\"\n        fill='none'\n        style={{ position: 'absolute', left: 0, top: 0 }}\n      >\n        <ellipse\n          stroke='#00ff00'\n          cx={ellipse.cx}\n          cy={ellipse.cy}\n          rx={ellipse.rx}\n          ry={ellipse.ry}\n          transform={ellipse.angle ? `rotate(${ellipse.angle},${ellipse.cx},${ellipse.cy})` : undefined}\n        />\n      </svg>\n      <EllipseEditBar\n        {...ellipse}\n        onMouseDown={(e, type, cursor) => onStart(e, { ...ellipse, type, cursor })}\n      />\n      {mask}\n    </>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"keyboard-zoom.story",name:"",Component:()=>{const[e,n]=t.useState(1),{zoomIn:r,zoomOut:i}=He(e,n);return Pt((e=>"Minus"===e.code&&e.metaKey),i),Pt((e=>"Equal"===e.code&&e.metaKey),r),t.createElement("div",{style:{width:"300px",height:"300px",overflow:"hidden",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid green"}},t.createElement("div",{style:{width:"800px",height:"800px",position:"absolute",transform:`scale(${e})`,background:"radial-gradient(50% 50% at 50% 50%, red 0%, white 100%)"}}))},code:"() => {\n  const [scale, setScale] = React.useState(1)\n  const { zoomIn, zoomOut } = useZoom(scale, setScale)\n  useKey((k) => k.code === 'Minus' && k.metaKey, zoomOut)\n  useKey((k) => k.code === 'Equal' && k.metaKey, zoomIn)\n  return (\n    <div\n      style={{\n        width: '300px',\n        height: '300px',\n        overflow: 'hidden',\n        position: 'absolute',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        border: '1px solid green',\n      }}\n    >\n      <div\n        style={{\n          width: '800px',\n          height: '800px',\n          position: 'absolute',\n          transform: `scale(${scale})`,\n          background: 'radial-gradient(50% 50% at 50% 50%, red 0%, white 100%)',\n        }}\n      ></div>\n    </div>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"line-alignment-line.story",name:"",Component:()=>{const[e,n]=t.useState(Ph),[r,i]=t.useState(0),{lineAlignmentX:o,lineAlignmentY:a,changeOffsetByLineAlignment:s,clearLineAlignments:l}=At(10),{offset:u,onStart:c,mask:h}=mt((()=>{l(),n(Ae(e,(e=>{e[r].x+=u.x,e[r].y+=u.y,e[r].width+=u.width,e[r].height+=u.height})))}),{centeredScaling:e=>e.shiftKey,transformOffset:(t,n,i)=>{if(!(null==n?void 0:n.metaKey)&&i){const n=e[r],o=e.filter((e=>e!==n)).map((e=>[e.x,e.x+e.width])).flat(),a=e.filter((e=>e!==n)).map((e=>[e.y,e.y+e.height])).flat();s(t,i,n,o,a)}else l();return t}});return t.createElement(t.Fragment,null,e.map(((e,n)=>t.createElement("div",{key:n,style:{width:`${e.width+(r===n?u.width:0)}px`,height:`${e.height+(r===n?u.height:0)}px`,left:`${e.x+(r===n?u.x:0)}px`,top:`${e.y+(r===n?u.y:0)}px`,position:"absolute",boxSizing:"border-box",border:r===n?"1px solid green":void 0},onClick:()=>i(n)},t.createElement("img",{src:e.url,style:{objectFit:"fill",width:"100%",height:"100%"}}),r===n&&t.createElement(lt,{onMouseDown:c})))),t.createElement(Tt,{type:"x",value:o}),t.createElement(Tt,{type:"y",value:a}),h)},code:"() => {\n  const [contents, setContents] = React.useState(defaultContents)\n  const [selectedIndex, setSelectedIndex] = React.useState(0)\n\n  const { lineAlignmentX, lineAlignmentY, changeOffsetByLineAlignment, clearLineAlignments } = useLineAlignment(10)\n  const { offset, onStart, mask } = useDragResize(\n    () => {\n      clearLineAlignments()\n      setContents(produce(contents, (draft) => {\n        draft[selectedIndex].x += offset.x\n        draft[selectedIndex].y += offset.y\n        draft[selectedIndex].width += offset.width\n        draft[selectedIndex].height += offset.height\n      }))\n    },\n    {\n      centeredScaling: (e) => e.shiftKey,\n      transformOffset: (f, e, direction) => {\n        if (!e?.metaKey && direction) {\n          const target = contents[selectedIndex]\n          const xLines = contents.filter((t) => t !== target).map((t) => [t.x, t.x + t.width]).flat()\n          const yLines = contents.filter((t) => t !== target).map((t) => [t.y, t.y + t.height]).flat()\n          changeOffsetByLineAlignment(f, direction, target, xLines, yLines)\n        } else {\n          clearLineAlignments()\n        }\n        return f\n      },\n    }\n  )\n  return (\n    <>\n      {contents.map((content, i) => (\n        <div\n          key={i}\n          style={{\n            width: `${content.width + (selectedIndex === i ? offset.width : 0)}px`,\n            height: `${content.height + (selectedIndex === i ? offset.height : 0)}px`,\n            left: `${content.x + (selectedIndex === i ? offset.x : 0)}px`,\n            top: `${content.y + (selectedIndex === i ? offset.y : 0)}px`,\n            position: 'absolute',\n            boxSizing: 'border-box',\n            border: selectedIndex === i ? '1px solid green' : undefined,\n          }}\n          onClick={() => setSelectedIndex(i)}\n        >\n          <img src={content.url} style={{ objectFit: 'fill', width: '100%', height: '100%' }} />\n          {selectedIndex === i && <ResizeBar onMouseDown={onStart} />}\n        </div>\n      ))}\n      <AlignmentLine type='x' value={lineAlignmentX} />\n      <AlignmentLine type='y' value={lineAlignmentY} />\n      {mask}\n    </>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"line-click-create.story",name:"",Component:()=>{const[e,n]=t.useState([]),{line:r,onClick:i,onMove:o,input:a}=Jn(!0,(t=>{n(Ae(e,(e=>{e.push(t)})))}));return t.createElement("div",{style:{height:"100%"}},t.createElement("svg",{viewBox:"0 0 800 600",width:800,height:600,xmlns:"http://www.w3.org/2000/svg",fill:"none",style:{position:"absolute",left:0,top:0},onClick:e=>i({x:e.clientX,y:e.clientY}),onMouseMove:e=>o({x:e.clientX,y:e.clientY})},[...e,r].map(((e,n)=>e&&t.createElement("polyline",{key:n,stroke:"#00ff00",points:e.map((e=>`${e.x},${e.y}`)).join(" ")})))),a)},code:"() => {\n  const [contents, setContents] = React.useState<Position[][]>([])\n  const { line, onClick, onMove, input } = useLineClickCreate(true, (c) => {\n    setContents(produce(contents, (draft) => {\n      draft.push(c)\n    }))\n  })\n\n  return (\n    <div style={{ height: '100%' }}>\n      <svg\n        viewBox=\"0 0 800 600\"\n        width={800}\n        height={600}\n        xmlns=\"http://www.w3.org/2000/svg\"\n        fill='none'\n        style={{ position: 'absolute', left: 0, top: 0 }}\n        onClick={(e) => onClick({ x: e.clientX, y: e.clientY })}\n        onMouseMove={(e) => onMove({ x: e.clientX, y: e.clientY })}\n      >\n        {[...contents, line].map((content, i) => content && <polyline\n          key={i}\n          stroke='#00ff00'\n          points={content.map((p) => `${p.x},${p.y}`).join(' ')}\n        />)}\n      </svg>\n      {input}\n    </div>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"linear-dimension.story",name:"",Component:()=>{const e={p1:{x:200,y:200},p2:{x:300,y:300},position:{x:400,y:100},fontFamily:"monospace",fontSize:16,direct:!0},{regions:n,lines:r}=go(e,Rc,(e=>vo(e,Rc.margin,Bn))),{textPosition:i,textRotation:o,text:a}=vo(e,Rc.margin,Bn);return t.createElement("svg",{viewBox:"0 0 800 600",width:800,height:600,xmlns:"http://www.w3.org/2000/svg",fill:"none",style:{position:"absolute",left:0,top:0}},r.map(((e,n)=>t.createElement("polyline",{key:n,stroke:"black",points:e.map((e=>`${e.x},${e.y}`)).join(" ")}))),n[0]&&t.createElement("polyline",{stroke:"black",points:n[0].points.map((e=>`${e.x},${e.y}`)).join(" "),fill:"black"}),n[1]&&t.createElement("polyline",{stroke:"black",points:n[1].points.map((e=>`${e.x},${e.y}`)).join(" "),fill:"black"}),t.createElement("text",{x:i.x,y:i.y,fill:"black",transform:$r(i.x,i.y,{rotation:o}),style:{fontSize:`${e.fontSize}px`,fontFamily:e.fontFamily}},a))},code:"() => {\n  const dimension: LinearDimension = {\n    p1: { x: 200, y: 200 },\n    p2: { x: 300, y: 300 },\n    position: {\n      x: 400,\n      y: 100,\n    },\n    fontFamily: 'monospace',\n    fontSize: 16,\n    direct: true,\n  }\n  const { regions, lines } = getLinearDimensionGeometries(\n    dimension,\n    dimensionStyle,\n    (c) => getLinearDimensionTextPosition(c, dimensionStyle.margin, getTextSize)\n  )\n  const { textPosition, textRotation, text } = getLinearDimensionTextPosition(dimension, dimensionStyle.margin, getTextSize)\n  return (\n    <svg\n      viewBox=\"0 0 800 600\"\n      width={800}\n      height={600}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      fill='none'\n      style={{ position: 'absolute', left: 0, top: 0 }}\n    >\n      {lines.map((line, i) => <polyline key={i} stroke='black' points={line.map((p) => `${p.x},${p.y}`).join(' ')} />)}\n      {regions[0] && <polyline stroke='black' points={regions[0].points.map((p) => `${p.x},${p.y}`).join(' ')} fill='black' />}\n      {regions[1] && <polyline stroke='black' points={regions[1].points.map((p) => `${p.x},${p.y}`).join(' ')} fill='black' />}\n      <text x={textPosition.x} y={textPosition.y} fill='black' transform={getRotateTransform(textPosition.x, textPosition.y, { rotation: textRotation })} style={{ fontSize: `${dimension.fontSize}px`, fontFamily: dimension.fontFamily }}>{text}</text>\n    </svg>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"partial-edit.story",name:"",Component:()=>{const[e,n]=t.useState({value:1,children:[{value:10},{value:100}]}),{editingContent:r,setEditingContentPath:i,prependPatchPath:o}=eo(e);return t.createElement(t.Fragment,null,t.createElement("button",{onClick:()=>{const[,t]=Te(r,(e=>{e.value++}));n(we(e,o(t)))}},"+1"),t.createElement("button",{onClick:()=>i([])},"exit"),t.createElement("div",null,r.value,r.children&&r.children.map(((e,n)=>t.createElement("button",{key:n,style:{width:"50px",height:"50px"},onClick:()=>i(["children",n])},e.value)))))},code:"() => {\n  interface Content {\n    value: number\n    children?: Content[]\n  }\n  const [content, setContent] = React.useState<Content>({\n    value: 1,\n    children: [\n      { value: 10 },\n      { value: 100 }\n    ]\n  })\n  const { editingContent, setEditingContentPath, prependPatchPath } = usePartialEdit(content)\n  const addOne = () => {\n    const [, patches] = produceWithPatches(editingContent, (draft) => {\n      draft.value++\n    })\n    setContent(applyPatches(content, prependPatchPath(patches)))\n  }\n\n  return (\n    <>\n      <button onClick={addOne}>+1</button>\n      <button onClick={() => setEditingContentPath([])}>exit</button>\n      <div>\n        {editingContent.value}\n        {editingContent.children && editingContent.children.map((c, i) => (\n          <button key={i} style={{ width: '50px', height: '50px' }} onClick={() => setEditingContentPath(['children', i])}>{c.value}</button>\n        ))}\n      </div>\n    </>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"patch-based-undo-redo.story",name:"",Component:()=>{const{state:e,setState:n,undo:r,redo:i}=Xe(Oh,"a");return Pt((e=>"KeyZ"===e.code&&!e.shiftKey&&e.metaKey),r),Pt((e=>"KeyZ"===e.code&&e.shiftKey&&e.metaKey),i),t.createElement("button",{onClick:()=>n((e=>{e.count++})),style:{width:"200px",height:"100px"}},e.count)},code:"() => {\n  const { state, setState, undo, redo } = usePatchBasedUndoRedo(initialState, 'a')\n  useKey((k) => k.code === 'KeyZ' && !k.shiftKey && k.metaKey, undo)\n  useKey((k) => k.code === 'KeyZ' && k.shiftKey && k.metaKey, redo)\n  return (\n    <button\n      onClick={() => setState((draft) => { draft.count++ })}\n      style={{ width: '200px', height: '100px' }}\n    >\n      {state.count}\n    </button>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"point-snap.story",name:"",Component:()=>{const[e,n]=t.useState(),{getSnapAssistentContents:r,getSnapPoint:i}=fo(!0,((e,t)=>Dh.get(e,t,(()=>Array.from(Un(e,t,Lh,(()=>({getCircle:e=>({circle:e})}))))))),po,(()=>({getSnapPoints:e=>[{x:e.x,y:e.y,type:"center"},{x:e.x-e.r,y:e.y,type:"endpoint"},{x:e.x+e.r,y:e.y,type:"endpoint"},{x:e.x,y:e.y-e.r,type:"endpoint"},{x:e.x,y:e.y+e.r,type:"endpoint"}],getCircle:e=>({circle:e,bounding:{start:{x:e.x-e.r,y:e.y-e.r},end:{x:e.x+e.r,y:e.y+e.r}}})}))),o=r((e=>kh({type:"circle"},e)),(e=>kh({type:"rect"},e)),(e=>({type:"polyline",points:e})));return t.createElement(t.Fragment,null,t.createElement("svg",{viewBox:"0 0 800 600",width:800,height:600,xmlns:"http://www.w3.org/2000/svg",fill:"none",style:{position:"absolute",left:0,top:0},onMouseMove:e=>n(i({x:e.clientX,y:e.clientY},Lh))},Lh.map(((e,n)=>t.createElement("circle",{key:n,cx:e.x,cy:e.y,r:e.r,stroke:"#00ff00"}))),o.map(((e,n)=>"rect"===e.type?t.createElement("rect",{key:n,x:e.x-e.width/2,y:e.y-e.height/2,width:e.width,height:e.height,stroke:"#00ff00"}):"circle"===e.type?t.createElement("circle",{key:n,cx:e.x,cy:e.y,r:e.r,stroke:"#00ff00"}):t.createElement("polyline",{key:n,points:e.points.map((e=>`${e.x},${e.y}`)).join(" "),stroke:"#00ff00"}))),e&&t.createElement("circle",{cx:e.x,cy:e.y,r:5,stroke:"#ff0000"})))},code:"() => {\n  const [position, setPosition] = React.useState<Position>()\n  const { getSnapAssistentContents, getSnapPoint } = usePointSnap<Circle>(\n    true,\n    (c1, c2) => intersectionPointsCache.get(c1, c2, () => Array.from(iterateIntersectionPoints(c1, c2, contents, () => ({ getCircle: (c) => ({ circle: c }) })))),\n    allSnapTypes,\n    () => ({\n      getSnapPoints(c) {\n        return [\n          { x: c.x, y: c.y, type: 'center' },\n          { x: c.x - c.r, y: c.y, type: 'endpoint' },\n          { x: c.x + c.r, y: c.y, type: 'endpoint' },\n          { x: c.x, y: c.y - c.r, type: 'endpoint' },\n          { x: c.x, y: c.y + c.r, type: 'endpoint' },\n        ]\n      },\n      getCircle(c) {\n        return {\n          circle: c,\n          bounding: {\n            start: { x: c.x - c.r, y: c.y - c.r },\n            end: { x: c.x + c.r, y: c.y + c.r },\n          }\n        }\n      },\n    }),\n  )\n  const assistentContents = getSnapAssistentContents(\n    (circle) => ({ type: 'circle' as const, ...circle }),\n    (rect) => ({ type: 'rect' as const, ...rect }),\n    (points) => ({ type: 'polyline' as const, points }),\n  )\n\n  return (\n    <>\n      <svg\n        viewBox=\"0 0 800 600\"\n        width={800}\n        height={600}\n        xmlns=\"http://www.w3.org/2000/svg\"\n        fill='none'\n        style={{ position: 'absolute', left: 0, top: 0 }}\n        onMouseMove={(e) => setPosition(getSnapPoint({ x: e.clientX, y: e.clientY }, contents))}\n      >\n        {contents.map((c, i) => <circle key={i} cx={c.x} cy={c.y} r={c.r} stroke='#00ff00' />)}\n        {assistentContents.map((c, i) => {\n          if (c.type === 'rect') {\n            return <rect key={i} x={c.x - c.width / 2} y={c.y - c.height / 2} width={c.width} height={c.height} stroke='#00ff00' />\n          }\n          if (c.type === 'circle') {\n            return <circle key={i} cx={c.x} cy={c.y} r={c.r} stroke='#00ff00' />\n          }\n          return <polyline key={i} points={c.points.map((p) => `${p.x},${p.y}`).join(' ')} stroke='#00ff00' />\n        })}\n        {position && <circle cx={position.x} cy={position.y} r={5} stroke='#ff0000' />}\n      </svg>\n    </>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"polygon-click-create.story",name:"",Component:()=>{const[e,n]=t.useState([]),{polygon:r,onClick:i,onMove:o,input:a}=Qr(!0,(t=>{const i=t||r;i&&n(Ae(e,(e=>{e.push(i)})))}));return t.createElement("div",{style:{height:"100%"}},t.createElement("svg",{viewBox:"0 0 800 600",width:800,height:600,xmlns:"http://www.w3.org/2000/svg",fill:"none",style:{position:"absolute",left:0,top:0},onClick:e=>i({x:e.clientX,y:e.clientY}),onMouseMove:e=>o({x:e.clientX,y:e.clientY})},[...e,r].map(((e,n)=>e&&t.createElement("polygon",{key:n,stroke:"#00ff00",points:e.map((e=>`${e.x},${e.y}`)).join(" ")})))),a)},code:"() => {\n  const [contents, setContents] = React.useState<Position[][]>([])\n  const { polygon, onClick, onMove, input } = usePolygonClickCreate(true, (c) => {\n    const data = c || polygon\n    if (data) {\n      setContents(produce(contents, (draft) => {\n        draft.push(data)\n      }))\n    }\n  })\n\n  return (\n    <div style={{ height: '100%' }}>\n      <svg\n        viewBox=\"0 0 800 600\"\n        width={800}\n        height={600}\n        xmlns=\"http://www.w3.org/2000/svg\"\n        fill='none'\n        style={{ position: 'absolute', left: 0, top: 0 }}\n        onClick={(e) => onClick({ x: e.clientX, y: e.clientY })}\n        onMouseMove={(e) => onMove({ x: e.clientX, y: e.clientY })}\n      >\n        {[...contents, polygon].map((content, i) => content && <polygon\n          key={i}\n          stroke='#00ff00'\n          points={content.map((p) => `${p.x},${p.y}`).join(' ')} />\n        )}\n      </svg>\n      {input}\n    </div>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"polyline-edit.story",name:"",Component:()=>{const[e,n]=t.useState([{x:100,y:100},{x:300,y:200},{x:100,y:200}]),{offset:r,onStart:i,mask:o}=function(e,r){const[i,o]=t.useState(),[s,l]=t.useState(),{onStart:u,mask:c,dragStartPosition:h}=vr((()=>n(a)),((e,t)=>{t=Zn(e,t,void 0),l(t);const n=t.x-e.x,r=t.y-e.y;o({x:n,y:r,pointIndexes:e.data.pointIndexes,data:e.data.data})}),(()=>o(void 0)),r);return{offset:i,onStart(e,t,n){u(e,{pointIndexes:t,data:n,cursor:"move"})},mask:c,cursorPosition:s,dragStartPosition:h}}(),a=Ae(e,(e=>{if(r)for(const t of r.pointIndexes)e[t].x+=r.x,e[t].y+=r.y}));return t.createElement(t.Fragment,null,t.createElement("svg",{viewBox:"0 0 800 600",width:800,height:600,xmlns:"http://www.w3.org/2000/svg",fill:"none",style:{position:"absolute",left:0,top:0}},t.createElement("polyline",{stroke:"#00ff00",points:a.map((e=>`${e.x},${e.y}`)).join(" ")})),t.createElement(_r,{points:a,onMouseDown:(e,t)=>i(e,t)}),o)},code:"() => {\n  const [content, setContent] = React.useState([\n    { x: 100, y: 100 },\n    { x: 300, y: 200 },\n    { x: 100, y: 200 },\n  ])\n  const { offset, onStart, mask } = usePolylineEdit(() => setContent(points))\n  const points = produce(content, (draft) => {\n    if (offset) {\n      for (const pointIndex of offset.pointIndexes) {\n        draft[pointIndex].x += offset.x\n        draft[pointIndex].y += offset.y\n      }\n    }\n  })\n  return (\n    <>\n      <svg\n        viewBox=\"0 0 800 600\"\n        width={800}\n        height={600}\n        xmlns=\"http://www.w3.org/2000/svg\"\n        fill='none'\n        style={{ position: 'absolute', left: 0, top: 0 }}\n      >\n        <polyline stroke='#00ff00' points={points.map((p) => `${p.x},${p.y}`).join(' ')} />\n      </svg>\n      <PolylineEditBar\n        points={points}\n        onMouseDown={(e, pointIndexes) => onStart(e, pointIndexes)}\n      />\n      {mask}\n    </>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"radial-dimension.story",name:"",Component:()=>{const e={x:200,y:200,r:100},n=((e,t)=>Uh(e,Bh({position:{x:400,y:300},fontFamily:"monospace",fontSize:16})))(((e,t)=>{for(var n in t||(t={}))jh.call(t,n)&&zh(e,n,t[n]);if(Gh)for(var n of Gh(t))$h.call(t,n)&&zh(e,n,t[n]);return e})({},e)),{regions:r,lines:i}=yo(n,Rc,(e=>mo(e,Rc.margin,Bn))),{textPosition:o,textRotation:a,text:s}=mo(n,Rc.margin,Bn);return t.createElement("svg",{viewBox:"0 0 800 600",width:800,height:600,xmlns:"http://www.w3.org/2000/svg",fill:"none",style:{position:"absolute",left:0,top:0}},t.createElement("circle",{cx:e.x,cy:e.y,r:e.r,stroke:"black"}),i.map(((e,n)=>t.createElement("polyline",{key:n,stroke:"black",points:e.map((e=>`${e.x},${e.y}`)).join(" ")}))),r&&r.length>0&&t.createElement("polyline",{stroke:"black",points:r[0].points.map((e=>`${e.x},${e.y}`)).join(" "),fill:"black"}),t.createElement("text",{x:o.x,y:o.y,fill:"black",transform:$r(o.x,o.y,{rotation:a}),style:{fontSize:`${n.fontSize}px`,fontFamily:n.fontFamily}},s))},code:"() => {\n  const circle: Circle = {\n    x: 200,\n    y: 200,\n    r: 100,\n  }\n  const dimension: RadialDimension = {\n    ...circle,\n    position: {\n      x: 400,\n      y: 300,\n    },\n    fontFamily: 'monospace',\n    fontSize: 16,\n  }\n  const { regions, lines } = getRadialDimensionGeometries(\n    dimension,\n    dimensionStyle,\n    (c) => getRadialDimensionTextPosition(c, dimensionStyle.margin, getTextSize)\n  )\n  const { textPosition, textRotation, text } = getRadialDimensionTextPosition(dimension, dimensionStyle.margin, getTextSize)\n  return (\n    <svg\n      viewBox=\"0 0 800 600\"\n      width={800}\n      height={600}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      fill='none'\n      style={{ position: 'absolute', left: 0, top: 0 }}\n    >\n      <circle cx={circle.x} cy={circle.y} r={circle.r} stroke='black' />\n      {lines.map((line, i) => <polyline key={i} stroke='black' points={line.map((p) => `${p.x},${p.y}`).join(' ')} />)}\n      {regions && regions.length > 0 && <polyline stroke='black' points={regions[0].points.map((p) => `${p.x},${p.y}`).join(' ')} fill='black' />}\n      <text x={textPosition.x} y={textPosition.y} fill='black' transform={getRotateTransform(textPosition.x, textPosition.y, { rotation: textRotation })} style={{ fontSize: `${dimension.fontSize}px`, fontFamily: dimension.fontFamily }}>{text}</text>\n    </svg>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"react-render-target.story",name:"",Component:()=>{function e(e){return e.renderResult([e.renderArc(150,150,100,0,120,{strokeColor:0}),e.renderCircle(150,150,80,{strokeColor:65280}),e.renderEllipse(150,150,50,100,{strokeColor:16711680,angle:30}),e.renderPolyline([{x:10,y:10},{x:150,y:150},{x:100,y:200},{x:200,y:200}],{strokeColor:255,dashArray:[4]}),e.renderRect(50,50,100,80,{strokeColor:16711935,angle:60}),e.renderText(50,100,"Hello World!",16776960,30,"monospace")],300,300)}return t.createElement("div",null,e(Br),e(Wr))},code:"() => {\n  function render<T>(target: ReactRenderTarget<T>) {\n    return target.renderResult(\n      [\n        target.renderArc(150, 150, 100, 0, 120, { strokeColor: 0x000000 }),\n        target.renderCircle(150, 150, 80, { strokeColor: 0x00ff00 }),\n        target.renderEllipse(150, 150, 50, 100, { strokeColor: 0xff0000, angle: 30 }),\n        target.renderPolyline([{ x: 10, y: 10 }, { x: 150, y: 150 }, { x: 100, y: 200 }, { x: 200, y: 200 }], { strokeColor: 0x0000ff, dashArray: [4] }),\n        target.renderRect(50, 50, 100, 80, { strokeColor: 0xff00ff, angle: 60 }),\n        target.renderText(50, 100, 'Hello World!', 0xffff00, 30, 'monospace'),\n      ],\n      300,\n      300,\n    )\n  }\n  return (\n    <div>\n      {render(reactSvgRenderTarget)}\n      {render(reactCanvasRenderTarget)}\n    </div>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"region-alignment-line.story",name:"",Component:()=>{const[e,n]=t.useState(Ph),[r,i]=t.useState(0),{regionAlignmentX:o,regionAlignmentY:a,changeOffsetByRegionAlignment:s,clearRegionAlignments:l}=wt(10),{offset:u,onStart:c,mask:h,startPosition:d}=ke((()=>{l(),0!==u.x||0!==u.y||void 0===(null==d?void 0:d.data)?n(Ae(e,(e=>{e[r].x+=u.x,e[r].y+=u.y}))):i(d.data)}),{transformOffset:(t,n)=>((null==n?void 0:n.shiftKey)?l():s(t,e[r],e.filter(((e,t)=>t!==r))),t)});return t.createElement(t.Fragment,null,e.map(((e,n)=>t.createElement("div",{key:n,style:{width:`${e.width}px`,height:`${e.height}px`,left:`${e.x+(r===n?u.x:0)}px`,top:`${e.y+(r===n?u.y:0)}px`,position:"absolute",boxSizing:"border-box",background:`url(${e.url})`,backgroundSize:"contain",border:r===n?"1px solid green":void 0},onMouseDown:e=>c({x:e.clientX,y:e.clientY},{data:n})}))),t.createElement(Tt,{type:"x",value:o}),t.createElement(Tt,{type:"y",value:a}),h)},code:"() => {\n  const [contents, setContents] = React.useState(defaultContents)\n  const [selectedIndex, setSelectedIndex] = React.useState(0)\n\n  const { regionAlignmentX, regionAlignmentY, changeOffsetByRegionAlignment, clearRegionAlignments } = useRegionAlignment(10)\n  const { offset, onStart, mask, startPosition } = useDragMove<number>(\n    () => {\n      clearRegionAlignments()\n      if (offset.x === 0 && offset.y === 0 && startPosition?.data !== undefined) {\n        setSelectedIndex(startPosition.data)\n        return\n      }\n      setContents(produce(contents, (draft) => {\n        draft[selectedIndex].x += offset.x\n        draft[selectedIndex].y += offset.y\n      }))\n    },\n    {\n      transformOffset: (f, e) => {\n        if (!e?.shiftKey) {\n          changeOffsetByRegionAlignment(f, contents[selectedIndex], contents.filter((_, i) => i !== selectedIndex))\n        } else {\n          clearRegionAlignments()\n        }\n        return f\n      },\n    }\n  )\n  return (\n    <>\n      {contents.map((content, i) => (\n        <div\n          key={i}\n          style={{\n            width: `${content.width}px`,\n            height: `${content.height}px`,\n            left: `${content.x + (selectedIndex === i ? offset.x : 0)}px`,\n            top: `${content.y + (selectedIndex === i ? offset.y : 0)}px`,\n            position: 'absolute',\n            boxSizing: 'border-box',\n            background: `url(${content.url})`,\n            backgroundSize: 'contain',\n            border: selectedIndex === i ? '1px solid green' : undefined,\n          }}\n          onMouseDown={(e) => onStart({ x: e.clientX, y: e.clientY }, { data: i })}\n        >\n        </div>\n      ))}\n      <AlignmentLine type='x' value={regionAlignmentX} />\n      <AlignmentLine type='y' value={regionAlignmentY} />\n      {mask}\n    </>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"scrollbar.story",name:"",Component:()=>{const[e,n]=t.useState(0),[r,i]=t.useState(0);return t.createElement("div",{style:{width:"300px",height:"300px",overflow:"hidden",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"}},t.createElement("div",{style:{width:"800px",height:"800px",position:"absolute",transform:`translate(${e}px, ${r}px)`,background:"radial-gradient(50% 50% at 50% 50%, red 0%, white 100%)"}}),t.createElement(Ge,{value:e,type:"horizontal",containerSize:300,contentSize:800,onChange:n}),t.createElement(Ge,{value:r,type:"vertical",containerSize:300,contentSize:800,onChange:i}))},code:"() => {\n  const [x, setX] = React.useState(0)\n  const [y, setY] = React.useState(0)\n  return (\n    <div\n      style={{\n        width: '300px',\n        height: '300px',\n        overflow: 'hidden',\n        position: 'absolute',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n      }}\n    >\n      <div\n        style={{\n          width: '800px',\n          height: '800px',\n          position: 'absolute',\n          transform: `translate(${x}px, ${y}px)`,\n          background: 'radial-gradient(50% 50% at 50% 50%, red 0%, white 100%)',\n        }}\n      ></div>\n      <Scrollbar\n        value={x}\n        type='horizontal'\n        containerSize={300}\n        contentSize={800}\n        onChange={setX}\n      />\n      <Scrollbar\n        value={y}\n        type='vertical'\n        containerSize={300}\n        contentSize={800}\n        onChange={setY}\n      />\n    </div>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"select-before-operate.story",name:"",Component:()=>{const{isSelected:e,addSelection:n,filterSelection:r,executeOperation:i,selectBeforeOperate:o,message:a}=Vi({},((e,t)=>(alert(t.map((([e])=>e)).join(",")),!0))),s=(e,t)=>{const{result:n,needSelect:a}=r(t,e);a?o({count:e,selectable:t},"alert"):i("alert",n)};return t.createElement("div",null,t.createElement("button",{onClick:()=>s()},"select count ",">"," 0"),t.createElement("button",{onClick:()=>s(3)},"select count = 3"),t.createElement("button",{onClick:()=>s(void 0,(([e])=>e%2==1))},"select count ",">"," 0 && i % 2 === 1"),t.createElement("button",{onClick:()=>s(3,(([e])=>e%2==1))},"select count = 3 && i % 2 === 1"),new Array(10).fill(1).map(((r,i)=>t.createElement("button",{key:i,style:{backgroundColor:e([i])?"green":void 0,width:"50px",height:"50px"},onClick:()=>n([i])},i))),a)},code:"() => {\n  const { isSelected, addSelection, filterSelection, executeOperation, selectBeforeOperate, message } = useSelectBeforeOperate<{ count?: number, selectable?: (index: number[]) => boolean }, 'alert', number[]>({}, (_, s) => {\n    alert(s.map(([i]) => i).join(','))\n    return true\n  })\n\n  const startOperation = (maxCount?: number, selectable?: (index: number[]) => boolean) => {\n    const { result, needSelect } = filterSelection(selectable, maxCount)\n    if (needSelect) {\n      selectBeforeOperate({ count: maxCount, selectable }, 'alert')\n    } else {\n      executeOperation('alert', result)\n    }\n  }\n\n  return (\n    <div>\n      <button onClick={() => startOperation()}>select count {\">\"} 0</button>\n      <button onClick={() => startOperation(3)}>select count = 3</button>\n      <button onClick={() => startOperation(undefined, ([i]) => i % 2 === 1)}>select count {\">\"} 0 && i % 2 === 1</button>\n      <button onClick={() => startOperation(3, ([i]) => i % 2 === 1)}>select count = 3 && i % 2 === 1</button>\n      {new Array<unknown>(10).fill(1).map((_, i) => (\n        <button\n          key={i}\n          style={{ backgroundColor: isSelected([i]) ? 'green' : undefined, width: '50px', height: '50px' }}\n          onClick={() => addSelection([i])}\n        >\n          {i}\n        </button>\n      ))}\n      {message}\n    </div>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"selected.story",name:"",Component:()=>{const{isSelected:e,addSelection:n}=zi({maxCount:3});return t.createElement("div",null,new Array(10).fill(1).map(((r,i)=>t.createElement("button",{key:i,style:{backgroundColor:e([i])?"green":void 0,width:"50px",height:"50px"},onClick:()=>n([[i]])},i))))},code:"() => {\n  const { isSelected, addSelection } = useSelected({ maxCount: 3 })\n\n  return (\n    <div>\n      {new Array<unknown>(10).fill(1).map((_, i) => (\n        <button\n          key={i}\n          style={{ backgroundColor: isSelected([i]) ? 'green' : undefined, width: '50px', height: '50px' }}\n          onClick={() => addSelection([[i]])}\n        >\n          {i}\n        </button>\n      ))}\n    </div>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"undo-redo.story",name:"",Component:()=>{const{state:e,setState:n,undo:r,redo:i}=ze(Xh);return Pt((e=>"KeyZ"===e.code&&!e.shiftKey&&e.metaKey),r),Pt((e=>"KeyZ"===e.code&&e.shiftKey&&e.metaKey),i),t.createElement("button",{onClick:()=>n((e=>{e.count++})),style:{width:"200px",height:"100px"}},e.count)},code:"() => {\n  const { state, setState, undo, redo } = useUndoRedo(initialState)\n  useKey((k) => k.code === 'KeyZ' && !k.shiftKey && k.metaKey, undo)\n  useKey((k) => k.code === 'KeyZ' && k.shiftKey && k.metaKey, redo)\n  return (\n    <button\n      onClick={() => setState((draft) => { draft.count++ })}\n      style={{ width: '200px', height: '100px' }}\n    >\n      {state.count}\n    </button>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"wheel-scroll.story",name:"",Component:()=>{const{ref:e,x:n,y:r}=je(250,250);return t.createElement("div",{style:{width:"300px",height:"300px",overflow:"hidden",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid green"},ref:e},t.createElement("div",{style:{width:"800px",height:"800px",position:"absolute",transform:`translate(${n}px, ${r}px)`,background:"radial-gradient(50% 50% at 50% 50%, red 0%, white 100%)"}}))},code:"() => {\n  const { ref, x, y } = useWheelScroll<HTMLDivElement>(250, 250)\n  return (\n    <div\n      style={{\n        width: '300px',\n        height: '300px',\n        overflow: 'hidden',\n        position: 'absolute',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        border: '1px solid green',\n      }}\n      ref={ref}\n    >\n      <div\n        style={{\n          width: '800px',\n          height: '800px',\n          position: 'absolute',\n          transform: `translate(${x}px, ${y}px)`,\n          background: 'radial-gradient(50% 50% at 50% 50%, red 0%, white 100%)',\n        }}\n      ></div>\n    </div>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"wheel-zoom.story",name:"",Component:()=>{const{ref:e,scale:n}=$e();return t.createElement("div",{style:{width:"300px",height:"300px",overflow:"hidden",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid green"},ref:e},t.createElement("div",{style:{width:"800px",height:"800px",position:"absolute",transform:`scale(${n})`,background:"radial-gradient(50% 50% at 50% 50%, red 0%, white 100%)"}}))},code:"() => {\n  const { ref, scale } = useWheelZoom<HTMLDivElement>()\n  return (\n    <div\n      style={{\n        width: '300px',\n        height: '300px',\n        overflow: 'hidden',\n        position: 'absolute',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        border: '1px solid green',\n      }}\n      ref={ref}\n    >\n      <div\n        style={{\n          width: '800px',\n          height: '800px',\n          position: 'absolute',\n          transform: `scale(${scale})`,\n          background: 'radial-gradient(50% 50% at 50% 50%, red 0%, white 100%)',\n        }}\n      ></div>\n    </div>\n  )\n}",props:[],componentName:"",parentComponentName:""},{path:"window-size.story",name:"",Component:()=>{const{width:e,height:n}=$i();return t.createElement("div",null,Math.round(e)," ",Math.round(n))},code:"() => {\n  const { width, height } = useWindowSize()\n\n  return (\n    <div>\n      {Math.round(width)} {Math.round(height)}\n    </div>\n  )\n}",props:[],componentName:"",parentComponentName:""}];function Vh(e,t){const n=Wh(e,t);if(!n)return;const r=n.template;return"content"===n.kind?Kh(n.content,t):r}function Yh(e,t){const n=Wh(e,t);if(n)return"template"===n.kind?n.template:n.content}function Wh(e,t){if(!e)return;const[n,...r]=e,i=t.templates[n];if(0===r.length)return{kind:"template",template:i};const o=qh(r,i,t,[]);return o?{kind:"content",template:i,content:o.content,parents:o.parents}:void 0}function qh([e,...t],n,r,i){const o=n.contents[e];if(0===t.length)return{content:o,parents:i};if("snapshot"===o.kind)return qh(t,o.snapshot,r,[...i,o]);if("reference"===o.kind){const e=r.templates.find((e=>e.id===o.id));if(!e)return;return qh(t,e,r,[...i,o])}}function Kh(e,t){if("snapshot"===e.kind)return e.snapshot;if("reference"===e.kind){const n=t.templates.find((t=>t.id===e.id));if(!n)return;return n}return e}function Qh(e,t){return Array.isArray(e)?e.every((e=>Qh(e,t))):(e=function(e,t){if(!t.rotate)return e;return vn(e,{x:t.x+t.width/2,y:t.y+t.height/2},t.rotate)}(e,t),e.x>=t.x&&e.y>=t.y&&e.x<=t.x+t.width&&e.y<=t.y+t.height)}function Zh(e,t,n){const r=14/n;for(let n=e.templates.length-1;n>=0;n--){const i=e.templates[n];if(i.name&&Qh(t,{x:i.x,y:i.y-r,width:r*i.name.length,height:r}))return[n];for(const r of Jh(i,i,e,[],[]))if(Qh(t,r))return[n,...r.path];if(Qh(t,i))return[n]}}function*Jh(e,t,n,r,i){var o,a,s;for(let l=e.contents.length-1;l>=0;l--){const u=e.contents[l],c=[...i,l];let h=t.x+u.x,d=t.y+u.y;if("snapshot"===u.kind){const e=[{rotate:null!=(o=u.rotate)?o:0,x:h+u.snapshot.width/2,y:d+u.snapshot.height/2},...r];yield*Jh(u.snapshot,{x:h,y:d},n,e,c)}const{width:f,height:p}=null!=(a=Kh(u,n))?a:{width:0,height:0};let y={x:h+f/2,y:d+p/2},m=null!=(s=u.rotate)?s:0;for(const e of r)m+=e.rotate,y=vn(y,e,-e.rotate);h=y.x-f/2,d=y.y-p/2,yield{x:h,y:d,rotate:m,width:f,height:p,path:c}}}function ed(e){var n,r;const{styleGuide:i,hovered:o}=e,a=Wh(o,i);if(!a)return null;const s=a.template;if("template"===a.kind)return t.createElement(t.Fragment,null,t.createElement("div",{style:{position:"absolute",boxSizing:"border-box",left:s.x,top:s.y,width:s.width,height:s.height,backgroundColor:"green",opacity:.1}}));const l=a.content,u=Kh(l,i);if(!u)return null;const{width:c,height:h}=u;let d=t.createElement("div",{style:{position:"absolute",boxSizing:"border-box",left:l.x,top:l.y,width:c,height:h,backgroundColor:"green",opacity:.1,transform:`rotate(${null!=(n=l.rotate)?n:0}deg)`}});for(const e of a.parents)"snapshot"===e.kind&&(d=t.createElement("div",{style:{position:"absolute",left:e.x,top:e.y,width:e.snapshot.width,height:e.snapshot.height,transform:`rotate(${null!=(r=e.rotate)?r:0}deg)`}},d));return t.createElement("div",{style:{position:"absolute",left:s.x,top:s.y,width:s.width,height:s.height}},d)}function td(e){const{x:n,y:r,scale:i,styleGuide:o,targetSize:a,onStartSelect:s,selected:l,offset:u,rotate:c}=e;return t.createElement("div",{style:{position:"absolute",boxSizing:"border-box",transform:`translate(${n}px, ${r}px) scale(${i})`,width:a.width,height:a.height}},o.templates.map(((e,n)=>t.createElement(nd,{key:e.id,template:e,styleGuide:o,path:[n],onStartSelect:s,selected:l,offset:u,rotate:c,scale:i,isSelected:Hi(l,[n])}))))}function nd(e){const{template:n,selected:r,offset:i,rotate:o,onStartSelect:a,scale:s}=e;return t.createElement("div",{style:{position:"absolute",boxSizing:"border-box",left:n.x+(e.isSelected?i.x:0),top:n.y+(e.isSelected?i.y:0),width:n.width+(e.isSelected?i.width:0),height:n.height+(e.isSelected?i.height:0),border:1/s+"px solid rgb(160, 160, 160)",backgroundColor:"white"},onMouseDown:e=>{e.stopPropagation(),a(e)}},n.name&&t.createElement("div",{style:{position:"absolute",top:"-14px",lineHeight:"14px",fontSize:"12px",width:14*n.name.length+"px",transform:`scale(${1/s})`,transformOrigin:"left bottom",cursor:"pointer"}},n.name),n.contents.map(((n,a)=>t.createElement(id,{key:a,content:n,styleGuide:e.styleGuide,offset:i,rotate:o,path:[...e.path,a],selected:r}))))}function rd(e){var n,r,i,o,a,s;const{template:l,styleGuide:u,content:c,offset:h,rotate:d}=e;return t.createElement("div",{style:{position:"absolute",boxSizing:"border-box",left:c.x+(e.isSelected&&null!=(n=null==h?void 0:h.x)?n:0),top:c.y+(e.isSelected&&null!=(r=null==h?void 0:h.y)?r:0),width:l.width+(e.isSelected&&null!=(i=null==h?void 0:h.width)?i:0),height:l.height+(e.isSelected&&null!=(o=null==h?void 0:h.height)?o:0),clipPath:"inset(0)",backgroundColor:"white",transform:`rotate(${null!=(s=null!=(a=e.isSelected?d:void 0)?a:c.rotate)?s:0}deg)`}},l.contents.map(((n,r)=>t.createElement(id,{key:r,content:n,styleGuide:u,path:[...e.path,r],offset:h,rotate:d,selected:e.selected}))))}function id(e){const{content:n,offset:r,rotate:i}=e;if(n.hidden)return null;const o=Hi(e.selected,e.path);if("text"===n.kind)return t.createElement(od,{content:n,offset:o?r:void 0,rotate:o?i:void 0});if("image"===n.kind)return t.createElement(ad,{content:n,offset:o?r:void 0,rotate:o?i:void 0});if("color"===n.kind)return t.createElement(sd,{content:n,offset:o?r:void 0,rotate:o?i:void 0});if("reference"===n.kind){const a=e.styleGuide.templates.findIndex((e=>e.id===n.id));if(a>=0)return t.createElement(rd,{template:e.styleGuide.templates[a],styleGuide:e.styleGuide,content:n,path:[a],offset:r,rotate:i,selected:e.selected,isSelected:o})}return"snapshot"===n.kind?t.createElement(rd,{template:n.snapshot,styleGuide:e.styleGuide,content:n,path:e.path,offset:r,rotate:i,selected:e.selected,isSelected:o}):null}function od(e){var n,r,i,o,a;const{content:s,offset:l,rotate:u}=e;return t.createElement("div",{style:{position:"absolute",boxSizing:"border-box",left:s.x+(null!=(n=null==l?void 0:l.x)?n:0),top:s.y+(null!=(r=null==l?void 0:l.y)?r:0),width:s.width+(null!=(i=null==l?void 0:l.width)?i:0),height:s.height+(null!=(o=null==l?void 0:l.height)?o:0),color:s.color,fontSize:s.fontSize,fontFamily:s.fontFamily,transform:`rotate(${null!=(a=null!=u?u:s.rotate)?a:0}deg)`}},s.text)}function ad(e){var n,r,i,o,a;const{content:s,offset:l,rotate:u}=e;return t.createElement("img",{src:s.url,style:{position:"absolute",boxSizing:"border-box",left:s.x+(null!=(n=null==l?void 0:l.x)?n:0),top:s.y+(null!=(r=null==l?void 0:l.y)?r:0),width:s.width+(null!=(i=null==l?void 0:l.width)?i:0),height:s.height+(null!=(o=null==l?void 0:l.height)?o:0),transform:`rotate(${null!=(a=null!=u?u:s.rotate)?a:0}deg)`}})}function sd(e){var n,r,i,o,a;const{content:s,offset:l,rotate:u}=e;return t.createElement("div",{style:{position:"absolute",boxSizing:"border-box",left:s.x+(null!=(n=null==l?void 0:l.x)?n:0),top:s.y+(null!=(r=null==l?void 0:l.y)?r:0),width:s.width+(null!=(i=null==l?void 0:l.width)?i:0),height:s.height+(null!=(o=null==l?void 0:l.height)?o:0),backgroundColor:s.color,transform:`rotate(${null!=(a=null!=u?u:s.rotate)?a:0}deg)`}})}function ld(e){var n,r,i,o;const{styleGuide:a,scale:s,selected:l,offset:u,rotate:c,onStartRotate:h,onStartResize:d}=e,f=Wh(l,a);if(!f)return null;const p=t=>{var n;t.stopPropagation(),null==(n=e.onStartMove)||n.call(e,{x:t.clientX,y:t.clientY})},y=f.template;if("template"===f.kind)return t.createElement(t.Fragment,null,t.createElement("div",{style:{position:"absolute",boxSizing:"border-box",left:y.x+u.x,top:y.y+u.y,width:y.width+u.width,height:y.height+u.height,border:1/s+"px solid green",cursor:"move",pointerEvents:"auto"},onMouseDown:p}),t.createElement("div",{style:{position:"absolute",boxSizing:"border-box",left:y.x+u.x,top:y.y+u.y,width:y.width+u.width,height:y.height+u.height}},t.createElement(lt,{scale:s,onMouseDown:d})),y.name&&t.createElement("div",{style:{position:"absolute",left:y.x+u.x,top:y.y+u.y-14,height:14,fontSize:"12px",width:14*y.name.length,transform:`scale(${1/s})`,transformOrigin:"left bottom",cursor:"move",pointerEvents:"auto"},onMouseDown:p}));const m=f.content,g=Kh(m,a);if(!g)return null;const{width:v,height:_}=g;let b=t.createElement(t.Fragment,null,t.createElement("div",{style:{position:"absolute",boxSizing:"border-box",left:m.x+u.x,top:m.y+u.y,width:v+u.width,height:_+u.height,border:1/s+"px solid green",cursor:"move",pointerEvents:"auto",transform:`rotate(${null!=(n=null!=c?c:m.rotate)?n:0}deg)`},onMouseDown:p}),t.createElement("div",{style:{position:"absolute",boxSizing:"border-box",left:m.x+u.x,top:m.y+u.y,width:v+u.width,height:_+u.height,transform:`rotate(${null!=(r=null!=c?c:m.rotate)?r:0}deg)`}},t.createElement(tt,{scale:s,onMouseDown:e=>{e.stopPropagation(),h(function(e,t){var n,r;let i={x:e.template.x,y:e.template.y};const o=[];for(const t of e.parents)"snapshot"===t.kind&&(i.x+=t.x,i.y+=t.y,o.unshift({rotate:null!=(n=t.rotate)?n:0,x:i.x+t.snapshot.width/2,y:i.y+t.snapshot.height/2}));const{width:a,height:s}=null!=(r=Kh(e.content,t))?r:{width:0,height:0};i.x+=e.content.x+a/2,i.y+=e.content.y+s/2;for(const e of o)i=vn(i,e,-e.rotate);return i}(f,a))}}),t.createElement(lt,{scale:s,onMouseDown:d,rotate:(null!=(i=m.rotate)?i:0)+f.parents.reduce(((e,t)=>{var n;return e+(null!=(n=t.rotate)?n:0)}),0)})));for(const e of f.parents)"snapshot"===e.kind&&(b=t.createElement("div",{style:{position:"absolute",left:e.x,top:e.y,width:e.snapshot.width,height:e.snapshot.height,transform:`rotate(${null!=(o=e.rotate)?o:0}deg)`}},b));return t.createElement("div",{style:{position:"absolute",left:y.x,top:y.y,width:y.width,height:y.height}},b)}const ud="composable-editor-canvas-draft",cd=localStorage.getItem(ud),hd=cd?JSON.parse(cd):{name:"test",templates:[{id:"1",name:"组件",x:0,y:0,width:500,height:300,contents:[{kind:"text",text:"test",fontFamily:"serif",fontSize:50,color:"#ff0000",width:100,height:100,x:10,y:10},{kind:"image",url:"https://interactive-examples.mdn.mozilla.net/media/cc0-images/grapefruit-slice-332-332.jpg",width:100,height:100,x:210,y:10}]},{id:"2",name:"模板",x:600,y:0,width:1100,height:400,contents:[{kind:"color",x:0,y:0,width:1100,height:400,color:"#cccccc"},{kind:"reference",id:"1",x:10,y:10},{kind:"snapshot",rotate:30,snapshot:{id:"1",name:"组件",x:0,y:0,width:500,height:300,contents:[{kind:"text",text:"test",fontFamily:"serif",fontSize:50,color:"#ff0000",width:100,height:100,x:10,y:10},{kind:"image",url:"https://interactive-examples.mdn.mozilla.net/media/cc0-images/grapefruit-slice-332-332.jpg",width:100,height:100,x:210,y:10}]},x:550,y:10}]}]};function dd(){var e;const{state:n,setState:r,undo:i,redo:o,stateIndex:a}=ze(hd);t.useEffect((()=>{a>0&&localStorage.setItem(ud,JSON.stringify(n))}),[n,a]);const s=Math.min(...n.templates.map((e=>e.x))),l=Math.min(...n.templates.map((e=>e.y))),[u]=t.useState({width:Math.max(...n.templates.map((e=>e.x+e.width)))-s,height:Math.max(...n.templates.map((e=>e.y+e.height)))-l}),c={width:window.innerWidth,height:window.innerHeight},{ref:h,scale:d,setScale:f}=$e(),p=d*Math.min((c.width-80)/u.width,(c.height-80)/u.height),y={width:u.width*p+80,height:u.height*p+80},{x:m,y:g,setX:v,setY:_,ref:b}=je((y.width-c.width)/2,(y.height-c.height)/2),x=/Mac|iPod|iPhone|iPad/.test(navigator.platform);Pt((e=>"KeyZ"===e.code&&!e.shiftKey&&(x?e.metaKey:e.ctrlKey)),i),Pt((e=>"KeyZ"===e.code&&e.shiftKey&&(x?e.metaKey:e.ctrlKey)),o);const{zoomIn:E,zoomOut:S}=He(d,f);Pt((e=>"Minus"===e.code&&(x?e.metaKey:e.ctrlKey)),S),Pt((e=>"Equal"===e.code&&(x?e.metaKey:e.ctrlKey)),E);const{selected:[T],setSelected:w}=zi({maxCount:1}),{selected:[A],setSelected:P}=zi({maxCount:1}),O={containerSize:c,targetSize:u,x:m,y:g,scale:p},R=Vh(T,n),C=Wh(T,n),I="content"===(null==C?void 0:C.kind)?C.parents.reduce(((e,t)=>{var n;return e+(null!=(n=t.rotate)?n:0)}),0):void 0,{regionAlignmentX:N,regionAlignmentY:M,changeOffsetByRegionAlignment:k,clearRegionAlignments:D}=wt(6/p),{offset:L,onStart:F,mask:U,startPosition:B}=ke((()=>{D(),0===L.x&&0===L.y&&B?w(Zh(n,fd(B,O),p)):r((e=>{const t=Yh(T,e);t&&(t.x+=L.x,t.y+=L.y)}))}),{scale:p,parentRotate:I,transformOffset:(e,t)=>{if(t&&!t.shiftKey&&"template"===(null==C?void 0:C.kind)){const t=C.template;k(e,t,n.templates.filter((e=>e!==t)))}else D();return e}}),{offset:G,onStart:j,mask:$,center:z}=et((()=>{r((e=>{const t=Wh(T,e);"content"===(null==t?void 0:t.kind)&&(t.content.rotate=null==G?void 0:G.angle)}))}),{transform:e=>fd(e,O),parentRotate:I,transformOffset:(e,t)=>{if(t&&void 0!==e&&!t.shiftKey){const t=45*Math.round(e/45);Math.abs(t-e)<5&&(e=t)}return e}}),{lineAlignmentX:X,lineAlignmentY:H,changeOffsetByLineAlignment:V,clearLineAlignments:Y}=At(6/p),{offset:W,onStart:q,mask:K,startPosition:Q}=mt((()=>{Y(),r((e=>{const t=Vh(T,e),n=Yh(T,e);t&&(t.width+=W.width,t.height+=W.height),n&&(n.x+=W.x,n.y+=W.y)}))}),{centeredScaling:e=>e.shiftKey,keepRatio:e=>{if(e.metaKey&&R)return R.width/R.height},rotate:"content"===(null==C?void 0:C.kind)&&null!=(e=C.content.rotate)?e:0,parentRotate:I,transform:e=>fd(e,O),transformOffset:(e,t,r)=>{if(t&&r&&!t.altKey&&"template"===(null==C?void 0:C.kind)){const t=C.template,i=n.templates.filter((e=>e!==t)).map((e=>[e.x,e.x+e.width])).flat(),o=n.templates.filter((e=>e!==t)).map((e=>[e.y,e.y+e.height])).flat();V(e,r,t,i,o)}else Y();return e}}),{onStartSelect:Z,dragSelectMask:J,dragSelectStartPosition:ee}=vt(((e,t)=>{if(t){const r=function(e,t,n){const r={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),width:Math.abs(t.x-n.x),height:Math.abs(t.y-n.y)};for(let t=0;t<e.templates.length;t++){const n=e.templates[t];if(Qh([{x:n.x,y:n.y},{x:n.x+n.width,y:n.y+n.height}],r))return t}}(n,fd(e,O),fd(t,O));void 0!==r&&w([r])}else w(Zh(n,fd(e,O),p))}),(e=>e.shiftKey)),te={x:L.x+W.x,y:L.y+W.y,width:W.width,height:W.height},ne=B||z||Q||ee;return t.createElement("div",{style:{position:"absolute",inset:"0px",backgroundColor:"#E0DFDE",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},ref:Ot(b,h),onMouseMove:e=>{if(ne)P();else{const t=Zh(n,fd({x:e.clientX,y:e.clientY},O),p);Hi(t,A)||P(t)}},onMouseDown:e=>{Z(e,void 0)}},t.createElement(td,{styleGuide:n,targetSize:u,x:m,y:g,scale:p,onStartSelect:Z,offset:te,rotate:null==G?void 0:G.angle,selected:T}),T&&t.createElement("div",{style:{position:"absolute",transform:`translate(${m}px, ${g}px) scale(${p})`,width:u.width,height:u.height,pointerEvents:"none"}},t.createElement(ld,{styleGuide:n,scale:p,selected:T,onStartMove:F,offset:te,rotate:null==G?void 0:G.angle,onStartRotate:j,onStartResize:q})),A&&t.createElement("div",{style:{position:"absolute",transform:`translate(${m}px, ${g}px) scale(${p})`,width:u.width,height:u.height,pointerEvents:"none"}},t.createElement(ed,{styleGuide:n,hovered:A})),t.createElement(Ge,{value:m,type:"horizontal",containerSize:c.width,contentSize:y.width,onChange:v}),t.createElement(Ge,{value:g,type:"vertical",containerSize:c.height,contentSize:y.height,onChange:_}),t.createElement(Tt,{type:"x",value:null!=N?N:X,transformX:e=>function(e,t){var n,r,i,o,a,s;return(null!=(r=null==(n=null==t?void 0:t.containerSize)?void 0:n.width)?r:0)/2-((null!=(o=null==(i=null==t?void 0:t.targetSize)?void 0:i.width)?o:0)/2-e)*(null!=(a=null==t?void 0:t.scale)?a:1)+(null!=(s=null==t?void 0:t.x)?s:0)}(e,O)}),t.createElement(Tt,{type:"y",value:null!=M?M:H,transformY:e=>function(e,t){var n,r,i,o,a,s;return(null!=(r=null==(n=null==t?void 0:t.containerSize)?void 0:n.height)?r:0)/2-((null!=(o=null==(i=null==t?void 0:t.targetSize)?void 0:i.height)?o:0)/2-e)*(null!=(a=null==t?void 0:t.scale)?a:1)+(null!=(s=null==t?void 0:t.y)?s:0)}(e,O)}),U,$,K,J)}function fd({x:e,y:t},n){var r,i,o,a,s,l,u,c,h,d,f,p;return{x:(null!=(i=null==(r=null==n?void 0:n.targetSize)?void 0:r.width)?i:0)/2-((null!=(a=null==(o=null==n?void 0:n.containerSize)?void 0:o.width)?a:0)/2-e+(null!=(s=null==n?void 0:n.x)?s:0))/(null!=(l=null==n?void 0:n.scale)?l:1),y:(null!=(c=null==(u=null==n?void 0:n.targetSize)?void 0:u.height)?c:0)/2-((null!=(d=null==(h=null==n?void 0:n.containerSize)?void 0:h.height)?d:0)/2-t+(null!=(f=null==n?void 0:n.y)?f:0))/(null!=(p=null==n?void 0:n.scale)?p:1)}}function pd(){const[,e]=A(t),[n,r]=t.useState(0),{onStart:i,offset:o,mask:a}=ke((()=>{r((e=>e+o.x))}));if(!e)return t.createElement("ul",{style:{margin:"20px 50px"}},Hh.map((e=>t.createElement("li",{style:{cursor:"pointer"},key:e.path,onClick:()=>T(location.pathname+"?p="+e.path)},e.name," ",e.path))),t.createElement("li",{style:{cursor:"pointer"},onClick:()=>T(location.pathname+"?p=index")},"combination 1"));const s=e.substring("?p=".length);if("index"===s)return t.createElement(dd,null);for(const e of Hh)if(s===e.path)return t.createElement("div",{style:{display:"flex",padding:"20px",height:`calc(${window.innerHeight}px - 40px)`,overflowY:"auto"}},t.createElement("div",{style:{width:`calc(50% + ${n+o.x}px)`}},t.createElement(yd.Provider,{value:n},t.createElement(e.Component,null))),t.createElement("div",{style:{width:"5px",cursor:"ew-resize",zIndex:1},onMouseDown:e=>i({x:e.clientX,y:e.clientY})}),t.createElement("div",{style:{width:`calc(50% - 5px - ${n+o.x}px)`}},t.createElement(md,{code:e.code})),a);return null}const yd=t.createContext(0);function md(e){const n=t.useRef(null);return t.useEffect((()=>{n.current&&Prism.highlightElement(n.current)}),[e.code,n.current]),t.createElement("pre",{className:"line-numbers"},t.createElement("code",{ref:n,className:"language-tsx"},e.code))}const gd=document.querySelector("#container");gd&&(0,e.s)(gd).render(t.createElement(pd,null))})()})();