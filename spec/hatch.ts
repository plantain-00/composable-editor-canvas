import test from 'ava'
import { HatchGeometries, getHatchByPosition } from '../src'

test('getHatchByPosition', (t) => {
  const lines1: HatchGeometries[] = [
    {
      id: 51,
      lines: [
        [
          {
            "x": 1569.672079185588,
            "y": -967.320126304418
          },
          {
            "x": 1520.426041943872,
            "y": -989.7145918996004
          }
        ],
        [
          {
            "x": 1520.426041943872,
            "y": -989.7145918996004
          },
          {
            "x": 1519.5742562290814,
            "y": -1043.8067238080619
          }
        ],
        [
          {
            "x": 1519.5742562290814,
            "y": -1043.8067238080619
          },
          {
            "x": 1483.0579913825236,
            "y": -1003.8912296364704
          }
        ],
        [
          {
            "x": 1483.0579913825236,
            "y": -1003.8912296364704
          },
          {
            "x": 1431.3501005892483,
            "y": -1019.7965213036176
          }
        ],
        [
          {
            "x": 1431.3501005892483,
            "y": -1019.7965213036176
          },
          {
            "x": 1458.0278450135988,
            "y": -972.7329236326433
          }
        ],
        [
          {
            "x": 1458.0278450135988,
            "y": -972.7329236326433
          },
          {
            "x": 1426.9223967315775,
            "y": -928.4708025754594
          }
        ],
        [
          {
            "x": 1426.9223967315775,
            "y": -928.4708025754594
          },
          {
            "x": 1479.9264143755668,
            "y": -939.2993937535383
          }
        ],
        [
          {
            "x": 1479.9264143755668,
            "y": -939.2993937535383
          },
          {
            "x": 1512.4100808952508,
            "y": -896.0386068588889
          }
        ],
        [
          {
            "x": 1512.4100808952508,
            "y": -896.0386068588889
          },
          {
            "x": 1518.4906209151848,
            "y": -949.7946419281933
          }
        ],
        [
          {
            "x": 1518.4906209151848,
            "y": -949.7946419281933
          },
          {
            "x": 1569.672079185588,
            "y": -967.320126304418
          }
        ]
      ]
    },
    {
      id: 52,
      lines: [
        {
          "type": "ellipse arc",
          "curve": {
            "cx": 1399.8553625758855,
            "cy": -882.9926913475381,
            "rx": 73.20201149711428,
            "ry": 94.15669390830384,
            "angle": 78.38988271340202,
            "startAngle": 0,
            "endAngle": 360
          }
        }
      ]
    }
  ]
  t.snapshot(getHatchByPosition({ x: 1506, y: -1002 }, { x: 4827.926789679547, y: -1002 }, () => lines1))
  t.snapshot(getHatchByPosition({ x: 1400, y: -892 }, { x: 4827.926789679547, y: -892 }, () => lines1))

  const lines2: HatchGeometries[] = [
    {
      id: 57,
      lines: [
        {
          "type": "ray",
          "line": {
            "x": 1405.0831204195404,
            "y": -682.4019248502226,
            "angle": 30,
            "bidirectional": false
          }
        }
      ]
    },
    {
      id: 58,
      lines: [
        [
          {
            "x": 1668.8931412624152,
            "y": -760.0738351475334
          },
          {
            "x": 1890.760695280792,
            "y": -296.37064724912534
          }
        ]
      ]
    },
    {
      id: 56,
      lines: [
        [
          {
            "x": 1786.3035573522566,
            "y": -716.2582768398402
          },
          {
            "x": 1463.486320583276,
            "y": -393.44104007085934
          }
        ]
      ]
    }
  ]
  t.snapshot(getHatchByPosition({ x: 1710, y: -571 }, { x: 2294, y: -571 }, () => lines2))

  const lines3: HatchGeometries[] = [
    {
      id: 57,
      lines: [
        {
          "type": "ray",
          "line": {
            "x": 1405.0831204195404,
            "y": -682.4019248502226,
            "angle": 30,
            "bidirectional": true
          }
        }
      ]
    },
    {
      id: 58,
      lines: [
        [
          {
            "x": 1668.8931412624152,
            "y": -760.0738351475334
          },
          {
            "x": 1890.760695280792,
            "y": -296.37064724912534
          }
        ]
      ]
    },
    {
      id: 56,
      lines: [
        [
          {
            "x": 1786.3035573522566,
            "y": -716.2582768398402
          },
          {
            "x": 1463.486320583276,
            "y": -393.44104007085934
          }
        ]
      ]
    }
  ]
  t.snapshot(getHatchByPosition({ x: 1710, y: -571 }, { x: 2294, y: -571 }, () => lines3))
  t.snapshot(getHatchByPosition({ x: 1411, y: -858 }, { x: 4827.926789679547, y: -858 }, () => lines1))

  const lines4: HatchGeometries[] = [
    {
      id: 59,
      lines: [
        {
          "type": "ellipse arc",
          "curve": {
            "cx": 1370.7273710925747,
            "cy": -1134.5660224346493,
            "rx": 60.335450901039835,
            "ry": 99.30401857424064,
            "angle": -73.99771614853803,
            "startAngle": 0,
            "endAngle": 360
          }
        }
      ]
    },
    {
      id: 60,
      lines: [
        [
          {
            "x": 1374.8399900996874,
            "y": -1268.153510021977
          },
          {
            "x": 1451.983740535535,
            "y": -1242.4830352082136
          }
        ],
        [
          {
            "x": 1451.983740535535,
            "y": -1242.4830352082136
          },
          {
            "x": 1426.6652452755125,
            "y": -1166.3970378154747
          }
        ],
        [
          {
            "x": 1426.6652452755125,
            "y": -1166.3970378154747
          },
          {
            "x": 1349.521494839665,
            "y": -1192.067512629238
          }
        ],
        [
          {
            "x": 1349.521494839665,
            "y": -1192.067512629238
          },
          {
            "x": 1374.8399900996874,
            "y": -1268.153510021977
          }
        ]
      ]
    }
  ]
  t.snapshot(getHatchByPosition({ x: 1400, y: -1217 }, { x: 2000, y: -1217 }, () => lines4))
})
